"use strict";(self.webpackChunkParadiso=self.webpackChunkParadiso||[]).push([[179],{2011:(Vt,We,U)=>{U.d(We,{Dh:()=>Re,GT:()=>Te,cc:()=>tt,hO:()=>nt,on:()=>oe,pX:()=>be,xv:()=>Pe});var C=U(4650),E=U(1039),z=U(5813);Vt=U.hmd(Vt);const J=["ngOnDestroy"],be=(Ee,st,yt,Ye={})=>new Proxy(Ee,{get:(Ae,He)=>yt.runOutsideAngular(()=>{var Dt;if(Ee[He])return!(null===(Dt=Ye?.spy)||void 0===Dt)&&Dt.get&&Ye.spy.get(He,Ee[He]),Ee[He];if(J.indexOf(He)>-1)return()=>{};const Ve=st.toPromise().then(Ke=>{const je=Ke&&Ke[He];return"function"==typeof je?je.bind(Ke):je&&je.then?je.then(xe=>yt.run(()=>xe)):yt.run(()=>je)});return new Proxy(()=>{},{get:(Ke,je)=>Ve[je],apply:(Ke,je,xe)=>Ve.then(Ne=>{var Ue;const ze=Ne&&Ne(...xe);return!(null===(Ue=Ye?.spy)||void 0===Ue)&&Ue.apply&&Ye.spy.apply(He,xe,ze),ze})})})}),Te=(Ee,st)=>{st.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(Ye=>{Object.defineProperty(Ee.prototype,Ye,Object.getOwnPropertyDescriptor(yt.prototype||yt,Ye))})})};class Se{constructor(st){return st}}const Re=new C.OlP("angularfire2.app.options"),Pe=new C.OlP("angularfire2.app.name");function oe(Ee,st,yt){const Ae="object"==typeof yt&&yt||{};Ae.name=Ae.name||"string"==typeof yt&&yt||"[DEFAULT]";const Dt=E.Z.apps.filter(Ve=>Ve&&Ve.name===Ae.name)[0]||st.runOutsideAngular(()=>E.Z.initializeApp(Ee,Ae));try{JSON.stringify(Ee)!==JSON.stringify(Dt.options)&&re("error",`${Dt.name} Firebase App already initialized with different options${Vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Se(Dt)}const re=(Ee,...st)=>{(0,C.X6Q)()&&typeof console<"u"&&console[Ee](...st)},me={provide:Se,useFactory:oe,deps:[Re,C.R0b,[new C.FiY,Pe]]};let nt=(()=>{class Ee{constructor(yt){E.Z.registerVersion("angularfire",z.q4.full,"core"),E.Z.registerVersion("angularfire",z.q4.full,"app-compat"),E.Z.registerVersion("angular",C.q4F.full,yt.toString())}static initializeApp(yt,Ye){return{ngModule:Ee,providers:[{provide:Re,useValue:yt},{provide:Pe,useValue:Ye}]}}}return Ee.\u0275fac=function(yt){return new(yt||Ee)(C.LFG(C.Lbi))},Ee.\u0275mod=C.oAB({type:Ee}),Ee.\u0275inj=C.cJS({providers:[me]}),Ee})();function tt(Ee,st,yt,Ye,Ae){const[,He,Dt]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Ee)||[];if(He)return function Xe(Ee,st){try{return Ee.toString()===st.toString()}catch{return Ee===st}}(Ae,Dt)||(Fe("error",`${st} was already initialized on the ${yt} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:Ae,was:Dt})),He;{const Ve=Ye();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Ve,Ae]),Ve}}const at=!!Vt.hot,Fe=(Ee,...st)=>{(0,C.X6Q)()&&typeof console<"u"&&console[Ee](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Vt,We,U)=>{U.d(We,{q4:()=>ar,iC:()=>Wu,fc:()=>Ga,HU:()=>za,vb:()=>Uh,JM:()=>Ha});var C=U(4650),E=U(5867),z=U(5861),J=U(9681),be=U(2090),Te=U(4859),Se=U(1877),Re=U(8766);const Pe="@firebase/installations",oe="0.5.12",me=`w:${oe}`,nt="FIS_v2",st=new be.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yt(k){return k instanceof be.ZR&&k.code.includes("request-failed")}function Ye({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function Ae(k){return{token:k.token,requestStatus:2,expiresIn:Ne(k.expiresIn),creationTime:Date.now()}}function He(k,V){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,z.Z)(function*(k,V){const fe=(yield V.json()).error;return st.create("request-failed",{requestName:k,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Ve({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function Ke(k,{refreshToken:V}){const W=Ve(k);return W.append("Authorization",function Ue(k){return`${nt} ${k}`}(V)),W}function je(k){return xe.apply(this,arguments)}function xe(){return(xe=(0,z.Z)(function*(k){const V=yield k();return V.status>=500&&V.status<600?k():V})).apply(this,arguments)}function Ne(k){return Number(k.replace("s","000"))}function ze(k,V){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,z.Z)(function*({appConfig:k,heartbeatServiceProvider:V},{fid:W}){const fe=Ye(k),$e=Ve(k),it=V.getImmediate({optional:!0});if(it){const kn=yield it.getHeartbeatsHeader();kn&&$e.append("x-firebase-client",kn)}const Yt={method:"POST",headers:$e,body:JSON.stringify({fid:W,authVersion:nt,appId:k.appId,sdkVersion:me})},bn=yield je(()=>fetch(fe,Yt));if(bn.ok){const kn=yield bn.json();return{fid:kn.fid||W,registrationStatus:2,refreshToken:kn.refreshToken,authToken:Ae(kn.authToken)}}throw yield He("Create Installation",bn)})).apply(this,arguments)}function It(k){return new Promise(V=>{setTimeout(V,k)})}const Dn=/^[cdef][\w-]{21}$/;function Pt(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const W=function An(k){return function en(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return Dn.test(W)?W:""}catch{return""}}function In(k){return`${k.appName}!${k.appId}`}const Bn=new Map;function ut(k,V){const W=In(k);gt(W,V),function Bt(k,V){const W=function Qt(){return!Gt&&"BroadcastChannel"in self&&(Gt=new BroadcastChannel("[Firebase] FID Change"),Gt.onmessage=k=>{gt(k.data.key,k.data.fid)}),Gt}();W&&W.postMessage({key:k,fid:V}),function Gn(){0===Bn.size&&Gt&&(Gt.close(),Gt=null)}()}(W,V)}function gt(k,V){const W=Bn.get(k);if(W)for(const fe of W)fe(V)}let Gt=null;const $n="firebase-installations-store";let Br=null;function jt(){return Br||(Br=(0,Re.X3)("firebase-installations-database",1,{upgrade:(k,V)=>{0===V&&k.createObjectStore($n)}})),Br}function xn(k,V){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,z.Z)(function*(k,V){const W=In(k),$e=(yield jt()).transaction($n,"readwrite"),it=$e.objectStore($n),Rt=yield it.get(W);return yield it.put(V,W),yield $e.done,(!Rt||Rt.fid!==V.fid)&&ut(k,V.fid),V})).apply(this,arguments)}function Wn(k){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,z.Z)(function*(k){const V=In(k),fe=(yield jt()).transaction($n,"readwrite");yield fe.objectStore($n).delete(V),yield fe.done})).apply(this,arguments)}function fr(k,V){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,z.Z)(function*(k,V){const W=In(k),$e=(yield jt()).transaction($n,"readwrite"),it=$e.objectStore($n),Rt=yield it.get(W),Yt=V(Rt);return void 0===Yt?yield it.delete(W):yield it.put(Yt,W),yield $e.done,Yt&&(!Rt||Rt.fid!==Yt.fid)&&ut(k,Yt.fid),Yt})).apply(this,arguments)}function Kn(k){return dt.apply(this,arguments)}function dt(){return(dt=(0,z.Z)(function*(k){let V;const W=yield fr(k.appConfig,fe=>{const $e=we(fe),it=de(k,$e);return V=it.registrationPromise,it.installationEntry});return""===W.fid?{installationEntry:yield V}:{installationEntry:W,registrationPromise:V}})).apply(this,arguments)}function we(k){return gn(k||{fid:Pt(),registrationStatus:0})}function de(k,V){if(0===V.registrationStatus){if(!navigator.onLine)return{installationEntry:V,registrationPromise:Promise.reject(st.create("app-offline"))};const W={fid:V.fid,registrationStatus:1,registrationTime:Date.now()},fe=function qe(k,V){return mt.apply(this,arguments)}(k,W);return{installationEntry:W,registrationPromise:fe}}return 1===V.registrationStatus?{installationEntry:V,registrationPromise:Xt(k)}:{installationEntry:V}}function mt(){return(mt=(0,z.Z)(function*(k,V){try{const W=yield ze(k,V);return xn(k.appConfig,W)}catch(W){throw yt(W)&&409===W.customData.serverCode?yield Wn(k.appConfig):yield xn(k.appConfig,{fid:V.fid,registrationStatus:0}),W}})).apply(this,arguments)}function Xt(k){return kt.apply(this,arguments)}function kt(){return(kt=(0,z.Z)(function*(k){let V=yield Wt(k.appConfig);for(;1===V.registrationStatus;)yield It(100),V=yield Wt(k.appConfig);if(0===V.registrationStatus){const{installationEntry:W,registrationPromise:fe}=yield Kn(k);return fe||W}return V})).apply(this,arguments)}function Wt(k){return fr(k,V=>{if(!V)throw st.create("installation-not-found");return gn(V)})}function gn(k){return function jn(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function cn(k,V){return _r.apply(this,arguments)}function _r(){return(_r=(0,z.Z)(function*({appConfig:k,heartbeatServiceProvider:V},W){const fe=mn(k,W),$e=Ke(k,W),it=V.getImmediate({optional:!0});if(it){const kn=yield it.getHeartbeatsHeader();kn&&$e.append("x-firebase-client",kn)}const Yt={method:"POST",headers:$e,body:JSON.stringify({installation:{sdkVersion:me,appId:k.appId}})},bn=yield je(()=>fetch(fe,Yt));if(bn.ok)return Ae(yield bn.json());throw yield He("Generate Auth Token",bn)})).apply(this,arguments)}function mn(k,{fid:V}){return`${Ye(k)}/${V}/authTokens:generate`}function De(k){return pe.apply(this,arguments)}function pe(){return(pe=(0,z.Z)(function*(k,V=!1){let W;const fe=yield fr(k.appConfig,it=>{if(!$t(it))throw st.create("not-registered");const Rt=it.authToken;if(!V&&Mn(Rt))return it;if(1===Rt.requestStatus)return W=ne(k,V),it;{if(!navigator.onLine)throw st.create("app-offline");const Yt=Ur(it);return W=Qe(k,Yt),Yt}});return W?yield W:fe.authToken})).apply(this,arguments)}function ne(k,V){return te.apply(this,arguments)}function te(){return(te=(0,z.Z)(function*(k,V){let W=yield ae(k.appConfig);for(;1===W.authToken.requestStatus;)yield It(100),W=yield ae(k.appConfig);const fe=W.authToken;return 0===fe.requestStatus?De(k,V):fe})).apply(this,arguments)}function ae(k){return fr(k,V=>{if(!$t(V))throw st.create("not-registered");return function Ge(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(V.authToken)?Object.assign(Object.assign({},V),{authToken:{requestStatus:0}}):V})}function Qe(k,V){return Et.apply(this,arguments)}function Et(){return(Et=(0,z.Z)(function*(k,V){try{const W=yield cn(k,V),fe=Object.assign(Object.assign({},V),{authToken:W});return yield xn(k.appConfig,fe),W}catch(W){if(!yt(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const fe=Object.assign(Object.assign({},V),{authToken:{requestStatus:0}});yield xn(k.appConfig,fe)}else yield Wn(k.appConfig);throw W}})).apply(this,arguments)}function $t(k){return void 0!==k&&2===k.registrationStatus}function Mn(k){return 2===k.requestStatus&&!function Nn(k){const V=Date.now();return V<k.creationTime||k.creationTime+k.expiresIn<V+36e5}(k)}function Ur(k){const V={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:V})}function ve(){return(ve=(0,z.Z)(function*(k){const V=k,{installationEntry:W,registrationPromise:fe}=yield Kn(V);return fe?fe.catch(console.error):De(V).catch(console.error),W.fid})).apply(this,arguments)}function Nt(){return(Nt=(0,z.Z)(function*(k,V=!1){const W=k;return yield un(W),(yield De(W,V)).token})).apply(this,arguments)}function un(k){return bt.apply(this,arguments)}function bt(){return(bt=(0,z.Z)(function*(k){const{registrationPromise:V}=yield Kn(k);V&&(yield V)})).apply(this,arguments)}function Fr(k){return st.create("missing-app-config-values",{valueName:k})}const dn="installations",fi=k=>{const V=k.getProvider("app").getImmediate(),W=function Un(k){if(!k||!k.options)throw Fr("App Configuration");if(!k.name)throw Fr("App Name");const V=["projectId","apiKey","appId"];for(const W of V)if(!k.options[W])throw Fr(W);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(V);return{app:V,appConfig:W,heartbeatServiceProvider:(0,J._getProvider)(V,"heartbeat"),_delete:()=>Promise.resolve()}},eo=k=>{const V=k.getProvider("app").getImmediate(),W=(0,J._getProvider)(V,dn).getImmediate();return{getId:()=>function _e(k){return ve.apply(this,arguments)}(W),getToken:$e=>function ft(k){return Nt.apply(this,arguments)}(W,$e)}};(function _s(){(0,J._registerComponent)(new Te.wA(dn,fi,"PUBLIC")),(0,J._registerComponent)(new Te.wA("installations-internal",eo,"PRIVATE"))})(),(0,J.registerVersion)(Pe,oe),(0,J.registerVersion)(Pe,oe,"esm2017");const Xr="@firebase/remote-config",pi=new be.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ol{constructor(V,W,fe,$e){this.client=V,this.storage=W,this.storageCache=fe,this.logger=$e}isCachedDataFresh(V,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-W,$e=fe<=V;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${V}. Is cache hit: ${$e}.`),$e}fetch(V){var W=this;return(0,z.Z)(function*(){const[fe,$e]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if($e&&W.isCachedDataFresh(V.cacheMaxAgeMillis,fe))return $e;V.eTag=$e&&$e.eTag;const it=yield W.client.fetch(V),Rt=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===it.status&&Rt.push(W.storage.setLastSuccessfulFetchResponse(it)),yield Promise.all(Rt),it})()}}function jo(k=navigator){return k.languages&&k.languages[0]||k.language}class no{constructor(V,W,fe,$e,it,Rt){this.firebaseInstallations=V,this.sdkVersion=W,this.namespace=fe,this.projectId=$e,this.apiKey=it,this.appId=Rt}fetch(V){var W=this;return(0,z.Z)(function*(){var fe,$e,it;const[Rt,Yt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),kn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Jn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":V.eTag||"*"},En={sdk_version:W.sdkVersion,app_instance_id:Rt,app_instance_id_token:Yt,app_id:W.appId,language_code:jo()},hi={method:"POST",headers:Jn,body:JSON.stringify(En)},si=fetch(kn,hi),lu=new Promise((Ia,Xl)=>{V.signal.addEventListener(()=>{const Ku=new Error("The operation was aborted.");Ku.name="AbortError",Xl(Ku)})});let ea;try{yield Promise.race([si,lu]),ea=yield si}catch(Ia){let Xl="fetch-client-network";throw"AbortError"===(null===(fe=Ia)||void 0===fe?void 0:fe.name)&&(Xl="fetch-timeout"),pi.create(Xl,{originalErrorMessage:null===($e=Ia)||void 0===$e?void 0:$e.message})}let Qs=ea.status;const Ka=ea.headers.get("ETag")||void 0;let Sc,Ac;if(200===ea.status){let Ia;try{Ia=yield ea.json()}catch(Xl){throw pi.create("fetch-client-parse",{originalErrorMessage:null===(it=Xl)||void 0===it?void 0:it.message})}Sc=Ia.entries,Ac=Ia.state}if("INSTANCE_STATE_UNSPECIFIED"===Ac?Qs=500:"NO_CHANGE"===Ac?Qs=304:("NO_TEMPLATE"===Ac||"EMPTY_CONFIG"===Ac)&&(Sc={}),304!==Qs&&200!==Qs)throw pi.create("fetch-status",{httpStatus:Qs});return{status:Qs,eTag:Ka,config:Sc}})()}}class Rs{constructor(V,W){this.client=V,this.storage=W}fetch(V){var W=this;return(0,z.Z)(function*(){const fe=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(V,fe)})()}attemptFetch(V,{throttleEndTimeMillis:W,backoffCount:fe}){var $e=this;return(0,z.Z)(function*(){yield function cs(k,V){return new Promise((W,fe)=>{const $e=Math.max(V-Date.now(),0),it=setTimeout(W,$e);k.addEventListener(()=>{clearTimeout(it),fe(pi.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}(V.signal,W);try{const it=yield $e.client.fetch(V);return yield $e.storage.deleteThrottleMetadata(),it}catch(it){if(!function Jc(k){if(!(k instanceof be.ZR&&k.customData))return!1;const V=Number(k.customData.httpStatus);return 429===V||500===V||503===V||504===V}(it))throw it;const Rt={throttleEndTimeMillis:Date.now()+(0,be.$s)(fe),backoffCount:fe+1};return yield $e.storage.setThrottleMetadata(Rt),$e.attemptFetch(V,Rt)}})()}}class Fl{constructor(V,W,fe,$e,it){this.app=V,this._client=W,this._storageCache=fe,this._storage=$e,this._logger=it,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zi(k,V){var W;const fe=k.target.error||void 0;return pi.create(V,{originalErrorMessage:fe&&(null===(W=fe)||void 0===W?void 0:W.message)})}const Ii="app_namespace_store";class ro{constructor(V,W,fe,$e=function ll(){return new Promise((k,V)=>{var W;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=$e=>{V(Zi($e,"storage-open"))},fe.onsuccess=$e=>{k($e.target.result)},fe.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(Ii,{keyPath:"compositeKey"})}}catch(fe){V(pi.create("storage-open",{originalErrorMessage:null===(W=fe)||void 0===W?void 0:W.message}))}})}()){this.appId=V,this.appName=W,this.namespace=fe,this.openDbPromise=$e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(V){return this.set("last_fetch_status",V)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(V){return this.set("last_successful_fetch_timestamp_millis",V)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(V){return this.set("last_successful_fetch_response",V)}getActiveConfig(){return this.get("active_config")}setActiveConfig(V){return this.set("active_config",V)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(V){return this.set("active_config_etag",V)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(V){return this.set("throttle_metadata",V)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(V){var W=this;return(0,z.Z)(function*(){const fe=yield W.openDbPromise;return new Promise(($e,it)=>{var Rt;const bn=fe.transaction([Ii],"readonly").objectStore(Ii),kn=W.createCompositeKey(V);try{const Jn=bn.get(kn);Jn.onerror=En=>{it(Zi(En,"storage-get"))},Jn.onsuccess=En=>{const hi=En.target.result;$e(hi?hi.value:void 0)}}catch(Jn){it(pi.create("storage-get",{originalErrorMessage:null===(Rt=Jn)||void 0===Rt?void 0:Rt.message}))}})})()}set(V,W){var fe=this;return(0,z.Z)(function*(){const $e=yield fe.openDbPromise;return new Promise((it,Rt)=>{var Yt;const kn=$e.transaction([Ii],"readwrite").objectStore(Ii),Jn=fe.createCompositeKey(V);try{const En=kn.put({compositeKey:Jn,value:W});En.onerror=hi=>{Rt(Zi(hi,"storage-set"))},En.onsuccess=()=>{it()}}catch(En){Rt(pi.create("storage-set",{originalErrorMessage:null===(Yt=En)||void 0===Yt?void 0:Yt.message}))}})})()}delete(V){var W=this;return(0,z.Z)(function*(){const fe=yield W.openDbPromise;return new Promise(($e,it)=>{var Rt;const bn=fe.transaction([Ii],"readwrite").objectStore(Ii),kn=W.createCompositeKey(V);try{const Jn=bn.delete(kn);Jn.onerror=En=>{it(Zi(En,"storage-delete"))},Jn.onsuccess=()=>{$e()}}catch(Jn){it(pi.create("storage-delete",{originalErrorMessage:null===(Rt=Jn)||void 0===Rt?void 0:Rt.message}))}})})()}createCompositeKey(V){return[this.appId,this.appName,this.namespace,V].join()}}class ti{constructor(V){this.storage=V}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var V=this;return(0,z.Z)(function*(){const W=V.storage.getLastFetchStatus(),fe=V.storage.getLastSuccessfulFetchTimestampMillis(),$e=V.storage.getActiveConfig(),it=yield W;it&&(V.lastFetchStatus=it);const Rt=yield fe;Rt&&(V.lastSuccessfulFetchTimestampMillis=Rt);const Yt=yield $e;Yt&&(V.activeConfig=Yt)})()}setLastFetchStatus(V){return this.lastFetchStatus=V,this.storage.setLastFetchStatus(V)}setLastSuccessfulFetchTimestampMillis(V){return this.lastSuccessfulFetchTimestampMillis=V,this.storage.setLastSuccessfulFetchTimestampMillis(V)}setActiveConfig(V){return this.activeConfig=V,this.storage.setActiveConfig(V)}}function cl(){return ni.apply(this,arguments)}function ni(){return(ni=(0,z.Z)(function*(){if(!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch{return!1}})).apply(this,arguments)}!function Ho(){(0,J._registerComponent)(new Te.wA("remote-config",function k(V,{instanceIdentifier:W}){const fe=V.getProvider("app").getImmediate(),$e=V.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw pi.create("registration-window");if(!(0,be.hl)())throw pi.create("indexed-db-unavailable");const{projectId:it,apiKey:Rt,appId:Yt}=fe.options;if(!it)throw pi.create("registration-project-id");if(!Rt)throw pi.create("registration-api-key");if(!Yt)throw pi.create("registration-app-id");const bn=new ro(Yt,fe.name,W=W||"firebase"),kn=new ti(bn),Jn=new Se.Yd(Xr);Jn.logLevel=Se.in.ERROR;const En=new no($e,J.SDK_VERSION,W,it,Rt,Yt),hi=new Rs(En,bn),si=new ol(hi,bn,kn,Jn),lu=new Fl(fe,si,kn,bn,Jn);return function xa(k){const V=(0,be.m9)(k);V._initializePromise||(V._initializePromise=V._storageCache.loadFromStorage().then(()=>{V._isInitializationComplete=!0}))}(lu),lu},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(Xr,"0.3.11"),(0,J.registerVersion)(Xr,"0.3.11","esm2017")}();const $i="/firebase-messaging-sw.js",Ti="/firebase-cloud-messaging-push-scope",Ws="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ks="google.c.a.c_id",bo="google.c.a.c_l",Or="google.c.a.ts",xs="google.c.a.e";var us=(()=>{return(k=us||(us={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",us;var k})();function jr(k){const V=new Uint8Array(k);return btoa(String.fromCharCode(...V)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Co(k){const W=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(W),$e=new Uint8Array(fe.length);for(let it=0;it<fe.length;++it)$e[it]=fe.charCodeAt(it);return $e}const Do="fcm_token_details_db",Io="fcm_token_object_Store";function ca(k){return kr.apply(this,arguments)}function kr(){return kr=(0,z.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(it=>it.name).includes(Do))return null;let V=null;return(yield(0,Re.X3)(Do,5,{upgrade:(fe=(0,z.Z)(function*($e,it,Rt,Yt){var bn;if(it<2||!$e.objectStoreNames.contains(Io))return;const kn=Yt.objectStore(Io),Jn=yield kn.index("fcmSenderId").get(k);if(yield kn.clear(),Jn)if(2===it){const En=Jn;if(!En.auth||!En.p256dh||!En.endpoint)return;V={token:En.fcmToken,createTime:null!==(bn=En.createTime)&&void 0!==bn?bn:Date.now(),subscriptionOptions:{auth:En.auth,p256dh:En.p256dh,endpoint:En.endpoint,swScope:En.swScope,vapidKey:"string"==typeof En.vapidKey?En.vapidKey:jr(En.vapidKey)}}}else if(3===it){const En=Jn;V={token:En.fcmToken,createTime:En.createTime,subscriptionOptions:{auth:jr(En.auth),p256dh:jr(En.p256dh),endpoint:En.endpoint,swScope:En.swScope,vapidKey:jr(En.vapidKey)}}}else if(4===it){const En=Jn;V={token:En.fcmToken,createTime:En.createTime,subscriptionOptions:{auth:jr(En.auth),p256dh:jr(En.p256dh),endpoint:En.endpoint,swScope:En.swScope,vapidKey:jr(En.vapidKey)}}}}),function(it,Rt,Yt,bn){return fe.apply(this,arguments)})})).close(),yield(0,Re.Lj)(Do),yield(0,Re.Lj)("fcm_vapid_details_db"),yield(0,Re.Lj)("undefined"),ua(V)?V:null;var fe}),kr.apply(this,arguments)}function ua(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:V}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof V.auth&&V.auth.length>0&&"string"==typeof V.p256dh&&V.p256dh.length>0&&"string"==typeof V.endpoint&&V.endpoint.length>0&&"string"==typeof V.swScope&&V.swScope.length>0&&"string"==typeof V.vapidKey&&V.vapidKey.length>0}const Wr="firebase-messaging-store";let Ps=null;function zo(){return Ps||(Ps=(0,Re.X3)("firebase-messaging-database",1,{upgrade:(k,V)=>{0===V&&k.createObjectStore(Wr)}})),Ps}function Os(k){return L.apply(this,arguments)}function L(){return(L=(0,z.Z)(function*(k){const V=rt(k),fe=yield(yield zo()).transaction(Wr).objectStore(Wr).get(V);if(fe)return fe;{const $e=yield ca(k.appConfig.senderId);if($e)return yield q(k,$e),$e}})).apply(this,arguments)}function q(k,V){return B.apply(this,arguments)}function B(){return(B=(0,z.Z)(function*(k,V){const W=rt(k),$e=(yield zo()).transaction(Wr,"readwrite");return yield $e.objectStore(Wr).put(V,W),yield $e.done,V})).apply(this,arguments)}function Q(k){return Me.apply(this,arguments)}function Me(){return(Me=(0,z.Z)(function*(k){const V=rt(k),fe=(yield zo()).transaction(Wr,"readwrite");yield fe.objectStore(Wr).delete(V),yield fe.done})).apply(this,arguments)}function rt({appConfig:k}){return k.appId}const vt=new be.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xn(k,V){return dr.apply(this,arguments)}function dr(){return(dr=(0,z.Z)(function*(k,V){var W;const fe=yield Qi(k),$e=On(V),it={method:"POST",headers:fe,body:JSON.stringify($e)};let Rt;try{Rt=yield(yield fetch(Hr(k.appConfig),it)).json()}catch(Yt){throw vt.create("token-subscribe-failed",{errorInfo:null===(W=Yt)||void 0===W?void 0:W.toString()})}if(Rt.error)throw vt.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw vt.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function hr(k,V){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,z.Z)(function*(k,V){var W;const fe=yield Qi(k),$e=On(V.subscriptionOptions),it={method:"PATCH",headers:fe,body:JSON.stringify($e)};let Rt;try{Rt=yield(yield fetch(`${Hr(k.appConfig)}/${V.token}`,it)).json()}catch(Yt){throw vt.create("token-update-failed",{errorInfo:null===(W=Yt)||void 0===W?void 0:W.toString()})}if(Rt.error)throw vt.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw vt.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function mi(k,V){return pr.apply(this,arguments)}function pr(){return(pr=(0,z.Z)(function*(k,V){var W;const $e={method:"DELETE",headers:yield Qi(k)};try{const Rt=yield(yield fetch(`${Hr(k.appConfig)}/${V}`,$e)).json();if(Rt.error)throw vt.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(it){throw vt.create("token-unsubscribe-failed",{errorInfo:null===(W=it)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function Hr({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function Qi(k){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,z.Z)(function*({appConfig:k,installations:V}){const W=yield V.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function On({p256dh:k,auth:V,endpoint:W,vapidKey:fe}){const $e={web:{endpoint:W,auth:V,p256dh:k}};return fe!==Ws&&($e.web.applicationPubKey=fe),$e}const zi=6048e5;function ds(k){return vr.apply(this,arguments)}function vr(){return(vr=(0,z.Z)(function*(k){const V=yield pc(k.swRegistration,k.vapidKey),W={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:V.endpoint,auth:jr(V.getKey("auth")),p256dh:jr(V.getKey("p256dh"))},fe=yield Os(k.firebaseDependencies);if(fe){if(vs(fe.subscriptionOptions,W))return Date.now()>=fe.createTime+zi?Gi(k,{token:fe.token,createTime:Date.now(),subscriptionOptions:W}):fe.token;try{yield mi(k.firebaseDependencies,fe.token)}catch($e){console.warn($e)}return Pa(k.firebaseDependencies,W)}return Pa(k.firebaseDependencies,W)})).apply(this,arguments)}function Go(k){return ri.apply(this,arguments)}function ri(){return(ri=(0,z.Z)(function*(k){const V=yield Os(k.firebaseDependencies);V&&(yield mi(k.firebaseDependencies,V.token),yield Q(k.firebaseDependencies));const W=yield k.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Gi(k,V){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,z.Z)(function*(k,V){try{const W=yield hr(k.firebaseDependencies,V),fe=Object.assign(Object.assign({},V),{token:W,createTime:Date.now()});return yield q(k.firebaseDependencies,fe),W}catch(W){throw yield Go(k),W}})).apply(this,arguments)}function Pa(k,V){return dl.apply(this,arguments)}function dl(){return(dl=(0,z.Z)(function*(k,V){const fe={token:yield Xn(k,V),createTime:Date.now(),subscriptionOptions:V};return yield q(k,fe),fe.token})).apply(this,arguments)}function pc(k,V){return io.apply(this,arguments)}function io(){return(io=(0,z.Z)(function*(k,V){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Co(V)})})).apply(this,arguments)}function vs(k,V){return V.vapidKey===k.vapidKey&&V.endpoint===k.endpoint&&V.auth===k.auth&&V.p256dh===k.p256dh}function _i(k){const V={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function so(k,V){if(!V.notification)return;k.notification={};const W=V.notification.title;W&&(k.notification.title=W);const fe=V.notification.body;fe&&(k.notification.body=fe);const $e=V.notification.image;$e&&(k.notification.image=$e)}(V,k),function hl(k,V){!V.data||(k.data=V.data)}(V,k),function qs(k,V){var W,fe,$e,it,Rt;if(!(V.fcmOptions||null!==(W=V.notification)&&void 0!==W&&W.click_action))return;k.fcmOptions={};const Yt=null!==($e=null===(fe=V.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==$e?$e:null===(it=V.notification)||void 0===it?void 0:it.click_action;Yt&&(k.fcmOptions.link=Yt);const bn=null===(Rt=V.fcmOptions)||void 0===Rt?void 0:Rt.analytics_label;bn&&(k.fcmOptions.analyticsLabel=bn)}(V,k),V}function oo(k){return"object"==typeof k&&!!k&&Ks in k}function nu(k,V){const W=[];for(let fe=0;fe<k.length;fe++)W.push(k.charAt(fe)),fe<V.length&&W.push(V.charAt(fe));return W.join("")}function gc(k){return vt.create("missing-app-config-values",{valueName:k})}nu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mc{constructor(V,W,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $e=function ha(k){if(!k||!k.options)throw gc("App Configuration Object");if(!k.name)throw gc("App Name");const V=["projectId","apiKey","appId","messagingSenderId"],{options:W}=k;for(const fe of V)if(!W[fe])throw gc(fe);return{appName:k.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(V);this.firebaseDependencies={app:V,appConfig:$e,installations:W,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function fl(k){return To.apply(this,arguments)}function To(){return(To=(0,z.Z)(function*(k){var V;try{k.swRegistration=yield navigator.serviceWorker.register($i,{scope:Ti}),k.swRegistration.update().catch(()=>{})}catch(W){throw vt.create("failed-service-worker-registration",{browserErrorMessage:null===(V=W)||void 0===V?void 0:V.message})}})).apply(this,arguments)}function Ko(k,V){return ao.apply(this,arguments)}function ao(){return(ao=(0,z.Z)(function*(k,V){if(!V&&!k.swRegistration&&(yield fl(k)),V||!k.swRegistration){if(!(V instanceof ServiceWorkerRegistration))throw vt.create("invalid-sw-registration");k.swRegistration=V}})).apply(this,arguments)}function Ul(k,V){return ks.apply(this,arguments)}function ks(){return(ks=(0,z.Z)(function*(k,V){V?k.vapidKey=V:k.vapidKey||(k.vapidKey=Ws)})).apply(this,arguments)}function fa(){return(fa=(0,z.Z)(function*(k,V){if(!navigator)throw vt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw vt.create("permission-blocked");return yield Ul(k,V?.vapidKey),yield Ko(k,V?.serviceWorkerRegistration),ds(k)})).apply(this,arguments)}function ru(k,V,W){return pa.apply(this,arguments)}function pa(){return(pa=(0,z.Z)(function*(k,V,W){const fe=pl(V);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:W[Ks],message_name:W[bo],message_time:W[Or],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pl(k){switch(k){case us.NOTIFICATION_CLICKED:return"notification_open";case us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Oa(){return(Oa=(0,z.Z)(function*(k,V){const W=V.data;if(!W.isFirebaseMessaging)return;k.onMessageHandler&&W.messageType===us.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(_i(W)):k.onMessageHandler.next(_i(W)));const fe=W.data;oo(fe)&&"1"===fe[xs]&&(yield ru(k,W.messageType,fe))})).apply(this,arguments)}const qo="@firebase/messaging",Wi=k=>{const V=new mc(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Vl(k,V){return Oa.apply(this,arguments)}(V,W)),V},Nr=k=>{const V=k.getProvider("messaging").getImmediate();return{getToken:fe=>function lo(k,V){return fa.apply(this,arguments)}(V,fe)}};function _c(){return ka.apply(this,arguments)}function ka(){return(ka=(0,z.Z)(function*(){try{yield(0,be.eu)()}catch{return!1}return typeof window<"u"&&(0,be.hl)()&&(0,be.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function jl(){(0,J._registerComponent)(new Te.wA("messaging",Wi,"PUBLIC")),(0,J._registerComponent)(new Te.wA("messaging-internal",Nr,"PRIVATE")),(0,J.registerVersion)(qo,"0.9.16"),(0,J.registerVersion)(qo,"0.9.16","esm2017")}();const ga="analytics",di="firebase_id",zl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zo="https://www.googletagmanager.com/gtag/js",Kr=new Se.Yd("@firebase/analytics");function Yo(k){return Promise.all(k.map(V=>V.catch(W=>W)))}function So(k,V){const W=document.createElement("script");W.src=`${Zo}?l=${k}&id=${V}`,W.async=!0,document.head.appendChild(W)}function gl(k,V,W,fe,$e,it){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,z.Z)(function*(k,V,W,fe,$e,it){const Rt=fe[$e];try{if(Rt)yield V[Rt];else{const bn=(yield Yo(W)).find(kn=>kn.measurementId===$e);bn&&(yield V[bn.appId])}}catch(Yt){Kr.error(Yt)}k("config",$e,it)})).apply(this,arguments)}function La(k,V,W,fe,$e){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,z.Z)(function*(k,V,W,fe,$e){try{let it=[];if($e&&$e.send_to){let Rt=$e.send_to;Array.isArray(Rt)||(Rt=[Rt]);const Yt=yield Yo(W);for(const bn of Rt){const kn=Yt.find(En=>En.measurementId===bn),Jn=kn&&V[kn.appId];if(!Jn){it=[];break}it.push(Jn)}}0===it.length&&(it=Object.values(V)),yield Promise.all(it),k("event",fe,$e||{})}catch(it){Kr.error(it)}})).apply(this,arguments)}function _l(){const k=window.document.getElementsByTagName("script");for(const V of Object.values(k))if(V.src&&V.src.includes(Zo))return V;return null}const ki=new be.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Kl=new class Wl{constructor(V={},W=1e3){this.throttleMetadata=V,this.intervalMillis=W}getThrottleMetadata(V){return this.throttleMetadata[V]}setThrottleMetadata(V,W){this.throttleMetadata[V]=W}deleteThrottleMetadata(V){delete this.throttleMetadata[V]}};function Ua(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function iu(k){return qr.apply(this,arguments)}function qr(){return(qr=(0,z.Z)(function*(k){var V;const{appId:W,apiKey:fe}=k,$e={method:"GET",headers:Ua(fe)},it=zl.replace("{app-id}",W),Rt=yield fetch(it,$e);if(200!==Rt.status&&304!==Rt.status){let Yt="";try{const bn=yield Rt.json();null!==(V=bn.error)&&void 0!==V&&V.message&&(Yt=bn.error.message)}catch{}throw ki.create("config-fetch-failed",{httpStatus:Rt.status,responseMessage:Yt})}return Rt.json()})).apply(this,arguments)}function ho(k){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,z.Z)(function*(k,V=Kl,W){const{appId:fe,apiKey:$e,measurementId:it}=k.options;if(!fe)throw ki.create("no-app-id");if(!$e){if(it)return{measurementId:it,appId:fe};throw ki.create("no-api-key")}const Rt=V.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Yt=new Ni;return setTimeout((0,z.Z)(function*(){Yt.abort()}),void 0!==W?W:6e4),ct({appId:fe,apiKey:$e,measurementId:it},Rt,Yt,V)})).apply(this,arguments)}function ct(k,V,W){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,z.Z)(function*(k,{throttleEndTimeMillis:V,backoffCount:W},fe,$e=Kl){var it,Rt;const{appId:Yt,measurementId:bn}=k;try{yield hs(fe,V)}catch(kn){if(bn)return Kr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bn} provided in the "measurementId" field in the local Firebase config. [${null===(it=kn)||void 0===it?void 0:it.message}]`),{appId:Yt,measurementId:bn};throw kn}try{const kn=yield iu(k);return $e.deleteThrottleMetadata(Yt),kn}catch(kn){const Jn=kn;if(!X(Jn)){if($e.deleteThrottleMetadata(Yt),bn)return Kr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bn} provided in the "measurementId" field in the local Firebase config. [${Jn?.message}]`),{appId:Yt,measurementId:bn};throw kn}const En=503===Number(null===(Rt=Jn?.customData)||void 0===Rt?void 0:Rt.httpStatus)?(0,be.$s)(W,$e.intervalMillis,30):(0,be.$s)(W,$e.intervalMillis),hi={throttleEndTimeMillis:Date.now()+En,backoffCount:W+1};return $e.setThrottleMetadata(Yt,hi),Kr.debug(`Calling attemptFetch again in ${En} millis`),ct(k,hi,fe,$e)}})).apply(this,arguments)}function hs(k,V){return new Promise((W,fe)=>{const $e=Math.max(V-Date.now(),0),it=setTimeout(W,$e);k.addEventListener(()=>{clearTimeout(it),fe(ki.create("fetch-throttle",{throttleEndTimeMillis:V}))})})}function X(k){if(!(k instanceof be.ZR&&k.customData))return!1;const V=Number(k.customData.httpStatus);return 429===V||500===V||503===V||504===V}class Ni{constructor(){this.listeners=[]}addEventListener(V){this.listeners.push(V)}abort(){this.listeners.forEach(V=>V())}}let yl,Ao;function ja(){return(ja=(0,z.Z)(function*(k,V,W,fe,$e){if($e&&$e.global)k("event",W,fe);else{const it=yield V;k("event",W,Object.assign(Object.assign({},fe),{send_to:it}))}})).apply(this,arguments)}function vc(k){Ao=k}function Ec(k){yl=k}function su(){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,z.Z)(function*(){var k;if(!(0,be.hl)())return Kr.warn(ki.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,be.eu)()}catch(V){return Kr.warn(ki.create("indexeddb-unavailable",{errorInfo:null===(k=V)||void 0===k?void 0:k.toString()}).message),!1}return!0})).apply(this,arguments)}function Jo(){return(Jo=(0,z.Z)(function*(k,V,W,fe,$e,it,Rt){var Yt;const bn=ho(k);bn.then(si=>{W[si.measurementId]=si.appId,k.options.measurementId&&si.measurementId!==k.options.measurementId&&Kr.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(si=>Kr.error(si)),V.push(bn);const kn=su().then(si=>{if(si)return fe.getId()}),[Jn,En]=yield Promise.all([bn,kn]);_l()||So(it,Jn.measurementId),Ao&&($e("consent","default",Ao),vc(void 0)),$e("js",new Date);const hi=null!==(Yt=Rt?.config)&&void 0!==Yt?Yt:{};return hi.origin="firebase",hi.update=!0,null!=En&&(hi[di]=En),$e("config",Jn.measurementId,hi),yl&&($e("set",yl),Ec(void 0)),Jn.measurementId})).apply(this,arguments)}class Ji{constructor(V){this.app=V}_delete(){return delete Si[this.app.options.appId],Promise.resolve()}}let Si={},fo=[];const wa={};let Hu,Ls,ba="dataLayer",Er=!1;function El(k,V,W){!function wc(){const k=[];if((0,be.ru)()&&k.push("This is a browser extension environment."),(0,be.zI)()||k.push("Cookies are not available."),k.length>0){const V=k.map((fe,$e)=>`(${$e+1}) ${fe}`).join(" "),W=ki.create("invalid-analytics-context",{errorInfo:V});Kr.warn(W.message)}}();const fe=k.options.appId;if(!fe)throw ki.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw ki.create("no-api-key");Kr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Si[fe])throw ki.create("already-exists",{id:fe});if(!Er){!function or(k){let V=[];Array.isArray(window[k])?V=window[k]:window[k]=V}(ba);const{wrappedGtag:it,gtagCore:Rt}=function ma(k,V,W,fe,$e){let it=function(...Rt){window[fe].push(arguments)};return window[$e]&&"function"==typeof window[$e]&&(it=window[$e]),window[$e]=function ml(k,V,W,fe){function it(){return(it=(0,z.Z)(function*(Rt,Yt,bn){try{"event"===Rt?yield La(k,V,W,Yt,bn):"config"===Rt?yield gl(k,V,W,fe,Yt,bn):"consent"===Rt?k("consent","update",bn):k("set",Yt)}catch(kn){Kr.error(kn)}})).apply(this,arguments)}return function $e(Rt,Yt,bn){return it.apply(this,arguments)}}(it,k,V,W),{gtagCore:it,wrappedGtag:window[$e]}}(Si,fo,wa,ba,"gtag");Ls=it,Hu=Rt,Er=!0}return Si[fe]=function Ea(k,V,W,fe,$e,it,Rt){return Jo.apply(this,arguments)}(k,fo,wa,V,Hu,ba,W),new Ji(k)}function zu(){return ou.apply(this,arguments)}function ou(){return(ou=(0,z.Z)(function*(){if((0,be.ru)()||!(0,be.zI)()||!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch{return!1}})).apply(this,arguments)}const Ql="@firebase/analytics",D="0.8.0";!function I(){(0,J._registerComponent)(new Te.wA(ga,(V,{options:W})=>El(V.getProvider("app").getImmediate(),V.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,J._registerComponent)(new Te.wA("analytics-internal",function k(V){try{const W=V.getProvider(ga).getImmediate();return{logEvent:(fe,$e,it)=>function Ys(k,V,W,fe){k=(0,be.m9)(k),function Va(k,V,W,fe,$e){return ja.apply(this,arguments)}(Ls,Si[k.app.options.appId],V,W,fe).catch($e=>Kr.error($e))}(W,fe,$e,it)}}catch(W){throw ki.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,J.registerVersion)(Ql,D),(0,J.registerVersion)(Ql,D,"esm2017")}();var w=U(4408),F=U(7565);const ue=new class K extends F.v{}(class P extends w.o{constructor(V,W){super(V,W),this.scheduler=V,this.work=W}schedule(V,W=0){return W>0?super.schedule(V,W):(this.delay=W,this.state=V,this.scheduler.flush(this),this)}execute(V,W){return W>0||this.closed?super.execute(V,W):this._execute(V,W)}requestAsyncId(V,W,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId(V,W,fe):V.flush(this)}});var ht=U(4986),zt=U(8505),Vn=U(5363),Zt=U(9468);const ar=new C.GfV("7.4.1"),Lr="__angularfire_symbol__analyticsIsSupportedValue",es="__angularfire_symbol__analyticsIsSupported",Fs="__angularfire_symbol__remoteConfigIsSupportedValue",ts="__angularfire_symbol__remoteConfigIsSupported",Mo="__angularfire_symbol__messagingIsSupportedValue",Ro="__angularfire_symbol__messagingIsSupported";function Ha(k,V,W){if(V){if(1===V.length)return V[0];const it=V.filter(Rt=>Rt.app===W);if(1===it.length)return it[0]}return W.container.getProvider(k).getImmediate({optional:!0})}globalThis[es]||(globalThis[es]=zu().then(k=>globalThis[Lr]=k).catch(()=>globalThis[Lr]=!1)),globalThis[Ro]||(globalThis[Ro]=_c().then(k=>globalThis[Mo]=k).catch(()=>globalThis[Mo]=!1)),globalThis[ts]||(globalThis[ts]=cl().then(k=>globalThis[Fs]=k).catch(()=>globalThis[Fs]=!1));const Uh=(k,V)=>{const W=V?[V]:(0,E.C6)(),fe=[];return W.forEach($e=>{$e.container.getProvider(k).instances.forEach(Rt=>{fe.includes(Rt)||fe.push(Rt)})}),fe};function Es(){}class $a{constructor(V,W=ue){this.zone=V,this.delegate=W}now(){return this.delegate.now()}schedule(V,W,fe){const $e=this.zone;return this.delegate.schedule(function(Rt){$e.runGuarded(()=>{V.apply(this,[Rt])})},W,fe)}}class Da{constructor(V){this.zone=V,this.task=null}call(V,W){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),W.pipe((0,zt.b)({next:fe,complete:fe,error:fe})).subscribe(V).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let za=(()=>{class k{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new $a(Zone.current)),this.insideAngular=W.run(()=>new $a(Zone.current,ht.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(W){return new(W||k)(C.LFG(C.R0b))},k.\u0275prov=C.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function xo(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function Ga(k){return k.pipe((0,Vn.Q)(xo().outsideAngular))}function Wu(k){return xo(),function wi(k){return function(W){return(W=W.lift(new Da(k.ngZone))).pipe((0,Zt.R)(k.outsideAngular),(0,Vn.Q)(k.insideAngular))}}(xo())(k)}},6457:(Vt,We,U)=>{U.d(We,{$:()=>Hr,A:()=>re,B:()=>tt,G:()=>eo,H:()=>ci,J:()=>Rs,L:()=>Mn,M:()=>ni,N:()=>Bl,P:()=>ht,Q:()=>Ks,R:()=>Zr,T:()=>bo,U:()=>Ws,V:()=>us,W:()=>jr,X:()=>ca,Y:()=>Mt,Z:()=>Xn,_:()=>hr,a:()=>Ba,a0:()=>ds,a1:()=>Go,a2:()=>Gi,a3:()=>Pa,a4:()=>pc,a5:()=>vs,a6:()=>so,a7:()=>hl,a8:()=>oo,a9:()=>nu,aA:()=>si,aB:()=>bn,aC:()=>Ga,aD:()=>ns,aE:()=>lr,aI:()=>Ua,aL:()=>xs,aa:()=>fl,ab:()=>Ko,ac:()=>Ul,af:()=>ru,ag:()=>pl,ah:()=>Vl,ak:()=>Wr,al:()=>$l,an:()=>Zo,ao:()=>Ns,ap:()=>ye,aq:()=>je,ar:()=>ke,as:()=>un,at:()=>yt,au:()=>zh,av:()=>Ka,aw:()=>Ye,ax:()=>Ve,ay:()=>Ne,az:()=>Nn,b:()=>ki,c:()=>Mo,d:()=>op,e:()=>Cc,f:()=>wi,g:()=>fe,h:()=>k,i:()=>Ei,j:()=>Rt,k:()=>hn,l:()=>D,m:()=>Jl,o:()=>Re,r:()=>w,s:()=>bc,u:()=>ue});var C=U(5861),E=U(2090),z=U(9681),J=U(655),be=U(1877),Te=U(4859);const Re={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},re={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const tt=function me(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new E.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new be.Yd("@firebase/auth");function st(T,...p){Ee.logLevel<=be.in.ERROR&&Ee.error(`Auth (${z.SDK_VERSION}): ${T}`,...p)}function yt(T,...p){throw Dt(T,...p)}function Ye(T,...p){return Dt(T,...p)}function Ae(T,p,_){const M=Object.assign(Object.assign({},Xe()),{[p]:_});return new E.LL("auth","Firebase",M).create(p,{appName:T.name})}function He(T,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&yt(T,"argument-error"),Ae(T,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dt(T,...p){if("string"!=typeof T){const _=p[0],M=[...p.slice(1)];return M[0]&&(M[0].appName=T.name),T._errorFactory.create(_,...M)}return at.create(T,...p)}function Ve(T,p,..._){if(!T)throw Dt(p,..._)}function Ke(T){const p="INTERNAL ASSERTION FAILED: "+T;throw st(p),new Error(p)}function je(T,p){T||Ke(p)}const xe=new Map;function Ne(T){je(T instanceof Function,"Expected a class definition");let p=xe.get(T);return p?(je(p instanceof T,"Instance stored in cache mismatched with class"),p):(p=new T,xe.set(T,p),p)}function Tt(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function It(){return"http:"===en()||"https:"===en()}function en(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Pt{constructor(p,_){this.shortDelay=p,this.longDelay=_,je(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,E.uI)()||(0,E.b$)()}get(){return function Dn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(It()||(0,E.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function An(T,p){je(T.emulator,"Emulator should always be set here");const{url:_}=T.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class In{static initialize(p,_,M){this.fetchImpl=p,_&&(this.headersImpl=_),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ut=new Pt(3e4,6e4);function Lt(T,p){return T.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:T.tenantId}):p}function le(T,p,_,M){return gt.apply(this,arguments)}function gt(){return(gt=(0,C.Z)(function*(T,p,_,M,G={}){return Bt(T,G,(0,C.Z)(function*(){let ie={},Ze={};M&&("GET"===p?Ze=M:ie={body:JSON.stringify(M)});const St=(0,E.xO)(Object.assign({key:T.config.apiKey},Ze)).slice(1),rn=yield T._getAdditionalHeaders();return rn["Content-Type"]="application/json",T.languageCode&&(rn["X-Firebase-Locale"]=T.languageCode),In.fetch()(ir(T,T.config.apiHost,_,St),Object.assign({method:p,headers:rn,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Bt(T,p,_){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,C.Z)(function*(T,p,_){T._canInitEmulator=!1;const M=Object.assign(Object.assign({},Bn),p);try{const G=new sr(T),ie=yield Promise.race([_(),G.promise]);G.clearNetworkTimeout();const Ze=yield ie.json();if("needConfirmation"in Ze)throw $n(T,"account-exists-with-different-credential",Ze);if(ie.ok&&!("errorMessage"in Ze))return Ze;{const St=ie.ok?Ze.errorMessage:Ze.error.message,[rn,_n]=St.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rn)throw $n(T,"credential-already-in-use",Ze);if("EMAIL_EXISTS"===rn)throw $n(T,"email-already-in-use",Ze);if("USER_DISABLED"===rn)throw $n(T,"user-disabled",Ze);const zn=M[rn]||rn.toLowerCase().replace(/[_\s]+/g,"-");if(_n)throw Ae(T,zn,_n);yt(T,zn)}}catch(G){if(G instanceof E.ZR)throw G;yt(T,"network-request-failed")}})).apply(this,arguments)}function Qt(T,p,_,M){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,C.Z)(function*(T,p,_,M,G={}){const ie=yield le(T,p,_,M,G);return"mfaPendingCredential"in ie&&yt(T,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function ir(T,p,_,M){const G=`${p}${_}?${M}`;return T.config.emulator?An(T.config,G):`${T.config.apiScheme}://${G}`}class sr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,M)=>{this.timer=setTimeout(()=>M(Ye(this.auth,"network-request-failed")),ut.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(T,p,_){const M={appName:T.name};_.email&&(M.email=_.email),_.phoneNumber&&(M.phoneNumber=_.phoneNumber);const G=Ye(T,p,M);return G.customData._tokenResponse=_,G}function jt(){return(jt=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function xn(T,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wn(T,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function fr(T){if(T)try{const p=new Date(Number(T));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function dt(){return(dt=(0,C.Z)(function*(T,p=!1){const _=(0,E.m9)(T),M=yield _.getIdToken(p),G=de(M);Ve(G&&G.exp&&G.auth_time&&G.iat,_.auth,"internal-error");const ie="object"==typeof G.firebase?G.firebase:void 0,Ze=ie?.sign_in_provider;return{claims:G,token:M,authTime:fr(we(G.auth_time)),issuedAtTime:fr(we(G.iat)),expirationTime:fr(we(G.exp)),signInProvider:Ze||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function we(T){return 1e3*Number(T)}function de(T){var p;const[_,M,G]=T.split(".");if(void 0===_||void 0===M||void 0===G)return st("JWT malformed, contained fewer than 3 sections"),null;try{const ie=(0,E.tV)(M);return ie?JSON.parse(ie):(st("Failed to decode base64 JWT payload"),null)}catch(ie){return st("Caught error parsing JWT payload as JSON",null===(p=ie)||void 0===p?void 0:p.toString()),null}}function mt(T,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(T,p,_=!1){if(_)return p;try{return yield p}catch(M){throw M instanceof E.ZR&&kt(M)&&T.auth.currentUser===T&&(yield T.auth.signOut()),M}})).apply(this,arguments)}function kt({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const G=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const M=this.getInterval(p);this.timerId=setTimeout((0,C.Z)(function*(){yield _.iteration()}),M)}iteration(){var p=this;return(0,C.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(M){return void("auth/network-request-failed"===(null===(_=M)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class gn{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jn(T){return cn.apply(this,arguments)}function cn(){return(cn=(0,C.Z)(function*(T){var p;const _=T.auth,M=yield T.getIdToken(),G=yield mt(T,Wn(_,{idToken:M}));Ve(G?.users.length,_,"internal-error");const ie=G.users[0];T._notifyReloadListener(ie);const Ze=null!==(p=ie.providerUserInfo)&&void 0!==p&&p.length?pe(ie.providerUserInfo):[],St=De(T.providerData,Ze),zn=!!T.isAnonymous&&!(T.email&&ie.passwordHash||St?.length),Yr={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:St,metadata:new gn(ie.createdAt,ie.lastLoginAt),isAnonymous:zn};Object.assign(T,Yr)})).apply(this,arguments)}function mn(){return(mn=(0,C.Z)(function*(T){const p=(0,E.m9)(T);yield jn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function De(T,p){return[...T.filter(M=>!p.some(G=>G.providerId===M.providerId)),...p]}function pe(T){return T.map(p=>{var{providerId:_}=p,M=(0,J._T)(p,["providerId"]);return{providerId:_,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function te(){return(te=(0,C.Z)(function*(T,p){const _=yield Bt(T,{},(0,C.Z)(function*(){const M=(0,E.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:G,apiKey:ie}=T.config,Ze=ir(T,G,"/v1/token",`key=${ie}`),St=yield T._getAdditionalHeaders();return St["Content-Type"]="application/x-www-form-urlencoded",In.fetch()(Ze,{method:"POST",headers:St,body:M})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Ve(p.idToken,"internal-error"),Ve(typeof p.idToken<"u","internal-error"),Ve(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function qe(T){const p=de(T);return Ve(p,"internal-error"),Ve(typeof p.exp<"u","internal-error"),Ve(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var M=this;return(0,C.Z)(function*(){return Ve(!M.accessToken||M.refreshToken,p,"user-token-expired"),_||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(p,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var M=this;return(0,C.Z)(function*(){const{accessToken:G,refreshToken:ie,expiresIn:Ze}=yield function ne(T,p){return te.apply(this,arguments)}(p,_);M.updateTokensAndExpiration(G,ie,Number(Ze))})()}updateTokensAndExpiration(p,_,M){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(p,_){const{refreshToken:M,accessToken:G,expirationTime:ie}=_,Ze=new ae;return M&&(Ve("string"==typeof M,"internal-error",{appName:p}),Ze.refreshToken=M),G&&(Ve("string"==typeof G,"internal-error",{appName:p}),Ze.accessToken=G),ie&&(Ve("number"==typeof ie,"internal-error",{appName:p}),Ze.expirationTime=ie),Ze}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ae,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Qe(T,p){Ve("string"==typeof T||typeof T>"u","internal-error",{appName:p})}class Et{constructor(p){var{uid:_,auth:M,stsTokenManager:G}=p,ie=(0,J._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=M,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new gn(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,C.Z)(function*(){const M=yield mt(_,_.stsTokenManager.getToken(_.auth,p));return Ve(M,_.auth,"internal-error"),_.accessToken!==M&&(_.accessToken=M,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),M})()}getIdTokenResult(p){return function Kn(T){return dt.apply(this,arguments)}(this,p)}reload(){return function _r(T){return mn.apply(this,arguments)}(this)}_assign(p){this!==p&&(Ve(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Et(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var M=this;return(0,C.Z)(function*(){let G=!1;p.idToken&&p.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(p),G=!0),_&&(yield jn(M)),yield M.auth._persistUserIfCurrent(M),G&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var p=this;return(0,C.Z)(function*(){const _=yield p.getIdToken();return yield mt(p,function Br(T,p){return jt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var M,G,ie,Ze,St,rn,_n,zn;const Yr=null!==(M=_.displayName)&&void 0!==M?M:void 0,po=null!==(G=_.email)&&void 0!==G?G:void 0,Za=null!==(ie=_.phoneNumber)&&void 0!==ie?ie:void 0,ws=null!==(Ze=_.photoURL)&&void 0!==Ze?Ze:void 0,Kh=null!==(St=_.tenantId)&&void 0!==St?St:void 0,Bs=null!==(rn=_._redirectEventId)&&void 0!==rn?rn:void 0,Ju=null!==(_n=_.createdAt)&&void 0!==_n?_n:void 0,ed=null!==(zn=_.lastLoginAt)&&void 0!==zn?zn:void 0,{uid:xc,emailVerified:dp,isAnonymous:hp,providerData:td,stsTokenManager:Gd}=_;Ve(xc&&Gd,p,"internal-error");const Xg=ae.fromJSON(this.name,Gd);Ve("string"==typeof xc,p,"internal-error"),Qe(Yr,p.name),Qe(po,p.name),Ve("boolean"==typeof dp,p,"internal-error"),Ve("boolean"==typeof hp,p,"internal-error"),Qe(Za,p.name),Qe(ws,p.name),Qe(Kh,p.name),Qe(Bs,p.name),Qe(Ju,p.name),Qe(ed,p.name);const qh=new Et({uid:xc,auth:p,email:po,emailVerified:dp,displayName:Yr,isAnonymous:hp,photoURL:ws,phoneNumber:Za,tenantId:Kh,stsTokenManager:Xg,createdAt:Ju,lastLoginAt:ed});return td&&Array.isArray(td)&&(qh.providerData=td.map(du=>Object.assign({},du))),Bs&&(qh._redirectEventId=Bs),qh}static _fromIdTokenResponse(p,_,M=!1){return(0,C.Z)(function*(){const G=new ae;G.updateFromServerResponse(_);const ie=new Et({uid:_.localId,auth:p,stsTokenManager:G,isAnonymous:M});return yield jn(ie),ie})()}}const Mn=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(_,M){var G=this;return(0,C.Z)(function*(){G.storage[_]=M})()}_get(_){var M=this;return(0,C.Z)(function*(){const G=M.storage[_];return void 0===G?null:G})()}_remove(_){var M=this;return(0,C.Z)(function*(){delete M.storage[_]})()}_addListener(_,M){}_removeListener(_,M){}}return T.type="NONE",T})();function Nn(T,p,_){return`firebase:${T}:${p}:${_}`}class Ur{constructor(p,_,M){this.persistence=p,this.auth=_,this.userKey=M;const{config:G,name:ie}=this.auth;this.fullUserKey=Nn(this.userKey,G.apiKey,ie),this.fullPersistenceKey=Nn("persistence",G.apiKey,ie),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,C.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Et._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,C.Z)(function*(){if(_.persistence===p)return;const M=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,M?_.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,M="authUser"){return(0,C.Z)(function*(){if(!_.length)return new Ur(Ne(Mn),p,M);const G=(yield Promise.all(_.map(function(){var _n=(0,C.Z)(function*(zn){if(yield zn._isAvailable())return zn});return function(zn){return _n.apply(this,arguments)}}()))).filter(_n=>_n);let ie=G[0]||Ne(Mn);const Ze=Nn(M,p.config.apiKey,p.name);let St=null;for(const _n of _)try{const zn=yield _n._get(Ze);if(zn){const Yr=Et._fromJSON(p,zn);_n!==ie&&(St=Yr),ie=_n;break}}catch{}const rn=G.filter(_n=>_n._shouldAllowMigration);return ie._shouldAllowMigration&&rn.length?(ie=rn[0],St&&(yield ie._set(Ze,St.toJSON())),yield Promise.all(_.map(function(){var _n=(0,C.Z)(function*(zn){if(zn!==ie)try{yield zn._remove(Ze)}catch{}});return function(zn){return _n.apply(this,arguments)}}())),new Ur(ie,p,M)):new Ur(ie,p,M)})()}}function Ge(T){const p=T.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Nt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(_e(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(bt(p))return"Blackberry";if(Kt(p))return"Webos";if(ve(p))return"Safari";if((p.includes("chrome/")||ft(p))&&!p.includes("edge/"))return"Chrome";if(un(p))return"Android";{const M=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function _e(T=(0,E.z$)()){return/firefox\//i.test(T)}function ve(T=(0,E.z$)()){const p=T.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ft(T=(0,E.z$)()){return/crios\//i.test(T)}function Nt(T=(0,E.z$)()){return/iemobile/i.test(T)}function un(T=(0,E.z$)()){return/android/i.test(T)}function bt(T=(0,E.z$)()){return/blackberry/i.test(T)}function Kt(T=(0,E.z$)()){return/webos/i.test(T)}function ke(T=(0,E.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function ye(T=(0,E.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function wt(T=(0,E.z$)()){return ke(T)||un(T)||Kt(T)||bt(T)||/windows phone/i.test(T)||Nt(T)}function Un(T,p=[]){let _;switch(T){case"Browser":_=Ge((0,E.z$)());break;case"Worker":_=`${Ge((0,E.z$)())}-${T}`;break;default:_=T}const M=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${z.SDK_VERSION}/${M}`}class Fr{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const M=ie=>new Promise((Ze,St)=>{try{Ze(p(ie))}catch(rn){St(rn)}});M.onAbort=_,this.queue.push(M);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,C.Z)(function*(){var M;if(_.auth.currentUser===p)return;const G=[];try{for(const ie of _.queue)yield ie(p),ie.onAbort&&G.push(ie.onAbort)}catch(ie){G.reverse();for(const Ze of G)try{Ze()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(M=ie)||void 0===M?void 0:M.message})}})()}}class dn{constructor(p,_,M){this.app=p,this.heartbeatServiceProvider=_,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fi(this),this.idTokenSubscription=new fi(this),this.beforeStateQueue=new Fr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var M=this;return _&&(this._popupRedirectResolver=Ne(_)),this._initializationPromise=this.queue((0,C.Z)(function*(){var G,ie;if(!M._deleted&&(M.persistenceManager=yield Ur.create(M,p),!M._deleted)){if(null!==(G=M._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(_),M.lastNotifiedUid=(null===(ie=M.currentUser)||void 0===ie?void 0:ie.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,C.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,C.Z)(function*(){var M;const G=yield _.assertedPersistence.getCurrentUser();let ie=G,Ze=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const St=null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId,rn=ie?._redirectEventId,_n=yield _.tryRedirectSignIn(p);(!St||St===rn)&&_n?.user&&(ie=_n.user,Ze=!0)}if(!ie)return _.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Ze)try{yield _.beforeStateQueue.runMiddleware(ie)}catch(St){ie=G,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(St))}return ie?_.reloadAndSetCurrentUserOrClear(ie):_.directlySetCurrentUser(null)}return Ve(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ie._redirectEventId?_.directlySetCurrentUser(ie):_.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(p){var _=this;return(0,C.Z)(function*(){let M=null;try{M=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,C.Z)(function*(){var M;try{yield jn(p)}catch(G){if("auth/network-request-failed"!==(null===(M=G)||void 0===M?void 0:M.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ln(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var p=this;return(0,C.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,C.Z)(function*(){const M=p?(0,E.m9)(p):null;return M&&Ve(M.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(M&&M._clone(_))})()}_updateCurrentUser(p,_=!1){var M=this;return(0,C.Z)(function*(){if(!M._deleted)return p&&Ve(M.tenantId===p.tenantId,M,"tenant-id-mismatch"),_||(yield M.beforeStateQueue.runMiddleware(p)),M.queue((0,C.Z)(function*(){yield M.directlySetCurrentUser(p),M.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,C.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,C.Z)(function*(){yield _.assertedPersistence.setPersistence(Ne(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new E.LL("auth","Firebase",p())}onAuthStateChanged(p,_,M){return this.registerStateListener(this.authStateSubscription,p,_,M)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,M){return this.registerStateListener(this.idTokenSubscription,p,_,M)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var M=this;return(0,C.Z)(function*(){const G=yield M.getOrInitRedirectPersistenceManager(_);return null===p?G.removeCurrentUser():G.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,C.Z)(function*(){if(!_.redirectPersistenceManager){const M=p&&Ne(p)||_._popupRedirectResolver;Ve(M,_,"argument-error"),_.redirectPersistenceManager=yield Ur.create(_,[Ne(M._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,C.Z)(function*(){var M,G;return _._isInitialized&&(yield _.queue((0,C.Z)(function*(){}))),(null===(M=_._currentUser)||void 0===M?void 0:M._redirectEventId)===p?_._currentUser:(null===(G=_.redirectUser)||void 0===G?void 0:G._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,C.Z)(function*(){if(p===_.currentUser)return _.queue((0,C.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,M,G){if(this._deleted)return()=>{};const ie="function"==typeof _?_:_.next.bind(_),Ze=this._isInitialized?Promise.resolve():this._initializationPromise;return Ve(Ze,this,"internal-error"),Ze.then(()=>ie(this.currentUser)),"function"==typeof _?p.addObserver(_,M,G):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,C.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,C.Z)(function*(){var _;const M={"X-Client-Version":p.clientVersion};p.app.options.appId&&(M["X-Firebase-gmpid"]=p.app.options.appId);const G=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return G&&(M["X-Firebase-Client"]=G),M})()}}function lr(T){return(0,E.m9)(T)}class fi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,E.ne)(_=>this.observer=_)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eo(T,p,_){const M=lr(T);Ve(M._canInitEmulator,M,"emulator-config-failed"),Ve(/^https?:\/\//.test(p),M,"invalid-emulator-scheme");const G=!!_?.disableWarnings,ie=_s(p),{host:Ze,port:St}=function Xr(T){const p=_s(T),_=/(\/\/)?([^?#/]+)/.exec(T.substr(p.length));if(!_)return{host:"",port:null};const M=_[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(M);if(G){const ie=G[1];return{host:ie,port:qi(M.substr(ie.length+1))}}{const[ie,Ze]=M.split(":");return{host:ie,port:qi(Ze)}}}(p);M.config.emulator={url:`${ie}//${Ze}${null===St?"":`:${St}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:Ze,port:St,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Di(){function T(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function _s(T){const p=T.indexOf(":");return p<0?"":T.substr(0,p+1)}function qi(T){if(!T)return null;const p=Number(T);return isNaN(p)?null:p}class ci{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Ke("not implemented")}_getIdTokenResponse(p){return Ke("not implemented")}_linkToIdToken(p,_){return Ke("not implemented")}_getReauthenticationResolver(p){return Ke("not implemented")}}function Hs(T,p){return pi.apply(this,arguments)}function pi(){return(pi=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:resetPassword",Lt(T,p))})).apply(this,arguments)}function yr(T,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function gi(T,p){return $s.apply(this,arguments)}function $s(){return($s=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:update",Lt(T,p))})).apply(this,arguments)}function ls(){return(ls=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithPassword",Lt(T,p))})).apply(this,arguments)}function to(T,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:sendOobCode",Lt(T,p))})).apply(this,arguments)}function Sr(T,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,C.Z)(function*(T,p){return to(T,p)})).apply(this,arguments)}function ei(T,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,C.Z)(function*(T,p){return to(T,p)})).apply(this,arguments)}function aa(T,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,C.Z)(function*(T,p){return to(T,p)})).apply(this,arguments)}function il(T,p){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,C.Z)(function*(T,p){return to(T,p)})).apply(this,arguments)}function sl(){return(sl=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithEmailLink",Lt(T,p))})).apply(this,arguments)}function ol(){return(ol=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithEmailLink",Lt(T,p))})).apply(this,arguments)}class jo extends ci{constructor(p,_,M,G=null){super("password",M),this._email=p,this._password=_,this._tenantId=G}static _fromEmailAndPassword(p,_){return new jo(p,_,"password")}static _fromEmailAndCode(p,_,M=null){return new jo(p,_,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,C.Z)(function*(){switch(_.signInMethod){case"password":return function zs(T,p){return ls.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Vo(T,p){return sl.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:yt(p,"internal-error")}})()}_linkToIdToken(p,_){var M=this;return(0,C.Z)(function*(){switch(M.signInMethod){case"password":return yr(p,{idToken:_,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function Ll(T,p){return ol.apply(this,arguments)}(p,{idToken:_,email:M._email,oobCode:M._password});default:yt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function no(T,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithIdp",Lt(T,p))})).apply(this,arguments)}class Rs extends ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Rs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):yt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:M,signInMethod:G}=_,ie=(0,J._T)(_,["providerId","signInMethod"]);if(!M||!G)return null;const Ze=new Rs(M,G);return Ze.idToken=ie.idToken||void 0,Ze.accessToken=ie.accessToken||void 0,Ze.secret=ie.secret,Ze.nonce=ie.nonce,Ze.pendingToken=ie.pendingToken||null,Ze}_getIdTokenResponse(p){return no(p,this.buildRequest())}_linkToIdToken(p,_){const M=this.buildRequest();return M.idToken=_,no(p,M)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,no(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,E.xO)(_)}return p}}function eu(T,p){return al.apply(this,arguments)}function al(){return(al=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:sendVerificationCode",Lt(T,p))})).apply(this,arguments)}function Zi(){return(Zi=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithPhoneNumber",Lt(T,p))})).apply(this,arguments)}function Gs(){return(Gs=(0,C.Z)(function*(T,p){const _=yield Qt(T,"POST","/v1/accounts:signInWithPhoneNumber",Lt(T,p));if(_.temporaryProof)throw $n(T,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const la={USER_NOT_FOUND:"user-not-found"};function ro(){return(ro=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithPhoneNumber",Lt(T,Object.assign(Object.assign({},p),{operation:"REAUTH"})),la)})).apply(this,arguments)}class ti extends ci{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new ti({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new ti({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Fl(T,p){return Zi.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Ii(T,p){return Gs.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ll(T,p){return ro.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:M,verificationCode:G}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:M,code:G}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:M,phoneNumber:G,temporaryProof:ie}=p;return M||_||G||ie?new ti({verificationId:_,verificationCode:M,phoneNumber:G,temporaryProof:ie}):null}}class Yi{constructor(p){var _,M,G,ie,Ze,St;const rn=(0,E.zd)((0,E.pd)(p)),_n=null!==(_=rn.apiKey)&&void 0!==_?_:null,zn=null!==(M=rn.oobCode)&&void 0!==M?M:null,Yr=function Ho(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=rn.mode)&&void 0!==G?G:null);Ve(_n&&zn&&Yr,"argument-error"),this.apiKey=_n,this.operation=Yr,this.code=zn,this.continueUrl=null!==(ie=rn.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Ze=rn.languageCode)&&void 0!==Ze?Ze:null,this.tenantId=null!==(St=rn.tenantId)&&void 0!==St?St:null}static parseLink(p){const _=function tu(T){const p=(0,E.zd)((0,E.pd)(T)).link,_=p?(0,E.zd)((0,E.pd)(p)).deep_link_id:null,M=(0,E.zd)((0,E.pd)(T)).deep_link_id;return(M?(0,E.zd)((0,E.pd)(M)).link:null)||M||_||p||T}(p);try{return new Yi(_)}catch{return null}}}let ni=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(_,M){return jo._fromEmailAndPassword(_,M)}static credentialWithLink(_,M){const G=Yi.parseLink(M);return Ve(G,"argument-error"),jo._fromEmailAndCode(_,G.code,G.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class $i{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ti extends $i{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ws extends Ti{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Ve("providerId"in _&&"signInMethod"in _,"argument-error"),Rs._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Ve(p.idToken||p.accessToken,"argument-error"),Rs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ws.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ws.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:M,oauthTokenSecret:G,pendingToken:ie,nonce:Ze,providerId:St}=p;if(!M&&!G&&!_&&!ie||!St)return null;try{return new Ws(St)._credential({idToken:_,accessToken:M,nonce:Ze,pendingToken:ie})}catch{return null}}}let Bl=(()=>{class T extends Ti{constructor(){super("facebook.com")}static credential(_){return Rs._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return T.credential(_.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Ks=(()=>{class T extends Ti{constructor(){super("google.com"),this.addScope("profile")}static credential(_,M){return Rs._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:M})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:M,oauthAccessToken:G}=_;if(!M&&!G)return null;try{return T.credential(M,G)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),bo=(()=>{class T extends Ti{constructor(){super("github.com")}static credential(_){return Rs._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return T.credential(_.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class xs extends ci{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return no(p,this.buildRequest())}_linkToIdToken(p,_){const M=this.buildRequest();return M.idToken=_,no(p,M)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,no(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:M,signInMethod:G,pendingToken:ie}=_;return M&&G&&ie&&M===G?new xs(M,ie):null}static _create(p,_){return new xs(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class us extends $i{constructor(p){Ve(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return us.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return us.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=xs.fromJSON(p);return Ve(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:M}=p;if(!_||!M)return null;try{return xs._create(M,_)}catch{return null}}}let jr=(()=>{class T extends Ti{constructor(){super("twitter.com")}static credential(_,M){return Rs._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:M})}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:M,oauthTokenSecret:G}=_;if(!M||!G)return null;try{return T.credential(M,G)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Co(T,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signUp",Lt(T,p))})).apply(this,arguments)}class ui{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,M,G=!1){return(0,C.Z)(function*(){const ie=yield Et._fromIdTokenResponse(p,M,G),Ze=Io(M);return new ui({user:ie,providerId:Ze,_tokenResponse:M,operationType:_})})()}static _forOperation(p,_,M){return(0,C.Z)(function*(){yield p._updateTokensIfNecessary(M,!0);const G=Io(M);return new ui({user:p,providerId:G,_tokenResponse:M,operationType:_})})()}}function Io(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function ca(T){return kr.apply(this,arguments)}function kr(){return(kr=(0,C.Z)(function*(T){var p;const _=lr(T);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new ui({user:_.currentUser,providerId:null,operationType:"signIn"});const M=yield Co(_,{returnSecureToken:!0}),G=yield ui._fromIdTokenResponse(_,"signIn",M,!0);return yield _._updateCurrentUser(G.user),G})).apply(this,arguments)}class ua extends E.ZR{constructor(p,_,M,G){var ie;super(_.code,_.message),this.operationType=M,this.user=G,Object.setPrototypeOf(this,ua.prototype),this.customData={appName:p.name,tenantId:null!==(ie=p.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:_.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(p,_,M,G){return new ua(p,_,M,G)}}function da(T,p,_,M){return("reauthenticate"===p?_._getReauthenticationResolver(T):_._getIdTokenResponse(T)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?ua._fromErrorAndOperation(T,ie,p,M):ie})}function $o(T){return new Set(T.map(({providerId:p})=>p).filter(p=>!!p))}function Wr(T,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,C.Z)(function*(T,p){const _=(0,E.m9)(T);yield L(!0,_,p);const{providerUserInfo:M}=yield xn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),G=$o(M||[]);return _.providerData=_.providerData.filter(ie=>G.has(ie.providerId)),G.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function zo(T,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,C.Z)(function*(T,p,_=!1){const M=yield mt(T,p._linkToIdToken(T.auth,yield T.getIdToken()),_);return ui._forOperation(T,"link",M)})).apply(this,arguments)}function L(T,p,_){return q.apply(this,arguments)}function q(){return(q=(0,C.Z)(function*(T,p,_){yield jn(p);const G=!1===T?"provider-already-linked":"no-such-provider";Ve($o(p.providerData).has(_)===T,p.auth,G)})).apply(this,arguments)}function B(T,p){return Q.apply(this,arguments)}function Q(){return(Q=(0,C.Z)(function*(T,p,_=!1){var M;const{auth:G}=T,ie="reauthenticate";try{const Ze=yield mt(T,da(G,ie,p,T),_);Ve(Ze.idToken,G,"internal-error");const St=de(Ze.idToken);Ve(St,G,"internal-error");const{sub:rn}=St;return Ve(T.uid===rn,G,"user-mismatch"),ui._forOperation(T,ie,Ze)}catch(Ze){throw"auth/user-not-found"===(null===(M=Ze)||void 0===M?void 0:M.code)&&yt(G,"user-mismatch"),Ze}})).apply(this,arguments)}function Me(T,p){return rt.apply(this,arguments)}function rt(){return(rt=(0,C.Z)(function*(T,p,_=!1){const M="signIn",G=yield da(T,M,p),ie=yield ui._fromIdTokenResponse(T,M,G);return _||(yield T._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function Mt(T,p){return vt.apply(this,arguments)}function vt(){return(vt=(0,C.Z)(function*(T,p){return Me(lr(T),p)})).apply(this,arguments)}function Xn(T,p){return dr.apply(this,arguments)}function dr(){return(dr=(0,C.Z)(function*(T,p){const _=(0,E.m9)(T);return yield L(!1,_,p.providerId),zo(_,p)})).apply(this,arguments)}function hr(T,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,C.Z)(function*(T,p){return B((0,E.m9)(T),p)})).apply(this,arguments)}function mi(T,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,C.Z)(function*(T,p){return Qt(T,"POST","/v1/accounts:signInWithCustomToken",Lt(T,p))})).apply(this,arguments)}function Hr(T,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,C.Z)(function*(T,p){const _=lr(T),M=yield mi(_,{token:p,returnSecureToken:!0}),G=yield ui._fromIdTokenResponse(_,"signIn",M);return yield _._updateCurrentUser(G.user),G})).apply(this,arguments)}class Ct{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?On._fromServerResponse(p,_):yt(p,"internal-error")}}class On extends Ct{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new On(_)}}function zi(T,p,_){var M;Ve((null===(M=_.url)||void 0===M?void 0:M.length)>0,T,"invalid-continue-uri"),Ve(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ve(_.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Ve(_.android.packageName.length>0,T,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function ds(T,p,_){return vr.apply(this,arguments)}function vr(){return(vr=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T),G={requestType:"PASSWORD_RESET",email:p};_&&zi(M,G,_),yield ei(M,G)})).apply(this,arguments)}function Go(T,p,_){return ri.apply(this,arguments)}function ri(){return(ri=(0,C.Z)(function*(T,p,_){yield Hs((0,E.m9)(T),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Gi(T,p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,C.Z)(function*(T,p){yield gi((0,E.m9)(T),{oobCode:p})})).apply(this,arguments)}function Pa(T,p){return dl.apply(this,arguments)}function dl(){return(dl=(0,C.Z)(function*(T,p){const _=(0,E.m9)(T),M=yield Hs(_,{oobCode:p}),G=M.requestType;switch(Ve(G,_,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ve(M.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ve(M.mfaInfo,_,"internal-error");default:Ve(M.email,_,"internal-error")}let ie=null;return M.mfaInfo&&(ie=Ct._fromServerResponse(lr(_),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:ie},operation:G}})).apply(this,arguments)}function pc(T,p){return io.apply(this,arguments)}function io(){return(io=(0,C.Z)(function*(T,p){const{data:_}=yield Pa((0,E.m9)(T),p);return _.email})).apply(this,arguments)}function vs(T,p,_){return _i.apply(this,arguments)}function _i(){return(_i=(0,C.Z)(function*(T,p,_){const M=lr(T),G=yield Co(M,{returnSecureToken:!0,email:p,password:_}),ie=yield ui._fromIdTokenResponse(M,"signIn",G);return yield M._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function so(T,p,_){return Mt((0,E.m9)(T),ni.credential(p,_))}function hl(T,p,_){return qs.apply(this,arguments)}function qs(){return(qs=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T),G={requestType:"EMAIL_SIGNIN",email:p};Ve(_.handleCodeInApp,M,"argument-error"),_&&zi(M,G,_),yield aa(M,G)})).apply(this,arguments)}function oo(T,p){return"EMAIL_SIGNIN"===Yi.parseLink(p)?.operation}function nu(T,p,_){return ha.apply(this,arguments)}function ha(){return(ha=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T),G=ni.credentialWithLink(p,_||Tt());return Ve(G._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Mt(M,G)})).apply(this,arguments)}function gc(T,p){return mc.apply(this,arguments)}function mc(){return(mc=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:createAuthUri",Lt(T,p))})).apply(this,arguments)}function fl(T,p){return To.apply(this,arguments)}function To(){return(To=(0,C.Z)(function*(T,p){const M={identifier:p,continueUri:It()?Tt():"http://localhost"},{signinMethods:G}=yield gc((0,E.m9)(T),M);return G||[]})).apply(this,arguments)}function Ko(T,p){return ao.apply(this,arguments)}function ao(){return(ao=(0,C.Z)(function*(T,p){const _=(0,E.m9)(T),G={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};p&&zi(_.auth,G,p);const{email:ie}=yield Sr(_.auth,G);ie!==T.email&&(yield T.reload())})).apply(this,arguments)}function Ul(T,p,_){return ks.apply(this,arguments)}function ks(){return(ks=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:p};_&&zi(M.auth,ie,_);const{email:Ze}=yield il(M.auth,ie);Ze!==T.email&&(yield T.reload())})).apply(this,arguments)}function lo(T,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,C.Z)(function*(T,p){return le(T,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ru(T,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,C.Z)(function*(T,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const M=(0,E.m9)(T),ie={idToken:yield M.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Ze=yield mt(M,lo(M.auth,ie));M.displayName=Ze.displayName||null,M.photoURL=Ze.photoUrl||null;const St=M.providerData.find(({providerId:rn})=>"password"===rn);St&&(St.displayName=M.displayName,St.photoURL=M.photoURL),yield M._updateTokensIfNecessary(Ze)})).apply(this,arguments)}function pl(T,p){return Oa((0,E.m9)(T),p,null)}function Vl(T,p){return Oa((0,E.m9)(T),null,p)}function Oa(T,p,_){return qo.apply(this,arguments)}function qo(){return(qo=(0,C.Z)(function*(T,p,_){const{auth:M}=T,ie={idToken:yield T.getIdToken(),returnSecureToken:!0};p&&(ie.email=p),_&&(ie.password=_);const Ze=yield mt(T,yr(M,ie));yield T._updateTokensIfNecessary(Ze,!0)})).apply(this,arguments)}class Wi{constructor(p,_,M={}){this.isNewUser=p,this.providerId=_,this.profile=M}}class Nr extends Wi{constructor(p,_,M,G){super(p,_,M),this.username=G}}class jl extends Wi{constructor(p,_){super(p,"facebook.com",_)}}class _c extends Nr{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class ka extends Wi{constructor(p,_){super(p,"google.com",_)}}class Hl extends Nr{constructor(p,_,M){super(p,"twitter.com",_,M)}}function $l(T){const{user:p,_tokenResponse:_}=T;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function $r(T){var p,_;if(!T)return null;const{providerId:M}=T,G=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},ie=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!M&&T?.idToken){const Ze=null===(_=null===(p=de(T.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Ze)return new Wi(ie,"anonymous"!==Ze&&"custom"!==Ze?Ze:null)}if(!M)return null;switch(M){case"facebook.com":return new jl(ie,G);case"github.com":return new _c(ie,G);case"google.com":return new ka(ie,G);case"twitter.com":return new Hl(ie,G,T.screenName||null);case"custom":case"anonymous":return new Wi(ie,null);default:return new Wi(ie,M,G)}}(_)}class uo{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new uo("enroll",p)}static _fromMfaPendingCredential(p){return new uo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,M;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return uo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(M=p.multiFactorSession)&&void 0!==M&&M.idToken)return uo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class zl{constructor(p,_,M){this.session=p,this.hints=_,this.signInResolver=M}static _fromError(p,_){const M=lr(p),G=_.customData._serverResponse,ie=(G.mfaInfo||[]).map(St=>Ct._fromServerResponse(M,St));Ve(G.mfaPendingCredential,M,"internal-error");const Ze=uo._fromMfaPendingCredential(G.mfaPendingCredential);return new zl(Ze,ie,function(){var St=(0,C.Z)(function*(rn){const _n=yield rn._process(M,Ze);delete G.mfaInfo,delete G.mfaPendingCredential;const zn=Object.assign(Object.assign({},G),{idToken:_n.idToken,refreshToken:_n.refreshToken});switch(_.operationType){case"signIn":const Yr=yield ui._fromIdTokenResponse(M,_.operationType,zn);return yield M._updateCurrentUser(Yr.user),Yr;case"reauthenticate":return Ve(_.user,M,"internal-error"),ui._forOperation(_.user,_.operationType,zn);default:yt(M,"internal-error")}});return function(rn){return St.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,C.Z)(function*(){return _.signInResolver(p)})()}}function Zo(T,p){var _;const M=(0,E.m9)(T),G=p;return Ve(p.customData.operationType,M,"argument-error"),Ve(null===(_=G.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,M,"argument-error"),zl._fromError(M,G)}function Kr(T,p){return le(T,"POST","/v2/accounts/mfaEnrollment:start",Lt(T,p))}class or{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(M=>Ct._fromServerResponse(p.auth,M)))})}static _fromUser(p){return new or(p)}getSession(){var p=this;return(0,C.Z)(function*(){return uo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var M=this;return(0,C.Z)(function*(){const G=p,ie=yield M.getSession(),Ze=yield mt(M.user,G._process(M.user.auth,ie,_));return yield M.user._updateTokensIfNecessary(Ze),M.user.reload()})()}unenroll(p){var _=this;return(0,C.Z)(function*(){var M;const G="string"==typeof p?p:p.uid,ie=yield _.user.getIdToken(),Ze=yield mt(_.user,function So(T,p){return le(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(T,p))}(_.user.auth,{idToken:ie,mfaEnrollmentId:G}));_.enrolledFactors=_.enrolledFactors.filter(({uid:St})=>St!==G),yield _.user._updateTokensIfNecessary(Ze);try{yield _.user.reload()}catch(St){if("auth/user-token-expired"!==(null===(M=St)||void 0===M?void 0:M.code))throw St}})()}}const gl=new WeakMap;function Ns(T){const p=(0,E.m9)(T);return gl.has(p)||gl.set(p,or._fromUser(p)),gl.get(p)}const La="__sak";class Gl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(La,"1"),this.storage.removeItem(La),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ki=(()=>{class T extends Gl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,M)=>this.onStorageEvent(_,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ml(){const T=(0,E.z$)();return ve(T)||ke(T)}()&&function qt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=wt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const M of Object.keys(this.listeners)){const G=this.storage.getItem(M),ie=this.localCache[M];G!==ie&&_(M,ie,G)}}onStorageEvent(_,M=!1){if(!_.key)return void this.forAllChangedKeys((St,rn,_n)=>{this.notifyListeners(St,_n)});const G=_.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const St=this.storage.getItem(G);if(_.newValue!==St)null!==_.newValue?this.storage.setItem(G,_.newValue):this.storage.removeItem(G);else if(this.localCache[G]===_.newValue&&!M)return}const ie=()=>{const St=this.storage.getItem(G);!M&&this.localCache[G]===St||this.notifyListeners(G,St)},Ze=this.storage.getItem(G);!function Le(){return(0,E.w1)()&&10===document.documentMode}()||Ze===_.newValue||_.newValue===_.oldValue?ie():setTimeout(ie,10)}notifyListeners(_,M){this.localCache[_]=M;const G=this.listeners[_];if(G)for(const ie of Array.from(G))ie(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,M,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:M,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(M)}_removeListener(_,M){this.listeners[_]&&(this.listeners[_].delete(M),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,M){var G=()=>super._set,ie=this;return(0,C.Z)(function*(){yield G().call(ie,_,M),ie.localCache[_]=JSON.stringify(M)})()}_get(_){var M=()=>super._get,G=this;return(0,C.Z)(function*(){const ie=yield M().call(G,_);return G.localCache[_]=JSON.stringify(ie),ie})()}_remove(_){var M=()=>super._remove,G=this;return(0,C.Z)(function*(){yield M().call(G,_),delete G.localCache[_]})()}}return T.type="LOCAL",T})(),Ba=(()=>{class T extends Gl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,M){}_removeListener(_,M){}}return T.type="SESSION",T})();let Kl=(()=>{class T{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const M=this.receivers.find(ie=>ie.isListeningto(_));if(M)return M;const G=new T(_);return this.receivers.push(G),G}isListeningto(_){return this.eventTarget===_}handleEvent(_){var M=this;return(0,C.Z)(function*(){const G=_,{eventId:ie,eventType:Ze,data:St}=G.data,rn=M.handlersMap[Ze];if(!rn?.size)return;G.ports[0].postMessage({status:"ack",eventId:ie,eventType:Ze});const _n=Array.from(rn).map(function(){var Yr=(0,C.Z)(function*(po){return po(G.origin,St)});return function(po){return Yr.apply(this,arguments)}}()),zn=yield function Wl(T){return Promise.all(T.map(function(){var p=(0,C.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(M){return{fulfilled:!1,reason:M}}});return function(_){return p.apply(this,arguments)}}()))}(_n);G.ports[0].postMessage({status:"done",eventId:ie,eventType:Ze,response:zn})})()}_subscribe(_,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(M)}_unsubscribe(_,M){this.handlersMap[_]&&M&&this.handlersMap[_].delete(M),(!M||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function Ua(T="",p=10){let _="";for(let M=0;M<p;M++)_+=Math.floor(10*Math.random());return T+_}class iu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,M=50){var G=this;return(0,C.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Ze,St;return new Promise((rn,_n)=>{const zn=Ua("",20);ie.port1.start();const Yr=setTimeout(()=>{_n(new Error("unsupported_event"))},M);St={messageChannel:ie,onMessage(po){const Za=po;if(Za.data.eventId===zn)switch(Za.data.status){case"ack":clearTimeout(Yr),Ze=setTimeout(()=>{_n(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ze),rn(Za.data.response);break;default:clearTimeout(Yr),clearTimeout(Ze),_n(new Error("invalid_response"))}}},G.handlers.add(St),ie.port1.addEventListener("message",St.onMessage),G.target.postMessage({eventType:p,eventId:zn,data:_},[ie.port2])}).finally(()=>{St&&G.removeMessageHandler(St)})})()}}function qr(){return window}function Qo(){return typeof qr().WorkerGlobalScope<"u"&&"function"==typeof qr().importScripts}function Jr(){return(Jr=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ni="firebaseLocalStorageDb",Va="firebaseLocalStorage",ja="fbase_key";class zr{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ii(T,p){return T.transaction([Va],p?"readwrite":"readonly").objectStore(Va)}function Xi(){const T=indexedDB.open(Ni,1);return new Promise((p,_)=>{T.addEventListener("error",()=>{_(T.error)}),T.addEventListener("upgradeneeded",()=>{const M=T.result;try{M.createObjectStore(Va,{keyPath:ja})}catch(G){_(G)}}),T.addEventListener("success",(0,C.Z)(function*(){const M=T.result;M.objectStoreNames.contains(Va)?p(M):(M.close(),yield function vi(){const T=indexedDB.deleteDatabase(Ni);return new zr(T).toPromise()}(),p(yield Xi()))}))})}function ya(T,p,_){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,C.Z)(function*(T,p,_){const M=ii(T,!0).put({[ja]:p,value:_});return new zr(M).toPromise()})).apply(this,arguments)}function va(){return(va=(0,C.Z)(function*(T,p){const _=ii(T,!1).get(p),M=yield new zr(_).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Ao(T,p){const _=ii(T,!0).delete(p);return new zr(_).toPromise()}const Ei=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,C.Z)(function*(){return _.db||(_.db=yield Xi()),_.db})()}_withRetries(_){var M=this;return(0,C.Z)(function*(){let G=0;for(;;)try{const ie=yield M._openDb();return yield _(ie)}catch(ie){if(G++>3)throw ie;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,C.Z)(function*(){return Qo()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,C.Z)(function*(){_.receiver=Kl._getInstance(function X(){return Qo()?self:null}()),_.receiver._subscribe("keyChanged",function(){var M=(0,C.Z)(function*(G,ie){return{keyProcessed:(yield _._poll()).includes(ie.key)}});return function(G,ie){return M.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var M=(0,C.Z)(function*(G,ie){return["keyChanged"]});return function(G,ie){return M.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,C.Z)(function*(){var M,G;if(_.activeServiceWorker=yield function ct(){return Jr.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new iu(_.activeServiceWorker);const ie=yield _.sender._send("ping",{},800);!ie||(null===(M=ie[0])||void 0===M?void 0:M.fulfilled)&&(null===(G=ie[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var M=this;return(0,C.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function hs(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:_},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Xi();return yield ya(_,La,"1"),yield Ao(_,La),!0}catch{}return!1})()}_withPendingWrite(_){var M=this;return(0,C.Z)(function*(){M.pendingWrites++;try{yield _()}finally{M.pendingWrites--}})()}_set(_,M){var G=this;return(0,C.Z)(function*(){return G._withPendingWrite((0,C.Z)(function*(){return yield G._withRetries(ie=>ya(ie,_,M)),G.localCache[_]=M,G.notifyServiceWorker(_)}))})()}_get(_){var M=this;return(0,C.Z)(function*(){const G=yield M._withRetries(ie=>function ql(T,p){return va.apply(this,arguments)}(ie,_));return M.localCache[_]=G,G})()}_remove(_){var M=this;return(0,C.Z)(function*(){return M._withPendingWrite((0,C.Z)(function*(){return yield M._withRetries(G=>Ao(G,_)),delete M.localCache[_],M.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,C.Z)(function*(){const M=yield _._withRetries(Ze=>{const St=ii(Ze,!1).getAll();return new zr(St).toPromise()});if(!M)return[];if(0!==_.pendingWrites)return[];const G=[],ie=new Set;for(const{fbase_key:Ze,value:St}of M)ie.add(Ze),JSON.stringify(_.localCache[Ze])!==JSON.stringify(St)&&(_.notifyListeners(Ze,St),G.push(Ze));for(const Ze of Object.keys(_.localCache))_.localCache[Ze]&&!ie.has(Ze)&&(_.notifyListeners(Ze,null),G.push(Ze));return G})()}notifyListeners(_,M){this.localCache[_]=M;const G=this.listeners[_];if(G)for(const ie of Array.from(G))ie(M)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(M)}_removeListener(_,M){this.listeners[_]&&(this.listeners[_].delete(M),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function Ea(T,p){return le(T,"POST","/v2/accounts/mfaSignIn:start",Lt(T,p))}function Si(){return(Si=(0,C.Z)(function*(T){return(yield le(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wa(T){return new Promise((p,_)=>{const M=document.createElement("script");M.setAttribute("src",T),M.onload=p,M.onerror=G=>{const ie=Ye("internal-error");ie.customData=G,_(ie)},M.type="text/javascript",M.charset="UTF-8",function fo(){var T,p;return null!==(p=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==p?p:document}().appendChild(M)})}function ba(T){return`__${T}${Math.floor(1e6*Math.random())}`}const Ls=1e12;class Er{constructor(p){this.auth=p,this.counter=Ls,this._widgets=new Map}render(p,_){const M=this.counter;return this._widgets.set(M,new vl(p,this.auth.name,_||{})),this.counter++,M}reset(p){var _;const M=p||Ls;null===(_=this._widgets.get(M))||void 0===_||_.delete(),this._widgets.delete(M)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Ls))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,C.Z)(function*(){var M;return null===(M=_._widgets.get(p||Ls))||void 0===M||M.execute(),""})()}}class vl{constructor(p,_,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof p?document.getElementById(p):p;Ve(G,"argument-error",{appName:_}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wc(T){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<T;M++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const El=ba("rcb"),$u=new Pt(3e4,6e4);class zu{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=qr().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return Ve(function ou(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(qr().grecaptcha):new Promise((M,G)=>{const ie=qr().setTimeout(()=>{G(Ye(p,"network-request-failed"))},$u.get());qr()[El]=()=>{qr().clearTimeout(ie),delete qr()[El];const St=qr().grecaptcha;if(!St)return void G(Ye(p,"internal-error"));const rn=St.render;St.render=(_n,zn)=>{const Yr=rn(_n,zn);return this.counter++,Yr},this.hostLanguage=_,M(St)},wa(`https://www.google.com/recaptcha/api.js??${(0,E.xO)({onload:El,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ie),G(Ye(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=qr().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zl{load(p){return(0,C.Z)(function*(){return new Er(p)})()}clearedOneInstance(){}}const wl="recaptcha",Yl={theme:"light",type:"image"};class Zr{constructor(p,_=Object.assign({},Yl),M){this.parameters=_,this.type=wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lr(M),this.isInvisible="invisible"===this.parameters.size,Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof p?document.getElementById(p):p;Ve(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zl:new zu,this.validateStartingState()}verify(){var p=this;return(0,C.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),M=p.getAssertedRecaptcha();return M.getResponse(_)||new Promise(ie=>{const Ze=St=>{!St||(p.tokenChangeListeners.delete(Ze),ie(St))};p.tokenChangeListeners.add(Ze),p.isInvisible&&M.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Ve(!this.parameters.sitekey,this.auth,"argument-error"),Ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(M=>M(_)),"function"==typeof p)p(_);else if("string"==typeof p){const M=qr()[p];"function"==typeof M&&M(_)}}}assertNotDestroyed(){Ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,C.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const M=document.createElement("div");_.appendChild(M),_=M}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,C.Z)(function*(){Ve(It()&&!Qo(),p.auth,"internal-error"),yield function bl(){let T=null;return new Promise(p=>{"complete"!==document.readyState?(T=()=>p(),window.addEventListener("load",T)):p()}).catch(p=>{throw T&&window.removeEventListener("load",T),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Ji(T){return Si.apply(this,arguments)}(p.auth);Ve(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ys{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=ti._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function bc(T,p,_){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,C.Z)(function*(T,p,_){const M=lr(T),G=yield F(M,p,(0,E.m9)(_));return new Ys(G,ie=>Mt(M,ie))})).apply(this,arguments)}function D(T,p,_){return I.apply(this,arguments)}function I(){return(I=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T);yield L(!1,M,"phone");const G=yield F(M.auth,p,(0,E.m9)(_));return new Ys(G,ie=>Xn(M,ie))})).apply(this,arguments)}function w(T,p,_){return P.apply(this,arguments)}function P(){return(P=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T),G=yield F(M.auth,p,(0,E.m9)(_));return new Ys(G,ie=>hr(M,ie))})).apply(this,arguments)}function F(T,p,_){return K.apply(this,arguments)}function K(){return(K=(0,C.Z)(function*(T,p,_){var M;const G=yield _.verify();try{let ie;if(Ve("string"==typeof G,T,"argument-error"),Ve(_.type===wl,T,"argument-error"),ie="string"==typeof p?{phoneNumber:p}:p,"session"in ie){const Ze=ie.session;if("phoneNumber"in ie)return Ve("enroll"===Ze.type,T,"internal-error"),(yield Kr(T,{idToken:Ze.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{Ve("signin"===Ze.type,T,"internal-error");const St=(null===(M=ie.multiFactorHint)||void 0===M?void 0:M.uid)||ie.multiFactorUid;return Ve(St,T,"missing-multi-factor-info"),(yield Ea(T,{mfaPendingCredential:Ze.credential,mfaEnrollmentId:St,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ze}=yield eu(T,{phoneNumber:ie.phoneNumber,recaptchaToken:G});return Ze}}finally{_._reset()}})).apply(this,arguments)}function ue(T,p){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,C.Z)(function*(T,p){yield zo((0,E.m9)(T),p)})).apply(this,arguments)}let ht=(()=>{class T{constructor(_){this.providerId=T.PROVIDER_ID,this.auth=lr(_)}verifyPhoneNumber(_,M){return F(this.auth,_,(0,E.m9)(M))}static credential(_,M){return ti._fromVerification(_,M)}static credentialFromResult(_){return T.credentialFromTaggedObject(_)}static credentialFromError(_){return T.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:M,temporaryProof:G}=_;return M&&G?ti._fromTokenResponse(M,G):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function zt(T,p){return p?Ne(p):(Ve(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class Vn extends ci{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return no(p,this._buildIdpRequest())}_linkToIdToken(p,_){return no(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return no(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Zt(T){return Me(T.auth,new Vn(T),T.bypassAuthState)}function ar(T){const{auth:p,user:_}=T;return Ve(_,p,"internal-error"),B(_,new Vn(T),T.bypassAuthState)}function Lr(T){return es.apply(this,arguments)}function es(){return(es=(0,C.Z)(function*(T){const{auth:p,user:_}=T;return Ve(_,p,"internal-error"),zo(_,new Vn(T),T.bypassAuthState)})).apply(this,arguments)}class Fs{constructor(p,_,M,G,ie=!1){this.auth=p,this.resolver=M,this.user=G,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,C.Z)(function*(M,G){p.pendingPromise={resolve:M,reject:G};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ie){p.reject(ie)}});return function(M,G){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,C.Z)(function*(){const{urlResponse:M,sessionId:G,postBody:ie,tenantId:Ze,error:St,type:rn}=p;if(St)return void _.reject(St);const _n={auth:_.auth,requestUri:M,sessionId:G,tenantId:Ze||void 0,postBody:ie||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(rn)(_n))}catch(zn){_.reject(zn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Zt;case"linkViaPopup":case"linkViaRedirect":return Lr;case"reauthViaPopup":case"reauthViaRedirect":return ar;default:yt(this.auth,"internal-error")}}resolve(p){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ts=new Pt(2e3,1e4);function Mo(T,p,_){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,C.Z)(function*(T,p,_){const M=lr(T);He(T,p,$i);const G=zt(M,_);return new Ha(M,"signInViaPopup",p,G).executeNotNull()})).apply(this,arguments)}function Cc(T,p,_){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T);He(M.auth,p,$i);const G=zt(M.auth,_);return new Ha(M.auth,"reauthViaPopup",p,G,M).executeNotNull()})).apply(this,arguments)}function op(T,p,_){return au.apply(this,arguments)}function au(){return(au=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T);He(M.auth,p,$i);const G=zt(M.auth,_);return new Ha(M.auth,"linkViaPopup",p,G,M).executeNotNull()})).apply(this,arguments)}let Ha=(()=>{class T extends Fs{constructor(_,M,G,ie,Ze){super(_,M,ie,Ze),this.provider=G,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var _=this;return(0,C.Z)(function*(){const M=yield _.execute();return Ve(M,_.auth,"internal-error"),M})()}onExecution(){var _=this;return(0,C.Z)(function*(){je(1===_.filter.length,"Popup operations only handle one event");const M=Ua();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],M),_.authWindow.associatedEvent=M,_.resolver._originValidation(_.auth).catch(G=>{_.reject(G)}),_.resolver._isIframeWebStorageSupported(_.auth,G=>{G||_.reject(Ye(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const _=()=>{var M,G;this.pollId=null!==(G=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ts.get())};_()}}return T.currentPopupAction=null,T})();const Es=new Map;class $a extends Fs{constructor(p,_,M=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,M),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,C.Z)(function*(){let M=Es.get(_.auth._key());if(!M){try{const ie=(yield function Da(T,p){return za.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;M=()=>Promise.resolve(ie)}catch(G){M=()=>Promise.reject(G)}Es.set(_.auth._key(),M)}return _.bypassAuthState||Es.set(_.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,M=this;return(0,C.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(M,p);if("unknown"!==p.type){if(p.eventId){const G=yield M.auth._redirectUserForId(p.eventId);if(G)return M.user=G,_().call(M,p);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function za(){return(za=(0,C.Z)(function*(T,p){const _=Wu(p),M=Wa(T);if(!(yield M._isAvailable()))return!1;const G="true"===(yield M._get(_));return yield M._remove(_),G})).apply(this,arguments)}function xo(T,p){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,C.Z)(function*(T,p){return Wa(T)._set(Wu(p),"true")})).apply(this,arguments)}function ns(){Es.clear()}function Ga(T,p){Es.set(T._key(),p)}function Wa(T){return Ne(T._redirectPersistence)}function Wu(T){return Nn("pendingRedirect",T.config.apiKey,T.name)}function wi(T,p,_){return function Ic(T,p,_){return Tc.apply(this,arguments)}(T,p,_)}function Tc(){return(Tc=(0,C.Z)(function*(T,p,_){const M=lr(T);He(T,p,$i);const G=zt(M,_);return yield xo(G,M),G._openRedirect(M,p,"signInViaRedirect")})).apply(this,arguments)}function k(T,p,_){return function V(T,p,_){return W.apply(this,arguments)}(T,p,_)}function W(){return(W=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T);He(M.auth,p,$i);const G=zt(M.auth,_);yield xo(G,M.auth);const ie=yield Jn(M);return G._openRedirect(M.auth,p,"reauthViaRedirect",ie)})).apply(this,arguments)}function fe(T,p,_){return function $e(T,p,_){return it.apply(this,arguments)}(T,p,_)}function it(){return(it=(0,C.Z)(function*(T,p,_){const M=(0,E.m9)(T);He(M.auth,p,$i);const G=zt(M.auth,_);yield L(!1,M,p.providerId),yield xo(G,M.auth);const ie=yield Jn(M);return G._openRedirect(M.auth,p,"linkViaRedirect",ie)})).apply(this,arguments)}function Rt(T,p){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,C.Z)(function*(T,p){return yield lr(T)._initializationPromise,bn(T,p,!1)})).apply(this,arguments)}function bn(T,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,C.Z)(function*(T,p,_=!1){const M=lr(T),G=zt(M,p),Ze=yield new $a(M,G,_).execute();return Ze&&!_&&(delete Ze.user._redirectEventId,yield M._persistUserIfCurrent(Ze.user),yield M._setRedirectUser(null,p)),Ze})).apply(this,arguments)}function Jn(T){return En.apply(this,arguments)}function En(){return(En=(0,C.Z)(function*(T){const p=Ua(`${T.uid}:::`);return T._redirectEventId=p,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),p})).apply(this,arguments)}class si{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(p,M)&&(_=!0,this.sendToConsumer(p,M),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Qs(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ea(T);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var M;if(p.error&&!ea(p)){const G=(null===(M=p.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";_.onError(Ye(this.auth,G))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const M=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&M}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lu(p))}saveEventToCache(p){this.cachedEventUids.add(lu(p)),this.lastProcessedEventTime=Date.now()}}function lu(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(p=>p).join("-")}function ea({type:T,error:p}){return"unknown"===T&&"auth/no-auth-event"===p?.code}function Ka(T){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,C.Z)(function*(T,p={}){return le(T,"GET","/v1/projects",p)})).apply(this,arguments)}const Ac=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ia=/^https?/;function Ku(){return(Ku=(0,C.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:p}=yield Ka(T);for(const _ of p)try{if(Vh(_))return}catch{}yt(T,"unauthorized-domain")})).apply(this,arguments)}function Vh(T){const p=Tt(),{protocol:_,hostname:M}=new URL(p);if(T.startsWith("chrome-extension://")){const Ze=new URL(T);return""===Ze.hostname&&""===M?"chrome-extension:"===_&&T.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Ze.hostname===M}if(!Ia.test(_))return!1;if(Ac.test(T))return M===T;const G=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(M)}const jh=new Pt(3e4,6e4);function ap(){const T=qr().___jsl;if(T?.H)for(const p of Object.keys(T.H))if(T.H[p].r=T.H[p].r||[],T.H[p].L=T.H[p].L||[],T.H[p].r=[...T.H[p].L],T.CP)for(let _=0;_<T.CP.length;_++)T.CP[_]=null}let Ud=null;function gy(T){return Ud=Ud||function qu(T){return new Promise((p,_)=>{var M,G,ie;function Ze(){ap(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ap(),_(Ye(T,"network-request-failed"))},timeout:jh.get()})}if(null!==(G=null===(M=qr().gapi)||void 0===M?void 0:M.iframes)&&void 0!==G&&G.Iframe)p(gapi.iframes.getContext());else{if(null===(ie=qr().gapi)||void 0===ie||!ie.load){const St=ba("iframefcb");return qr()[St]=()=>{gapi.load?Ze():_(Ye(T,"network-request-failed"))},wa(`https://apis.google.com/js/api.js?onload=${St}`).catch(rn=>_(rn))}Ze()}}).catch(p=>{throw Ud=null,p})}(T),Ud}const Zu=new Pt(5e3,15e3),jd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hh(T){const p=T.config;Ve(p.authDomain,T,"auth-domain-config-required");const _=p.emulator?An(p,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,M={apiKey:p.apiKey,appName:T.name,v:z.SDK_VERSION},G=Yu.get(T.config.apiHost);G&&(M.eid=G);const ie=T._getFrameworks();return ie.length&&(M.fw=ie.join(",")),`${_}?${(0,E.xO)(M).slice(1)}`}function Cl(){return Cl=(0,C.Z)(function*(T){const p=yield gy(T),_=qr().gapi;return Ve(_,T,"internal-error"),p.open({where:document.body,url:Hh(T),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jd,dontclear:!0},M=>new Promise(function(){var G=(0,C.Z)(function*(ie,Ze){yield M.restyle({setHideOnLeave:!1});const St=Ye(T,"network-request-failed"),rn=qr().setTimeout(()=>{Ze(St)},Zu.get());function _n(){qr().clearTimeout(rn),ie(M)}M.ping(_n).then(_n,()=>{Ze(St)})});return function(ie,Ze){return G.apply(this,arguments)}}()))}),Cl.apply(this,arguments)}const Mc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rc{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zh(T,p,_,M,G,ie){Ve(T.config.authDomain,T,"auth-domain-config-required"),Ve(T.config.apiKey,T,"invalid-api-key");const Ze={apiKey:T.config.apiKey,appName:T.name,authType:_,redirectUrl:M,v:z.SDK_VERSION,eventId:G};if(p instanceof $i){p.setDefaultLanguage(T.languageCode),Ze.providerId=p.providerId||"",(0,E.xb)(p.getCustomParameters())||(Ze.customParameters=JSON.stringify(p.getCustomParameters()));for(const[rn,_n]of Object.entries(ie||{}))Ze[rn]=_n}if(p instanceof Ti){const rn=p.getScopes().filter(_n=>""!==_n);rn.length>0&&(Ze.scopes=rn.join(","))}T.tenantId&&(Ze.tid=T.tenantId);const St=Ze;for(const rn of Object.keys(St))void 0===St[rn]&&delete St[rn];return`${function $d({config:T}){return T.emulator?An(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,E.xO)(St).slice(1)}`}const Gh="webStorageSupport",hn=class Dl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ba,this._completeRedirectFn=bn,this._overrideRedirectResult=Ga}_openPopup(p,_,M,G){var ie=this;return(0,C.Z)(function*(){var Ze;je(null===(Ze=ie.eventManagers[p._key()])||void 0===Ze?void 0:Ze.manager,"_initialize() not called before _openPopup()");const St=zh(p,_,M,Tt(),G);return function cu(T,p,_,M=500,G=600){const ie=Math.max((window.screen.availHeight-G)/2,0).toString(),Ze=Math.max((window.screen.availWidth-M)/2,0).toString();let St="";const rn=Object.assign(Object.assign({},Mc),{width:M.toString(),height:G.toString(),top:ie,left:Ze}),_n=(0,E.z$)().toLowerCase();_&&(St=ft(_n)?"_blank":_),_e(_n)&&(p=p||"http://localhost",rn.scrollbars="yes");const zn=Object.entries(rn).reduce((po,[Za,ws])=>`${po}${Za}=${ws},`,"");if(function he(T=(0,E.z$)()){var p;return ke(T)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(_n)&&"_self"!==St)return function Hd(T,p){const _=document.createElement("a");_.href=T,_.target=p;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(M)}(p||"",St),new Rc(null);const Yr=window.open(p||"",St,zn);Ve(Yr,T,"popup-blocked");try{Yr.focus()}catch{}return new Rc(Yr)}(p,St,Ua())})()}_openRedirect(p,_,M,G){var ie=this;return(0,C.Z)(function*(){return yield ie._originValidation(p),function ho(T){qr().location.href=T}(zh(p,_,M,Tt(),G)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:G,promise:ie}=this.eventManagers[_];return G?Promise.resolve(G):(je(ie,"If manager is not set, promise should be"),ie)}const M=this.initAndGetManager(p);return this.eventManagers[_]={promise:M},M.catch(()=>{delete this.eventManagers[_]}),M}initAndGetManager(p){var _=this;return(0,C.Z)(function*(){const M=yield function Qu(T){return Cl.apply(this,arguments)}(p),G=new si(p);return M.register("authEvent",ie=>(Ve(ie?.authEvent,p,"invalid-auth-event"),{status:G.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:G},_.iframes[p._key()]=M,G})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Gh,{type:Gh},G=>{var ie;const Ze=null===(ie=G?.[0])||void 0===ie?void 0:ie[Gh];void 0!==Ze&&_(!!Ze),yt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Xl(T){return Ku.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return wt()||ve()||ke()}};class Tn extends class Wh{constructor(p){this.factorId=p}_process(p,_,M){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,M);case"signin":return this._finalizeSignIn(p,_.credential);default:return Ke("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Tn(p)}_finalizeEnroll(p,_,M){return function Yo(T,p){return le(T,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(T,p))}(p,{idToken:_,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Jo(T,p){return le(T,"POST","/v2/accounts/mfaSignIn:finalize",Lt(T,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jl=(()=>{class T{constructor(){}static assertion(_){return Tn._fromCredential(_)}}return T.FACTOR_ID="phone",T})();var zd="@firebase/auth";class _y{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,C.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(M=>{var G;p((null===(G=M)||void 0===G?void 0:G.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function yy(T){(0,z._registerComponent)(new Te.wA("auth",(p,{options:_})=>{const M=p.getProvider("app").getImmediate(),G=p.getProvider("heartbeat"),{apiKey:ie,authDomain:Ze}=M.options;return((St,rn)=>{Ve(ie&&!ie.includes(":"),"invalid-api-key",{appName:St.name}),Ve(!Ze?.includes(":"),"argument-error",{appName:St.name});const _n={apiKey:ie,authDomain:Ze,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(T)},zn=new dn(St,rn,_n);return function ze(T,p){const _=p?.persistence||[],M=(Array.isArray(_)?_:[_]).map(Ne);p?.errorMap&&T._updateErrorMap(p.errorMap),T._initializeWithPersistence(M,p?.popupRedirectResolver)}(zn,_),zn})(M,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,M)=>{p.getProvider("auth-internal").initialize()})),(0,z._registerComponent)(new Te.wA("auth-internal",p=>{const _=lr(p.getProvider("auth").getImmediate());return new _y(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,z.registerVersion)(zd,"0.20.5",function up(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,z.registerVersion)(zd,"0.20.5","esm2017")}("Browser")},2090:(Vt,We,U)=>{U.d(We,{$s:()=>jn,BH:()=>nt,DV:()=>le,Dv:()=>fr,G6:()=>Ve,GJ:()=>ut,L:()=>Re,LL:()=>Tt,Mn:()=>He,Pz:()=>ln,Sg:()=>tt,UG:()=>Fe,UI:()=>Bt,US:()=>Te,Wj:()=>dt,Yr:()=>Dt,ZB:()=>re,ZR:()=>ze,b$:()=>yt,cI:()=>Dn,d:()=>Ye,dS:()=>de,eu:()=>je,g5:()=>z,gK:()=>Mr,gQ:()=>Br,h$:()=>Se,hl:()=>Ke,hu:()=>E,jU:()=>Ee,lb:()=>we,m9:()=>mn,ne:()=>jt,p$:()=>oe,pd:()=>$n,r3:()=>Lt,ru:()=>st,tV:()=>Pe,uI:()=>at,ug:()=>qe,vZ:()=>Gt,w1:()=>Ae,w9:()=>Bn,xO:()=>ir,xb:()=>gt,z$:()=>Xe,zI:()=>xe,zd:()=>sr});const E=function(De,pe){if(!De)throw z(pe)},z=function(De){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+De)},J=function(De){const pe=[];let ne=0;for(let te=0;te<De.length;te++){let ae=De.charCodeAt(te);ae<128?pe[ne++]=ae:ae<2048?(pe[ne++]=ae>>6|192,pe[ne++]=63&ae|128):55296==(64512&ae)&&te+1<De.length&&56320==(64512&De.charCodeAt(te+1))?(ae=65536+((1023&ae)<<10)+(1023&De.charCodeAt(++te)),pe[ne++]=ae>>18|240,pe[ne++]=ae>>12&63|128,pe[ne++]=ae>>6&63|128,pe[ne++]=63&ae|128):(pe[ne++]=ae>>12|224,pe[ne++]=ae>>6&63|128,pe[ne++]=63&ae|128)}return pe},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(De,pe){if(!Array.isArray(De))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,te=[];for(let ae=0;ae<De.length;ae+=3){const Qe=De[ae],Et=ae+1<De.length,$t=Et?De[ae+1]:0,Mn=ae+2<De.length,Nn=Mn?De[ae+2]:0;let _e=(15&$t)<<2|Nn>>6,ve=63&Nn;Mn||(ve=64,Et||(_e=64)),te.push(ne[Qe>>2],ne[(3&Qe)<<4|$t>>4],ne[_e],ne[ve])}return te.join("")},encodeString(De,pe){return this.HAS_NATIVE_SUPPORT&&!pe?btoa(De):this.encodeByteArray(J(De),pe)},decodeString(De,pe){return this.HAS_NATIVE_SUPPORT&&!pe?atob(De):function(De){const pe=[];let ne=0,te=0;for(;ne<De.length;){const ae=De[ne++];if(ae<128)pe[te++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const Qe=De[ne++];pe[te++]=String.fromCharCode((31&ae)<<6|63&Qe)}else if(ae>239&&ae<365){const Mn=((7&ae)<<18|(63&De[ne++])<<12|(63&De[ne++])<<6|63&De[ne++])-65536;pe[te++]=String.fromCharCode(55296+(Mn>>10)),pe[te++]=String.fromCharCode(56320+(1023&Mn))}else{const Qe=De[ne++],Et=De[ne++];pe[te++]=String.fromCharCode((15&ae)<<12|(63&Qe)<<6|63&Et)}}return pe.join("")}(this.decodeStringToByteArray(De,pe))},decodeStringToByteArray(De,pe){this.init_();const ne=pe?this.charToByteMapWebSafe_:this.charToByteMap_,te=[];for(let ae=0;ae<De.length;){const Qe=ne[De.charAt(ae++)],$t=ae<De.length?ne[De.charAt(ae)]:0;++ae;const Nn=ae<De.length?ne[De.charAt(ae)]:64;++ae;const Ge=ae<De.length?ne[De.charAt(ae)]:64;if(++ae,null==Qe||null==$t||null==Nn||null==Ge)throw Error();te.push(Qe<<2|$t>>4),64!==Nn&&(te.push($t<<4&240|Nn>>2),64!==Ge&&te.push(Nn<<6&192|Ge))}return te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let De=0;De<this.ENCODED_VALS.length;De++)this.byteToCharMap_[De]=this.ENCODED_VALS.charAt(De),this.charToByteMap_[this.byteToCharMap_[De]]=De,this.byteToCharMapWebSafe_[De]=this.ENCODED_VALS_WEBSAFE.charAt(De),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[De]]=De,De>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(De)]=De,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(De)]=De)}}},Se=function(De){const pe=J(De);return Te.encodeByteArray(pe,!0)},Re=function(De){return Se(De).replace(/\./g,"")},Pe=function(De){try{return Te.decodeString(De,!0)}catch(pe){console.error("base64Decode failed: ",pe)}return null};function oe(De){return re(void 0,De)}function re(De,pe){if(!(pe instanceof Object))return pe;switch(pe.constructor){case Date:return new Date(pe.getTime());case Object:void 0===De&&(De={});break;case Array:De=[];break;default:return pe}for(const ne in pe)!pe.hasOwnProperty(ne)||!me(ne)||(De[ne]=re(De[ne],pe[ne]));return De}function me(De){return"__proto__"!==De}class nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((pe,ne)=>{this.resolve=pe,this.reject=ne})}wrapCallback(pe){return(ne,te)=>{ne?this.reject(ne):this.resolve(te),"function"==typeof pe&&(this.promise.catch(()=>{}),1===pe.length?pe(ne):pe(ne,te))}}}function tt(De,pe){if(De.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const te=pe||"demo-project",ae=De.iat||0,Qe=De.sub||De.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${te}`,aud:te,iat:ae,exp:ae+3600,auth_time:ae,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},De);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(Et)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return"object"==typeof self&&self.self===self}function st(){const De="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof De&&void 0!==De.id}function yt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ye(){return Xe().indexOf("Electron/")>=0}function Ae(){const De=Xe();return De.indexOf("MSIE ")>=0||De.indexOf("Trident/")>=0}function He(){return Xe().indexOf("MSAppHost/")>=0}function Dt(){return!1}function Ve(){return!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){return"object"==typeof indexedDB}function je(){return new Promise((De,pe)=>{try{let ne=!0;const te="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(te);ae.onsuccess=()=>{ae.result.close(),ne||self.indexedDB.deleteDatabase(te),De(!0)},ae.onupgradeneeded=()=>{ne=!1},ae.onerror=()=>{var Qe;pe((null===(Qe=ae.error)||void 0===Qe?void 0:Qe.message)||"")}}catch(ne){pe(ne)}})}function xe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ze extends Error{constructor(pe,ne,te){super(ne),this.code=pe,this.customData=te,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(pe,ne,te){this.service=pe,this.serviceName=ne,this.errors=te}create(pe,...ne){const te=ne[0]||{},ae=`${this.service}/${pe}`,Qe=this.errors[pe],Et=Qe?function It(De,pe){return De.replace(en,(ne,te)=>{const ae=pe[te];return null!=ae?String(ae):`<${te}?>`})}(Qe,te):"Error";return new ze(ae,`${this.serviceName}: ${Et} (${ae}).`,te)}}const en=/\{\$([^}]+)}/g;function Dn(De){return JSON.parse(De)}function ln(De){return JSON.stringify(De)}const Pt=function(De){let pe={},ne={},te={},ae="";try{const Qe=De.split(".");pe=Dn(Pe(Qe[0])||""),ne=Dn(Pe(Qe[1])||""),ae=Qe[2],te=ne.d||{},delete ne.d}catch{}return{header:pe,claims:ne,data:te,signature:ae}},Bn=function(De){const ne=Pt(De).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},ut=function(De){const pe=Pt(De).claims;return"object"==typeof pe&&!0===pe.admin};function Lt(De,pe){return Object.prototype.hasOwnProperty.call(De,pe)}function le(De,pe){if(Object.prototype.hasOwnProperty.call(De,pe))return De[pe]}function gt(De){for(const pe in De)if(Object.prototype.hasOwnProperty.call(De,pe))return!1;return!0}function Bt(De,pe,ne){const te={};for(const ae in De)Object.prototype.hasOwnProperty.call(De,ae)&&(te[ae]=pe.call(ne,De[ae],ae,De));return te}function Gt(De,pe){if(De===pe)return!0;const ne=Object.keys(De),te=Object.keys(pe);for(const ae of ne){if(!te.includes(ae))return!1;const Qe=De[ae],Et=pe[ae];if(Qt(Qe)&&Qt(Et)){if(!Gt(Qe,Et))return!1}else if(Qe!==Et)return!1}for(const ae of te)if(!ne.includes(ae))return!1;return!0}function Qt(De){return null!==De&&"object"==typeof De}function ir(De){const pe=[];for(const[ne,te]of Object.entries(De))Array.isArray(te)?te.forEach(ae=>{pe.push(encodeURIComponent(ne)+"="+encodeURIComponent(ae))}):pe.push(encodeURIComponent(ne)+"="+encodeURIComponent(te));return pe.length?"&"+pe.join("&"):""}function sr(De){const pe={};return De.replace(/^\?/,"").split("&").forEach(te=>{if(te){const[ae,Qe]=te.split("=");pe[decodeURIComponent(ae)]=decodeURIComponent(Qe)}}),pe}function $n(De){const pe=De.indexOf("?");if(!pe)return"";const ne=De.indexOf("#",pe);return De.substring(pe,ne>0?ne:void 0)}class Br{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let pe=1;pe<this.blockSize;++pe)this.pad_[pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(pe,ne){ne||(ne=0);const te=this.W_;if("string"==typeof pe)for(let Ge=0;Ge<16;Ge++)te[Ge]=pe.charCodeAt(ne)<<24|pe.charCodeAt(ne+1)<<16|pe.charCodeAt(ne+2)<<8|pe.charCodeAt(ne+3),ne+=4;else for(let Ge=0;Ge<16;Ge++)te[Ge]=pe[ne]<<24|pe[ne+1]<<16|pe[ne+2]<<8|pe[ne+3],ne+=4;for(let Ge=16;Ge<80;Ge++){const _e=te[Ge-3]^te[Ge-8]^te[Ge-14]^te[Ge-16];te[Ge]=4294967295&(_e<<1|_e>>>31)}let Nn,Ur,ae=this.chain_[0],Qe=this.chain_[1],Et=this.chain_[2],$t=this.chain_[3],Mn=this.chain_[4];for(let Ge=0;Ge<80;Ge++){Ge<40?Ge<20?(Nn=$t^Qe&(Et^$t),Ur=1518500249):(Nn=Qe^Et^$t,Ur=1859775393):Ge<60?(Nn=Qe&Et|$t&(Qe|Et),Ur=2400959708):(Nn=Qe^Et^$t,Ur=3395469782);const _e=(ae<<5|ae>>>27)+Nn+Mn+Ur+te[Ge]&4294967295;Mn=$t,$t=Et,Et=4294967295&(Qe<<30|Qe>>>2),Qe=ae,ae=_e}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+Qe&4294967295,this.chain_[2]=this.chain_[2]+Et&4294967295,this.chain_[3]=this.chain_[3]+$t&4294967295,this.chain_[4]=this.chain_[4]+Mn&4294967295}update(pe,ne){if(null==pe)return;void 0===ne&&(ne=pe.length);const te=ne-this.blockSize;let ae=0;const Qe=this.buf_;let Et=this.inbuf_;for(;ae<ne;){if(0===Et)for(;ae<=te;)this.compress_(pe,ae),ae+=this.blockSize;if("string"==typeof pe){for(;ae<ne;)if(Qe[Et]=pe.charCodeAt(ae),++Et,++ae,Et===this.blockSize){this.compress_(Qe),Et=0;break}}else for(;ae<ne;)if(Qe[Et]=pe[ae],++Et,++ae,Et===this.blockSize){this.compress_(Qe),Et=0;break}}this.inbuf_=Et,this.total_+=ne}digest(){const pe=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&ne,ne/=256;this.compress_(this.buf_);let te=0;for(let ae=0;ae<5;ae++)for(let Qe=24;Qe>=0;Qe-=8)pe[te]=this.chain_[ae]>>Qe&255,++te;return pe}}function jt(De,pe){const ne=new xn(De,pe);return ne.subscribe.bind(ne)}class xn{constructor(pe,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{pe(this)}).catch(te=>{this.error(te)})}next(pe){this.forEachObserver(ne=>{ne.next(pe)})}error(pe){this.forEachObserver(ne=>{ne.error(pe)}),this.close(pe)}complete(){this.forEachObserver(pe=>{pe.complete()}),this.close()}subscribe(pe,ne,te){let ae;if(void 0===pe&&void 0===ne&&void 0===te)throw new Error("Missing Observer.");ae=function Wn(De,pe){if("object"!=typeof De||null===De)return!1;for(const ne of pe)if(ne in De&&"function"==typeof De[ne])return!0;return!1}(pe,["next","error","complete"])?pe:{next:pe,error:ne,complete:te},void 0===ae.next&&(ae.next=Tr),void 0===ae.error&&(ae.error=Tr),void 0===ae.complete&&(ae.complete=Tr);const Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),Qe}unsubscribeOne(pe){void 0===this.observers||void 0===this.observers[pe]||(delete this.observers[pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(pe){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,pe)}sendOne(pe,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[pe])try{ne(this.observers[pe])}catch(te){typeof console<"u"&&console.error&&console.error(te)}})}close(pe){this.finalized||(this.finalized=!0,void 0!==pe&&(this.finalError=pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tr(){}const fr=function(De,pe,ne,te){let ae;if(te<pe?ae="at least "+pe:te>ne&&(ae=0===ne?"none":"no more than "+ne),ae)throw new Error(De+" failed: Was called with "+te+(1===te?" argument.":" arguments.")+" Expects "+ae+".")};function Mr(De,pe){return`${De} failed: ${pe} argument `}function dt(De,pe,ne,te){if((!te||ne)&&"function"!=typeof ne)throw new Error(Mr(De,pe)+"must be a valid function.")}function we(De,pe,ne,te){if((!te||ne)&&("object"!=typeof ne||null===ne))throw new Error(Mr(De,pe)+"must be a valid context object.")}const de=function(De){const pe=[];let ne=0;for(let te=0;te<De.length;te++){let ae=De.charCodeAt(te);if(ae>=55296&&ae<=56319){const Qe=ae-55296;te++,E(te<De.length,"Surrogate pair missing trail surrogate."),ae=65536+(Qe<<10)+(De.charCodeAt(te)-56320)}ae<128?pe[ne++]=ae:ae<2048?(pe[ne++]=ae>>6|192,pe[ne++]=63&ae|128):ae<65536?(pe[ne++]=ae>>12|224,pe[ne++]=ae>>6&63|128,pe[ne++]=63&ae|128):(pe[ne++]=ae>>18|240,pe[ne++]=ae>>12&63|128,pe[ne++]=ae>>6&63|128,pe[ne++]=63&ae|128)}return pe},qe=function(De){let pe=0;for(let ne=0;ne<De.length;ne++){const te=De.charCodeAt(ne);te<128?pe++:te<2048?pe+=2:te>=55296&&te<=56319?(pe+=4,ne++):pe+=3}return pe};function jn(De,pe=1e3,ne=2){const te=pe*Math.pow(ne,De),ae=Math.round(.5*te*(Math.random()-.5)*2);return Math.min(144e5,te+ae)}function mn(De){return De&&De._delegate?De._delegate:De}},2474:(Vt,We,U)=>{U.r(We),U.d(We,{MoviesModule:()=>Xe});var C=U(6895),E=U(4466),z=U(4316),J=U(4650);var Te=U(529);let Se=(()=>{class at{constructor(Ee){this.http=Ee,this.movieData=null}getMovieList(){return this.http.get("https://api.npoint.io/31abdc3fd04edf934ab1/posts")}}return at.\u0275fac=function(Ee){return new(Ee||at)(J.LFG(Te.eN))},at.\u0275prov=J.Yz7({token:at,factory:at.\u0275fac,providedIn:"root"}),at})();function Re(at,Fe){if(1&at){const Ee=J.EpF();J.TgZ(0,"div",2),J.NdJ("click",function(){const Ye=J.CHM(Ee).$implicit,Ae=J.oxw();return J.KtG(Ae.seeMore(Ye))}),J._UZ(1,"img",3),J.TgZ(2,"div",4),J._uU(3),J.qZA(),J.TgZ(4,"div",5),J._uU(5),J.qZA()()}if(2&at){const Ee=Fe.$implicit;J.xp6(1),J.s9C("src",Ee.img,J.LSH),J.s9C("alt",Ee.title),J.xp6(2),J.Oqu(Ee.title),J.xp6(2),J.Oqu(Ee.date)}}let Pe=(()=>{class at{constructor(Ee,st){this.movie2=Ee,this.router=st,this.moviePost=[]}seeMore(Ee){this.movie2.movieData=Ee,this.router.navigate(["/movie",Ee.id,Ee.title])}}return at.\u0275fac=function(Ee){return new(Ee||at)(J.Y36(Se),J.Y36(z.F0))},at.\u0275cmp=J.Xpm({type:at,selectors:[["paradiso-movie-grid"]],inputs:{moviePost:"moviePost"},decls:2,vars:1,consts:[[1,"movie_container"],["class","movie_content",3,"click",4,"ngFor","ngForOf"],[1,"movie_content",3,"click"],["height","300px","width","210px",1,"img",3,"src","alt"],[1,"movie_title"],[1,"date"]],template:function(Ee,st){1&Ee&&(J.TgZ(0,"div",0),J.YNc(1,Re,6,4,"div",1),J.qZA()),2&Ee&&(J.xp6(1),J.Q6J("ngForOf",st.moviePost))},dependencies:[C.sg],styles:[".movie_container[_ngcontent-%COMP%]{display:flex;margin:auto;flex-wrap:wrap;max-width:1400px;min-width:none;align-items:center;justify-content:space-between}.movie_content[_ngcontent-%COMP%]{width:210px;height:400px;flex-direction:column;margin-top:15px;background-color:#303030}.movie_title[_ngcontent-%COMP%]{font-size:1.1rem;color:#d8d8d8;margin:5px 10px;transition:.3s;cursor:pointer}.movie_title[_ngcontent-%COMP%]:hover{color:#fd3838;transition:.3s}.date[_ngcontent-%COMP%]{font-size:.8rem;color:#d8d8d8;margin:5px 10px}.img[_ngcontent-%COMP%]{cursor:pointer}"]}),at})(),oe=(()=>{class at{constructor(Ee){this.movieList=Ee,this.moviePost=[]}ngOnInit(){this.movieList.getMovieList().subscribe(Ee=>{this.moviePost=Ee})}}return at.\u0275fac=function(Ee){return new(Ee||at)(J.Y36(Se))},at.\u0275cmp=J.Xpm({type:at,selectors:[["paradiso-movie-list"]],decls:1,vars:1,consts:[[3,"moviePost"]],template:function(Ee,st){1&Ee&&J._UZ(0,"paradiso-movie-grid",0),2&Ee&&J.Q6J("moviePost",st.moviePost)},dependencies:[Pe],styles:[".sss[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:15px}"]}),at})(),re=(()=>{class at{constructor(Ee){this.movieList=Ee,this.movieInfo=[]}}return at.\u0275fac=function(Ee){return new(Ee||at)(J.Y36(Se))},at.\u0275cmp=J.Xpm({type:at,selectors:[["paradiso-data-grid"]],inputs:{movieInfo:"movieInfo"},decls:15,vars:5,consts:[[1,"container"],["width","100%",1,"video"],["width","1100px","height","450px","controls",""],["src","../../../../../../assets/other/seeit.mp4","type","video/mp4"],[1,"details"],[1,"photo"],["width","300px","height","400px","alt","",3,"src"],[1,"movieinfo"],[1,"title"],[1,"title2"],[1,"infor"]],template:function(Ee,st){1&Ee&&(J.TgZ(0,"div",0)(1,"div",1)(2,"video",2),J._UZ(3,"source",3),J.qZA()(),J.TgZ(4,"div",4)(5,"div",5),J._UZ(6,"img",6),J.qZA(),J.TgZ(7,"div",7)(8,"div",8),J._uU(9),J.qZA(),J.TgZ(10,"div",9),J._uU(11),J.qZA(),J.TgZ(12,"div",10),J._uU(13),J.qZA()()()(),J._UZ(14,"h1")),2&Ee&&(J.xp6(6),J.s9C("src",null==st.movieList.movieData?null:st.movieList.movieData.img,J.LSH),J.xp6(3),J.hij(" ",null==st.movieList.movieData?null:st.movieList.movieData.title," "),J.xp6(2),J.hij(" ",null==st.movieList.movieData?null:st.movieList.movieData.titleKa," "),J.xp6(2),J.AsE(" ",null==st.movieList.movieData?null:st.movieList.movieData.genre," ",null==st.movieList.movieData?null:st.movieList.movieData.description," "))},styles:[".container[_ngcontent-%COMP%]{background-color:#303030}.video[_ngcontent-%COMP%]{display:flex;margin:auto;max-width:1100px}.details[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:50px auto auto;max-width:1100px}.movieinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column}.title[_ngcontent-%COMP%]{margin:25px 25px 10px;color:#fff;font-size:1.5rem}.title2[_ngcontent-%COMP%]{margin-left:25px;color:#fff;font-size:.8rem}.infor[_ngcontent-%COMP%]{margin-left:25px;margin-top:50px;color:#fff;font-size:.9rem}"]}),at})();const nt=[{path:"",component:oe},{path:"movie/:id/:title",component:(()=>{class at{constructor(Ee){this.movieList=Ee,this.movieInfo=[]}}return at.\u0275fac=function(Ee){return new(Ee||at)(J.Y36(Se))},at.\u0275cmp=J.Xpm({type:at,selectors:[["paradiso-data-log"]],decls:1,vars:1,consts:[[3,"movieInfo"]],template:function(Ee,st){1&Ee&&J._UZ(0,"paradiso-data-grid",0),2&Ee&&J.Q6J("movieInfo",st.movieInfo)},dependencies:[re]}),at})()}];var tt=U(7126);let Xe=(()=>{class at{}return at.\u0275fac=function(Ee){return new(Ee||at)},at.\u0275mod=J.oAB({type:at}),at.\u0275inj=J.cJS({imports:[C.ez,E.m,z.Bz.forChild(nt),tt.aw,z.Bz]}),at})()},4466:(Vt,We,U)=>{U.d(We,{m:()=>Te});var C=U(6895),E=U(4316),z=U(7311),J=U(7126),be=U(4650);let Te=(()=>{class Se{}return Se.\u0275fac=function(Pe){return new(Pe||Se)},Se.\u0275mod=be.oAB({type:Se}),Se.\u0275inj=be.cJS({imports:[C.ez,E.Bz,z.Is,J.aw,z.Is]}),Se})()},2287:(Vt,We,U)=>{var C=U(1481),E=U(4650),z=U(4316);const be=[{path:"",loadChildren:()=>Promise.resolve().then(U.bind(U,2474)).then(n=>n.MoviesModule)},{path:"registration",component:(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=E.Xpm({type:n,selectors:[["paradiso-registration"]],decls:2,vars:0,template:function(t,r){1&t&&(E.TgZ(0,"p"),E._uU(1,"registration works!"),E.qZA())}}),n})()}];let Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({imports:[z.Bz.forRoot(be),z.Bz]}),n})();var Se=U(7126);let Re=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=E.Xpm({type:n,selectors:[["paradiso-popup"]],decls:2,vars:0,template:function(t,r){1&t&&(E.TgZ(0,"h1"),E._uU(1,"Trying to figure out what the hell is going on and why my login selector doesn't work"),E.qZA())}}),n})();var Pe=U(7311);const oe=function(){return[""]};let re=(()=>{class n{constructor(t){this.dialogRef=t}openDialog(){this.dialogRef.open(Re)}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(Pe.uw))},n.\u0275cmp=E.Xpm({type:n,selectors:[["paradiso-header"]],decls:18,vars:20,consts:[[1,"bg"],[1,"header_container"],[1,"logo",3,"routerLink"],[1,"navigation"],[3,"routerLink"],[1,"auth"],[1,"login",3,"click"]],template:function(t,r){1&t&&(E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E._uU(3,"Paradiso"),E.qZA(),E.TgZ(4,"div",3)(5,"span",4),E._uU(6),E.ALo(7,"translate"),E.qZA(),E.TgZ(8,"span",4),E._uU(9),E.ALo(10,"translate"),E.qZA(),E.TgZ(11,"span",4),E._uU(12),E.ALo(13,"translate"),E.qZA()(),E.TgZ(14,"div",5)(15,"div",6),E.NdJ("click",function(){return r.openDialog()}),E._uU(16),E.ALo(17,"translate"),E.qZA()()()()),2&t&&(E.xp6(2),E.Q6J("routerLink",E.DdM(16,oe)),E.xp6(3),E.Q6J("routerLink",E.DdM(17,oe)),E.xp6(1),E.Oqu(E.lcZ(7,8,"HOME")),E.xp6(2),E.Q6J("routerLink",E.DdM(18,oe)),E.xp6(1),E.Oqu(E.lcZ(10,10,"MOVIES")),E.xp6(2),E.Q6J("routerLink",E.DdM(19,oe)),E.xp6(1),E.Oqu(E.lcZ(13,12,"TVSHOWS")),E.xp6(4),E.Oqu(E.lcZ(17,14,"LOGIN")))},dependencies:[z.rH,Se.X$],styles:[".bg[_ngcontent-%COMP%]{background-color:#303030}.header_container[_ngcontent-%COMP%]{display:flex;margin:auto;min-height:80px;flex-wrap:wrap;max-width:1100px;min-width:none;align-items:center;justify-content:space-between}.logo[_ngcontent-%COMP%]{color:#f44;font-size:2rem;cursor:pointer}.navigation[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.navigation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff;cursor:pointer;margin-right:55px}.auth[_ngcontent-%COMP%]{display:flex;font-size:1.2rem;cursor:pointer}.login[_ngcontent-%COMP%]{padding:12px 23px;border:2px solid rgb(230,27,27);border-radius:45px 0;color:#fff}.login[_ngcontent-%COMP%]:hover{background-color:#222;color:#fa6464;transition:.3s}"]}),n})(),me=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=E.Xpm({type:n,selectors:[["paradiso-search"]],decls:3,vars:0,consts:[[1,"bg2"],[1,"searchbar"],["type","text","name","Search-box","placeholder","SEARCH MOVIE...",1,"search"]],template:function(t,r){1&t&&(E.TgZ(0,"div",0)(1,"div",1),E._UZ(2,"input",2),E.qZA()())},styles:[".searchbar[_ngcontent-%COMP%]{display:flex;margin:auto;max-width:1100px;min-width:none;align-items:center;justify-content:space-between}.search[_ngcontent-%COMP%]{width:100%;padding:10px;margin:15px 0 20px;font-size:1rem;color:#fff;background-color:#222;border:none}.bg2[_ngcontent-%COMP%]{background-color:#272727}.search[_ngcontent-%COMP%]:focus{outline:none}"]}),n})();var nt=(()=>{return(n=nt||(nt={})).KA="ka",n.EN="en",nt;var n})();const tt=function(){return[""]};let Xe=(()=>{class n{constructor(t){this.translateServ=t,t.setDefaultLang(nt.EN),t.use(nt.EN)}changeLanguage(){this.translateServ.use(this.translateServ.currentLang===nt.EN?nt.KA:nt.EN)}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(Se.sK))},n.\u0275cmp=E.Xpm({type:n,selectors:[["paradiso-footer"]],decls:17,vars:11,consts:[[1,"bg"],[1,"container"],[1,"logo",3,"routerLink"],[1,"social"],["href","https://github.com/Timaries","target","_blank"],["href","https://github.com/Timaries/Paradiso","target","_blank"],["href","https://www.linkedin.com/in/kakushadzet/","target","_blank"],[1,"changelanguage"],[1,"lagunge",3,"click"]],template:function(t,r){1&t&&(E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E._uU(3,"Paradiso"),E.qZA(),E.TgZ(4,"div",3)(5,"a",4),E._uU(6),E.ALo(7,"translate"),E.qZA(),E.TgZ(8,"a",5),E._uU(9),E.ALo(10,"translate"),E.qZA(),E.TgZ(11,"a",6),E._uU(12,"LINKEDIN"),E.qZA()(),E.TgZ(13,"div",7)(14,"div",8),E.NdJ("click",function(){return r.changeLanguage()}),E._uU(15),E.ALo(16,"translate"),E.qZA()()()()),2&t&&(E.xp6(2),E.Q6J("routerLink",E.DdM(10,tt)),E.xp6(4),E.Oqu(E.lcZ(7,4,"GITHUB")),E.xp6(3),E.Oqu(E.lcZ(10,6,"SOURCE_CODE")),E.xp6(6),E.hij(" ",E.lcZ(16,8,"LANGUAGE")," "))},dependencies:[z.rH,Se.X$],styles:[".bg[_ngcontent-%COMP%]{background-color:#272727;margin-top:50px}.container[_ngcontent-%COMP%]{display:flex;margin:auto;min-height:80px;flex-wrap:wrap;max-width:1100px;min-width:none;align-items:center;justify-content:space-between}.logo[_ngcontent-%COMP%]{color:#858585;font-size:2rem;cursor:pointer}.social[_ngcontent-%COMP%]{display:flex;padding:20px;flex-direction:row;flex-wrap:wrap}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.1rem;padding:10px;color:#fff;cursor:pointer;text-decoration:none;margin-right:55px;transition:.2s}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e61b1b;transition:.2s}.changelanguage[_ngcontent-%COMP%]{display:flex;font-size:1rem;cursor:pointer}.lagunge[_ngcontent-%COMP%]{padding:12px 23px;border:2px solid rgb(34,34,34);background-color:#222;border-radius:0 45px;color:#fff}.lagunge[_ngcontent-%COMP%]:hover{background-color:#222;border:2px solid rgb(230,27,27);color:#fa6464;transition:.3s}"]}),n})(),at=(()=>{class n{constructor(t){this.translateServ=t,this.title="Paradiso",t.setDefaultLang("ka"),t.use("ka")}changeLanguage(){this.translateServ.use("en"===this.translateServ.currentLang?"ka":"en")}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(Se.sK))},n.\u0275cmp=E.Xpm({type:n,selectors:[["paradiso-root"]],decls:4,vars:0,template:function(t,r){1&t&&E._UZ(0,"paradiso-header")(1,"paradiso-search")(2,"router-outlet")(3,"paradiso-footer")},dependencies:[re,me,Xe,z.lC]}),n})();var Fe=U(7340);function st(n){return new E.vHH(3e3,!1)}function Wn(){return typeof window<"u"&&typeof window.document<"u"}function Tr(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function fr(n){switch(n.length){case 0:return new Fe.ZN;case 1:return n[0];default:return new Fe.ZE(n)}}function Mr(n,e,t,r,s=new Map,l=new Map){const u=[],h=[];let m=-1,b=null;if(r.forEach(N=>{const H=N.get("offset"),ee=H==m,ge=ee&&b||new Map;N.forEach((Ie,et)=>{let _t=et,nn=Ie;if("offset"!==et)switch(_t=e.normalizePropertyName(_t,u),nn){case Fe.k1:nn=s.get(et);break;case Fe.l3:nn=l.get(et);break;default:nn=e.normalizeStyleValue(et,_t,nn,u)}ge.set(_t,nn)}),ee||h.push(ge),b=ge,m=H}),u.length)throw function le(n){return new E.vHH(3502,!1)}();return h}function Kn(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&dt(t,"start",n)));break;case"done":n.onDone(()=>r(t&&dt(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&dt(t,"destroy",n)))}}function dt(n,e,t){const l=we(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(l._data=u),l}function we(n,e,t,r,s="",l=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:l,disabled:!!u}}function de(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function qe(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let mt=(n,e)=>!1,Xt=(n,e,t)=>[],kt=null;function Wt(n){const e=n.parentNode||n.host;return e===kt?null:e}(Tr()||typeof Element<"u")&&(Wn()?(kt=(()=>document.documentElement)(),mt=(n,e)=>{for(;e;){if(e===n)return!0;e=Wt(e)}return!1}):mt=(n,e)=>n.contains(e),Xt=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let cn=null,_r=!1;const ne=mt,te=Xt;let Qe=(()=>{class n{validateStyleProperty(t){return function mn(n){cn||(cn=function pe(){return typeof document<"u"?document.body:null}()||{},_r=!!cn.style&&"WebkitAppearance"in cn.style);let e=!0;return cn.style&&!function jn(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in cn.style,!e&&_r&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in cn.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return ne(t,r)}getParentElement(t){return Wt(t)}query(t,r,s){return te(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,l,u,h=[],m){return new Fe.ZN(s,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),Et=(()=>{class n{}return n.NOOP=new Qe,n})();const Ur="ng-enter",Ge="ng-leave",_e="ng-trigger",ve=".ng-trigger",ft="ng-animating",Nt=".ng-animating";function un(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:bt(parseFloat(e[1]),e[2])}function bt(n,e){return"s"===e?1e3*n:n}function Kt(n,e,t){return n.hasOwnProperty("duration")?n:function ke(n,e,t){let s,l=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(st()),{duration:0,delay:0,easing:""};s=bt(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(l=bt(parseFloat(m),h[4]));const b=h[5];b&&(u=b)}else s=n;if(!t){let h=!1,m=e.length;s<0&&(e.push(function yt(){return new E.vHH(3100,!1)}()),h=!0),l<0&&(e.push(function Ye(){return new E.vHH(3101,!1)}()),h=!0),h&&e.splice(m,0,st())}return{duration:s,delay:l,easing:u}}(n,e,t)}function ye(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function he(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function qt(n,e=new Map,t){if(t)for(let[r,s]of t)e.set(r,s);for(let[r,s]of n)e.set(r,s);return e}function Un(n,e,t){return t?e+":"+t+";":""}function Fr(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Un(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Un(0,pi(t),n.style[t]));n.setAttribute("style",e)}function dn(n,e,t){n.style&&(e.forEach((r,s)=>{const l=Hs(s);t&&!t.has(s)&&t.set(s,n.style[l]),n.style[l]=r}),Tr()&&Fr(n))}function lr(n,e){n.style&&(e.forEach((t,r)=>{const s=Hs(r);n.style[s]=""}),Tr()&&Fr(n))}function fi(n){return Array.isArray(n)?1==n.length?n[0]:(0,Fe.vP)(n):n}const _s=new RegExp("{{\\s*(.+?)\\s*}}","g");function Xr(n){let e=[];if("string"==typeof n){let t;for(;t=_s.exec(n);)e.push(t[1]);_s.lastIndex=0}return e}function qi(n,e,t){const r=n.toString(),s=r.replace(_s,(l,u)=>{let h=e[u];return null==h&&(t.push(function He(n){return new E.vHH(3003,!1)}()),h=""),h.toString()});return s==r?n:s}function Di(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const ci=/-+([a-z0-9])/g;function Hs(n){return n.replace(ci,(...e)=>e[1].toUpperCase())}function pi(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function gi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Dt(n){return new E.vHH(3004,!1)}()}}function aa(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function wo(n,e,t){if(":"==n[0]){const m=function il(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function In(n){return new E.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function An(n){return new E.vHH(3015,!1)}()),e;const s=r[1],l=r[2],u=r[3];e.push(sl(s,u));"<"==l[0]&&!("*"==s&&"*"==u)&&e.push(sl(u,s))}(r,t,e)):t.push(n),t}const Pi=new Set(["true","1"]),Vo=new Set(["false","0"]);function sl(n,e){const t=Pi.has(n)||Vo.has(n),r=Pi.has(e)||Vo.has(e);return(s,l)=>{let u="*"==n||n==s,h="*"==e||e==l;return!u&&t&&"boolean"==typeof s&&(u=s?Pi.has(n):Vo.has(n)),!h&&r&&"boolean"==typeof l&&(h=l?Pi.has(e):Vo.has(e)),u&&h}}const ol=new RegExp("s*:selfs*,?","g");function jo(n,e,t,r){return new cs(n).build(e,t,r)}class cs{constructor(e){this._driver=e}build(e,t,r){const s=new eu(t);return this._resetContextStyleTimingState(s),gi(this,fi(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const l=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function Ke(){return new E.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,b=m.name;b.toString().split(/\s*,\s*/).forEach(N=>{m.name=N,l.push(this.visitState(m,t))}),m.name=b}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,s+=m.depCount,u.push(m)}else t.errors.push(function je(){return new E.vHH(3007,!1)}())}),{type:7,name:e.name,states:l,transitions:u,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const l=new Set,u=s||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{Xr(m).forEach(b=>{u.hasOwnProperty(b)||l.add(b)})})}),l.size&&(Di(l.values()),t.errors.push(function xe(n,e){return new E.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=gi(this,fi(e.animation),t);return{type:1,matchers:aa(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zi(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>gi(this,r,t)),options:Zi(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const l=e.steps.map(u=>{t.currentTime=r;const h=gi(this,u,t);return s=Math.max(s,t.currentTime),h});return t.currentTime=s,{type:3,steps:l,options:Zi(e.options)}}visitAnimate(e,t){const r=function Fl(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Ii(Kt(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=Ii(0,0,"");return l.dynamic=!0,l.strValue=t,l}const s=Kt(t,e);return Ii(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,l=e.styles?e.styles:(0,Fe.oB)({});if(5==l.type)s=this.visitKeyframes(l,t);else{let u=e.styles,h=!1;if(!u){h=!0;const b={};r.easing&&(b.easing=r.easing),u=(0,Fe.oB)(b)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,s=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of s)"string"==typeof h?h===Fe.l3?r.push(h):t.errors.push(new E.vHH(3002,!1)):r.push(he(h));let l=!1,u=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(u=h.get("easing"),h.delete("easing")),!l))for(let m of h.values())if(m.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((h,m)=>{const b=t.collectedStyles.get(t.currentQuerySelector),N=b.get(m);let H=!0;N&&(l!=s&&l>=N.startTime&&s<=N.endTime&&(t.errors.push(function ze(n,e,t,r,s){return new E.vHH(3010,!1)}()),H=!1),l=N.startTime),H&&b.set(m,{startTime:l,endTime:s}),t.options&&function eo(n,e,t){const r=e.params||{},s=Xr(n);s.length&&s.forEach(l=>{r.hasOwnProperty(l)||t.push(function Ae(n){return new E.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Tt(){return new E.vHH(3011,!1)}()),r;let l=0;const u=[];let h=!1,m=!1,b=0;const N=e.steps.map(nn=>{const vn=this._makeStyleAst(nn,t);let pn=null!=vn.offset?vn.offset:function al(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(vn.styles),on=0;return null!=pn&&(l++,on=vn.offset=pn),m=m||on<0||on>1,h=h||on<b,b=on,u.push(on),vn});m&&t.errors.push(function It(){return new E.vHH(3012,!1)}()),h&&t.errors.push(function en(){return new E.vHH(3200,!1)}());const H=e.steps.length;let ee=0;l>0&&l<H?t.errors.push(function Dn(){return new E.vHH(3202,!1)}()):0==l&&(ee=1/(H-1));const ge=H-1,Ie=t.currentTime,et=t.currentAnimateTimings,_t=et.duration;return N.forEach((nn,vn)=>{const pn=ee>0?vn==ge?1:ee*vn:u[vn],on=pn*_t;t.currentTime=Ie+et.delay+on,et.duration=on,this._validateStyleAst(nn,t),nn.offset=pn,r.styles.push(nn)}),r}visitReference(e,t){return{type:8,animation:gi(this,fi(e.animation),t),options:Zi(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Zi(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Zi(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[l,u]=function Jc(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ol,"")),n=n.replace(/@\*/g,ve).replace(/@\w+/g,t=>ve+"-"+t.slice(1)).replace(/:animating/g,Nt),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+l:l,de(t.collectedStyles,t.currentQuerySelector,new Map);const h=gi(this,fi(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:s.limit||0,optional:!!s.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:Zi(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ln(){return new E.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Kt(e.timings,t.errors,!0);return{type:12,animation:gi(this,fi(e.animation),t),timings:r,options:null}}}class eu{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Zi(n){return n?(n=ye(n)).params&&(n.params=function Rs(n){return n?ye(n):null}(n.params)):n={},n}function Ii(n,e,t){return{duration:n,delay:e,easing:t}}function Gs(n,e,t,r,s,l,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:l,totalTime:s+l,easing:u,subTimeline:h}}class la{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ti=new RegExp(":enter","g"),tu=new RegExp(":leave","g");function Yi(n,e,t,r,s,l=new Map,u=new Map,h,m,b=[]){return(new cl).buildKeyframes(n,e,t,r,s,l,u,h,m,b)}class cl{buildKeyframes(e,t,r,s,l,u,h,m,b,N=[]){b=b||new la;const H=new $i(e,t,b,s,l,N,[]);H.options=m;const ee=m.delay?un(m.delay):0;H.currentTimeline.delayNextStep(ee),H.currentTimeline.setStyles([u],null,H.errors,m),gi(this,r,H);const ge=H.timelines.filter(Ie=>Ie.containsAnimation());if(ge.length&&h.size){let Ie;for(let et=ge.length-1;et>=0;et--){const _t=ge[et];if(_t.element===t){Ie=_t;break}}Ie&&!Ie.allowOnlyTimelineStyles()&&Ie.setStyles([h],null,H.errors,m)}return ge.length?ge.map(Ie=>Ie.buildKeyframes()):[Gs(t,[],[],[],0,ee,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),l=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,s,s.options);l!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let l=t.currentTimeline.currentTime;const u=null!=r.duration?un(r.duration):null,h=null!=r.delay?un(r.delay):null;return 0!==u&&e.forEach(m=>{const b=t.appendInstructionToTimeline(m,u,h);l=Math.max(l,b.duration+b.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),gi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const l=e.options;if(l&&(l.params||l.delay)&&(s=t.createSubContext(l),s.transformIntoNewTimeline(),null!=l.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=ni);const u=un(l.delay);s.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>gi(this,u,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?un(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);l&&h.delayNextStep(l),gi(this,u,h),s=Math.max(s,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Kt(t.params?qi(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.hasCurrentStyleProperties()&&r.forwardFrame();const l=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(l):r.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,l=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*l),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(s+l),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},l=s.delay?un(s.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ni);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((b,N)=>{t.currentQueryIndex=N;const H=t.createSubContext(e.options,b);l&&H.delayNextStep(l),b===t.element&&(m=H.currentTimeline),gi(this,e.animation,H),H.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,H.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,l=e.timings,u=Math.abs(l.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const N=t.currentTimeline;m&&N.delayNextStep(m);const H=N.currentTime;gi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-H+(s.startTime-r.currentTimeline.startTime)}}const ni={};class $i{constructor(e,t,r,s,l,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=l,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ni,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Ti(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=un(r.duration)),null!=r.delay&&(s.delay=un(r.delay));const l=r.params;if(l){let u=s.params;u||(u=this.options.params={}),Object.keys(l).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=qi(l[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,l=new $i(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=ni,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},l=new Ws(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(l),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,l,u){let h=[];if(s&&h.push(this.element),e.length>0){e=(e=e.replace(ti,"."+this._enterClassName)).replace(tu,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),h.push(...b)}return!l&&0==h.length&&u.push(function Pt(n){return new E.vHH(3014,!1)}()),h}}class Ti{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ti(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Fe.l3),this._currentKeyframe.set(t,Fe.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&this._previousKeyframe.set("easing",t);const l=s&&s.params||{},u=function Ks(n,e){const t=new Map;let r;return n.forEach(s=>{if("*"===s){r=r||e.keys();for(let l of r)t.set(l,Fe.l3)}else qt(s,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of u){const b=qi(m,l,r);this._pendingStyles.set(h,b),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Fe.l3),this._updateStyle(h,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const s=this._styleSummary.get(r);(!s||t.time>s.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((h,m)=>{const b=qt(h,new Map,this._backFill);b.forEach((N,H)=>{N===Fe.k1?e.add(H):N===Fe.l3&&t.add(H)}),r||b.set("offset",m/this.duration),s.push(b)});const l=e.size?Di(e.values()):[],u=t.size?Di(t.values()):[];if(r){const h=s[0],m=new Map(h);h.set("offset",0),m.set("offset",1),s=[h,m]}return Gs(this.element,s,l,u,this.duration,this.startTime,this.easing,!1)}}class Ws extends Ti{constructor(e,t,r,s,l,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=l,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],u=r+t,h=t/u,m=qt(e[0]);m.set("offset",0),l.push(m);const b=qt(e[0]);b.set("offset",Bl(h)),l.push(b);const N=e.length-1;for(let H=1;H<=N;H++){let ee=qt(e[H]);const ge=ee.get("offset");ee.set("offset",Bl((t+ge*r)/u)),l.push(ee)}r=u,t=0,s="",e=l}return Gs(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function Bl(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Or{}const ul=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class us extends Or{normalizePropertyName(e,t){return Hs(e)}normalizeStyleValue(e,t,r,s){let l="";const u=r.toString().trim();if(ul.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&s.push(function Ve(n,e){return new E.vHH(3005,!1)}())}return u+l}}function jr(n,e,t,r,s,l,u,h,m,b,N,H,ee){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:l,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:b,postStyleProps:N,totalTime:H,errors:ee}}const Co={};class Do{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function Io(n,e,t,r,s){return n.some(l=>l(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,r):new Map}build(e,t,r,s,l,u,h,m,b,N){const H=[],ee=this.ast.options&&this.ast.options.params||Co,Ie=this.buildStyles(r,h&&h.params||Co,H),et=m&&m.params||Co,_t=this.buildStyles(s,et,H),nn=new Set,vn=new Map,pn=new Map,on="void"===s,Zn={params:ca(et,ee),delay:this.ast.options?.delay},Yn=N?[]:Yi(e,t,this.ast.animation,l,u,Ie,_t,Zn,b,H);let Pr=0;if(Yn.forEach(hc=>{Pr=Math.max(hc.duration+hc.delay,Pr)}),H.length)return jr(t,this._triggerName,r,s,on,Ie,_t,[],[],vn,pn,Pr,H);Yn.forEach(hc=>{const Bh=hc.element,WP=de(vn,Bh,new Set);hc.preStyleProps.forEach(Zg=>WP.add(Zg));const pw=de(pn,Bh,new Set);hc.postStyleProps.forEach(Zg=>pw.add(Zg)),Bh!==t&&nn.add(Bh)});const js=Di(nn.values());return jr(t,this._triggerName,r,s,on,Ie,_t,Yn,js,vn,pn,Pr)}}function ca(n,e){const t=ye(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class kr{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,s=ye(this.defaultParams);return Object.keys(e).forEach(l=>{const u=e[l];null!==u&&(s[l]=u)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((u,h)=>{u&&(u=qi(u,s,t));const m=this.normalizer.normalizePropertyName(h,t);u=this.normalizer.normalizeStyleValue(h,m,u,t),r.set(m,u)})}),r}}class da{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new kr(s.style,s.options&&s.options.params||{},r))}),Wr(this.states,"true","1"),Wr(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Do(e,s,this.states))}),this.fallbackTransition=function $o(n,e,t){return new Do(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(u=>u.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Wr(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Ps=new la;class zo{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],l=jo(this._driver,t,r,[]);if(r.length)throw function gt(n){return new E.vHH(3503,!1)}();this._animations.set(e,l)}_buildPlayer(e,t,r){const s=e.element,l=Mr(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],l=this._animations.get(e);let u;const h=new Map;if(l?(u=Yi(this._driver,t,l,Ur,Ge,new Map,new Map,r,Ps,s),u.forEach(N=>{const H=de(h,N.element,new Map);N.postStyleProps.forEach(ee=>H.set(ee,null))})):(s.push(function Bt(){return new E.vHH(3300,!1)}()),u=[]),s.length)throw function Gt(n){return new E.vHH(3504,!1)}();h.forEach((N,H)=>{N.forEach((ee,ge)=>{N.set(ge,this._driver.computeStyle(H,ge,Fe.l3))})});const b=fr(u.map(N=>{const H=h.get(N.element);return this._buildPlayer(N,new Map,H)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Qt(n){return new E.vHH(3301,!1)}();return t}listen(e,t,r,s){const l=we(t,"","","");return Kn(this._getPlayer(e),r,l,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const l=this._getPlayer(e);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const Os="ng-animate-queued",q="ng-animate-disabled",rt=[],Mt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xn="__ng_removed";class dr{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Ct(n){return n??null}(r?e.value:e),r){const l=ye(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const hr="void",Ln=new dr(hr);class mi{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ri(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.has(t))throw function Gn(n,e){return new E.vHH(3302,!1)}();if(null==r||0==r.length)throw function ir(n){return new E.vHH(3303,!1)}();if(!function zi(n){return"start"==n||"done"==n}(r))throw function sr(n,e){return new E.vHH(3400,!1)}();const l=de(this._elementListeners,e,[]),u={name:t,phase:r,callback:s};l.push(u);const h=de(this._engine.statesByElement,e,new Map);return h.has(t)||(ri(e,_e),ri(e,_e+"-"+t),h.set(t,Ln)),()=>{this._engine.afterFlush(()=>{const m=l.indexOf(u);m>=0&&l.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function $n(n){return new E.vHH(3401,!1)}();return t}trigger(e,t,r,s=!0){const l=this._getTrigger(t),u=new Hr(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ri(e,_e),ri(e,_e+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const b=new dr(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&b.absorbOptions(m.options),h.set(t,b),m||(m=Ln),b.value!==hr&&m.value===b.value){if(!function pc(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const l=t[s];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(m.params,b.params)){const et=[],_t=l.matchStyles(m.value,m.params,et),nn=l.matchStyles(b.value,b.params,et);et.length?this._engine.reportError(et):this._engine.afterFlush(()=>{lr(e,_t),dn(e,nn)})}return}const ee=de(this._engine.playersByElement,e,[]);ee.forEach(et=>{et.namespaceId==this.id&&et.triggerName==t&&et.queued&&et.destroy()});let ge=l.matchTransition(m.value,b.value,e,b.params),Ie=!1;if(!ge){if(!s)return;ge=l.fallbackTransition,Ie=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:ge,fromState:m,toState:b,player:u,isFallbackTransition:Ie}),Ie||(ri(e,Os),u.onStart(()=>{Gi(e,Os)})),u.onDone(()=>{let et=this.players.indexOf(u);et>=0&&this.players.splice(et,1);const _t=this._engine.playersByElement.get(e);if(_t){let nn=_t.indexOf(u);nn>=0&&_t.splice(nn,1)}}),this.players.push(u),ee.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ve,!0);r.forEach(s=>{if(s[Xn])return;const l=this._engine.fetchNamespacesByElement(s);l.size?l.forEach(u=>u.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const l=this._engine.statesByElement.get(e),u=new Map;if(l){const h=[];if(l.forEach((m,b)=>{if(u.set(b,m.value),this._triggers.has(b)){const N=this.trigger(e,b,hr,s);N&&h.push(N)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&fr(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(l=>{const u=l.name;if(s.has(u))return;s.add(u);const m=this._triggers.get(u).fallbackTransition,b=r.get(u)||Ln,N=new dr(hr),H=new Hr(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:b,toState:N,player:H,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(e):[];if(l&&l.length)s=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const l=e[Xn];(!l||l===Mt)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ri(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const l=r.element,u=this._elementListeners.get(l);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=we(l,r.triggerName,r.fromState.value,r.toState.value);m._data=e,Kn(r.player,h.phase,m,h.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const l=r.transition.ast.depCount,u=s.transition.ast.depCount;return 0==l||0==u?l-u:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class pr{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new mi(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,h=this.driver.getParentElement(t);for(;h;){const m=s.get(h);if(m){const b=r.indexOf(m);r.splice(b+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}u||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let s of r.values())if(s.namespaceId){const l=this._fetchNamespace(s.namespaceId);l&&t.add(l)}return t}trigger(e,t,r,s){if(On(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!On(t))return;const l=t[Xn];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ri(e,q)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gi(e,q))}removeNode(e,t,r,s){if(On(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,l){this.collectedLeaveElements.push(t),t[Xn]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,r,s,l){return On(t)?this._fetchNamespace(e).listen(t,r,s,l):()=>{}}_buildInstruction(e,t,r,s,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,ve,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Nt,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return fr(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Xn];if(t&&t.setForRemoval){if(e[Xn]=Mt,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(q)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ri(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?fr(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function Br(n){return new E.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new la,s=[],l=new Map,u=[],h=new Map,m=new Map,b=new Map,N=new Set;this.disabledNodes.forEach(Cn=>{N.add(Cn);const Fn=this.driver.query(Cn,".ng-animate-queued",!0);for(let Qn=0;Qn<Fn.length;Qn++)N.add(Fn[Qn])});const H=this.bodyNode,ee=Array.from(this.statesByElement.keys()),ge=Go(ee,this.collectedEnterElements),Ie=new Map;let et=0;ge.forEach((Cn,Fn)=>{const Qn=Ur+et++;Ie.set(Fn,Qn),Cn.forEach(Gr=>ri(Gr,Qn))});const _t=[],nn=new Set,vn=new Set;for(let Cn=0;Cn<this.collectedLeaveElements.length;Cn++){const Fn=this.collectedLeaveElements[Cn],Qn=Fn[Xn];Qn&&Qn.setForRemoval&&(_t.push(Fn),nn.add(Fn),Qn.hasAnimation?this.driver.query(Fn,".ng-star-inserted",!0).forEach(Gr=>nn.add(Gr)):vn.add(Fn))}const pn=new Map,on=Go(ee,Array.from(nn));on.forEach((Cn,Fn)=>{const Qn=Ge+et++;pn.set(Fn,Qn),Cn.forEach(Gr=>ri(Gr,Qn))}),e.push(()=>{ge.forEach((Cn,Fn)=>{const Qn=Ie.get(Fn);Cn.forEach(Gr=>Gi(Gr,Qn))}),on.forEach((Cn,Fn)=>{const Qn=pn.get(Fn);Cn.forEach(Gr=>Gi(Gr,Qn))}),_t.forEach(Cn=>{this.processLeaveNode(Cn)})});const Zn=[],Yn=[];for(let Cn=this._namespaceList.length-1;Cn>=0;Cn--)this._namespaceList[Cn].drainQueuedTransitions(t).forEach(Qn=>{const Gr=Qn.player,Uo=Qn.element;if(Zn.push(Gr),this.collectedEnterElements.length){const Ra=Uo[Xn];if(Ra&&Ra.setForMove){if(Ra.previousTriggersValues&&Ra.previousTriggersValues.has(Qn.triggerName)){const Yg=Ra.previousTriggersValues.get(Qn.triggerName),Xc=this.statesByElement.get(Qn.element);if(Xc&&Xc.has(Qn.triggerName)){const wI=Xc.get(Qn.triggerName);wI.value=Yg,Xc.set(Qn.triggerName,wI)}}return void Gr.destroy()}}const Fd=!H||!this.driver.containsElement(H,Uo),fc=pn.get(Uo),sp=Ie.get(Uo),ms=this._buildInstruction(Qn,r,sp,fc,Fd);if(ms.errors&&ms.errors.length)return void Yn.push(ms);if(Fd)return Gr.onStart(()=>lr(Uo,ms.fromStyles)),Gr.onDestroy(()=>dn(Uo,ms.toStyles)),void s.push(Gr);if(Qn.isFallbackTransition)return Gr.onStart(()=>lr(Uo,ms.fromStyles)),Gr.onDestroy(()=>dn(Uo,ms.toStyles)),void s.push(Gr);const ZP=[];ms.timelines.forEach(Ra=>{Ra.stretchStartingKeyframe=!0,this.disabledNodes.has(Ra.element)||ZP.push(Ra)}),ms.timelines=ZP,r.append(Uo,ms.timelines),u.push({instruction:ms,player:Gr,element:Uo}),ms.queriedElements.forEach(Ra=>de(h,Ra,[]).push(Gr)),ms.preStyleProps.forEach((Ra,Yg)=>{if(Ra.size){let Xc=m.get(Yg);Xc||m.set(Yg,Xc=new Set),Ra.forEach((wI,iM)=>Xc.add(iM))}}),ms.postStyleProps.forEach((Ra,Yg)=>{let Xc=b.get(Yg);Xc||b.set(Yg,Xc=new Set),Ra.forEach((wI,iM)=>Xc.add(iM))})});if(Yn.length){const Cn=[];Yn.forEach(Fn=>{Cn.push(function xn(n,e){return new E.vHH(3505,!1)}())}),Zn.forEach(Fn=>Fn.destroy()),this.reportError(Cn)}const Pr=new Map,js=new Map;u.forEach(Cn=>{const Fn=Cn.element;r.has(Fn)&&(js.set(Fn,Fn),this._beforeAnimationBuild(Cn.player.namespaceId,Cn.instruction,Pr))}),s.forEach(Cn=>{const Fn=Cn.element;this._getPreviousPlayers(Fn,!1,Cn.namespaceId,Cn.triggerName,null).forEach(Gr=>{de(Pr,Fn,[]).push(Gr),Gr.destroy()})});const hc=_t.filter(Cn=>io(Cn,m,b)),Bh=new Map;vr(Bh,this.driver,vn,b,Fe.l3).forEach(Cn=>{io(Cn,m,b)&&hc.push(Cn)});const pw=new Map;ge.forEach((Cn,Fn)=>{vr(pw,this.driver,new Set(Cn),m,Fe.k1)}),hc.forEach(Cn=>{const Fn=Bh.get(Cn),Qn=pw.get(Cn);Bh.set(Cn,new Map([...Array.from(Fn?.entries()??[]),...Array.from(Qn?.entries()??[])]))});const Zg=[],KP=[],qP={};u.forEach(Cn=>{const{element:Fn,player:Qn,instruction:Gr}=Cn;if(r.has(Fn)){if(N.has(Fn))return Qn.onDestroy(()=>dn(Fn,Gr.toStyles)),Qn.disabled=!0,Qn.overrideTotalTime(Gr.totalTime),void s.push(Qn);let Uo=qP;if(js.size>1){let fc=Fn;const sp=[];for(;fc=fc.parentNode;){const ms=js.get(fc);if(ms){Uo=ms;break}sp.push(fc)}sp.forEach(ms=>js.set(ms,Uo))}const Fd=this._buildAnimation(Qn.namespaceId,Gr,Pr,l,pw,Bh);if(Qn.setRealPlayer(Fd),Uo===qP)Zg.push(Qn);else{const fc=this.playersByElement.get(Uo);fc&&fc.length&&(Qn.parentPlayer=fr(fc)),s.push(Qn)}}else lr(Fn,Gr.fromStyles),Qn.onDestroy(()=>dn(Fn,Gr.toStyles)),KP.push(Qn),N.has(Fn)&&s.push(Qn)}),KP.forEach(Cn=>{const Fn=l.get(Cn.element);if(Fn&&Fn.length){const Qn=fr(Fn);Cn.setRealPlayer(Qn)}}),s.forEach(Cn=>{Cn.parentPlayer?Cn.syncPlayerEvents(Cn.parentPlayer):Cn.destroy()});for(let Cn=0;Cn<_t.length;Cn++){const Fn=_t[Cn],Qn=Fn[Xn];if(Gi(Fn,Ge),Qn&&Qn.hasAnimation)continue;let Gr=[];if(h.size){let Fd=h.get(Fn);Fd&&Fd.length&&Gr.push(...Fd);let fc=this.driver.query(Fn,Nt,!0);for(let sp=0;sp<fc.length;sp++){let ms=h.get(fc[sp]);ms&&ms.length&&Gr.push(...ms)}}const Uo=Gr.filter(Fd=>!Fd.destroyed);Uo.length?Wo(this,Fn,Uo):this.processLeaveNode(Fn)}return _t.length=0,Zg.forEach(Cn=>{this.players.push(Cn),Cn.onDone(()=>{Cn.destroy();const Fn=this.players.indexOf(Cn);this.players.splice(Fn,1)}),Cn.play()}),Zg}elementContainsData(e,t){let r=!1;const s=t[Xn];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,l){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!l||l==hr;h.forEach(b=>{b.queued||!m&&b.triggerName!=s||u.push(b)})}}return(r||s)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||s&&s!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const l=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const b=m.element,N=b!==l,H=de(r,b,[]);this._getPreviousPlayers(b,N,u,h,t.toState).forEach(ge=>{const Ie=ge.getRealPlayer();Ie.beforeDestroy&&Ie.beforeDestroy(),ge.destroy(),H.push(ge)})}lr(l,t.fromStyles)}_buildAnimation(e,t,r,s,l,u){const h=t.triggerName,m=t.element,b=[],N=new Set,H=new Set,ee=t.timelines.map(Ie=>{const et=Ie.element;N.add(et);const _t=et[Xn];if(_t&&_t.removedBeforeQueried)return new Fe.ZN(Ie.duration,Ie.delay);const nn=et!==m,vn=function Pa(n){const e=[];return dl(n,e),e}((r.get(et)||rt).map(Pr=>Pr.getRealPlayer())).filter(Pr=>!!Pr.element&&Pr.element===et),pn=l.get(et),on=u.get(et),Zn=Mr(0,this._normalizer,0,Ie.keyframes,pn,on),Yn=this._buildPlayer(Ie,Zn,vn);if(Ie.subTimeline&&s&&H.add(et),nn){const Pr=new Hr(e,h,et);Pr.setRealPlayer(Yn),b.push(Pr)}return Yn});b.forEach(Ie=>{de(this.playersByQueriedElement,Ie.element,[]).push(Ie),Ie.onDone(()=>function Qi(n,e,t){let r=n.get(e);if(r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Ie.element,Ie))}),N.forEach(Ie=>ri(Ie,ft));const ge=fr(ee);return ge.onDestroy(()=>{N.forEach(Ie=>Gi(Ie,ft)),dn(m,t.toStyles)}),H.forEach(Ie=>{de(s,Ie,[]).push(ge)}),ge}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Fe.ZN(e.duration,e.delay)}}class Hr{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Fe.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(s=>Kn(e,r,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){de(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function On(n){return n&&1===n.nodeType}function ds(n,e){const t=n.style.display;return n.style.display=e??"none",t}function vr(n,e,t,r,s){const l=[];t.forEach(m=>l.push(ds(m)));const u=[];r.forEach((m,b)=>{const N=new Map;m.forEach(H=>{const ee=e.computeStyle(b,H,s);N.set(H,ee),(!ee||0==ee.length)&&(b[Xn]=vt,u.push(b))}),n.set(b,N)});let h=0;return t.forEach(m=>ds(m,l[h++])),u}function Go(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const s=new Set(e),l=new Map;function u(h){if(!h)return 1;let m=l.get(h);if(m)return m;const b=h.parentNode;return m=t.has(b)?b:s.has(b)?1:u(b),l.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}function ri(n,e){n.classList?.add(e)}function Gi(n,e){n.classList?.remove(e)}function Wo(n,e,t){fr(t).onDone(()=>n.processLeaveNode(e))}function dl(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Fe.ZE?dl(r.players,e):e.push(r)}}function io(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(l=>s.add(l)):e.set(n,r),t.delete(n),!0}class vs{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,l)=>{},this._transitionEngine=new pr(e,t,r),this._timelineEngine=new zo(e,t,r),this._transitionEngine.onRemovalComplete=(s,l)=>this.onRemovalComplete(s,l)}registerTrigger(e,t,r,s,l){const u=e+"-"+s;let h=this._triggerCache[u];if(!h){const m=[],N=jo(this._driver,l,m,[]);if(m.length)throw function Lt(n,e){return new E.vHH(3404,!1)}();h=function ua(n,e,t){return new da(n,e,t)}(s,N,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,s,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[l,u]=qe(r);this._timelineEngine.command(l,t,u,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,l){if("@"==r.charAt(0)){const[u,h]=qe(r);return this._timelineEngine.listen(u,t,h,l)}return this._transitionEngine.listen(e,t,r,s,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}var ha=U(6895);let gc=(()=>{class n extends Fe._j{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:E.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?(0,Fe.vP)(t):t;return To(this._renderer,null,r,"register",[s]),new mc(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.FYo),E.LFG(ha.K0))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class mc extends Fe.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new fl(this._id,e,t||{},this._renderer)}}class fl{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return To(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function To(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const ao="@.disabled";let Ul=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(l,u)=>{const h=u?.parentNode(l);h&&u.removeChild(h,l)}}createRenderer(t,r){const l=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let N=this._rendererCache.get(l);return N||(N=new ks("",l,this.engine),this._rendererCache.set(l,N)),N}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=N=>{Array.isArray(N)?N.forEach(m):this.engine.registerTrigger(u,h,t,N.name,N)};return r.data.animation.forEach(m),new lo(this,h,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[u,h]=l;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.FYo),E.LFG(vs),E.LFG(E.R0b))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class ks{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==ao?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class lo extends ks{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==ao?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function fa(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.slice(1),u="";return"@"!=l.charAt(0)&&([l,u]=function ru(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(l)),this.engine.listen(this.namespaceId,s,l,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let pa=(()=>{class n extends vs{constructor(t,r,s,l){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ha.K0),E.LFG(Et),E.LFG(Or),E.LFG(E.z2F))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=[{provide:Fe._j,useClass:gc},{provide:Or,useFactory:function pl(){return new us}},{provide:vs,useClass:pa},{provide:E.FYo,useFactory:function Vl(n,e,t){return new Ul(n,e,t)},deps:[C.se,vs,E.R0b]}],$r=[{provide:Et,useClass:Qe},{provide:E.QbO,useValue:"NoopAnimations"},...Oa];let jl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:$r,imports:[C.b2]}),n})();var ka=U(4466),Hl=U(529),$l=U(2474),yi=U(2011),Na=U(7579),Oi=U(9646),co=U(9751),Zs=U(8996),yc=U(6451),ga=U(5363),di=U(3900),Ar=U(4004),uo=U(3151),zl=U(590),Zo=U(576);function Kr(n,e){return(0,Zo.m)(e)?(0,di.w)(()=>n,e):(0,di.w)(()=>n)}var Yo=U(9468),So=U(9300),or=U(5813);U(5867);var ct=U(5861),Jr=U(9681),hs=U(4859),X=U(2090),Ni=U(1877);const yl=new Map,Va={activated:!1,tokenObservers:[]},ja={initialized:!1,enabled:!1};function zr(n){return yl.get(n)||Va}function ii(n,e){yl.set(n,e)}function vi(){return ja}class vc{constructor(e,t,r,s,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=s,s>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ct.Z)(function*(){t.stop();try{t.pending=new X.BH,yield function Ec(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new X.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ei=new X.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Jo(n){if(!zr(n).activated)throw Ei.create("use-before-activation",{appName:n.name})}function fo(n,e){return wa.apply(this,arguments)}function wa(){return(wa=(0,ct.Z)(function*({url:n,body:e},t){var r,s;const l={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const ge=yield u.getHeartbeatsHeader();ge&&(l["X-Firebase-Client"]=ge)}const h={method:"POST",body:JSON.stringify(e),headers:l};let m,b;try{m=yield fetch(n,h)}catch(ge){throw Ei.create("fetch-network-error",{originalErrorMessage:null===(r=ge)||void 0===r?void 0:r.message})}if(200!==m.status)throw Ei.create("fetch-status-error",{httpStatus:m.status});try{b=yield m.json()}catch(ge){throw Ei.create("fetch-parse-error",{originalErrorMessage:null===(s=ge)||void 0===s?void 0:s.message})}const N=b.ttl.match(/^([\d.]+)(s)$/);if(!N||!N[2]||isNaN(Number(N[1])))throw Ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const H=1e3*Number(N[1]),ee=Date.now();return{token:b.token,expireTimeMillis:ee+H,issuedAtTimeMillis:ee}})).apply(this,arguments)}function Hu(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const vl="firebase-app-check-store";let El=null;function $u(){return El||(El=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var l;e(Ei.create("storage-open",{originalErrorMessage:null===(l=s.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(vl,{keyPath:"compositeKey"})}}catch(r){e(Ei.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),El)}function Yl(){return(Yl=(0,ct.Z)(function*(n,e){const r=(yield $u()).transaction(vl,"readwrite"),l=r.objectStore(vl).put({compositeKey:n,value:e});return new Promise((u,h)=>{l.onsuccess=m=>{u()},r.onerror=m=>{var b;h(Ei.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const bc=new Ni.Yd("@firebase/app-check");function I(n,e){return(0,X.hl)()?function zu(n,e){return function wl(n,e){return Yl.apply(this,arguments)}(function Ys(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{bc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function F(){return vi().enabled}function K(){return ue.apply(this,arguments)}function ue(){return(ue=(0,ct.Z)(function*(){const n=vi();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ht={error:"UNKNOWN_ERROR"};function zt(n){return X.US.encodeString(JSON.stringify(n),!1)}function Vn(n){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,ct.Z)(function*(n,e=!1){const t=n.app;Jo(t);const r=zr(t);let l,s=r.token;if(!s){const m=yield r.cachedTokenPromise;m&&Mo(m)&&(s=m)}if(!e&&s&&Mo(s))return{token:s.token};let h,u=!1;if(F()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fo(Hu(t,yield K()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),u=!0);const m=yield r.exchangeTokenPromise;return yield I(t,m),ii(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),s=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?bc.warn(m.message):bc.error(m),l=m}return s?(h={token:s.token},ii(t,Object.assign(Object.assign({},r),{token:s})),yield I(t,s)):h=Ro(l),u&&ts(t,h),h})).apply(this,arguments)}function Lr(n,e){const t=zr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ii(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function es(n){const{app:e}=n,t=zr(e);let r=t.tokenRefresher;r||(r=function Fs(n){const{app:e}=n;return new vc((0,ct.Z)(function*(){let r;if(r=zr(e).token?yield Vn(n,!0):yield Vn(n),r.error)throw r.error}),()=>!0,()=>{const t=zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ii(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ts(n,e){const t=zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Mo(n){return n.expireTimeMillis-Date.now()>0}function Ro(n){return{token:zt(ht),error:n}}class Cc{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=zr(this.app);for(const t of e)Lr(this.app,t.next);return Promise.resolve()}}const kn="app-check-internal";!function Jn(){(0,Jr._registerComponent)(new hs.wA("app-check",n=>function Gu(n,e){return new Cc(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kn).initialize()})),(0,Jr._registerComponent)(new hs.wA(kn,n=>function op(n){return{getToken:e=>Vn(n,e),addTokenListener:e=>function ar(n,e,t,r){const{app:s}=n,l=zr(s),u={next:t,error:r,type:e};if(ii(s,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&Mo(l.token)){const h=l.token;Promise.resolve().then(()=>{t({token:h.token}),es(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>es(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lr(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jr.registerVersion)("@firebase/app-check","0.5.12")}();class si{constructor(){return(0,or.vb)("app-check")}}typeof window<"u"&&window;var Zu=U(1039);const Vd=new E.OlP("angularfire2.auth.use-emulator"),jd=new E.OlP("angularfire2.auth.settings"),Yu=new E.OlP("angularfire2.auth.tenant-id"),Hh=new E.OlP("angularfire2.auth.langugage-code"),Qu=new E.OlP("angularfire2.auth.use-device-language"),Cl=new E.OlP("angularfire.auth.persistence"),Mc=(n,e,t,r,s,l,u,h)=>(0,yi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=s,l&&m.useDeviceLanguage(),u)for(const[b,N]of Object.entries(u))m.settings[b]=N;return h&&m.setPersistence(h),m},[t,r,s,l,u,h]);let qa=(()=>{class n{constructor(t,r,s,l,u,h,m,b,N,H,ee,ge){const Ie=new Na.x,et=(0,Oi.of)(void 0).pipe((0,ga.Q)(u.outsideAngular),(0,di.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,5881)))),(0,Ar.U)(()=>(0,yi.on)(t,l,r)),(0,Ar.U)(_t=>Mc(_t,l,h,b,N,H,m,ee)),(0,uo.d)({bufferSize:1,refCount:!1}));if((0,ha.PM)(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Oi.of)(null);else{et.pipe((0,zl.P)()).subscribe();const nn=et.pipe((0,di.w)(on=>on.getRedirectResult().then(Zn=>Zn,()=>null)),or.iC,(0,uo.d)({bufferSize:1,refCount:!1})),vn=et.pipe((0,di.w)(on=>new co.y(Zn=>({unsubscribe:l.runOutsideAngular(()=>on.onAuthStateChanged(Yn=>Zn.next(Yn),Yn=>Zn.error(Yn),()=>Zn.complete()))})))),pn=et.pipe((0,di.w)(on=>new co.y(Zn=>({unsubscribe:l.runOutsideAngular(()=>on.onIdTokenChanged(Yn=>Zn.next(Yn),Yn=>Zn.error(Yn),()=>Zn.complete()))}))));this.authState=nn.pipe(Kr(vn),(0,Yo.R)(u.outsideAngular),(0,ga.Q)(u.insideAngular)),this.user=nn.pipe(Kr(pn),(0,Yo.R)(u.outsideAngular),(0,ga.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,di.w)(on=>on?(0,Zs.D)(on.getIdToken()):(0,Oi.of)(null))),this.idTokenResult=this.user.pipe((0,di.w)(on=>on?(0,Zs.D)(on.getIdTokenResult()):(0,Oi.of)(null))),this.credential=(0,yc.T)(nn,Ie,this.authState.pipe((0,So.h)(on=>!on))).pipe((0,Ar.U)(on=>on?.user?on:null),(0,Yo.R)(u.outsideAngular),(0,ga.Q)(u.insideAngular))}return(0,yi.pX)(this,et,l,{spy:{apply:(_t,nn,vn)=>{(_t.startsWith("signIn")||_t.startsWith("createUser"))&&vn.then(pn=>Ie.next(pn))}}})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(yi.Dh),E.LFG(yi.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(or.HU),E.LFG(Vd,8),E.LFG(jd,8),E.LFG(Yu,8),E.LFG(Hh,8),E.LFG(Qu,8),E.LFG(Cl,8),E.LFG(si,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Qg=(()=>{class n{constructor(){Zu.Z.registerVersion("angularfire",or.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[qa]}),n})();var lp=U(4986),cp=U(8675),Rc=U(4482),cu=U(5403);function Hd(){return(0,Rc.e)((n,e)=>{let t,r=!1;n.subscribe((0,cu.x)(e,s=>{const l=t;t=s,r&&e.next([l,s]),r=!0}))})}var hn,uu=U(5026),$h=U(1884),$d=(U(5881),U(3942)),Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dl={},Wh=Wh||{},Tn=Gh||self;function Jl(){}function zd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var up="closure_uid_"+(1e9*Math.random()>>>0),yy=0;function gw(n,e,t){return n.call.apply(n.bind,arguments)}function T(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function p(n,e,t){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gw:T).apply(null,arguments)}function _(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function M(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,l){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[s].apply(r,u)}}function G(){this.s=this.s,this.o=this.o}var Ze={};G.prototype.s=!1,G.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function _y(n){return Object.prototype.hasOwnProperty.call(n,up)&&n[up]||(n[up]=++yy)}(this);delete Ze[n]}},G.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const St=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},rn=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in s&&e.call(t,s[l],l,n)};function zn(n){return Array.prototype.concat.apply([],arguments)}function Yr(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function po(n){return/^[\s\xa0]*$/.test(n)}var Bs,Za=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ws(n,e){return-1!=n.indexOf(e)}function Kh(n,e){return n<e?-1:n>e?1:0}e:{var Ju=Tn.navigator;if(Ju){var ed=Ju.userAgent;if(ed){Bs=ed;break e}}Bs=""}function xc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dp(n){const e={};for(const t in n)e[t]=n[t];return e}var hp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function td(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let l=0;l<hp.length;l++)t=hp[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gd(n){return Gd[" "](n),n}Gd[" "]=Jl;var oi,n,qh=ws(Bs,"Opera"),du=ws(Bs,"Trident")||ws(Bs,"MSIE"),Jg=ws(Bs,"Edge"),Li=Jg||du,em=ws(Bs,"Gecko")&&!(ws(Bs.toLowerCase(),"webkit")&&!ws(Bs,"Edge"))&&!(ws(Bs,"Trident")||ws(Bs,"MSIE"))&&!ws(Bs,"Edge"),Pc=ws(Bs.toLowerCase(),"webkit")&&!ws(Bs,"Edge");function tm(){var n=Tn.document;return n?n.documentMode:void 0}e:{var fp="",pp=(n=Bs,em?/rv:([^\);]+)(\)|;)/.exec(n):Jg?/Edge\/([\d\.]+)/.exec(n):du?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pc?/WebKit\/(\S+)/.exec(n):qh?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pp&&(fp=pp?pp[1]:""),du){var Wd=tm();if(null!=Wd&&Wd>parseFloat(fp)){oi=String(Wd);break e}}oi=fp}var nm={};var mw=Tn.document&&du&&(tm()||parseInt(oi,10))||void 0,Ey=function(){if(!Tn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tn.addEventListener("test",Jl,e),Tn.removeEventListener("test",Jl,e)}catch{}return n}();function go(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Zh(n,e){if(go.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(em){e:{try{Gd(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Kd[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zh.Z.h.call(this)}}go.prototype.h=function(){this.defaultPrevented=!0},M(Zh,go);var Kd={2:"touch",3:"pen",4:"mouse"};Zh.prototype.h=function(){Zh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Oc="closure_listenable_"+(1e6*Math.random()|0),wy=0;function by(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++wy,this.ca=this.fa=!1}function Yh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _p(n){this.src=n,this.g={},this.h=0}function yp(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],s=St(r,e);(l=0<=s)&&Array.prototype.splice.call(r,s,1),l&&(Yh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vp(n,e,t,r){for(var s=0;s<n.length;++s){var l=n[s];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return s}return-1}_p.prototype.add=function(n,e,t,r,s){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=vp(n,e,r,s);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new by(e,this.src,l,!!r,s)).fa=t,n.push(e)),e};var qd="closure_lm_"+(1e6*Math.random()|0),O={};function y(n,e,t,r,s){if(r&&r.once)return $(n,e,t,r,s);if(Array.isArray(e)){for(var l=0;l<e.length;l++)y(n,e[l],t,r,s);return null}return t=cr(t),n&&n[Oc]?n.N(e,t,Xu(r)?!!r.capture:!!r,s):g(n,e,t,!1,r,s)}function g(n,e,t,r,s,l){if(!e)throw Error("Invalid event type");var u=Xu(s)?!!s.capture:!!s,h=an(n);if(h||(n[qd]=h=new _p(n)),(t=h.add(e,t,r,u,l)).proxy)return t;if(r=function R(){var e=Ht;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ey||(s=u),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(pt(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $(n,e,t,r,s){if(Array.isArray(e)){for(var l=0;l<e.length;l++)$(n,e[l],t,r,s);return null}return t=cr(t),n&&n[Oc]?n.O(e,t,Xu(r)?!!r.capture:!!r,s):g(n,e,t,!0,r,s)}function se(n,e,t,r,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)se(n,e[l],t,r,s);else r=Xu(r)?!!r.capture:!!r,t=cr(t),n&&n[Oc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vp(l=n.g[e],t,r,s))&&(Yh(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=an(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vp(e,t,r,s)),(t=-1<n?e[n]:null)&&Be(t))}function Be(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Oc])yp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(pt(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=an(e))?(yp(t,n),0==t.h&&(t.src=null,e[qd]=null)):Yh(n)}}}function pt(n){return n in O?O[n]:O[n]="on"+n}function Ht(n,e){if(n.ca)n=!0;else{e=new Zh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Be(n),n=t.call(r,e)}return n}function an(n){return(n=n[qd])instanceof _p?n:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function cr(n){return"function"==typeof n?n:(n[fn]||(n[fn]=function(e){return n.handleEvent(e)}),n[fn])}function wr(){G.call(this),this.i=new _p(this),this.P=this,this.I=null}function br(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new go(e,n);else if(e instanceof go)e.target=e.target||n;else{var s=e;td(e=new go(r,n),s)}if(s=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];s=Fi(u,r,!0,e)&&s}if(s=Fi(u=e.g=n,r,!0,e)&&s,s=Fi(u,r,!1,e)&&s,t)for(l=0;l<t.length;l++)s=Fi(u=e.g=t[l],r,!1,e)&&s}function Fi(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&yp(n.i,u),s=!1!==h.call(m,r)&&s}}return s&&!r.defaultPrevented}M(wr,G),wr.prototype[Oc]=!0,wr.prototype.removeEventListener=function(n,e,t,r){se(this,n,e,t,r)},wr.prototype.M=function(){if(wr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Yh(t[r]);delete n.g[e],n.h--}}this.I=null},wr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},wr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rs=Tn.JSON.stringify;function Zd(){var n=Sy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Dy,kc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bI,n=>n.reset());class bI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function CI(n){Tn.setTimeout(()=>{throw n},0)}function Cy(n,e){Dy||function Iy(){var n=Tn.Promise.resolve(void 0);Dy=function(){n.then(DI)}}(),Ty||(Dy(),Ty=!0),Sy.add(n,e)}var Ty=!1,Sy=new class Ep{constructor(){this.h=this.g=null}add(e,t){const r=kc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function DI(){for(var n;n=Zd();){try{n.h.call(n.g)}catch(t){CI(t)}var e=kc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ty=!1}function wp(n,e){wr.call(this),this.h=n||1,this.g=e||Tn,this.j=p(this.kb,this),this.l=Date.now()}function _w(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ay(n,e,t){if("function"==typeof n)t&&(n=p(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=p(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tn.setTimeout(n,e||0)}function Qh(n){n.g=Ay(()=>{n.g=null,n.i&&(n.i=!1,Qh(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}M(wp,wr),(hn=wp.prototype).da=!1,hn.S=null,hn.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),br(this,"tick"),this.da&&(_w(this),this.start()))}},hn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},hn.M=function(){wp.Z.M.call(this),_w(this),delete this.g};class II extends G{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qh(this)}M(){super.M(),this.g&&(Tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nc(n){G.call(this),this.h=n,this.g={}}M(Nc,G);var Xh=[];function yw(n,e,t,r){Array.isArray(t)||(t&&(Xh[0]=t.toString()),t=Xh);for(var s=0;s<t.length;s++){var l=y(e,t[s],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function TI(n){xc(n.g,function(e,t){this.g.hasOwnProperty(t)&&Be(e)},n),n.g={}}function bp(){this.g=!0}function Jh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ew(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var l=s[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<s.length;u++)s[u]=""}}}return rs(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Nc.prototype.M=function(){Nc.Z.M.call(this),TI(this)},Nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bp.prototype.Aa=function(){this.g=!1},bp.prototype.info=function(){};var hu={},ww=null;function rm(){return ww=ww||new wr}function im(n){go.call(this,hu.Ma,n)}function sm(n){const e=rm();br(e,new im(e,n))}function MI(n,e){go.call(this,hu.STAT_EVENT,n),this.stat=e}function mo(n){const e=rm();br(e,new MI(e,n))}function RI(n,e){go.call(this,hu.Na,n),this.size=e}function om(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tn.setTimeout(function(){n()},e)}hu.Ma="serverreachability",M(im,go),hu.STAT_EVENT="statevent",M(MI,go),hu.Na="timingevent",M(RI,go);var My={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bw(){}function Ry(){}bw.prototype.h=null;var cm,Yd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function am(){go.call(this,"d")}function lm(){go.call(this,"c")}function ef(){}function Cp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Nc(this),this.P=Dp,this.W=new wp(n=Li?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new um}function um(){this.i=null,this.g="",this.h=!1}M(am,go),M(lm,go),M(ef,bw),ef.prototype.g=function(){return new XMLHttpRequest},ef.prototype.i=function(){return{}},cm=new ef;var Dp=45e3,xy={},dm={};function Py(n,e,t){n.K=1,n.v=ym(tc(e)),n.s=t,n.U=!0,Oy(n,null)}function Oy(n,e){n.F=Date.now(),Ip(n),n.A=tc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),UI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new um,n.g=ev(n.l,t?e:null,!n.s),0<n.O&&(n.L=new II(p(n.Ia,n,n.g),n.O)),yw(n.V,n.g,"readystatechange",n.gb),e=n.H?dp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sm(1),function SI(n,e,t,r,s,l){n.info(function(){if(n.g)if(l)for(var u="",h=l.split("&"),m=0;m<h.length;m++){var b=h[m].split("=");if(1<b.length){var N=b[0];b=b[1];var H=N.split("_");u=2<=H.length&&"type"==H[1]?u+(N+"=")+b+"&":u+(N+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Dw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Iw(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=PI(n,t),s==dm){4==e&&(n.o=4,mo(14),r=!1),Jh(n.j,n.m,null,"[Incomplete Response]");break}if(s==xy){n.o=4,mo(15),Jh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jh(n.j,n.m,s,null),pm(n,s)}Dw(n)&&s!=dm&&s!=xy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yy(e),e.L=!0,mo(11))):(Jh(n.j,n.m,t,"[Invalid Chunked Response]"),Qd(n),Tp(n))}function PI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?dm:(t=Number(e.substring(t,r)),isNaN(t)?xy:(r+=1)+t>e.length?dm:(e=e.substr(r,t),n.C=r+t,e))}function Ip(n){n.Y=Date.now()+n.P,hm(n,n.P)}function hm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=om(p(n.eb,n),e)}function fm(n){n.B&&(Tn.clearTimeout(n.B),n.B=null)}function Tp(n){0==n.l.G||n.I||Lw(n.l,n)}function Qd(n){fm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,_w(n.W),TI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||By(t.i,n)))if(t.I=n.N,!n.J&&By(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Am(t),Fp(t)}th(t),mo(18)}}else t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=om(p(t.ab,t),6e3));if(1>=nf(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else pu(t,11)}else if((n.J||t.g==n)&&Am(t),!po(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const N=b[3];null!=N&&(t.ma=N,t.h.info("VER="+t.ma));const H=b[4];null!=H&&(t.za=H,t.h.info("SVER="+t.za));const ee=b[5];null!=ee&&"number"==typeof ee&&0<ee&&(t.K=r=1.5*ee,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ge=n.g;if(ge){const Ie=ge.g?ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ie){var l=r.i;!l.g&&(ws(Ie,"spdy")||ws(Ie,"quic")||ws(Ie,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(vm(l,l.h),l.h=null))}if(r.D){const et=ge.g?ge.g.getResponseHeader("X-HTTP-Session-Id"):null;et&&(r.sa=et,Ai(r.F,r.D,et))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=HI(r,r.H?r.la:null,r.W),u.J){Em(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(fm(h),Ip(h)),r.g=u}else Sm(r);0<t.l.length&&Jd(t)}else"stop"!=b[0]&&"close"!=b[0]||pu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?pu(t,7):Cm(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}sm(4)}catch{}}function ky(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zd(n)||"string"==typeof n)rn(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(zd(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function OI(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(zd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var l=0;l<s;l++)e.call(void 0,r[l],t&&t[l],n)}}function bs(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof bs)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Sp(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];nd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)nd(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function nd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(hn=Cp.prototype).setTimeout=function(n){this.P=n},hn.gb=function(n){n=n.target;const e=this.L;e&&3==Fc(n)?e.l():this.Ia(n)},hn.Ia=function(n){try{if(n==this.g)e:{const N=Fc(this.g);var e=this.g.Da();const H=this.g.ba();if(!(3>N)&&(3!=N||Li||this.g&&(this.h.h||this.g.ga()||Nw(this.g)))){this.I||4!=N||7==e||sm(8==e||0>=H?3:2),fm(this);var t=this.g.ba();this.N=t;t:if(Dw(this)){var r=Nw(this.g);n="";var s=r.length,l=4==Fc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qd(this),Tp(this);var u="";break t}this.h.i=new Tn.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function AI(n,e,t,r,s,l,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,N,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!po(h)){var b=h;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,mo(12),Qd(this),Tp(this);break e}Jh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pm(this,t)}this.U?(Iw(this,N,u),Li&&this.i&&3==N&&(yw(this.V,this.W,"tick",this.fb),this.W.start())):(Jh(this.j,this.m,u,null),pm(this,u)),4==N&&Qd(this),this.i&&!this.I&&(4==N?Lw(this.l,this):(this.i=!1,Ip(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,mo(12)):(this.o=0,mo(13)),Qd(this),Tp(this)}}}catch{}},hn.fb=function(){if(this.g){var n=Fc(this.g),e=this.g.ga();this.C<e.length&&(fm(this),Iw(this,n,e),this.i&&4!=n&&Ip(this))}},hn.cancel=function(){this.I=!0,Qd(this)},hn.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sm(3),mo(17)),Qd(this),this.o=2,Tp(this)):hm(this,this.Y-n)},(hn=bs.prototype).R=function(){Sp(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},hn.T=function(){return Sp(this),this.g.concat()},hn.get=function(n,e){return nd(this.h,n)?this.h[n]:e},hn.set=function(n,e){nd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},hn.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],l=this.get(s);n.call(e,l,s,this)}};var gm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ec(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ec){this.g=void 0!==e?e:n.g,mm(this,n.j),this.s=n.s,_m(this,n.i),Ap(this,n.m),this.l=n.l,e=n.h;var t=new xp;t.i=e.i,e.g&&(t.g=new bs(e.g),t.h=e.h),Tw(this,t),this.o=n.o}else n&&(t=String(n).match(gm))?(this.g=!!e,mm(this,t[1]||"",!0),this.s=Mp(t[2]||""),_m(this,t[3]||"",!0),Ap(this,t[4]),this.l=Mp(t[5]||"",!0),Tw(this,t[6]||"",!0),this.o=Mp(t[7]||"")):(this.g=!!e,this.h=new xp(null,this.g))}function tc(n){return new ec(n)}function mm(n,e,t){n.j=t?Mp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _m(n,e,t){n.i=t?Mp(e,!0):e}function Ap(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Tw(n,e,t){e instanceof xp?(n.h=e,function Ly(n,e){e&&!n.j&&(Xd(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(BI(this,r),UI(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Rp(e,fu)),n.h=new xp(e,n.g))}function Ai(n,e,t){n.h.set(e,t)}function ym(n){return Ai(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,NI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function NI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rp(e,Aw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rp(e,Aw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rp(t,"/"==t.charAt(0)?tf:LI,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rp(t,FI)),n.join("")};var Aw=/[#\/\?@]/g,LI=/[#\?:]/g,tf=/[#\?]/g,fu=/[#\?@]/g,FI=/#/g;function xp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xd(n){n.g||(n.g=new bs,n.h=0,n.i&&function Po(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var l=n[t].substring(0,r);s=n[t].substring(r+1)}else l=n[t];e(l,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function BI(n,e){Xd(n),e=ta(n,e),nd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,nd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Sp(n)))}function Ny(n,e){return Xd(n),e=ta(n,e),nd(n.g.h,e)}function UI(n,e,t){BI(n,e),0<t.length&&(n.i=null,n.g.set(ta(n,e),Yr(t)),n.h+=t.length)}function ta(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Mw(n){this.l=n||Rw,n=Tn.PerformanceNavigationTiming?0<(n=Tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tn.g&&Tn.g.Ea&&Tn.g.Ea()&&Tn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(hn=xp.prototype).add=function(n,e){Xd(this),this.i=null,n=ta(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},hn.forEach=function(n,e){Xd(this),this.g.forEach(function(t,r){rn(t,function(s){n.call(e,s,r,this)},this)},this)},hn.T=function(){Xd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],l=0;l<s.length;l++)t.push(e[r]);return t},hn.R=function(n){Xd(this);var e=[];if("string"==typeof n)Ny(this,n)&&(e=zn(e,this.g.get(ta(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zn(e,n[t])}return e},hn.set=function(n,e){return Xd(this),this.i=null,Ny(this,n=ta(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},hn.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},hn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var u=s;""!==r[l]&&(u+="="+encodeURIComponent(String(r[l]))),n.push(u)}}return this.i=n.join("&")};var Rw=10;function xw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nf(n){return n.h?1:n.g?n.g.size:0}function By(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vm(n,e){n.g?n.g.add(e):n.h=e}function Em(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Yr(n.i)}function bm(){}function sM(){this.g=new bm}function rf(n,e,t){const r=t||"";try{ky(n,function(s,l){let u=s;Xu(s)&&(u=rs(s)),e.push(r+l+"="+encodeURIComponent(u))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Pp(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Op(n){this.l=n.$b||null,this.j=n.ib||!1}function sf(n,e){wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Vy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mw.prototype.cancel=function(){if(this.i=wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},bm.prototype.stringify=function(n){return Tn.JSON.stringify(n,void 0)},bm.prototype.parse=function(n){return Tn.JSON.parse(n,void 0)},M(Op,bw),Op.prototype.g=function(){return new sf(this.l,this.j)},Op.prototype.i=function(n){return function(){return n}}({}),M(sf,wr);var Vy=0;function Pw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function kp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Np(n)}function Np(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(hn=sf.prototype).open=function(n,e){if(this.readyState!=Vy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Np(this)},hn.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},hn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kp(this)),this.readyState=Vy},hn.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Np(this)),this.g&&(this.readyState=3,Np(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Tn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},hn.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kp(this):Np(this),3==this.readyState&&Pw(this)}},hn.Ua=function(n){this.g&&(this.response=this.responseText=n,kp(this))},hn.Ta=function(n){this.g&&(this.response=n,kp(this))},hn.ha=function(){this.g&&kp(this)},hn.setRequestHeader=function(n,e){this.v.append(n,e)},hn.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},hn.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var VI=Tn.JSON.parse;function Cs(n){wr.call(this),this.headers=new bs,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jy,this.K=this.L=!1}M(Cs,wr);var jy="",Hy=/^https?$/i,Ow=["POST","PUT"];function jI(n){return"content-type"==n.toLowerCase()}function kw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zy(n),Lc(n)}function zy(n){n.D||(n.D=!0,br(n,"complete"),br(n,"error"))}function Gy(n){if(n.h&&typeof Wh<"u"&&(!n.C[1]||4!=Fc(n)||2!=n.ba()))if(n.v&&4==Fc(n))Ay(n.Fa,0,n);else if(br(n,"readystatechange"),4==Fc(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var s=String(n.H).match(gm)[1]||null;if(!s&&Tn.self&&Tn.self.location){var l=Tn.self.location.protocol;s=l.substr(0,l.length-1)}r=!Hy.test(s?s.toLowerCase():"")}t=r}if(t)br(n,"complete"),br(n,"success");else{n.m=6;try{var u=2<Fc(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",zy(n)}}finally{Lc(n)}}}function Lc(n,e){if(n.g){Wy(n);const t=n.g,r=n.C[0]?Jl:null;n.g=null,n.C=null,e||br(n,"ready");try{t.onreadystatechange=r}catch{}}}function Wy(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tn.clearTimeout(n.A),n.A=null)}function Fc(n){return n.g?n.g.readyState:0}function Nw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function af(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function oM(n){let e="";return xc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ai(n,e,t))}function Lp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ky(n){this.za=0,this.l=[],this.h=new bp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Lp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Lp("baseRetryDelayMs",5e3,n),this.$a=Lp("retryDelaySeedMs",1e4,n),this.Ya=Lp("forwardChannelMaxRetries",2,n),this.ra=Lp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Mw(n&&n.concurrentRequestLimit),this.Ca=new sM,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Cm(n){if(Dm(n),3==n.G){var e=n.V++,t=tc(n.F);Ai(t,"SID",n.J),Ai(t,"RID",e),Ai(t,"TYPE","terminate"),eh(n,t),(e=new Cp(n,n.h,e,void 0)).K=2,e.v=ym(tc(t)),t=!1,Tn.navigator&&Tn.navigator.sendBeacon&&(t=Tn.navigator.sendBeacon(e.v.toString(),"")),!t&&Tn.Image&&((new Image).src=e.v,t=!0),t||(e.g=ev(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ip(e)}Jy(n)}function Fp(n){n.g&&(Yy(n),n.g.cancel(),n.g=null)}function Dm(n){Fp(n),n.u&&(Tn.clearTimeout(n.u),n.u=null),Am(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tn.clearTimeout(n.m),n.m=null)}function Im(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Jd(n)}function Jd(n){xw(n.i)||n.m||(n.m=!0,Cy(n.Ha,n),n.C=0)}function qy(n,e){var t;t=e?e.m:n.V++;const r=tc(n.F);Ai(r,"SID",n.J),Ai(r,"RID",t),Ai(r,"AID",n.U),eh(n,r),n.o&&n.s&&af(r,n.o,n.s),t=new Cp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Zy(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),vm(n.i,t),Py(t,r,e)}function eh(n,e){n.j&&ky({},function(t,r){Ai(e,r,t)})}function Zy(n,e,t){t=Math.min(n.l.length,t);var r=n.j?p(n.j.Oa,n.j,n):null;e:{var s=n.l;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=s[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let h=!0;for(let m=0;m<t;m++){let b=s[m].h;const N=s[m].g;if(b-=l,0>b)l=Math.max(0,s[m].h-100),h=!1;else try{rf(N,u,"req"+b+"_")}catch{r&&r(N)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Sm(n){n.g||n.u||(n.Y=1,Cy(n.Ga,n),n.A=0)}function th(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=om(p(n.Ga,n),Xy(n,n.A)),n.A++,0))}function Yy(n){null!=n.B&&(Tn.clearTimeout(n.B),n.B=null)}function Qy(n){n.g=new Cp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=tc(n.oa);Ai(e,"RID","rpc"),Ai(e,"SID",n.J),Ai(e,"CI",n.N?"0":"1"),Ai(e,"AID",n.U),eh(n,e),Ai(e,"TYPE","xmlhttp"),n.o&&n.s&&af(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ym(tc(e)),t.s=null,t.U=!0,Oy(t,n)}function Am(n){null!=n.v&&(Tn.clearTimeout(n.v),n.v=null)}function Lw(n,e){var t=null;if(n.g==e){Am(n),Yy(n),n.g=null;var r=2}else{if(!By(n.i,e))return;t=e.D,Em(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;br(r=rm(),new RI(r,t,e,s)),Jd(n)}else Sm(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function Tm(n,e){return!(nf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=om(p(n.Ha,n,e),Xy(n,n.C)),n.C++,0)))}(n,e)||2==r&&th(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:pu(n,5);break;case 4:pu(n,10);break;case 3:pu(n,6);break;default:pu(n,2)}}function Xy(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function pu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=p(n.jb,n);t||(t=new ec("//www.google.com/images/cleardot.gif"),Tn.location&&"http"==Tn.location.protocol||mm(t,"https"),ym(t)),function Uy(n,e){const t=new bp;if(Tn.Image){const r=new Image;r.onload=_(Pp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_(Pp,t,r,"TestLoadImage: error",!1,e),r.onabort=_(Pp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(Pp,t,r,"TestLoadImage: timeout",!1,e),Tn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mo(2);n.G=0,n.j&&n.j.va(e),Jy(n),Dm(n)}function Jy(n){n.G=0,n.I=-1,n.j&&((0!=wm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Yr(n.l),n.l.length=0),n.j.ua())}function HI(n,e,t){let r=function Sw(n){return n instanceof ec?tc(n):new ec(n,void 0)}(t);if(""!=r.i)e&&_m(r,e+"."+r.i),Ap(r,r.m);else{const s=Tn.location;r=function kI(n,e,t,r){var s=new ec(null,void 0);return n&&mm(s,n),e&&_m(s,e),t&&Ap(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&xc(n.aa,function(s,l){Ai(r,l,s)}),t=n.sa,(e=n.D)&&t&&Ai(r,e,t),Ai(r,"VER",n.ma),eh(n,r),r}function ev(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cs(t&&n.Ba&&!n.qa?new Op({ib:!0}):n.qa)).L=n.H,e}function Fw(){}function Bp(){if(du&&!(10<=Number(mw)))throw Error("Environmental error: no available transport.")}function Ya(n,e){wr.call(this),this.g=new Ky(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!po(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!po(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lf(this)}function Bw(n){am.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Il(){lm.call(this),this.status=1}function lf(n){this.g=n}(hn=Cs.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cm.g(),this.C=function Cw(n){return n.h||(n.h=n.i())}(this.u?this.u:cm),this.g.onreadystatechange=p(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void kw(this,l)}n=t||"";const s=new bs(this.headers);r&&ky(r,function(l,u){s.set(u,l)}),r=function _n(n){e:{var e=jI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=Tn.FormData&&n instanceof Tn.FormData,!(0<=St(Ow,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wy(this),0<this.B&&((this.K=function $y(n){return du&&function vy(){return function Xg(n){var e=nm;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Za(String(oi)).split("."),t=Za("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var s=e[u]||"",l=t[u]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==s[0].length&&0==l[0].length)break;n=Kh(0==s[1].length?0:parseInt(s[1],10),0==l[1].length?0:parseInt(l[1],10))||Kh(0==s[2].length,0==l[2].length)||Kh(s[2],l[2]),s=s[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=p(this.pa,this)):this.A=Ay(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){kw(this,l)}},hn.pa=function(){typeof Wh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,br(this,"timeout"),this.abort(8))},hn.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,br(this,"complete"),br(this,"abort"),Lc(this))},hn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lc(this,!0)),Cs.Z.M.call(this)},hn.Fa=function(){this.s||(this.F||this.v||this.l?Gy(this):this.cb())},hn.cb=function(){Gy(this)},hn.ba=function(){try{return 2<Fc(this)?this.g.status:-1}catch{return-1}},hn.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},hn.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),VI(e)}},hn.Da=function(){return this.m},hn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(hn=Ky.prototype).ma=8,hn.G=1,hn.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},hn.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new Cp(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=dp(l),td(l,this.P)):l=this.P),null===this.o&&(s.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Zy(this,s,e),Ai(t=tc(this.F),"RID",n),Ai(t,"CVER",22),this.D&&Ai(t,"X-HTTP-Session-Id",this.D),eh(this,t),this.o&&l&&af(t,this.o,l),vm(this.i,s),this.Ra&&Ai(t,"TYPE","init"),this.ja?(Ai(t,"$req",e),Ai(t,"SID","null"),s.$=!0,Py(s,t,null)):Py(s,t,e),this.G=2}}else 3==this.G&&(n?qy(this,n):0==this.l.length||xw(this.i)||qy(this))},hn.Ga=function(){if(this.u=null,Qy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=om(p(this.bb,this),n)}},hn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mo(10),Fp(this),Qy(this))},hn.ab=function(){null!=this.v&&(this.v=null,Fp(this),th(this),mo(19))},hn.jb=function(n){n?(this.h.info("Successfully pinged google.com"),mo(2)):(this.h.info("Failed to ping google.com"),mo(1))},(hn=Fw.prototype).xa=function(){},hn.wa=function(){},hn.va=function(){},hn.ua=function(){},hn.Oa=function(){},Bp.prototype.g=function(n,e){return new Ya(n,e)},M(Ya,wr),Ya.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Cy(p(n.hb,n,e))),mo(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=HI(n,null,n.W),Jd(n)},Ya.prototype.close=function(){Cm(this.g)},Ya.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Im(this.g,e)}else this.v?((e={}).__data__=rs(n),Im(this.g,e)):Im(this.g,n)},Ya.prototype.M=function(){this.g.j=null,delete this.j,Cm(this.g),delete this.g,Ya.Z.M.call(this)},M(Bw,am),M(Il,lm),M(lf,Fw),lf.prototype.xa=function(){br(this.g,"a")},lf.prototype.wa=function(n){br(this.g,new Bw(n))},lf.prototype.va=function(n){br(this.g,new Il(n))},lf.prototype.ua=function(){br(this.g,"b")},Bp.prototype.createWebChannel=Bp.prototype.g,Ya.prototype.send=Ya.prototype.u,Ya.prototype.open=Ya.prototype.m,Ya.prototype.close=Ya.prototype.close,My.NO_ERROR=0,My.TIMEOUT=8,My.HTTP_ERROR=6,xI.COMPLETE="complete",Ry.EventType=Yd,Yd.OPEN="a",Yd.CLOSE="b",Yd.ERROR="c",Yd.MESSAGE="d",wr.prototype.listen=wr.prototype.N,Cs.prototype.listenOnce=Cs.prototype.O,Cs.prototype.getLastError=Cs.prototype.La,Cs.prototype.getLastErrorCode=Cs.prototype.Da,Cs.prototype.getStatus=Cs.prototype.ba,Cs.prototype.getResponseJson=Cs.prototype.Qa,Cs.prototype.getResponseText=Cs.prototype.ga,Cs.prototype.send=Cs.prototype.ea;var Uw=Dl.createWebChannelTransport=function(){return new Bp},$I=Dl.getStatEventTarget=function(){return rm()},tv=Dl.ErrorCode=My,zI=Dl.EventType=xI,GI=Dl.Event=hu,nv=Dl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},WI=Dl.FetchXmlHttpFactory=Op,Mm=Dl.WebChannel=Ry,KI=Dl.XhrIo=Cs;const er="@firebase/firestore";class Us{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Us.UNAUTHENTICATED=new Us(null),Us.GOOGLE_CREDENTIALS=new Us("google-credentials-uid"),Us.FIRST_PARTY=new Us("first-party-uid"),Us.MOCK_USER=new Us("mock-user");let nh="9.9.1";const gu=new Ni.Yd("@firebase/firestore");function rv(){return gu.logLevel}function Ut(n,...e){if(gu.logLevel<=Ni.in.DEBUG){const t=e.map(iv);gu.debug(`Firestore (${nh}): ${n}`,...t)}}function Ds(n,...e){if(gu.logLevel<=Ni.in.ERROR){const t=e.map(iv);gu.error(`Firestore (${nh}): ${n}`,...t)}}function cf(n,...e){if(gu.logLevel<=Ni.in.WARN){const t=e.map(iv);gu.warn(`Firestore (${nh}): ${n}`,...t)}}function iv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function wn(n="Unexpected state"){const e=`FIRESTORE (${nh}) INTERNAL ASSERTION FAILED: `+n;throw Ds(e),new Error(e)}function qn(n,e){n||wn()}function sn(n,e){return n}const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ot extends X.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Us.UNAUTHENTICATED))}shutdown(){}}class aM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lM{constructor(e){this.t=e,this.currentUser=Us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const l=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let u=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Is,e.enqueueRetryable(()=>l(this.currentUser))};const h=()=>{const b=u;e.enqueueRetryable((0,ct.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},m=b=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Is)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qn("string"==typeof r.accessToken),new Rm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qn(null===e||"string"==typeof e),new Us(e)}}class cM{constructor(e,t,r){this.type="FirstParty",this.user=Us.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class YI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new cM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Us.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uM{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.p;return this.p=l.token,Ut("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?s(l):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qn("string"==typeof t.token),this.p=t.token,new sv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uf(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class jw{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=uf(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%e.length))}return r}}function nr(n,e){return n<e?-1:n>e?1:0}function mu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Hw(n){return n+"\0"}class Mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ot(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ot(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ot(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ot(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nr(this.nanoseconds,e.nanoseconds):nr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Hn(e)}static min(){return new Hn(new Mi(0,0))}static max(){return new Hn(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Up{constructor(e,t,r){void 0===t?t=0:t>e.length&&wn(),void 0===r?r=e.length-t:r>e.length-t&&wn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Up.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Up?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=e.get(s),u=t.get(s);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rr extends Up{construct(e,t,r){return new Rr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ot(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const QI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends Up{construct(e,t,r){return new fs(e,t,r)}static isValidIdentifier(e){return QI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fs(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(0===r.length)throw new Ot(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if("\\"===h){if(s+1===e.length)throw new Ot(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ot(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,s+=2}else"`"===h?(u=!u,s++):"."!==h||u?(r+=h,s++):(l(),s++)}if(l(),u)throw new Ot(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(t)}static emptyPath(){return new fs([])}}class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(Rr.fromString(e))}static fromName(e){return new Jt(Rr.fromString(e).popFirst(5))}static empty(){return new Jt(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new Rr(e.slice()))}}class xm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Pm(n){return n.fields.find(e=>2===e.kind)}function rd(n){return n.fields.filter(e=>2!==e.kind)}xm.UNKNOWN_ID=-1;class df{constructor(e,t){this.fieldPath=e,this.kind=t}}class Om{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Om(0,Tl.min())}}function km(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Hn.fromTimestamp(1e9===r?new Mi(t+1,0):new Mi(t,r));return new Tl(s,Jt.empty(),e)}function $w(n){return new Tl(n.readTime,n.key,-1)}class Tl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tl(Hn.min(),Jt.empty(),-1)}static max(){return new Tl(Hn.max(),Jt.empty(),-1)}}function id(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Jt.comparator(n.documentKey,e.documentKey),0!==t?t:nr(n.largestBatchId,e.largestBatchId))}const ov="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class av{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nc(n){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,ct.Z)(function*(n){if(n.code!==lt.FAILED_PRECONDITION||n.message!==ov)throw n;Ut("LocalStore","Unexpectedly lost primary lease")}),Qa.apply(this,arguments)}class ot{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ot((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ot?t:ot.resolve(t)}catch(t){return ot.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ot.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ot.reject(t)}static resolve(e){return new ot((t,r)=>{t(e)})}static reject(e){return new ot((t,r)=>{r(e)})}static waitFor(e){return new ot((t,r)=>{let s=0,l=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++l,u&&l===s&&t()},m=>r(m))}),u=!0,l===s&&t()})}static or(e){let t=ot.resolve(!1);for(const r of e)t=t.next(s=>s?ot.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,l)=>{r.push(t.call(this,s,l))}),this.waitFor(r)}static mapArray(e,t){return new ot((r,s)=>{const l=e.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const b=m;t(e[b]).next(N=>{u[b]=N,++h,h===l&&r(u)},N=>s(N))}})}static doWhile(e,t){return new ot((r,s)=>{const l=()=>{!0===e()?t().next(()=>{l()},s):r()};l()})}}class Nm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Is,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new rh(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const s=zw(r.target.error);this.T.reject(new rh(e,s))}}static open(e,t,r,s){try{return new Nm(t,e.transaction(s,r))}catch(l){throw new rh(t,l)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ut("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lv(t)}}class Xa{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Xa.v((0,X.z$)())&&Ds("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ut("SimpleDb","Removing database:",e),hf(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,X.hl)())return!1;if(Xa.S())return!0;const e=(0,X.z$)(),t=Xa.v(e),r=0<t&&t<10,s=Xa.D(e),l=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ct.Z)(function*(){return t.db||(Ut("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{r(u.target.result)},l.onblocked=()=>{s(new rh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const h=u.target.error;s("VersionError"===h.name?new Ot(lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ot(lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new rh(e,h))},l.onupgradeneeded=u=>{Ut("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.P.O(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{Ut("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var l=this;return(0,ct.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{l.db=yield l.k(e);const m=Nm.open(l.db,e,u?"readonly":"readwrite",r),b=s(m).next(N=>(m.R(),N)).catch(N=>(m.abort(N),ot.reject(N))).toPromise();return b.catch(()=>{}),yield m.A,b}catch(m){const b=m,N="FirebaseError"!==b.name&&h<3;if(Ut("SimpleDb","Transaction failed with error:",b.message,"Retrying:",N),l.close(),!N)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _u{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return hf(this.$.delete())}}class rh extends Ot{constructor(e,t){super(lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yu(n){return"IndexedDbTransactionError"===n.name}class lv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ut("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ut("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hf(r)}add(e){return Ut("SimpleDb","ADD",this.store.name,e,e),hf(this.store.add(e))}get(e){return hf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ut("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ut("SimpleDb","DELETE",this.store.name,e),hf(this.store.delete(e))}count(){return Ut("SimpleDb","COUNT",this.store.name),hf(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),l=[];return this.G(s,(u,h)=>{l.push(h)}).next(()=>l)}{const s=this.store.getAll(r.range);return new ot((l,u)=>{s.onerror=h=>{u(h.target.error)},s.onsuccess=h=>{l(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ot((s,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}W(e,t){Ut("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.G(s,(l,u,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Y(e){const t=this.cursor({});return new ot((r,s)=>{t.onerror=l=>{const u=zw(l.target.error);s(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}G(e,t){const r=[];return new ot((s,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const m=new _u(h),b=t(h.primaryKey,h.value,m);if(b instanceof ot){const N=b.catch(H=>(m.done(),ot.reject(H)));r.push(N)}m.isDone?s():null===m.U?h.continue():h.continue(m.U)}}).next(()=>ot.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hf(n){return new ot((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=zw(r.target.error);t(s)}})}let cv=!1;function zw(n){const e=Xa.v((0,X.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cv||(cv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Lm{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ut("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ct.Z)(function*(){t.task=null;try{Ut("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){yu(r)?Ut("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nc(r)}yield t.Z(1)}))}}class Fm{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ct.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let s=t,l=!0;return ot.doWhile(()=>!0===l&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ut("IndexBackiller",`Processing collection: ${u}`),this.nt(e,u,s).next(h=>{s-=h,r.add(u)});l=!1})).next(()=>t-s)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.st(s,l)).next(h=>(Ut("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}st(e,t){let r=e;return t.changes.forEach((s,l)=>{const u=$w(l);id(u,r)>0&&(r=u)}),new Tl(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Oo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Bm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Oo.ot=-1;class is{constructor(e,t){this.comparator=e,this.root=t||_o.EMPTY}insert(e,t){return new is(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_o.BLACK,null,null))}remove(e){return new is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_o.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Um(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Um(this.root,e,this.comparator,!1)}getReverseIterator(){return new Um(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Um(this.root,e,this.comparator,!0)}}class Um{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _o{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??_o.RED,this.left=s??_o.EMPTY,this.right=l??_o.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new _o(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===l?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _o.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return _o.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_o.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wn();const e=this.left.check();if(e!==this.right.check())throw wn();return e+(this.isRed()?0:1)}}_o.EMPTY=null,_o.RED=!0,_o.BLACK=!1,_o.EMPTY=new class{constructor(){this.size=0}get key(){throw wn()}get value(){throw wn()}get color(){throw wn()}get left(){throw wn()}get right(){throw wn()}copy(n,e,t,r,s){return this}insert(n,e,t){return new _o(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ai{constructor(e){this.comparator=e,this.data=new is(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uv(this.data.getIterator())}getIteratorFrom(e){return new uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(s,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ai(this.comparator);return t.data=e,t}}class uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vp(n){return n.hasNext()?n.getNext():void 0}class Ja{constructor(e){this.fields=e,e.sort(fs.comparator)}static empty(){return new Ja([])}unionWith(e){let t=new ai(fs.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ja(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ts(t)}static fromUint8Array(e){const t=function(r){let s="";for(let l=0;l<r.length;++l)s+=String.fromCharCode(r[l]);return s}(e);return new Ts(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const Gw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sd(n){if(qn(!!n),"string"==typeof n){let e=0;const t=Gw.exec(n);if(qn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bi(n.seconds),nanos:Bi(n.nanos)}}function Bi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ff(n){return"string"==typeof n?Ts.fromBase64String(n):Ts.fromUint8Array(n)}function Ww(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JI(n){const e=n.mapValue.fields.__previous_value__;return Ww(e)?JI(e):e}function Vm(n){const e=sd(n.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class fM{constructor(e,t,r,s,l,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class od{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new od("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof od&&e.projectId===this.projectId&&e.database===this.database}}function jm(n){return null==n}function Hm(n){return 0===n&&1/n==-1/0}function eT(n){return"number"==typeof n&&Number.isInteger(n)&&!Hm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ih={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rc={nullValue:"NULL_VALUE"};function Eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ww(n)?4:qw(n)?9007199254740991:10:wn()}function Bc(n,e){if(n===e)return!0;const t=Eu(n);if(t!==Eu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vm(n).isEqual(Vm(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const l=sd(r.timestampValue),u=sd(s.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ff(n.bytesValue).isEqual(ff(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Bi(r.geoPointValue.latitude)===Bi(s.geoPointValue.latitude)&&Bi(r.geoPointValue.longitude)===Bi(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Bi(r.integerValue)===Bi(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const l=Bi(r.doubleValue),u=Bi(s.doubleValue);return l===u?Hm(l)===Hm(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return mu(n.arrayValue.values||[],e.arrayValue.values||[],Bc);case 10:return function(r,s){const l=r.mapValue.fields||{},u=s.mapValue.fields||{};if(Bm(l)!==Bm(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(void 0===u[h]||!Bc(l[h],u[h])))return!1;return!0}(n,e);default:return wn()}var s}function pf(n,e){return void 0!==(n.values||[]).find(t=>Bc(t,e))}function Uc(n,e){if(n===e)return 0;const t=Eu(n),r=Eu(e);if(t!==r)return nr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return nr(n.booleanValue,e.booleanValue);case 2:return function(s,l){const u=Bi(s.integerValue||s.doubleValue),h=Bi(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return dv(n.timestampValue,e.timestampValue);case 4:return dv(Vm(n),Vm(e));case 5:return nr(n.stringValue,e.stringValue);case 6:return function(s,l){const u=ff(s),h=ff(l);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,l){const u=s.split("/"),h=l.split("/");for(let m=0;m<u.length&&m<h.length;m++){const b=nr(u[m],h[m]);if(0!==b)return b}return nr(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,l){const u=nr(Bi(s.latitude),Bi(l.latitude));return 0!==u?u:nr(Bi(s.longitude),Bi(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,l){const u=s.values||[],h=l.values||[];for(let m=0;m<u.length&&m<h.length;++m){const b=Uc(u[m],h[m]);if(b)return b}return nr(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,l){if(s===ih.mapValue&&l===ih.mapValue)return 0;if(s===ih.mapValue)return 1;if(l===ih.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),m=l.fields||{},b=Object.keys(m);h.sort(),b.sort();for(let N=0;N<h.length&&N<b.length;++N){const H=nr(h[N],b[N]);if(0!==H)return H;const ee=Uc(u[h[N]],m[b[N]]);if(0!==ee)return ee}return nr(h.length,b.length)}(n.mapValue,e.mapValue);default:throw wn()}}function dv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return nr(n,e);const t=sd(n),r=sd(e),s=nr(t.seconds,r.seconds);return 0!==s?s:nr(t.nanos,r.nanos)}function ad(n){return hv(n)}function hv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=sd(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ff(n.bytesValue).toBase64():"referenceValue"in n?Jt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",l=!0;for(const u of r.values||[])l?l=!1:s+=",",s+=hv(u);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const h of s)u?u=!1:l+=",",l+=`${h}:${hv(r.fields[h])}`;return l+"}"}(n.mapValue):wn();var e}function Ta(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $m(n){return!!n&&"integerValue"in n}function jp(n){return!!n&&"arrayValue"in n}function zm(n){return!!n&&"nullValue"in n}function Kw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function $p(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$p(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$p(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gm(n){return"nullValue"in n?rc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ta(od.empty(),Jt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:wn()}function gf(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ta(od.empty(),Jt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ih:wn()}function Wm(n,e){const t=Uc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function sh(n,e){const t=Uc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(t)}setAll(e){let t=fs.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=$p(u):s.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Hp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){vu(t,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Ss($p(this.value))}}function mf(n){const e=[];return vu(n.fields,(t,r)=>{const s=new fs([t]);if(Hp(r)){const l=mf(r.mapValue).fields;if(0===l.length)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)}),new Ja(e)}class bi{constructor(e,t,r,s,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=l,this.documentState=u}static newInvalidDocument(e){return new bi(e,0,Hn.min(),Hn.min(),Ss.empty(),0)}static newFoundDocument(e,t,r){return new bi(e,1,t,Hn.min(),r,0)}static newNoDocument(e,t){return new bi(e,2,t,Hn.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new bi(e,3,t,Hn.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zw{constructor(e,t=null,r=[],s=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=u,this.endAt=h,this.ut=null}}function fv(n,e=null,t=[],r=[],s=null,l=null,u=null){return new Zw(n,e,t,r,s,l,u)}function wu(n){const e=sn(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+ad(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),jm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ad(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ad(r)).join(",")),e.ut=t}return e.ut}function _f(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!tb(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!Bc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rb(n.startAt,e.startAt)&&rb(n.endAt,e.endAt)}function yf(n){return Jt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Km(n,e){return n.filters.filter(t=>t instanceof Xs&&t.field.isEqual(e))}function tT(n,e,t){let r=rc,s=!0;for(const l of Km(n,e)){let u=rc,h=!0;switch(l.op){case"<":case"<=":u=Gm(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,h=!1;break;case"!=":case"not-in":u=rc}Wm({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];Wm({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}function Yw(n,e,t){let r=ih,s=!0;for(const l of Km(n,e)){let u=ih,h=!0;switch(l.op){case">=":case">":u=gf(l.value),h=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,h=!1;break;case"!=":case"not-in":u=ih}sh({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];sh({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}return{value:r,inclusive:s}}class Xs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new nT(e,t,r):"array-contains"===t?new el(e,r):"in"===t?new eb(e,r):"not-in"===t?new rT(e,r):"array-contains-any"===t?new pM(e,r):new Xs(e,t,r)}static ct(e,t,r){return"in"===t?new Qw(e,r):new Xw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Uc(t,this.value)):null!==t&&Eu(this.value)===Eu(t)&&this.at(Uc(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wn()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class nT extends Xs{constructor(e,t,r){super(e,t,r),this.key=Jt.fromName(r.referenceValue)}matches(e){const t=Jt.comparator(e.key,this.key);return this.at(t)}}class Qw extends Xs{constructor(e,t){super(e,"in",t),this.keys=Jw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xw extends Xs{constructor(e,t){super(e,"not-in",t),this.keys=Jw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Jt.fromName(r.referenceValue))}class el extends Xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jp(t)&&pf(t.arrayValue,this.value)}}class eb extends Xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pf(this.value.arrayValue,t)}}class rT extends Xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pf(this.value.arrayValue,t)}}class pM extends Xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pf(this.value.arrayValue,r))}}class ld{constructor(e,t){this.position=e,this.inclusive=t}}class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function tb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function nb(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],u=n.position[s];if(r=l.field.isKeyField()?Jt.comparator(Jt.fromName(u.referenceValue),t.key):Uc(u,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function rb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bc(n.position[t],e.position[t]))return!1;return!0}class bu{constructor(e,t=null,r=[],s=[],l=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.lt=null,this.ft=null}}function gv(n,e,t,r,s,l,u,h){return new bu(n,e,t,r,s,l,u,h)}function vf(n){return new bu(n)}function mv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _v(n){for(const e of n.filters)if(e.ht())return e.field;return null}function qm(n){return null!==n.collectionGroup}function oh(n){const e=sn(n);if(null===e.lt){e.lt=[];const t=_v(e),r=mv(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new cd(t)),e.lt.push(new cd(fs.keyField(),"asc"));else{let s=!1;for(const l of e.explicitOrderBy)e.lt.push(l),l.field.isKeyField()&&(s=!0);if(!s){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new cd(fs.keyField(),l))}}}return e.lt}function Sl(n){const e=sn(n);if(!e.ft)if("F"===e.limitType)e.ft=fv(e.path,e.collectionGroup,oh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of oh(e))t.push(new cd(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new ld(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ld(e.startAt.position,e.startAt.inclusive):null;e.ft=fv(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.ft}function ic(n,e,t){return new bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ah(n,e){return _f(Sl(n),Sl(e))&&n.limitType===e.limitType}function sb(n){return`${wu(Sl(n))}|lt:${n.limitType}`}function yv(n){return`Query(target=${function pv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ad(r.value)}`;var r}).join(", ")}]`),jm(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ad(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ad(t)).join(",")),`Target(${e})`}(Sl(n))}; limitType=${n.limitType})`}function ob(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Jt.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,l,u){const h=nb(s,l,u);return s.inclusive?h<=0:h<0}(t.startAt,oh(t),r)||t.endAt&&!function(s,l,u){const h=nb(s,l,u);return s.inclusive?h>=0:h>0}(t.endAt,oh(t),r)));var t,r}function vv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ab(n){return(e,t)=>{let r=!1;for(const s of oh(n)){const l=iT(s,e,t);if(0!==l)return l;r=r||s.field.isKeyField()}return 0}}function iT(n,e,t){const r=n.field.isKeyField()?Jt.comparator(e.key,t.key):function(s,l,u){const h=l.data.field(s),m=u.data.field(s);return null!==h&&null!==m?Uc(h,m):wn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return wn()}}function lb(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hm(e)?"-0":e}}function Zm(n){return{integerValue:""+n}}function cb(n,e){return eT(e)?Zm(e):lb(n,e)}class Ym{constructor(){this._=void 0}}function Qm(n,e,t){return n instanceof lh?function(r,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(l.fields.__previous_value__=s),{mapValue:l}}(t,e):n instanceof Cu?wv(n,e):n instanceof Ef?sT(n,e):function(r,s){const l=ub(r,s),u=oT(l)+oT(r._t);return $m(l)&&$m(r._t)?Zm(u):lb(r.wt,u)}(n,e)}function Ev(n,e,t){return n instanceof Cu?wv(n,e):n instanceof Ef?sT(n,e):t}function ub(n,e){return n instanceof ud?$m(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class lh extends Ym{}class Cu extends Ym{constructor(e){super(),this.elements=e}}function wv(n,e){const t=db(e);for(const r of n.elements)t.some(s=>Bc(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ef extends Ym{constructor(e){super(),this.elements=e}}function sT(n,e){let t=db(e);for(const r of n.elements)t=t.filter(s=>!Bc(s,r));return{arrayValue:{values:t}}}class ud extends Ym{constructor(e,t){super(),this.wt=e,this._t=t}}function oT(n){return Bi(n.integerValue||n.doubleValue)}function db(n){return jp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wf{constructor(e,t){this.field=e,this.transform=t}}class fb{constructor(e,t){this.version=e,this.transformResults=t}}class Ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Al{}function zp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gp(n.key,Ui.none()):new ch(n.key,n.data,Ui.none());{const t=n.data,r=Ss.empty();let s=new ai(fs.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);null===u&&l.length>1&&(l=l.popLast(),u=t.field(l)),null===u?r.delete(l):r.set(l,u),s=s.add(l)}return new Iu(n.key,r,new Ja(s.toArray()),Ui.none())}}function Xm(n,e,t){n instanceof ch?function(r,s,l){const u=r.value.clone(),h=Cf(r.fieldTransforms,s,l.transformResults);u.setAll(h),s.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Iu?function(r,s,l){if(!bf(r.precondition,s))return void s.convertToUnknownDocument(l.version);const u=Cf(r.fieldTransforms,s,l.transformResults),h=s.data;h.setAll(pb(r)),h.setAll(u),s.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Du(n,e,t,r){return n instanceof ch?function(s,l,u,h){if(!bf(s.precondition,l))return u;const m=s.value.clone(),b=gb(s.fieldTransforms,h,l);return m.setAll(b),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Iu?function(s,l,u,h){if(!bf(s.precondition,l))return u;const m=gb(s.fieldTransforms,h,l),b=l.data;return b.setAll(pb(s)),b.setAll(m),l.convertToFoundDocument(l.version,b).setHasLocalMutations(),null===u?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(N=>N.field))}(n,e,t,r):(u=t,bf(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u);var l,u}function aT(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=ub(r.transform,s||null);null!=l&&(null===t&&(t=Ss.empty()),t.set(r.field,l))}return t||null}function Jm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mu(t,r,(s,l)=>function hb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cu&&r instanceof Cu||t instanceof Ef&&r instanceof Ef?mu(t.elements,r.elements,Bc):t instanceof ud&&r instanceof ud?Bc(t._t,r._t):t instanceof lh&&r instanceof lh);var t,r}(s,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ch extends Al{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Iu extends Al{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function pb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Cf(n,e,t){const r=new Map;qn(n.length===t.length);for(let s=0;s<t.length;s++){const l=n[s],u=l.transform,h=e.data.field(l.field);r.set(l.field,Ev(u,h,t[s]))}return r}function gb(n,e,t){const r=new Map;for(const s of n){const l=s.transform,u=t.data.field(s.field);r.set(s.field,Qm(l,u,e))}return r}class Gp extends Al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bv extends Al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gM{constructor(e){this.count=e}}var As,xr;function mb(n){switch(n){default:return wn();case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0}}function _b(n){if(void 0===n)return Ds("GRPC error has no .code"),lt.UNKNOWN;switch(n){case As.OK:return lt.OK;case As.CANCELLED:return lt.CANCELLED;case As.UNKNOWN:return lt.UNKNOWN;case As.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case As.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case As.INTERNAL:return lt.INTERNAL;case As.UNAVAILABLE:return lt.UNAVAILABLE;case As.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case As.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case As.NOT_FOUND:return lt.NOT_FOUND;case As.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case As.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case As.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case As.ABORTED:return lt.ABORTED;case As.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case As.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case As.DATA_LOSS:return lt.DATA_LOSS;default:return wn()}}(xr=As||(As={}))[xr.OK=0]="OK",xr[xr.CANCELLED=1]="CANCELLED",xr[xr.UNKNOWN=2]="UNKNOWN",xr[xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xr[xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xr[xr.NOT_FOUND=5]="NOT_FOUND",xr[xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",xr[xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",xr[xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",xr[xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xr[xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xr[xr.ABORTED=10]="ABORTED",xr[xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",xr[xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",xr[xr.INTERNAL=13]="INTERNAL",xr[xr.UNAVAILABLE=14]="UNAVAILABLE",xr[xr.DATA_LOSS=15]="DATA_LOSS";class uh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,l]of r)if(this.equalsFn(s,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vu(this.inner,(t,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return XI(this.inner)}size(){return this.innerSize}}const yb=new is(Jt.comparator);function ko(){return yb}const vb=new is(Jt.comparator);function dh(...n){let e=vb;for(const t of n)e=e.insert(t.key,t);return e}function Eb(n){let e=vb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vc(){return Wp()}function wb(){return Wp()}function Wp(){return new uh(n=>n.toString(),(n,e)=>n.isEqual(e))}const lT=new is(Jt.comparator),cT=new ai(Jt.comparator);function tr(...n){let e=cT;for(const t of n)e=e.add(t);return e}const hh=new ai(nr);function Cv(){return hh}class Tu{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Kp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Tu(Hn.min(),r,Cv(),ko(),tr())}}class Kp{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Kp(Ts.EMPTY_BYTE_STRING,t,tr(),tr(),tr())}}class e_{constructor(e,t,r,s){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=s}}class t_{constructor(e,t){this.targetId=e,this.It=t}}class bb{constructor(e,t,r=Ts.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class sc{constructor(){this.Tt=0,this.Et=dd(),this.At=Ts.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=tr(),t=tr(),r=tr();return this.Et.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:wn()}}),new Kp(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=dd()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class qp{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ko(),this.Bt=yo(),this.Lt=new ai(nr)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:wn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,s)=>{this.jt(s)&&t(s)})}zt(e){const t=e.targetId,r=e.It.count,s=this.Ht(t);if(s){const l=s.target;if(yf(l))if(0===r){const u=new Jt(l.path);this.Kt(t,u,bi.newNoDocument(u,Hn.min()))}else qn(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((l,u)=>{const h=this.Ht(u);if(h){if(l.current&&yf(h.target)){const m=new Jt(h.target.path);null!==this.$t.get(m)||this.Xt(u,m)||this.Kt(u,m,bi.newNoDocument(m,e))}l.vt&&(t.set(u,l.St()),l.Dt())}});let r=tr();this.Bt.forEach((l,u)=>{let h=!0;u.forEachWhile(m=>{const b=this.Ht(m);return!b||2===b.purpose||(h=!1,!1)}),h&&(r=r.add(l))}),this.$t.forEach((l,u)=>u.setReadTime(e));const s=new Tu(e,t,this.Lt,this.$t,r);return this.$t=ko(),this.Bt=yo(),this.Lt=new ai(nr),s}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const s=this.Qt(e);this.Xt(e,t)?s.Ct(t,1):s.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new sc,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new ai(nr),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ut("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new sc),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function yo(){return new is(Jt.comparator)}function dd(){return new is(Jt.comparator)}const n_={asc:"ASCENDING",desc:"DESCENDING"},Ml={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Dv{constructor(e,t){this.databaseId=e,this.dt=t}}function jc(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fh(n,e){return n.dt?e.toBase64():e.toUint8Array()}function Df(n,e){return jc(n,e.toTimestamp())}function Ki(n){return qn(!!n),Hn.fromTimestamp(function(e){const t=sd(e);return new Mi(t.seconds,t.nanos)}(n))}function hd(n,e){return(t=n,new Rr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ph(n){const e=Rr.fromString(n);return qn(s_(e)),e}function Hc(n,e){return hd(n.databaseId,e.path)}function na(n,e){const t=ph(e);if(t.get(1)!==n.databaseId.projectId)throw new Ot(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ot(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Jt(Tv(t))}function fd(n,e){return hd(n.databaseId,e)}function Iv(n){const e=ph(n);return 4===e.length?Rr.emptyPath():Tv(e)}function If(n){return new Rr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tv(n){return qn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Sv(n,e,t){return{name:Hc(n,e),fields:t.value.mapValue.fields}}function Av(n,e,t){const r=na(n,e.name),s=Ki(e.updateTime),l=new Ss({mapValue:{fields:e.fields}}),u=bi.newFoundDocument(r,s,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Tf(n,e){let t;if(e instanceof ch)t={update:Sv(n,e.key,e.value)};else if(e instanceof Gp)t={delete:Hc(n,e.key)};else if(e instanceof Iu)t={update:Sv(n,e.key,e.data),updateMask:hT(e.fieldMask)};else{if(!(e instanceof bv))return wn();t={verify:Hc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const u=l.transform;if(u instanceof lh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ef)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ud)return{fieldPath:l.field.canonicalString(),increment:u._t};throw wn()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Df(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:wn()),t;var s}function r_(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Ui.updateTime(Ki(s.updateTime)):void 0!==s.exists?Ui.exists(s.exists):Ui.none():Ui.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(l,u){let h=null;"setToServerValue"in u?(qn("REQUEST_TIME"===u.setToServerValue),h=new lh):"appendMissingElements"in u?h=new Cu(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Ef(u.removeAllFromArray.values||[]):"increment"in u?h=new ud(l,u.increment):wn();const m=fs.fromServerFormat(u.fieldPath);return new wf(m,h)}(n,s)):[];var s;if(e.update){const s=na(n,e.update.name),l=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ja((e.updateMask.fieldPaths||[]).map(b=>fs.fromServerFormat(b)));return new Iu(s,l,u,t,r)}return new ch(s,l,t,r)}if(e.delete){const s=na(n,e.delete);return new Gp(s,t)}if(e.verify){const s=na(n,e.verify);return new bv(s,t)}return wn()}function Ib(n,e){return{documents:[fd(n,e.path)]}}function Tb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=fd(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=fd(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(m){if(0===m.length)return;const b=m.map(N=>function(H){if("=="===H.op){if(Kw(H.value))return{unaryFilter:{field:Sf(H.field),op:"IS_NAN"}};if(zm(H.value))return{unaryFilter:{field:Sf(H.field),op:"IS_NULL"}}}else if("!="===H.op){if(Kw(H.value))return{unaryFilter:{field:Sf(H.field),op:"IS_NOT_NAN"}};if(zm(H.value))return{unaryFilter:{field:Sf(H.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sf(H.field),op:xv(H.op),value:H.value}}}(N));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const l=function(m){if(0!==m.length)return m.map(b=>{return{field:Sf((N=b).field),direction:Rv(N.dir)};var N})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=(b=e.limit,n.dt||jm(b)?b:{value:b});var b,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Mv(n){let e=Iv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){qn(1===r);const N=t.from[0];N.allDescendants?s=N.collectionId:e=e.child(N.collectionId)}let l=[];t.where&&(l=Sb(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(N=>{return new cd(Su((H=N).field),function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction));var H}));let h=null;t.limit&&(h=function(N){let H;return H="object"==typeof N?N.value:N,jm(H)?null:H}(t.limit));let m=null;var N;t.startAt&&(m=new ld((N=t.startAt).values||[],!!N.before));let b=null;return t.endAt&&(b=function(N){return new ld(N.values||[],!N.before)}(t.endAt)),gv(e,s,u,l,h,"F",m,b)}function Sb(n){return n?void 0!==n.unaryFilter?[Pv(n)]:void 0!==n.fieldFilter?[i_(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Sb(e)).reduce((e,t)=>e.concat(t)):wn():[]}function Rv(n){return n_[n]}function xv(n){return Ml[n]}function Sf(n){return{fieldPath:n.canonicalString()}}function Su(n){return fs.fromServerFormat(n.fieldPath)}function i_(n){return Xs.create(Su(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wn()}}(n.fieldFilter.op),n.fieldFilter.value)}function Pv(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Su(n.unaryFilter.field);return Xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Su(n.unaryFilter.field);return Xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Su(n.unaryFilter.field);return Xs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Su(n.unaryFilter.field);return Xs.create(s,"!=",{nullValue:"NULL_VALUE"});default:return wn()}}function hT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function s_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function vo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ov(e)),e=Ab(n.get(t),e);return Ov(e)}function Ab(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Ov(n){return n+"\x01\x01"}function Rl(n){const e=n.length;if(qn(e>=2),2===e)return qn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rr.emptyPath();const t=e-2,r=[];let s="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&wn(),n.charAt(u+1)){case"\x01":const h=n.substring(l,u);let m;0===s.length?m=h:(s+=h,m=s,s=""),r.push(m);break;case"\x10":s+=n.substring(l,u),s+="\0";break;case"\x11":s+=n.substring(l,u+1);break;default:wn()}l=u+2}return new Rr(r)}const kv=["userId","batchId"];function Zp(n,e){return[n,vo(e)]}function o_(n,e,t){return[n,vo(e),t]}const Nv={},fT=["prefixPath","collectionGroup","readTime","documentId"],Mb=["prefixPath","collectionGroup","documentId"],Rb=["collectionGroup","readTime","prefixPath","documentId"],xb=["canonicalId","targetId"],Pb=["targetId","path"],pT=["path","targetId"],gT=["collectionId","parent"],mT=["indexId","uid"],Lv=["uid","sequenceNumber"],Fv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ob=["indexId","uid","orderedDocumentKey"],kb=["userId","collectionPath","documentId"],Nb=["userId","collectionPath","largestBatchId"],Lb=["userId","collectionGroup","largestBatchId"],Bv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fb=[...Bv,"documentOverlays"],Uv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vv=Uv,mM=[...Vv,"indexConfiguration","indexState","indexEntries"];class jv extends av{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Js(n,e){const t=sn(n);return Xa.N(t.ee,e)}class a_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&Xm(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wb();return this.mutations.forEach(s=>{const l=e.get(s.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(s.key)?null:h;const m=zp(u,h);null!==m&&r.set(s.key,m),u.isValidDocument()||u.convertToNoDocument(Hn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tr())}isEqual(e){return this.batchId===e.batchId&&mu(this.mutations,e.mutations,(t,r)=>Jm(t,r))&&mu(this.baseMutations,e.baseMutations,(t,r)=>Jm(t,r))}}class Hv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){qn(e.mutations.length===r.length);let s=lT;const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,r[u].version);return new Hv(e,t,r,s)}}class ps{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Au{constructor(e,t,r,s,l=Hn.min(),u=Hn.min(),h=Ts.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Bb{constructor(e){this.ne=e}}function $v(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:l_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hc(s=n.ne,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:jc(s,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:pd(e.version)};else{if(!e.isUnknownDocument())return wn();r.unknownDocument={path:t.path.toArray(),version:pd(e.version)}}var s,l;return r}function l_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gd(n){const e=new Mi(n.seconds,n.nanoseconds);return Hn.fromTimestamp(e)}function xl(n,e){const t=(e.baseMutations||[]).map(l=>r_(n.ne,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>r_(n.ne,l)),s=Mi.fromMillis(e.localWriteTimeMs);return new a_(e.batchId,s,t,r)}function Yp(n){const e=gd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gd(n.lastLimboFreeSnapshotVersion):Hn.min();let r;var s;return void 0!==n.query.documents?(qn(1===(s=n.query).documents.length),r=Sl(vf(Iv(s.documents[0])))):r=Sl(Mv(n.query)),new Au(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ts.fromBase64String(n.resumeToken))}function Ub(n,e){const t=pd(e.snapshotVersion),r=pd(e.lastLimboFreeSnapshotVersion);let s;s=yf(e.target)?Ib(n.ne,e.target):Tb(n.ne,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wu(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function c_(n){const e=Mv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ic(e,e.limit,"L"):e}function zv(n,e){return new ps(e.largestBatchId,r_(n.ne,e.overlayMutation))}function Gv(n,e){const t=e.path.lastSegment();return[n,vo(e.path.popLast()),t]}function yT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:pd(r.readTime),documentKey:vo(r.documentKey.path),largestBatchId:r.largestBatchId}}class Vb{getBundleMetadata(e,t){return Wv(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:gd(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Wv(e).put({bundleId:(r=t).id,createTime:pd(Ki(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return oc(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:c_(s.bundledQuery),readTime:gd(s.readTime)};var s})}saveNamedQuery(e,t){return oc(e).put({name:(r=t).name,readTime:pd(Ki(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Wv(n){return Js(n,"bundles")}function oc(n){return Js(n,"namedQueries")}class u_{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new u_(e,t.uid||"")}getOverlay(e,t){return Qp(e).get(Gv(this.userId,t)).next(r=>r?zv(this.wt,r):null)}getOverlays(e,t){const r=Vc();return ot.forEach(t,s=>this.getOverlay(e,s).next(l=>{null!==l&&r.set(s,l)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((l,u)=>{const h=new ps(t,u);s.push(this.ie(e,h))}),ot.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(vo(u.getCollectionPath())));const l=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Qp(e).W("collectionPathOverlayIndex",h))}),ot.waitFor(l)}getOverlaysForCollection(e,t,r){const s=Vc(),l=vo(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Qp(e).K("collectionPathOverlayIndex",u).next(h=>{for(const m of h){const b=zv(this.wt,m);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const l=Vc();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qp(e).J({index:"collectionGroupOverlayIndex",range:h},(m,b,N)=>{const H=zv(this.wt,b);l.size()<s||H.largestBatchId===u?(l.set(H.getKey(),H),u=H.largestBatchId):N.done()}).next(()=>l)}ie(e,t){return Qp(e).put(function(r,s,l){const[u,h,m]=Gv(s,l.mutation.key);return{userId:s,collectionPath:h,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Tf(r.ne,l.mutation)}}(this.wt,this.userId,t))}}function Qp(n){return Js(n,"documentOverlays")}class No{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Bi(e.integerValue));else if("doubleValue"in e){const r=Bi(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Hm(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(ff(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?qw(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):wn()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const s of Object.keys(r))this.le(s,t),this.oe(r[s],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const s of r)this.oe(s,t)}_e(e,t){this.ce(t,37),Jt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function ac(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Pl(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const l=ac(255&t[s]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}No.ye=new No;class jb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const s=t.codePointAt(0);this.Ie(240|s>>>18),this.Ie(128|63&s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}ve(e){const t=this.Ve(e),r=Pl(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}De(e){const t=this.Ve(e),r=Pl(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(s){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,s,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Hb{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class vT{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Xp{constructor(){this.Me=new jb,this.Fe=new Hb(this.Me),this.$e=new vT(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class gh{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gh(this.indexId,this.documentKey,this.arrayValue,r)}}function mh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d_(n.arrayValue,e.arrayValue),0!==t?t:(t=d_(n.directionalValue,e.directionalValue),0!==t?t:Jt.comparator(n.documentKey,e.documentKey)))}function d_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Jp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Pm(e);if(void 0!==t&&!this.Qe(t))return!1;const r=rd(e);let s=0,l=0;for(;s<r.length&&this.Qe(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ke){const u=r[s];if(!this.je(this.Ke,u)||!this.We(this.Ue[l++],u))return!1;++s}for(;s<r.length;++s){const u=r[s];if(l>=this.Ue.length||!this.We(this.Ue[l++],u))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ET{constructor(){this.ze=new h_}addToCollectionParentIndex(e,t){return this.ze.add(t),ot.resolve()}getCollectionParents(e,t){return ot.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ot.resolve()}deleteFieldIndex(e,t){return ot.resolve()}getDocumentsMatchingTarget(e,t){return ot.resolve(null)}getIndexType(e,t){return ot.resolve(0)}getFieldIndexes(e,t){return ot.resolve([])}getNextCollectionGroupToUpdate(e){return ot.resolve(null)}getMinOffset(e,t){return ot.resolve(Tl.min())}getMinOffsetFromCollectionGroup(e,t){return ot.resolve(Tl.min())}updateCollectionGroup(e,t,r){return ot.resolve()}updateIndexEntries(e,t){return ot.resolve()}}class h_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ai(Rr.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ai(Rr.comparator)).toArray()}}const f_=new Uint8Array(0);class $b{constructor(e,t){this.user=e,this.databaseId=t,this.He=new h_,this.Je=new uh(r=>wu(r),(r,s)=>_f(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const l={collectionId:r,parent:vo(s)};return Kv(e).put(l)}return ot.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Hw(t),""],!1,!0);return Kv(e).K(s).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Rl(u.parent))}return r})}addFieldIndex(e,t){const r=p_(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete s.indexId;const l=r.add(s);if(t.indexState){const u=Af(e);return l.next(h=>{u.put(yT(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=p_(e),s=Af(e),l=md(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=md(e);let s=!0;const l=new Map;return ot.forEach(this.Ye(t),u=>this.Xe(e,u).next(h=>{s&&(s=!!h),l.set(u,h)})).next(()=>{if(s){let u=tr();const h=[];return ot.forEach(l,(m,b)=>{var N;Ut("IndexedDbIndexManager",`Using index ${N=m,`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(pn=>`${pn.fieldPath}:${pn.kind}`).join(",")}`} to execute ${wu(t)}`);const H=function(pn,on){const Zn=Pm(on);if(void 0===Zn)return null;for(const Yn of Km(pn,Zn.fieldPath))switch(Yn.op){case"array-contains-any":return Yn.value.arrayValue.values||[];case"array-contains":return[Yn.value]}return null}(b,m),ee=function(pn,on){const Zn=new Map;for(const Yn of rd(on))for(const Pr of Km(pn,Yn.fieldPath))switch(Pr.op){case"==":case"in":Zn.set(Yn.fieldPath.canonicalString(),Pr.value);break;case"not-in":case"!=":return Zn.set(Yn.fieldPath.canonicalString(),Pr.value),Array.from(Zn.values())}return null}(b,m),ge=function(pn,on){const Zn=[];let Yn=!0;for(const Pr of rd(on)){const js=0===Pr.kind?tT(pn,Pr.fieldPath,pn.startAt):Yw(pn,Pr.fieldPath,pn.startAt);Zn.push(js.value),Yn&&(Yn=js.inclusive)}return new ld(Zn,Yn)}(b,m),Ie=function(pn,on){const Zn=[];let Yn=!0;for(const Pr of rd(on)){const js=0===Pr.kind?Yw(pn,Pr.fieldPath,pn.endAt):tT(pn,Pr.fieldPath,pn.endAt);Zn.push(js.value),Yn&&(Yn=js.inclusive)}return new ld(Zn,Yn)}(b,m),et=this.Ze(m,b,ge),_t=this.Ze(m,b,Ie),nn=this.tn(m,b,ee),vn=this.en(m.indexId,H,et,ge.inclusive,_t,Ie.inclusive,nn);return ot.forEach(vn,pn=>r.j(pn,t.limit).next(on=>{on.forEach(Zn=>{const Yn=Jt.fromSegments(Zn.documentKey);u.has(Yn)||(u=u.add(Yn),h.push(Yn))})}))}).next(()=>h)}return ot.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,s,l,u,h){const m=(null!=t?t.length:1)*Math.max(r.length,l.length),b=m/(null!=t?t.length:1),N=[];for(let H=0;H<m;++H){const ee=t?this.nn(t[H/b]):f_,ge=this.sn(e,ee,r[H%b],s),Ie=this.rn(e,ee,l[H%b],u),et=h.map(_t=>this.sn(e,ee,_t,!0));N.push(...this.createRange(ge,Ie,et))}return N}sn(e,t,r,s){const l=new gh(e,Jt.empty(),t,r);return s?l:l.Le()}rn(e,t,r,s){const l=new gh(e,Jt.empty(),t,r);return s?l.Le():l}Xe(e,t){const r=new Jp(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(l=>{let u=null;for(const h of l)r.Ge(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return ot.forEach(this.Ye(t),s=>this.Xe(e,s).next(l=>{l?0!==r&&l.fields.length<function(u){let h=new ai(fs.comparator),m=!1;for(const b of u.filters){const N=b;N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?m=!0:h=h.add(N.field))}for(const b of u.orderBy)b.field.isKeyField()||(h=h.add(b.field));return h.size+(m?1:0)}(s)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Xp;for(const s of rd(e)){const l=t.data.field(s.fieldPath);if(null==l)return null;const u=r.Be(s.kind);No.ye.re(l,u)}return r.Oe()}nn(e){const t=new Xp;return No.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Xp;return No.ye.re(Ta(this.databaseId,t),r.Be(function(s){const l=rd(s);return 0===l.length?0:l[l.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let s=[];s.push(new Xp);let l=0;for(const u of rd(e)){const h=r[l++];for(const m of s)if(this.cn(t,u.fieldPath)&&jp(h))s=this.an(s,u,h);else{const b=m.Be(u.kind);No.ye.re(h,b)}}return this.hn(s)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const s=[...e],l=[];for(const u of r.arrayValue.values||[])for(const h of s){const m=new Xp;m.seed(h.Oe()),No.ye.re(u,m.Be(t.kind)),l.push(m)}return l}cn(e,t){return!!e.filters.find(r=>r instanceof Xs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=p_(e),s=Af(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(l=>{const u=[];return ot.forEach(l,h=>s.get([h.indexId,this.uid]).next(m=>{u.push(function(b,N){const H=N?new Om(N.sequenceNumber,new Tl(gd(N.readTime),new Jt(Rl(N.documentKey)),N.largestBatchId)):Om.empty(),ee=b.fields.map(([ge,Ie])=>new df(fs.fromServerFormat(ge),Ie));return new xm(b.indexId,b.collectionGroup,ee,H)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const l=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==l?l:nr(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=p_(e),l=Af(e);return this.ln(e).next(u=>s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ot.forEach(h,m=>l.put(yT(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ot.forEach(t,(s,l)=>{const u=r.get(s.collectionGroup);return(u?ot.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),ot.forEach(h,m=>this.fn(e,s,m).next(b=>{const N=this.dn(l,m);return b.isEqual(N)?ot.resolve():this._n(e,l,m,b,N)}))))})}wn(e,t,r,s){return md(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,s){return md(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const s=md(e);let l=new ai(mh);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(u,h)=>{l=l.add(new gh(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>l)}dn(e,t){let r=new ai(mh);const s=this.on(t,e);if(null==s)return r;const l=Pm(t);if(null!=l){const u=e.data.field(l.fieldPath);if(jp(u))for(const h of u.arrayValue.values||[])r=r.add(new gh(t.indexId,e.key,this.nn(h),s))}else r=r.add(new gh(t.indexId,e.key,f_,s));return r}_n(e,t,r,s,l){Ut("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,b,N,H){const ee=h.getIterator(),ge=m.getIterator();let Ie=Vp(ee),et=Vp(ge);for(;Ie||et;){let _t=!1,nn=!1;if(Ie&&et){const vn=b(Ie,et);vn<0?nn=!0:vn>0&&(_t=!0)}else null!=Ie?nn=!0:_t=!0;_t?(N(et),et=Vp(ge)):nn?(H(Ie),Ie=Vp(ee)):(Ie=Vp(ee),et=Vp(ge))}}(s,l,mh,h=>{u.push(this.wn(e,t,r,h))},h=>{u.push(this.mn(e,t,r,h))}),ot.waitFor(u)}ln(e){let t=1;return Af(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,l)=>{l.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>mh(u,h)).filter((u,h,m)=>!h||0!==mh(u,m[h-1]));const s=[];s.push(e);for(const u of r){const h=mh(u,e),m=mh(u,t);if(0===h)s[0]=e.Le();else if(h>0&&m<0)s.push(u),s.push(u.Le());else if(m>0)break}s.push(t);const l=[];for(let u=0;u<s.length;u+=2)l.push(IDBKeyRange.bound([s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,f_,[]],[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,f_,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qv)}getMinOffset(e,t){return ot.mapArray(this.Ye(t),r=>this.Xe(e,r).next(s=>s||wn())).next(qv)}}function Kv(n){return Js(n,"collectionParents")}function md(n){return Js(n,"indexEntries")}function p_(n){return Js(n,"indexConfiguration")}function Af(n){return Js(n,"indexState")}function qv(n){qn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;id(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Tl(e.readTime,e.documentKey,t)}const g_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Eo(e,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function m_(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.J({range:u},(N,H,ee)=>(h++,ee.delete()));l.push(m.next(()=>{qn(1===h)}));const b=[];for(const N of t.mutations){const H=o_(e,N.key.path,t.batchId);l.push(s.delete(H)),b.push(N.key)}return ot.waitFor(l).next(()=>b)}function eg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw wn();e=n.noDocument}return JSON.stringify(e).length}Eo.DEFAULT_COLLECTION_PERCENTILE=10,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eo.DEFAULT=new Eo(41943040,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eo.DISABLED=new Eo(-1,0,0);class tg{constructor(e,t,r,s){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=s,this.gn={}}static se(e,t,r,s){qn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new tg(l,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).J({index:"userMutationsIndex",range:r},(s,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const l=_h(e),u=Mu(e);return u.add({}).next(h=>{qn("number"==typeof h);const m=new a_(h,t,r,s),b=function(ee,ge,Ie){const et=Ie.baseMutations.map(nn=>Tf(ee.ne,nn)),_t=Ie.mutations.map(nn=>Tf(ee.ne,nn));return{userId:ge,batchId:Ie.batchId,localWriteTimeMs:Ie.localWriteTime.toMillis(),baseMutations:et,mutations:_t}}(this.wt,this.userId,m),N=[];let H=new ai((ee,ge)=>nr(ee.canonicalString(),ge.canonicalString()));for(const ee of s){const ge=o_(this.userId,ee.key.path,h);H=H.add(ee.key.path.popLast()),N.push(u.put(b)),N.push(l.put(ge,Nv))}return H.forEach(ee=>{N.push(this.indexManager.addToCollectionParentIndex(e,ee))}),e.addOnCommittedListener(()=>{this.gn[h]=m.keys()}),ot.waitFor(N).next(()=>m)})}lookupMutationBatch(e,t){return Mu(e).get(t).next(r=>r?(qn(r.userId===this.userId),xl(this.wt,r)):null)}yn(e,t){return this.gn[t]?ot.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.gn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Mu(e).J({index:"userMutationsIndex",range:s},(u,h,m)=>{h.userId===this.userId&&(qn(h.batchId>=r),l=xl(this.wt,h)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).K("userMutationsIndex",t).next(r=>r.map(s=>xl(this.wt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zp(this.userId,t.path),s=IDBKeyRange.lowerBound(r),l=[];return _h(e).J({range:s},(u,h,m)=>{const[b,N,H]=u,ee=Rl(N);if(b===this.userId&&t.path.isEqual(ee))return Mu(e).get(H).next(ge=>{if(!ge)throw wn();qn(ge.userId===this.userId),l.push(xl(this.wt,ge))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ai(nr);const s=[];return t.forEach(l=>{const u=Zp(this.userId,l.path),h=IDBKeyRange.lowerBound(u),m=_h(e).J({range:h},(b,N,H)=>{const[ee,ge,Ie]=b,et=Rl(ge);ee===this.userId&&l.path.isEqual(et)?r=r.add(Ie):H.done()});s.push(m)}),ot.waitFor(s).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,l=Zp(this.userId,r),u=IDBKeyRange.lowerBound(l);let h=new ai(nr);return _h(e).J({range:u},(m,b,N)=>{const[H,ee,ge]=m,Ie=Rl(ee);H===this.userId&&r.isPrefixOf(Ie)?Ie.length===s&&(h=h.add(ge)):N.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],s=[];return t.forEach(l=>{s.push(Mu(e).get(l).next(u=>{if(null===u)throw wn();qn(u.userId===this.userId),r.push(xl(this.wt,u))}))}),ot.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return m_(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ot.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ot.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return _h(e).J({range:r},(l,u,h)=>{if(l[0]===this.userId){const m=Rl(l[1]);s.push(m)}else h.done()}).next(()=>{qn(0===s.length)})})}containsKey(e,t){return Zv(e,this.userId,t)}Tn(e){return Yv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zv(n,e,t){const r=Zp(e,t.path),s=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return _h(n).J({range:l,H:!0},(h,m,b)=>{const[N,H,ee]=h;N===e&&H===s&&(u=!0),b.done()}).next(()=>u)}function Mu(n){return Js(n,"mutations")}function _h(n){return Js(n,"documentMutations")}function Yv(n){return Js(n,"mutationQueues")}class _d{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new _d(0)}static Rn(){return new _d(-1)}}class wT{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new _d(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Hn.fromTimestamp(new Mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Pn(e,s)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mf(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(qn(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let s=0;const l=[];return Mf(e).J((u,h)=>{const m=Yp(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(s++,l.push(this.removeTargetData(e,m)))}).next(()=>ot.waitFor(l)).next(()=>s)}forEachTarget(e,t){return Mf(e).J((r,s)=>{const l=Yp(s);t(l)})}bn(e){return zb(e).get("targetGlobalKey").next(t=>(qn(null!==t),t))}Pn(e,t){return zb(e).put("targetGlobalKey",t)}vn(e,t){return Mf(e).put(Ub(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wu(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Mf(e).J({range:s,index:"queryTargetsIndex"},(u,h,m)=>{const b=Yp(h);_f(t,b.target)&&(l=b,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const s=[],l=yd(e);return t.forEach(u=>{const h=vo(u.path);s.push(l.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),ot.waitFor(s)}removeMatchingKeys(e,t,r){const s=yd(e);return ot.forEach(t,l=>{const u=vo(l.path);return ot.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=yd(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=yd(e);let l=tr();return s.J({range:r,H:!0},(u,h,m)=>{const b=Rl(u[1]),N=new Jt(b);l=l.add(N)}).next(()=>l)}containsKey(e,t){const r=vo(t.path),s=IDBKeyRange.bound([r],[Hw(r)],!1,!0);let l=0;return yd(e).J({index:"documentTargetsIndex",H:!0,range:s},([u,h],m,b)=>{0!==u&&(l++,b.done())}).next(()=>l>0)}te(e,t){return Mf(e).get(t).next(r=>r?Yp(r):null)}}function Mf(n){return Js(n,"targets")}function zb(n){return Js(n,"targetGlobal")}function yd(n){return Js(n,"targetDocuments")}function Gb([n,e],[t,r]){const s=nr(n,t);return 0===s?nr(e,r):s}class bT{constructor(e){this.Sn=e,this.buffer=new ai(Gb),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Gb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ut("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ct.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){yu(r)?Ut("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nc(r)}yield t.kn(3e5)}))}}class DT{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ot.resolve(Oo.ot);const r=new bT(t);return this.On.forEachTarget(e,s=>r.xn(s.sequenceNumber)).next(()=>this.On.Fn(e,s=>r.xn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(g_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g_):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,s,l,u,h,m,b;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(H=>(H>this.params.maximumSequenceNumbersToCollect?(Ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${H}`),s=this.params.maximumSequenceNumbersToCollect):s=H,u=Date.now(),this.nthSequenceNumber(e,s))).next(H=>(r=H,h=Date.now(),this.removeTargets(e,r,t))).next(H=>(l=H,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(H=>(b=Date.now(),rv()<=Ni.in.DEBUG&&Ut("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-N}ms\n\tDetermined least recently used ${s} in `+(h-u)+`ms\n\tRemoved ${l} targets in `+(m-h)+`ms\n\tRemoved ${H} documents in `+(b-m)+`ms\nTotal Duration: ${b-N}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:H})))}}class IT{constructor(e,t){this.db=e,this.garbageCollector=new DT(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,s)=>t(s))}addReference(e,t,r){return __(e,r)}removeReference(e,t,r){return __(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return __(e,t)}Un(e,t){return function(r,s){let l=!1;return Yv(r).Y(u=>Zv(r,u,s).next(h=>(h&&(l=!0),ot.resolve(!h)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let l=0;return this.Ln(e,(u,h)=>{if(h<=t){const m=this.Un(e,u).next(b=>{if(!b)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Hn.min()),yd(e).delete([0,vo(u.path)])))});s.push(m)}}).next(()=>ot.waitFor(s)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return __(e,t)}Ln(e,t){const r=yd(e);let s,l=Oo.ot;return r.J({index:"documentTargetsIndex"},([u,h],{path:m,sequenceNumber:b})=>{0===u?(l!==Oo.ot&&t(new Jt(Rl(s)),l),l=b,s=m):l=Oo.ot}).next(()=>{l!==Oo.ot&&t(new Jt(Rl(s)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function __(n,e){return yd(n).put((r=n.currentSequenceNumber,{targetId:0,path:vo(e.path),sequenceNumber:r}));var r}class Wb{constructor(){this.changes=new uh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ot.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class TT{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yh(e).put(r)}removeEntry(e,t,r){return yh(e).delete(function(s,l){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],l_(l),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=bi.newInvalidDocument(t);return yh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ng(t))},(s,l)=>{r=this.Kn(t,l)}).next(()=>r)}Gn(e,t){let r={size:0,document:bi.newInvalidDocument(t)};return yh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ng(t))},(s,l)=>{r={document:this.Kn(t,l),size:eg(l)}}).next(()=>r)}getEntries(e,t){let r=ko();return this.Qn(e,t,(s,l)=>{const u=this.Kn(s,l);r=r.insert(s,u)}).next(()=>r)}jn(e,t){let r=ko(),s=new is(Jt.comparator);return this.Qn(e,t,(l,u)=>{const h=this.Kn(l,u);r=r.insert(l,h),s=s.insert(l,eg(u))}).next(()=>({documents:r,Wn:s}))}Qn(e,t,r){if(t.isEmpty())return ot.resolve();let s=new ai(Qv);t.forEach(m=>s=s.add(m));const l=IDBKeyRange.bound(ng(s.first()),ng(s.last())),u=s.getIterator();let h=u.getNext();return yh(e).J({index:"documentKeyIndex",range:l},(m,b,N)=>{const H=Jt.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;h&&Qv(h,H)<0;)r(h,null),h=u.getNext();h&&h.isEqual(H)&&(r(h,b),h=u.hasNext()?u.getNext():null),h?N.q(ng(h)):N.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),l_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yh(e).K(IDBKeyRange.bound(s,l,!0)).next(u=>{let h=ko();for(const m of u){const b=this.Kn(Jt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(b.key,b)}return h})}getAllFromCollectionGroup(e,t,r,s){let l=ko();const u=Zb(t,r),h=Zb(t,Tl.max());return yh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(m,b,N)=>{const H=this.Kn(Jt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(H.key,H),l.size===s&&N.done()}).next(()=>l)}newChangeBuffer(e){return new ST(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qb(e).get("remoteDocumentGlobalKey").next(t=>(qn(!!t),t))}qn(e,t){return qb(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function _T(n,e){let t;if(e.document)t=Av(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Jt.fromSegments(e.noDocument.path),s=gd(e.noDocument.readTime);t=bi.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wn();{const r=Jt.fromSegments(e.unknownDocument.path),s=gd(e.unknownDocument.version);t=bi.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Mi(r[0],r[1]);return Hn.fromTimestamp(s)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Hn.min()))return r}return bi.newInvalidDocument(e)}}function Kb(n){return new TT(n)}class ST extends Wb{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new uh(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new ai((l,u)=>nr(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const h=this.Hn.get(l);if(t.push(this.zn.removeEntry(e,l,h.readTime)),u.isValidDocument()){const m=$v(this.zn.wt,u);s=s.add(l.path.popLast()),r+=eg(m)-h.size,t.push(this.zn.addEntry(e,l,m))}else if(r-=h.size,this.trackRemovals){const m=$v(this.zn.wt,u.convertToNoDocument(Hn.min()));t.push(this.zn.addEntry(e,l,m))}}),s.forEach(l=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.zn.updateMetadata(e,r)),ot.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:s})=>(s.forEach((l,u)=>{this.Hn.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function qb(n){return Js(n,"remoteDocumentGlobal")}function yh(n){return Js(n,"remoteDocumentsV14")}function ng(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zb(n,e){const t=e.documentKey.path.toArray();return[n,l_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Qv(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(s=nr(t[l],r[l]),s)return s;return s=nr(t.length,r.length),s||(s=nr(t[t.length-2],r[r.length-2]),s||nr(t[t.length-1],r[r.length-1]))}class Yb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xv{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&Du(r.mutation,s,Ja.empty(),Mi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tr()){const s=Vc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(l=>{let u=dh();return l.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Vc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tr()))}populateOverlays(e,t,r){const s=[];return r.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let l=ko();const u=Wp(),h=Wp();return t.forEach((m,b)=>{const N=r.get(b.key);s.has(b.key)&&(void 0===N||N.mutation instanceof Iu)?l=l.insert(b.key,b):void 0!==N&&(u.set(b.key,N.mutation.getFieldMask()),Du(N.mutation,b,N.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((b,N)=>u.set(b,N)),t.forEach((b,N)=>{var H;return h.set(b,new Yb(N,null!==(H=u.get(b))&&void 0!==H?H:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Wp();let s=new is((u,h)=>u-h),l=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const b=t.get(m);if(null===b)return;let N=r.get(m)||Ja.empty();N=h.applyToLocalView(b,N),r.set(m,N);const H=(s.get(h.batchId)||tr()).add(m);s=s.insert(h.batchId,H)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),b=m.key,N=m.value,H=wb();N.forEach(ee=>{if(!l.has(ee)){const ge=zp(t.get(ee),r.get(ee));null!==ge&&H.set(ee,ge),l=l.add(ee)}}),u.push(this.documentOverlayCache.saveOverlays(e,b,H))}return ot.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Jt.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ot.resolve(Vc());let h=-1,m=l;return u.next(b=>ot.forEach(b,(N,H)=>(h<H.largestBatchId&&(h=H.largestBatchId),l.get(N)?ot.resolve():this.getBaseDocument(e,N,H).next(ee=>{m=m.insert(N,ee)}))).next(()=>this.populateOverlays(e,b,l)).next(()=>this.computeViews(e,m,b,tr())).next(N=>({batchId:h,changes:Eb(N)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jt(t)).next(r=>{let s=dh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let l=dh();return this.indexManager.getCollectionParents(e,s).next(u=>ot.forEach(u,h=>{const m=(b=t,N=h.child(s),new bu(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,N;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(b=>{b.forEach((N,H)=>{l=l.insert(N,H)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(s=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((h,m)=>{const b=m.getKey();null===s.get(b)&&(s=s.insert(b,bi.newInvalidDocument(b)))});let u=dh();return s.forEach((h,m)=>{const b=l.get(h);void 0!==b&&Du(b.mutation,m,Ja.empty(),Mi.now()),ob(t,m)&&(u=u.insert(h,m))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ot.resolve(bi.newInvalidDocument(t))}}class Qb{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ot.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ki(r.createTime)}),ot.resolve()}getNamedQuery(e,t){return ot.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:c_(r.bundledQuery),readTime:Ki(r.readTime)}),ot.resolve();var r}}class Xb{constructor(){this.overlays=new is(Jt.comparator),this.Xn=new Map}getOverlay(e,t){return ot.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vc();return ot.forEach(t,s=>this.getOverlay(e,s).next(l=>{null!==l&&r.set(s,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,l)=>{this.ie(e,t,l)}),ot.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Xn.get(r);return void 0!==s&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(r)),ot.resolve()}getOverlaysForCollection(e,t,r){const s=Vc(),l=t.length+1,u=new Jt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,b=m.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===l&&m.largestBatchId>r&&s.set(m.getKey(),m)}return ot.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new is((b,N)=>b-N);const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let N=l.get(b.largestBatchId);null===N&&(N=Vc(),l=l.insert(b.largestBatchId,N)),N.set(b.getKey(),b)}}const h=Vc(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,N)=>h.set(b,N)),!(h.size()>=s)););return ot.resolve(h)}ie(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const u=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new ps(t,r));let l=this.Xn.get(t);void 0===l&&(l=tr(),this.Xn.set(t,l)),this.Xn.set(t,l.add(r.key))}}class y_{constructor(){this.Zn=new ai(Vs.ts),this.es=new ai(Vs.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Vs(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Vs(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Jt(new Rr([])),r=new Vs(t,e),s=new Vs(t,e+1),l=[];return this.es.forEachInRange([r,s],u=>{this.rs(u),l.push(u.key)}),l}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Jt(new Rr([])),r=new Vs(t,e),s=new Vs(t,e+1);let l=tr();return this.es.forEachInRange([r,s],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Vs(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vs{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Jt.comparator(e.key,t.key)||nr(e.ls,t.ls)}static ns(e,t){return nr(e.ls,t.ls)||Jt.comparator(e.key,t.key)}}class Jb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new ai(Vs.ts)}checkEmpty(e){return ot.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const l=this.fs;this.fs++;const u=new a_(l,t,r,s);this.mutationQueue.push(u);for(const h of s)this.ds=this.ds.add(new Vs(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ot.resolve(u)}lookupMutationBatch(e,t){return ot.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ws(t+1),l=s<0?0:s;return ot.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vs(t,0),s=new Vs(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,s],u=>{const h=this._s(u.ls);l.push(h)}),ot.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ai(nr);return t.forEach(s=>{const l=new Vs(s,0),u=new Vs(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,u],h=>{r=r.add(h.ls)})}),ot.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Jt.isDocumentKey(l)||(l=l.child(""));const u=new Vs(new Jt(l),0);let h=new ai(nr);return this.ds.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(h=h.add(m.ls)),!0)},u),ot.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const s=this._s(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){qn(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ot.forEach(t.mutations,s=>{const l=new Vs(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Vs(t,0),s=this.ds.firstAfterOrEqual(r);return ot.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ot.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eC{constructor(e){this.ps=e,this.docs=new is(Jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,u=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ot.resolve(r?r.document.mutableCopy():bi.newInvalidDocument(t))}getEntries(e,t){let r=ko();return t.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():bi.newInvalidDocument(s))}),ot.resolve(r)}getAllFromCollection(e,t,r){let s=ko();const l=new Jt(t.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||id($w(m),r)<=0||(s=s.insert(m.key,m.mutableCopy()))}return ot.resolve(s)}getAllFromCollectionGroup(e,t,r,s){wn()}Is(e,t){return ot.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Jv(this)}getSize(e){return ot.resolve(this.size)}}class Jv extends Wb{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),ot.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class eE{constructor(e){this.persistence=e,this.Ts=new uh(t=>wu(t),_f),this.lastRemoteSnapshotVersion=Hn.min(),this.highestTargetId=0,this.Es=0,this.As=new y_,this.targetCount=0,this.Rs=_d.An()}forEachTarget(e,t){return this.Ts.forEach((r,s)=>t(s)),ot.resolve()}getLastRemoteSnapshotVersion(e){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ot.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ot.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new _d(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ot.resolve()}updateTargetData(e,t){return this.vn(t),ot.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ot.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.Ts.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),ot.waitFor(l).next(()=>s)}getTargetCount(e){return ot.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ot.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ot.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(u=>{l.push(s.markPotentiallyOrphaned(e,u))}),ot.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ot.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ot.resolve(r)}containsKey(e,t){return ot.resolve(this.As.containsKey(t))}}class vd{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Oo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new eE(this),this.indexManager=new ET,this.remoteDocumentCache=new eC(r=>this.referenceDelegate.Ss(r)),this.wt=new Bb(t),this.Ds=new Qb(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new Jb(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ut("MemoryPersistence","Starting transaction:",e);const s=new AT(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(l=>this.referenceDelegate.xs(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Ns(e,t){return ot.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class AT extends av{constructor(e){super(),this.currentSequenceNumber=e}}class v_{constructor(e){this.persistence=e,this.ks=new y_,this.Os=null}static Ms(e){return new v_(e)}get Fs(){if(this.Os)return this.Os;throw wn()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ot.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ot.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ot.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.Fs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.Fs,r=>{const s=Jt.fromPath(r);return this.$s(e,s).next(l=>{l||t.removeEntry(s,Hn.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ot.or([()=>ot.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Rf{constructor(e){this.wt=e}O(e,t,r,s){const l=new Nm("createOrUpgrade",t);var h;r<1&&s>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kv,{unique:!0}),h.createObjectStore("documentMutations"),MT(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=ot.resolve();return r<3&&s>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),MT(e)),u=u.next(()=>function(h){const m=h.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hn.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(l))),r<4&&s>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store("mutations").K().next(b=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kv,{unique:!0});const N=m.store("mutations"),H=b.map(ee=>N.put(ee));return ot.waitFor(H)})}(e,l))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(u=u.next(()=>this.Bs(l))),r<6&&s>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(l)))),r<7&&s>=7&&(u=u.next(()=>this.Us(l))),r<8&&s>=8&&(u=u.next(()=>this.qs(e,l))),r<9&&s>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(u=u.next(()=>this.Ks(l))),r<11&&s>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:kb});m.createIndex("collectionPathOverlayIndex",Nb,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Lb,{unique:!1})}(e)})),r<13&&s>=13&&(u=u.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:fT});m.createIndex("documentKeyIndex",Mb),m.createIndex("collectionGroupIndex",Rb)}(e)).next(()=>this.Gs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(u=u.next(()=>this.Qs(e,l))),r<15&&s>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:mT}).createIndex("sequenceNumberIndex",Lv,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Fv}).createIndex("documentKeyIndex",Ob,{unique:!1})}(e))),u}Ls(e){let t=0;return e.store("remoteDocuments").J((r,s)=>{t+=eg(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(s=>ot.forEach(s,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",u).next(h=>ot.forEach(h,m=>{qn(m.userId===l.userId);const b=xl(this.wt,m);return m_(e,l.userId,b).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const l=[];return r.J((u,h)=>{const m=new Rr(u),b=[0,vo(m)];l.push(t.get(b).next(N=>N?ot.resolve():t.put({targetId:0,path:vo(m),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ot.waitFor(l))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:gT});const r=t.store("collectionParents"),s=new h_,l=u=>{if(s.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:vo(m)})}};return t.store("remoteDocuments").J({H:!0},(u,h)=>{const m=new Rr(u);return l(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([u,h,m],b)=>{const N=Rl(h);return l(N.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,s)=>{const l=Yp(s),u=Ub(this.wt,l);return t.put(u)})}Gs(e,t){const r=t.store("remoteDocuments"),s=[];return r.J((l,u)=>{const h=t.store("remoteDocumentsV14"),m=(b=u,b.document?new Jt(Rr.fromString(b.document.name).popFirst(5)):b.noDocument?Jt.fromSegments(b.noDocument.path):b.unknownDocument?Jt.fromSegments(b.unknownDocument.path):wn()).path.toArray();var b;const N={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(N))}).next(()=>ot.waitFor(s))}Qs(e,t){const r=t.store("mutations"),s=Kb(this.wt),l=new vd(v_.Ms,this.wt.ne);return r.K().next(u=>{const h=new Map;return u.forEach(m=>{var b;let N=null!==(b=h.get(m.userId))&&void 0!==b?b:tr();xl(this.wt,m).keys().forEach(H=>N=N.add(H)),h.set(m.userId,N)}),ot.forEach(h,(m,b)=>{const N=new Us(b),H=u_.se(this.wt,N),ee=l.getIndexManager(N),ge=tg.se(N,this.wt,ee,l.referenceDelegate);return new Xv(s,ge,H,ee).recalculateAndSaveOverlaysForDocumentKeys(new jv(t,Oo.ot),m).next()})})}}function MT(n){n.createObjectStore("targetDocuments",{keyPath:Pb}).createIndex("documentTargetsIndex",pT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xb,{unique:!0}),n.createObjectStore("targetGlobal")}const rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tC{constructor(e,t,r,s,l,u,h,m,b,N,H=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=l,this.window=u,this.document=h,this.Ws=b,this.zs=N,this.Hs=H,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=ee=>Promise.resolve(),!tC.V())throw new Ot(lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new IT(this,s),this.ei=t+"main",this.wt=new Bb(m),this.ni=new Xa(this.ei,this.Hs,new Rf(this.wt)),this.Vs=new wT(this.referenceDelegate,this.wt),this.remoteDocumentCache=Kb(this.wt),this.Ds=new Vb,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===N&&Ds("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ot(lt.FAILED_PRECONDITION,rg);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Oo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ct.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ct.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ct.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ig(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(yu(e))return Ut("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ut("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return xf(e).get("owner").next(t=>ot.resolve(this.di(t)))}_i(e){return ig(e).delete(this.clientId)}wi(){var e=this;return(0,ct.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Js(r,"clientMetadata");return s.K().next(l=>{const u=e.gi(l,18e5),h=l.filter(m=>-1===u.indexOf(m));return ot.forEach(h,m=>s.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ot.resolve(!0):xf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ot(lt.FAILED_PRECONDITION,rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ig(e).K().next(r=>void 0===this.gi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ut("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ct.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new jv(t,Oo.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>ig(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return tg.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $b(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return u_.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ut("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",l=15===(u=this.Hs)?mM:14===u?Vv:13===u?Uv:12===u?Fb:11===u?Bv:void wn();var u;let h;return this.ni.runTransaction(e,s,l,m=>(h=new jv(m,this.Ps?this.Ps.next():Oo.ot),"readwrite-primary"===t?this.ai(h).next(b=>!!b||this.hi(h)).next(b=>{if(!b)throw Ds(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ot(lt.FAILED_PRECONDITION,ov);return r(h)}).next(b=>this.fi(h).next(()=>b)):this.bi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}bi(e){return xf(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ot(lt.FAILED_PRECONDITION,rg)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xf(e).put("owner",t)}static V(){return Xa.V()}li(e){const t=xf(e);return t.get("owner").next(r=>this.di(r)?(Ut("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ot.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ds(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,X.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ut("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ds("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Ds("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xf(n){return Js(n,"owner")}function ig(n){return Js(n,"clientMetadata")}function nC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Rn{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=s}static Vi(e,t){let r=tr(),s=tr();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Rn(e,t.fromCache,r,s)}}class rC{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ci(e,t).next(l=>l||this.xi(e,t,s,r)).next(l=>l||this.Ni(e,t))}Ci(e,t){return ot.resolve(null)}xi(e,t,r,s){return function ib(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||s.isEqual(Hn.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(l=>{const u=this.ki(t,l);return this.Oi(t,u,r,s)?this.Ni(e,t):(rv()<=Ni.in.DEBUG&&Ut("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yv(t)),this.Mi(e,u,t,km(s,-1)))})}ki(e,t){let r=new ai(ab(e));return t.forEach((s,l)=>{ob(e,l)&&(r=r.add(l))}),r}Oi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ni(e,t){return rv()<=Ni.in.DEBUG&&Ut("QueryEngine","Using full collection scan to execute query:",yv(t)),this.Di.getDocumentsMatchingQuery(e,t,Tl.min())}Mi(e,t,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}class RT{constructor(e,t,r,s){this.persistence=e,this.Fi=t,this.wt=s,this.$i=new is(nr),this.Bi=new uh(l=>wu(l),_f),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xv(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function iC(n,e,t,r){return new RT(n,e,t,r)}function vh(n,e){return tE.apply(this,arguments)}function tE(){return tE=(0,ct.Z)(function*(n,e){const t=sn(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],h=[];let m=tr();for(const b of s){u.push(b.batchId);for(const N of b.mutations)m=m.add(N.key)}for(const b of l){h.push(b.batchId);for(const N of b.mutations)m=m.add(N.key)}return t.localDocuments.getDocuments(r,m).next(b=>({Ki:b,removedBatchIds:u,addedBatchIds:h}))})})}),tE.apply(this,arguments)}function E_(n,e){const t=sn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=t.Ui.newChangeBuffer({trackRemovals:!0});return function(u,h,m,b){const N=m.batch,H=N.keys();let ee=ot.resolve();return H.forEach(ge=>{ee=ee.next(()=>b.getEntry(h,ge)).next(Ie=>{const et=m.docVersions.get(ge);qn(null!==et),Ie.version.compareTo(et)<0&&(N.applyToRemoteDocument(Ie,m),Ie.isValidDocument()&&(Ie.setReadTime(m.commitVersion),b.addEntry(Ie)))})}),ee.next(()=>u.mutationQueue.removeMutationBatch(h,N))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=tr();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function sg(n){const e=sn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function ss(n,e){const t=sn(n),r=e.snapshotVersion;let s=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Ui.newChangeBuffer({trackRemovals:!0});s=t.$i;const h=[];e.targetChanges.forEach((N,H)=>{const ee=s.get(H);if(!ee)return;h.push(t.Vs.removeMatchingKeys(l,N.removedDocuments,H).next(()=>t.Vs.addMatchingKeys(l,N.addedDocuments,H)));let ge=ee.withSequenceNumber(l.currentSequenceNumber);var Ie,et,_t;e.targetMismatches.has(H)?ge=ge.withResumeToken(Ts.EMPTY_BYTE_STRING,Hn.min()).withLastLimboFreeSnapshotVersion(Hn.min()):N.resumeToken.approximateByteSize()>0&&(ge=ge.withResumeToken(N.resumeToken,r)),s=s.insert(H,ge),et=ge,_t=N,(0===(Ie=ee).resumeToken.approximateByteSize()||et.snapshotVersion.toMicroseconds()-Ie.snapshotVersion.toMicroseconds()>=3e8||_t.addedDocuments.size+_t.modifiedDocuments.size+_t.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(l,ge))});let m=ko(),b=tr();if(e.documentUpdates.forEach(N=>{e.resolvedLimboDocuments.has(N)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,N))}),h.push(xT(l,u,e.documentUpdates).next(N=>{m=N.Gi,b=N.Qi})),!r.isEqual(Hn.min())){const N=t.Vs.getLastRemoteSnapshotVersion(l).next(H=>t.Vs.setTargetsMetadata(l,l.currentSequenceNumber,r));h.push(N)}return ot.waitFor(h).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,b)).next(()=>m)}).then(l=>(t.$i=s,l))}function xT(n,e,t){let r=tr(),s=tr();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=ko();return t.forEach((h,m)=>{const b=l.get(h);m.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(h)),m.isNoDocument()&&m.version.isEqual(Hn.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||0===m.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Ut("LocalStore","Ignoring outdated watch update for ",h,". Current version:",b.version," Watch version:",m.version)}),{Gi:u,Qi:s}})}function sC(n,e){const t=sn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Eh(n,e){const t=sn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Vs.getTargetData(r,e).next(l=>l?(s=l,ot.resolve(s)):t.Vs.allocateTargetId(r).next(u=>(s=new Au(e,u,0,r.currentSequenceNumber),t.Vs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.$i.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Pf(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,ct.Z)(function*(n,e,t){const r=sn(n),s=r.$i.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!yu(u))throw u;Ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.$i=r.$i.remove(e),r.Bi.delete(s.target)}),w_.apply(this,arguments)}function og(n,e,t){const r=sn(n);let s=Hn.min(),l=tr();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,b){const N=sn(h),H=N.Bi.get(b);return void 0!==H?ot.resolve(N.$i.get(H)):N.Vs.getTargetData(m,b)}(r,u,Sl(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(u,h.targetId).next(m=>{l=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(u,e,t?s:Hn.min(),t?l:tr())).next(h=>(oC(r,vv(e),h),{documents:h,ji:l})))}function nE(n,e){const t=sn(n),r=sn(t.Vs),s=t.$i.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",l=>r.te(l,e).next(u=>u?u.target:null))}function rE(n,e){const t=sn(n),r=t.Li.get(e)||Hn.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Ui.getAllFromCollectionGroup(s,e,km(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(oC(t,e,s),s))}function oC(n,e,t){let r=Hn.min();t.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Li.set(e,r)}function iE(){return iE=(0,ct.Z)(function*(n,e,t,r){const s=sn(n);let l=tr(),u=ko();for(const b of t){const N=e.Wi(b.metadata.name);b.document&&(l=l.add(N));const H=e.zi(b);H.setReadTime(e.Hi(b.metadata.readTime)),u=u.insert(N,H)}const h=s.Ui.newChangeBuffer({trackRemovals:!0}),m=yield Eh(s,(b=r,Sl(vf(Rr.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>xT(b,h,u).next(N=>(h.apply(b),N)).next(N=>s.Vs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>s.Vs.addMatchingKeys(b,l,m.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,N.Gi,N.Qi)).next(()=>N.Gi)))}),iE.apply(this,arguments)}function ag(n,e){return sE.apply(this,arguments)}function sE(){return sE=(0,ct.Z)(function*(n,e,t=tr()){const r=yield Eh(n,Sl(c_(e.bundledQuery))),s=sn(n);return s.persistence.runTransaction("Save named query","readwrite",l=>{const u=Ki(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Ds.saveNamedQuery(l,e);const h=r.withResumeToken(Ts.EMPTY_BYTE_STRING,u);return s.$i=s.$i.insert(h.targetId,h),s.Vs.updateTargetData(l,h).next(()=>s.Vs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>s.Vs.addMatchingKeys(l,t,r.targetId)).next(()=>s.Ds.saveNamedQuery(l,e))})}),sE.apply(this,arguments)}function aC(n,e){return`firestore_clients_${n}_${e}`}function lC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Of(n,e){return`firestore_targets_${n}_${e}`}class lg{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ji(e,t,r){const s=JSON.parse(r);let l,u="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return u&&s.error&&(u="string"==typeof s.error.message&&"string"==typeof s.error.code,u&&(l=new Ot(s.error.code,s.error.message))),u?new lg(e,t,s.state,l):(Ds("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let s,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new Ot(r.error.code,r.error.message))),l?new kf(e,r.state,s):(Ds("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,l=Cv();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=eT(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return s?new cg(e,l):(Ds("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oE(t.clientId,t.onlineState):(Ds("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wh{constructor(){this.activeTargetIds=Cv()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bh{constructor(e,t,r,s,l){this.window=e,this.js=t,this.persistenceKey=r,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new is(nr),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=aC(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new wh),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ct.Z)(function*(){const t=yield e.syncEngine.Ri();for(const s of t){if(s===e.tr)continue;const l=e.getItem(aC(e.persistenceKey,s));if(l){const u=cg.Ji(s,l);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const s=e.wr(r);s&&e.mr(s)}for(const s of e.ir)e.nr(s);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Of(this.persistenceKey,e));if(r){const s=kf.Ji(e,r);s&&(t=s.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Of(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.pr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ut("SharedClientState","READ",e,t),t}setItem(e,t){Ut("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ut("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ut("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Ds("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ct.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const s=t.Rr(r.key);return t.br(s,null)}{const s=t.Pr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const s=t.vr(r.key,r.newValue);if(s)return t.Vr(s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.Sr(r.key,r.newValue);if(s)return t.Dr(s)}}else if(r.key===t.lr){if(null!==r.newValue){const s=t.wr(r.newValue);if(s)return t.mr(s)}}else if(r.key===t.ur){const s=function(l){let u=Oo.ot;if(null!=l)try{const h=JSON.parse(l);qn("number"==typeof h),u=h}catch(h){Ds("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);s!==Oo.ot&&t.sequenceNumberHandler(s)}else if(r.key===t.dr){const s=t.Cr(r.newValue);yield Promise.all(s.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const s=new lg(this.currentUser,e,t,r),l=lC(this.persistenceKey,this.currentUser,e);this.setItem(l,s.Yi())}pr(e){const t=lC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const s=Of(this.persistenceKey,e),l=new kf(e,t,r);this.setItem(s,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return cg.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),s=Number(r[1]);return lg.Ji(new Us(void 0!==r[2]?r[2]:null),s,t)}Sr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return kf.Ji(s,t)}wr(e){return oE.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ct.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ut("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),s=this.gr(this.sr),l=this.gr(r),u=[],h=[];return l.forEach(m=>{s.has(m)||u.push(m)}),s.forEach(m=>{l.has(m)||h.push(m)}),this.syncEngine.Mr(u,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Cv();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class cC{constructor(){this.Fr=new wh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new wh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OT{Br(e){}shutdown(){}}class uC{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const dC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class hC{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class fC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,s,l){const u=this.oo(e,t);Ut("RestConnection","Sending: ",u,r);const h={};return this.uo(h,s,l),this.co(e,u,h,r).then(m=>(Ut("RestConnection","Received: ",m),m),m=>{throw cf("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}ao(e,t,r,s,l,u){return this.ro(e,t,r,s,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}oo(e,t){return`${this.so}/v1/${t}:${dC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,s){return new Promise((l,u)=>{const h=new KI;h.listenOnce(zI.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case tv.NO_ERROR:const b=h.getResponseJson();Ut("Connection","XHR received:",JSON.stringify(b)),l(b);break;case tv.TIMEOUT:Ut("Connection",'RPC "'+e+'" timed out'),u(new Ot(lt.DEADLINE_EXCEEDED,"Request time out"));break;case tv.HTTP_ERROR:const N=h.getStatus();if(Ut("Connection",'RPC "'+e+'" failed with status:',N,"response text:",h.getResponseText()),N>0){const H=h.getResponseJson().error;if(H&&H.status&&H.message){const ee=function(ge){const Ie=ge.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(Ie)>=0?Ie:lt.UNKNOWN}(H.status);u(new Ot(ee,H.message))}else u(new Ot(lt.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Ot(lt.UNAVAILABLE,"Connection failed."));break;default:wn()}}finally{Ut("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(s);h.send(t,"POST",m,r,15)})}ho(e,t,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Uw(),u=$I(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new WI({})),this.uo(h.initMessageHeaders,t,r),(0,X.uI)()||(0,X.b$)()||(0,X.d)()||(0,X.w1)()||(0,X.Mn)()||(0,X.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=s.join("");Ut("Connection","Creating WebChannel: "+m,h);const b=l.createWebChannel(m,h);let N=!1,H=!1;const ee=new hC({jr:Ie=>{H?Ut("Connection","Not sending because WebChannel is closed:",Ie):(N||(Ut("Connection","Opening WebChannel transport."),b.open(),N=!0),Ut("Connection","WebChannel sending:",Ie),b.send(Ie))},Wr:()=>b.close()}),ge=(Ie,et,_t)=>{Ie.listen(et,nn=>{try{_t(nn)}catch(vn){setTimeout(()=>{throw vn},0)}})};return ge(b,Mm.EventType.OPEN,()=>{H||Ut("Connection","WebChannel transport opened.")}),ge(b,Mm.EventType.CLOSE,()=>{H||(H=!0,Ut("Connection","WebChannel transport closed"),ee.eo())}),ge(b,Mm.EventType.ERROR,Ie=>{H||(H=!0,cf("Connection","WebChannel transport errored:",Ie),ee.eo(new Ot(lt.UNAVAILABLE,"The operation could not be completed")))}),ge(b,Mm.EventType.MESSAGE,Ie=>{var et;if(!H){const _t=Ie.data[0];qn(!!_t);const nn=_t,vn=nn.error||(null===(et=nn[0])||void 0===et?void 0:et.error);if(vn){Ut("Connection","WebChannel received error:",vn);const pn=vn.status;let on=function(Yn){const Pr=As[Yn];if(void 0!==Pr)return _b(Pr)}(pn),Zn=vn.message;void 0===on&&(on=lt.INTERNAL,Zn="Unknown error status: "+pn+" with message "+vn.message),H=!0,ee.eo(new Ot(on,Zn)),b.close()}else Ut("Connection","WebChannel received:",_t),ee.no(_t)}}),ge(u,GI.STAT_EVENT,Ie=>{Ie.stat===nv.PROXY?Ut("Connection","Detected buffering proxy"):Ie.stat===nv.NOPROXY&&Ut("Connection","Detected no buffering proxy")}),setTimeout(()=>{ee.Zr()},0),ee}}function pC(){return typeof window<"u"?window:null}function ug(){return typeof document<"u"?document:null}function dg(n){return new Dv(n,!0)}class aE{constructor(e,t,r=1e3,s=1.5,l=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=s,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,t-r);s>0&&Ut("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class kT{constructor(e,t,r,s,l,u,h,m){this.js=e,this.Ao=r,this.Ro=s,this.bo=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new aE(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ct.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,ct.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ct.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===lt.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===lt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===t&&this.Uo(r,s)},r=>{e(()=>{const s=new Ot(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){var e=this;this.state=5,this.So.Io((0,ct.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _M extends kT{constructor(e,t,r,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.wt=l}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Db(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:wn(),s=e.targetChange.targetIds||[],l=function(m,b){return m.dt?(qn(void 0===b||"string"==typeof b),Ts.fromBase64String(b||"")):(qn(void 0===b||b instanceof Uint8Array),Ts.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const b=void 0===m.code?lt.UNKNOWN:_b(m.code);return new Ot(b,m.message||"")}(u);t=new bb(r,s,l,h||null)}else if("documentChange"in e){const r=e.documentChange,s=na(n,r.document.name),l=Ki(r.document.updateTime),u=new Ss({mapValue:{fields:r.document.fields}}),h=bi.newFoundDocument(s,l,u);t=new e_(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,s=na(n,r.document),l=r.readTime?Ki(r.readTime):Hn.min(),u=bi.newNoDocument(s,l);t=new e_([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,s=na(n,r.document);t=new e_([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return wn();{const r=e.filter,l=new gM(r.count||0);t=new t_(r.targetId,l)}}var m;return t}(this.wt,e),r=function(s){if(!("targetChange"in s))return Hn.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Hn.min():l.readTime?Ki(l.readTime):Hn.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=If(this.wt),t.addTarget=function(s,l){let u;const h=l.target;return u=yf(h)?{documents:Ib(s,h)}:{query:Tb(s,h)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=fh(s,l.resumeToken):l.snapshotVersion.compareTo(Hn.min())>0&&(u.readTime=jc(s,l.snapshotVersion.toTimestamp())),u}(this.wt,e);const r=function dT(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=If(this.wt),t.removeTarget=e,this.Mo(t)}}class yM extends kT{constructor(e,t,r,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(qn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function uT(n,e){return n&&n.length>0?(qn(void 0!==e),n.map(t=>function(r,s){let l=Ki(r.updateTime?r.updateTime:s);return l.isEqual(Hn.min())&&(l=Ki(s)),new fb(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ki(e.commitTime);return this.listener.Jo(r,t)}return qn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=If(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Tf(this.wt,r))};this.Mo(t)}}class vM extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new Ot(lt.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ro(e,t,r,s,l)).catch(s=>{throw"FirebaseError"===s.name?(s.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ot(lt.UNKNOWN,s.toString())})}ao(e,t,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.bo.ao(e,t,r,l,u,s)).catch(l=>{throw"FirebaseError"===l.name?(l.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ot(lt.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class gC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ds(t),this.su=!1):Ut("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class b_{constructor(e,t,r,s,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(h=>{r.enqueueAndForget((0,ct.Z)(function*(){var m;Ed(u)&&(Ut("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ct.Z)(function*(b){const N=sn(b);N.lu.add(4),yield Ch(N),N._u.set("Unknown"),N.lu.delete(4),yield hg(N)}),function(b){return m.apply(this,arguments)})(u))}))}),this._u=new gC(r,s)}}function hg(n){return lE.apply(this,arguments)}function lE(){return lE=(0,ct.Z)(function*(n){if(Ed(n))for(const e of n.fu)yield e(!0)}),lE.apply(this,arguments)}function Ch(n){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,ct.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Dh.apply(this,arguments)}function C_(n,e){const t=sn(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),D_(t)?uE(t):Ih(t).Co()&&cE(t,e))}function fg(n,e){const t=sn(n),r=Ih(t);t.hu.delete(e),r.Co()&&mC(t,e),0===t.hu.size&&(r.Co()?r.ko():Ed(t)&&t._u.set("Unknown"))}function cE(n,e){n.wu.Nt(e.targetId),Ih(n).Qo(e)}function mC(n,e){n.wu.Nt(e),Ih(n).jo(e)}function uE(n){n.wu=new qp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Ih(n).start(),n._u.iu()}function D_(n){return Ed(n)&&!Ih(n).Do()&&n.hu.size>0}function Ed(n){return 0===sn(n).lu.size}function _C(n){n.wu=void 0}function Nf(n){return dE.apply(this,arguments)}function dE(){return dE=(0,ct.Z)(function*(n){n.hu.forEach((e,t)=>{cE(n,e)})}),dE.apply(this,arguments)}function yC(n,e){return hE.apply(this,arguments)}function hE(){return hE=(0,ct.Z)(function*(n,e){_C(n),D_(n)?(n._u.uu(e),uE(n)):n._u.set("Unknown")}),hE.apply(this,arguments)}function vC(n,e,t){return fE.apply(this,arguments)}function fE(){return fE=(0,ct.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof bb&&2===e.state&&e.cause)try{yield(r=(0,ct.Z)(function*(s,l){const u=l.cause;for(const h of l.targetIds)s.hu.has(h)&&(yield s.remoteSyncer.rejectListen(h,u),s.hu.delete(h),s.wu.removeTarget(h))}),function(s,l){return r.apply(this,arguments)})(n,e)}catch(r){Ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pg(n,r)}else if(e instanceof e_?n.wu.Ut(e):e instanceof t_?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Hn.min()))try{const r=yield sg(n.localStore);t.compareTo(r)>=0&&(yield function(s,l){const u=s.wu.Yt(l);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const b=s.hu.get(m);b&&s.hu.set(m,b.withResumeToken(h.resumeToken,l))}}),u.targetMismatches.forEach(h=>{const m=s.hu.get(h);if(!m)return;s.hu.set(h,m.withResumeToken(Ts.EMPTY_BYTE_STRING,m.snapshotVersion)),mC(s,h);const b=new Au(m.target,h,1,m.sequenceNumber);cE(s,b)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ut("RemoteStore","Failed to raise snapshot:",r),yield pg(n,r)}var r}),fE.apply(this,arguments)}function pg(n,e,t){return pE.apply(this,arguments)}function pE(){return pE=(0,ct.Z)(function*(n,e,t){if(!yu(e))throw e;n.lu.add(1),yield Ch(n),n._u.set("Offline"),t||(t=()=>sg(n.localStore)),n.asyncQueue.enqueueRetryable((0,ct.Z)(function*(){Ut("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield hg(n)}))}),pE.apply(this,arguments)}function I_(n,e){return e().catch(t=>pg(n,t,e))}function Lf(n){return T_.apply(this,arguments)}function T_(){return T_=(0,ct.Z)(function*(n){const e=sn(n),t=wd(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;EC(e);)try{const s=yield sC(e.localStore,r);if(null===s){0===e.au.length&&t.ko();break}r=s.batchId,NT(e,s)}catch(s){yield pg(e,s)}wC(e)&&bC(e)}),T_.apply(this,arguments)}function EC(n){return Ed(n)&&n.au.length<10}function NT(n,e){n.au.push(e);const t=wd(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function wC(n){return Ed(n)&&!wd(n).Do()&&n.au.length>0}function bC(n){wd(n).start()}function gE(n){return mE.apply(this,arguments)}function mE(){return mE=(0,ct.Z)(function*(n){wd(n).Xo()}),mE.apply(this,arguments)}function CC(n){return _E.apply(this,arguments)}function _E(){return _E=(0,ct.Z)(function*(n){const e=wd(n);for(const t of n.au)e.Ho(t.mutations)}),_E.apply(this,arguments)}function LT(n,e,t){return yE.apply(this,arguments)}function yE(){return yE=(0,ct.Z)(function*(n,e,t){const r=n.au.shift(),s=Hv.from(r,e,t);yield I_(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Lf(n)}),yE.apply(this,arguments)}function FT(n,e){return vE.apply(this,arguments)}function vE(){return vE=(0,ct.Z)(function*(n,e){var t;e&&wd(n).zo&&(yield(t=(0,ct.Z)(function*(r,s){if(mb(l=s.code)&&l!==lt.ABORTED){const u=r.au.shift();wd(r).No(),yield I_(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,s)),yield Lf(r)}var l}),function(r,s){return t.apply(this,arguments)})(n,e)),wC(n)&&bC(n)}),vE.apply(this,arguments)}function DC(n,e){return EE.apply(this,arguments)}function EE(){return EE=(0,ct.Z)(function*(n,e){const t=sn(n);t.asyncQueue.verifyOperationInProgress(),Ut("RemoteStore","RemoteStore received new credentials");const r=Ed(t);t.lu.add(3),yield Ch(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield hg(t)}),EE.apply(this,arguments)}function wE(n,e){return S_.apply(this,arguments)}function S_(){return S_=(0,ct.Z)(function*(n,e){const t=sn(n);e?(t.lu.delete(2),yield hg(t)):e||(t.lu.add(2),yield Ch(t),t._u.set("Unknown"))}),S_.apply(this,arguments)}function Ih(n){return n.mu||(n.mu=function(e,t,r){const s=sn(e);return s.tu(),new _M(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:Nf.bind(null,n),Jr:yC.bind(null,n),Go:vC.bind(null,n)}),n.fu.push(function(){var e=(0,ct.Z)(function*(t){t?(n.mu.No(),D_(n)?uE(n):n._u.set("Unknown")):(yield n.mu.stop(),_C(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function wd(n){return n.gu||(n.gu=function(e,t,r){const s=sn(e);return s.tu(),new yM(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:gE.bind(null,n),Jr:FT.bind(null,n),Yo:CC.bind(null,n),Jo:LT.bind(null,n)}),n.fu.push(function(){var e=(0,ct.Z)(function*(t){t?(n.gu.No(),yield Lf(n)):(yield n.gu.stop(),n.au.length>0&&(Ut("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class bE{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,s,l){const u=Date.now()+r,h=new bE(e,t,u,s,l);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ot(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),yu(n))return new Ot(lt.UNAVAILABLE,`${e}: ${n}`);throw n}class Ff{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Jt.comparator(t.key,r.key):(t,r)=>Jt.comparator(t.key,r.key),this.keyedMap=dh(),this.sortedSet=new is(this.comparator)}static emptySet(e){return new Ff(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ff)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ff;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class IC{constructor(){this.yu=new is(Jt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):wn():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bf{constructor(e,t,r,s,l,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,s){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Bf(e,t,Ff.emptySet(t),l,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class CE{constructor(){this.Iu=void 0,this.listeners=[]}}class DE{constructor(){this.queries=new uh(e=>sb(e),ah),this.onlineState="Unknown",this.Tu=new Set}}function A_(n,e){return gg.apply(this,arguments)}function gg(){return gg=(0,ct.Z)(function*(n,e){const t=sn(n),r=e.query;let s=!1,l=t.queries.get(r);if(l||(s=!0,l=new CE),s)try{l.Iu=yield t.onListen(r)}catch(u){const h=Th(u,`Initialization of query '${yv(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&AE(t)}),gg.apply(this,arguments)}function IE(n,e){return TE.apply(this,arguments)}function TE(){return TE=(0,ct.Z)(function*(n,e){const t=sn(n),r=e.query;let s=!1;const l=t.queries.get(r);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),s=0===l.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),TE.apply(this,arguments)}function SE(n,e){const t=sn(n);let r=!1;for(const s of e){const u=t.queries.get(s.query);if(u){for(const h of u.listeners)h.Au(s)&&(r=!0);u.Iu=s}}r&&AE(t)}function BT(n,e,t){const r=sn(n),s=r.queries.get(e);if(s)for(const l of s.listeners)l.onError(t);r.queries.delete(e)}function AE(n){n.Tu.forEach(e=>{e.next()})}class bd{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Bf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Bf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class TC{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class SC{constructor(e){this.wt=e}Wi(e){return na(this.wt,e)}zi(e){return e.metadata.exists?Av(this.wt,e.document,!1):bi.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ki(e)}}class EM{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ME(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Rr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new SC(this.wt);for(const s of e)if(s.metadata.queries){const l=r.Wi(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||tr()).add(l);t.set(u,h)}}return t}complete(){var e=this;return(0,ct.Z)(function*(){const t=yield function PT(n,e,t,r){return iE.apply(this,arguments)}(e.localStore,new SC(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const s of e.queries)yield ag(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function ME(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class M_{constructor(e){this.key=e}}class AC{constructor(e){this.key=e}}class R_{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=tr(),this.mutatedKeys=tr(),this.Lu=ab(e),this.Uu=new Ff(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new IC,s=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const m="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((N,H)=>{const ee=s.get(N),ge=ob(this.query,H)?H:null,Ie=!!ee&&this.mutatedKeys.has(ee.key),et=!!ge&&(ge.hasLocalMutations||this.mutatedKeys.has(ge.key)&&ge.hasCommittedMutations);let _t=!1;ee&&ge?ee.data.isEqual(ge.data)?Ie!==et&&(r.track({type:3,doc:ge}),_t=!0):this.Qu(ee,ge)||(r.track({type:2,doc:ge}),_t=!0,(m&&this.Lu(ge,m)>0||b&&this.Lu(ge,b)<0)&&(h=!0)):!ee&&ge?(r.track({type:0,doc:ge}),_t=!0):ee&&!ge&&(r.track({type:1,doc:ee}),_t=!0,(m||b)&&(h=!0)),_t&&(ge?(u=u.add(ge),l=et?l.add(N):l.delete(N)):(u=u.delete(N),l=l.delete(N)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const N="F"===this.query.limitType?u.last():u.first();u=u.delete(N.key),l=l.delete(N.key),r.track({type:1,doc:N})}return{Uu:u,Gu:r,Oi:h,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Gu.pu();l.sort((b,N)=>function(H,ee){const ge=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wn()}};return ge(H)-ge(ee)}(b.type,N.type)||this.Lu(b.doc,N.doc)),this.ju(r);const u=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,m=h!==this.$u;return this.$u=h,0!==l.length||m?{snapshot:new Bf(this.query,e.Uu,s,l,e.mutatedKeys,0===h,m,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new IC,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=tr(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new AC(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new M_(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=tr();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Bf.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class UT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VT{constructor(e){this.key=e,this.Xu=!1}}class RE{constructor(e,t,r,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new uh(h=>sb(h),ah),this.ec=new Map,this.nc=new Set,this.sc=new is(Jt.comparator),this.ic=new Map,this.rc=new y_,this.oc={},this.uc=new Map,this.cc=_d.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function MC(n,e){return x_.apply(this,arguments)}function x_(){return x_=(0,ct.Z)(function*(n,e){const t=Ah(n);let r,s;const l=t.tc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),s=l.view.Yu();else{const u=yield Eh(t.localStore,Sl(e));t.isPrimaryClient&&C_(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,s=yield P_(t,e,r,"current"===h)}return s}),x_.apply(this,arguments)}function P_(n,e,t,r){return O_.apply(this,arguments)}function O_(){return O_=(0,ct.Z)(function*(n,e,t,r){n.hc=(N,H,ee)=>{return(ge=(0,ct.Z)(function*(Ie,et,_t,nn){let vn=et.view.Ku(_t);vn.Oi&&(vn=yield og(Ie.localStore,et.query,!1).then(({documents:Zn})=>et.view.Ku(Zn,vn)));const pn=nn&&nn.targetChanges.get(et.targetId),on=et.view.applyChanges(vn,Ie.isPrimaryClient,pn);return VE(Ie,et.targetId,on.zu),on.snapshot}),function(Ie,et,_t,nn){return ge.apply(this,arguments)})(n,N,H,ee);var ge};const s=yield og(n.localStore,e,!0),l=new R_(e,s.ji),u=l.Ku(s.documents),h=Kp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=l.applyChanges(u,n.isPrimaryClient,h);VE(n,t,m.zu);const b=new UT(e,t,l);return n.tc.set(e,b),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),O_.apply(this,arguments)}function jT(n,e){return xE.apply(this,arguments)}function xE(){return xE=(0,ct.Z)(function*(n,e){const t=sn(n),r=t.tc.get(e),s=t.ec.get(r.targetId);if(s.length>1)return t.ec.set(r.targetId,s.filter(l=>!ah(l,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Pf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fg(t.remoteStore,r.targetId),Uf(t,r.targetId)}).catch(nc))):(Uf(t,r.targetId),yield Pf(t.localStore,r.targetId,!0))}),xE.apply(this,arguments)}function PE(){return PE=(0,ct.Z)(function*(n,e,t){const r=WE(n);try{const s=yield function(l,u){const h=sn(l),m=Mi.now(),b=u.reduce((ee,ge)=>ee.add(ge.key),tr());let N,H;return h.persistence.runTransaction("Locally write mutations","readwrite",ee=>{let ge=ko(),Ie=tr();return h.Ui.getEntries(ee,b).next(et=>{ge=et,ge.forEach((_t,nn)=>{nn.isValidDocument()||(Ie=Ie.add(_t))})}).next(()=>h.localDocuments.getOverlayedDocuments(ee,ge)).next(et=>{N=et;const _t=[];for(const nn of u){const vn=aT(nn,N.get(nn.key).overlayedDocument);null!=vn&&_t.push(new Iu(nn.key,vn,mf(vn.value.mapValue),Ui.exists(!0)))}return h.mutationQueue.addMutationBatch(ee,m,_t,u)}).next(et=>{H=et;const _t=et.applyToLocalDocumentSet(N,Ie);return h.documentOverlayCache.saveOverlays(ee,et.batchId,_t)})}).then(()=>({batchId:H.batchId,changes:Eb(N)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,h){let m=l.oc[l.currentUser.toKey()];m||(m=new is(nr)),m=m.insert(u,h),l.oc[l.currentUser.toKey()]=m}(r,s.batchId,t),yield Ru(r,s.changes),yield Lf(r.remoteStore)}catch(s){const l=Th(s,"Failed to persist write");t.reject(l)}}),PE.apply(this,arguments)}function OE(n,e){return RC.apply(this,arguments)}function RC(){return RC=(0,ct.Z)(function*(n,e){const t=sn(n);try{const r=yield ss(t.localStore,e);e.targetChanges.forEach((s,l)=>{const u=t.ic.get(l);u&&(qn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Xu=!0:s.modifiedDocuments.size>0?qn(u.Xu):s.removedDocuments.size>0&&(qn(u.Xu),u.Xu=!1))}),yield Ru(t,r,e)}catch(r){yield nc(r)}}),RC.apply(this,arguments)}function kE(n,e,t){const r=sn(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.tc.forEach((l,u)=>{const h=u.view.Eu(e);h.snapshot&&s.push(h.snapshot)}),function(l,u){const h=sn(l);h.onlineState=u;let m=!1;h.queries.forEach((b,N)=>{for(const H of N.listeners)H.Eu(u)&&(m=!0)}),m&&AE(h)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $T(n,e,t){return NE.apply(this,arguments)}function NE(){return NE=(0,ct.Z)(function*(n,e,t){const r=sn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ic.get(e),l=s&&s.key;if(l){let u=new is(Jt.comparator);u=u.insert(l,bi.newNoDocument(l,Hn.min()));const h=tr().add(l),m=new Tu(Hn.min(),new Map,new ai(nr),u,h);yield OE(r,m),r.sc=r.sc.remove(l),r.ic.delete(e),jE(r)}else yield Pf(r.localStore,e,!1).then(()=>Uf(r,e,t)).catch(nc)}),NE.apply(this,arguments)}function wM(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,ct.Z)(function*(n,e){const t=sn(n),r=e.batch.batchId;try{const s=yield E_(t.localStore,e);UE(t,r,null),BE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ru(t,s)}catch(s){yield nc(s)}}),xC.apply(this,arguments)}function zT(n,e,t){return LE.apply(this,arguments)}function LE(){return LE=(0,ct.Z)(function*(n,e,t){const r=sn(n);try{const s=yield function(l,u){const h=sn(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return h.mutationQueue.lookupMutationBatch(m,u).next(N=>(qn(null!==N),b=N.keys(),h.mutationQueue.removeMutationBatch(m,N))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,b,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,b)).next(()=>h.localDocuments.getDocuments(m,b))})}(r.localStore,e);UE(r,e,t),BE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ru(r,s)}catch(s){yield nc(s)}}),LE.apply(this,arguments)}function FE(){return FE=(0,ct.Z)(function*(n,e){const t=sn(n);Ed(t.remoteStore)||Ut("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const u=sn(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const s=t.uc.get(r)||[];s.push(e),t.uc.set(r,s)}catch(r){const s=Th(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),FE.apply(this,arguments)}function BE(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function UE(n,e,t){const r=sn(n);let s=r.oc[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}function Uf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||OC(n,r)})}function OC(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(fg(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),jE(n))}function VE(n,e,t){for(const r of t)r instanceof M_?(n.rc.addReference(r.key,e),GT(n,r)):r instanceof AC?(Ut("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||OC(n,r.key)):wn()}function GT(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ut("SyncEngine","New document in limbo: "+t),n.nc.add(r),jE(n))}function jE(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Jt(Rr.fromString(e)),r=n.cc.next();n.ic.set(r,new VT(t)),n.sc=n.sc.insert(t,r),C_(n.remoteStore,new Au(Sl(vf(t.path)),r,2,Oo.ot))}}function Ru(n,e,t){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,ct.Z)(function*(n,e,t){const r=sn(n),s=[],l=[],u=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,m)=>{u.push(r.hc(m,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),s.push(b);const N=Rn.Vi(m.targetId,b);l.push(N)}}))}),yield Promise.all(u),r.Zu.Go(s),yield(h=(0,ct.Z)(function*(m,b){const N=sn(m);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",H=>ot.forEach(b,ee=>ot.forEach(ee.Pi,ge=>N.persistence.referenceDelegate.addReference(H,ee.targetId,ge)).next(()=>ot.forEach(ee.vi,ge=>N.persistence.referenceDelegate.removeReference(H,ee.targetId,ge)))))}catch(H){if(!yu(H))throw H;Ut("LocalStore","Failed to update sequence numbers: "+H)}for(const H of b){const ee=H.targetId;if(!H.fromCache){const ge=N.$i.get(ee),et=ge.withLastLimboFreeSnapshotVersion(ge.snapshotVersion);N.$i=N.$i.insert(ee,et)}}}),function(m,b){return h.apply(this,arguments)})(r.localStore,l))}),Sh.apply(this,arguments)}function kC(n,e){return k_.apply(this,arguments)}function k_(){return k_=(0,ct.Z)(function*(n,e){const t=sn(n);if(!t.currentUser.isEqual(e)){Ut("SyncEngine","User change. New user:",e.toKey());const r=yield vh(t.localStore,e);t.currentUser=e,(s=t).uc.forEach(u=>{u.forEach(h=>{h.reject(new Ot(lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ru(t,r.Ki)}var s}),k_.apply(this,arguments)}function NC(n,e){const t=sn(n),r=t.ic.get(e);if(r&&r.Xu)return tr().add(r.key);{let s=tr();const l=t.ec.get(e);if(!l)return s;for(const u of l){const h=t.tc.get(u);s=s.unionWith(h.view.qu)}return s}}function LC(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,ct.Z)(function*(n,e){const t=sn(n),r=yield og(t.localStore,e.query,!0),s=e.view.Ju(r);return t.isPrimaryClient&&VE(t,e.targetId,s.zu),s}),N_.apply(this,arguments)}function FC(n,e){return HE.apply(this,arguments)}function HE(){return HE=(0,ct.Z)(function*(n,e){const t=sn(n);return rE(t.localStore,e).then(r=>Ru(t,r))}),HE.apply(this,arguments)}function bM(n,e,t,r){return L_.apply(this,arguments)}function L_(){return L_=(0,ct.Z)(function*(n,e,t,r){const s=sn(n),l=yield function(u,h){const m=sn(u),b=sn(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",N=>b.yn(N,h).next(H=>H?m.localDocuments.getDocuments(N,H):ot.resolve(null)))}(s.localStore,e);var h;null!==l?("pending"===t?yield Lf(s.remoteStore):"acknowledged"===t||"rejected"===t?(UE(s,e,r||null),BE(s,e),h=e,sn(sn(s.localStore).mutationQueue).In(h)):wn(),yield Ru(s,l)):Ut("SyncEngine","Cannot apply mutation batch with id: "+e)}),L_.apply(this,arguments)}function $E(){return $E=(0,ct.Z)(function*(n,e){const t=sn(n);if(Ah(t),WE(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield BC(t,r.toArray());t.ac=!0,yield wE(t.remoteStore,!0);for(const l of s)C_(t.remoteStore,l)}else if(!1===e&&!1!==t.ac){const r=[];let s=Promise.resolve();t.ec.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(Uf(t,u),Pf(t.localStore,u,!0))),fg(t.remoteStore,u)}),yield s,yield BC(t,r),function(l){const u=sn(l);u.ic.forEach((h,m)=>{fg(u.remoteStore,m)}),u.rc.cs(),u.ic=new Map,u.sc=new is(Jt.comparator)}(t),t.ac=!1,yield wE(t.remoteStore,!1)}}),$E.apply(this,arguments)}function BC(n,e,t){return zE.apply(this,arguments)}function zE(){return zE=(0,ct.Z)(function*(n,e,t){const r=sn(n),s=[],l=[];for(const u of e){let h;const m=r.ec.get(u);if(m&&0!==m.length){h=yield Eh(r.localStore,Sl(m[0]));for(const b of m){const N=r.tc.get(b),H=yield LC(r,N);H.snapshot&&l.push(H.snapshot)}}else{const b=yield nE(r.localStore,u);h=yield Eh(r.localStore,b),yield P_(r,Vf(b),u,!1)}s.push(h)}return r.Zu.Go(l),s}),zE.apply(this,arguments)}function Vf(n){return gv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KT(n){const e=sn(n);return sn(sn(e.localStore).persistence).Ri()}function GE(n,e,t,r){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,ct.Z)(function*(n,e,t,r){const s=sn(n);if(s.ac)return void Ut("SyncEngine","Ignoring unexpected query state notification.");const l=s.ec.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield rE(s.localStore,vv(l[0])),h=Tu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ru(s,u,h);break}case"rejected":yield Pf(s.localStore,e,!0),Uf(s,e,r);break;default:wn()}}),Ol.apply(this,arguments)}function qT(n,e,t){return mg.apply(this,arguments)}function mg(){return mg=(0,ct.Z)(function*(n,e,t){const r=Ah(n);if(r.ac){for(const s of e){if(r.ec.has(s)){Ut("SyncEngine","Adding an already active target "+s);continue}const l=yield nE(r.localStore,s),u=yield Eh(r.localStore,l);yield P_(r,Vf(l),u.targetId,!1),C_(r.remoteStore,u)}for(const s of t)r.ec.has(s)&&(yield Pf(r.localStore,s,!1).then(()=>{fg(r.remoteStore,s),Uf(r,s)}).catch(nc))}}),mg.apply(this,arguments)}function Ah(n){const e=sn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$T.bind(null,e),e.Zu.Go=SE.bind(null,e.eventManager),e.Zu.lc=BT.bind(null,e.eventManager),e}function WE(n){const e=sn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zT.bind(null,e),e}class UC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ct.Z)(function*(){t.wt=dg(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return iC(this.persistence,new rC,e.initialUser,this.wt)}_c(e){return new vd(v_.Ms,this.wt)}dc(e){return new cC}terminate(){var e=this;return(0,ct.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _g extends UC{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ct.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield WE(r.yc.syncEngine),yield Lf(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return iC(this.persistence,new rC,e.initialUser,this.wt)}mc(e,t){return new CT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new Fm(t,this.persistence);return new Lm(e.asyncQueue,r)}_c(e){const t=nC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Eo.withCacheSize(this.cacheSizeBytes):Eo.DEFAULT;return new tC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pC(),ug(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new cC}}class F_ extends _g{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ct.Z)(function*(){yield t().call(r,e);const s=r.yc.syncEngine;r.sharedClientState instanceof bh&&(r.sharedClientState.syncEngine={kr:bM.bind(null,s),Or:GE.bind(null,s),Mr:qT.bind(null,s),Ri:KT.bind(null,s),Nr:FC.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var l=(0,ct.Z)(function*(u){yield function WT(n,e){return $E.apply(this,arguments)}(r.yc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}dc(e){const t=pC();if(!bh.V(t))throw new Ot(lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bh(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class KE{initialize(e,t){var r=this;return(0,ct.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>kE(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=kC.bind(null,r.syncEngine),yield wE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DE}createDatastore(e){const t=dg(e.databaseInfo.databaseId),r=new fC(e.databaseInfo);return new vM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,l=h=>kE(this.syncEngine,h,0),u=uC.V()?new uC:new OT,new b_(t,r,s,l,u);var t,r,s,l,u}createSyncEngine(e,t){return function(r,s,l,u,h,m,b){const N=new RE(r,s,l,u,h,m);return b&&(N.ac=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ct.Z)(function*(t){const r=sn(t);Ut("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Ch(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function VC(n,e=10240){let t=0;return{read:()=>(0,ct.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ct.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jC{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Is,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ct.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ct.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ct.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),s=Number(r);isNaN(s)&&e.Pc(`length string (${r}) is not valid number`);const l=yield e.vc(s);return new TC(JSON.parse(l),t.length+s)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ct.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ct.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ct.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ct.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ot(lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ct.Z)(function*(l,u){const h=sn(l),m=If(h.wt)+"/documents",b={documents:u.map(ge=>Hc(h.wt,ge))},N=yield h.ao("BatchGetDocuments",m,b,u.length),H=new Map;N.forEach(ge=>{const Ie=function Cb(n,e){return"found"in e?function(t,r){qn(!!r.found);const s=na(t,r.found.name),l=Ki(r.found.updateTime),u=new Ss({mapValue:{fields:r.found.fields}});return bi.newFoundDocument(s,l,u)}(n,e):"missing"in e?function(t,r){qn(!!r.missing),qn(!!r.readTime);const s=na(t,r.missing),l=Ki(r.readTime);return bi.newNoDocument(s,l)}(n,e):wn()}(h.wt,ge);H.set(Ie.key.toString(),Ie)});const ee=[];return u.forEach(ge=>{const Ie=H.get(ge.toString());qn(!!Ie),ee.push(Ie)}),ee}),function(l,u){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ct.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const l=Jt.fromPath(s);e.mutations.push(new bv(l,e.precondition(l)))}),yield(r=(0,ct.Z)(function*(s,l){const u=sn(s),h=If(u.wt)+"/documents",m={writes:l.map(b=>Tf(u.wt,b))};yield u.ro("Commit",h,m)}),function(s,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wn();t=Hn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ot(lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ui.updateTime(t):Ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hn.min()))throw new Ot(lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ui.updateTime(t)}return Ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class HC{constructor(e,t,r,s,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=l,this.Dc=r.maxAttempts,this.So=new aE(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ct.Z)(function*(){const t=new qE(e.datastore),r=e.xc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(l=>{e.Nc(l)}))}).catch(s=>{e.Nc(s)})}))}xc(e){try{const t=this.updateFunction(e);return!jm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mb(t)}return!1}}class YT{constructor(e,t,r,s){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Us.UNAUTHENTICATED,this.clientId=jw.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ct.Z)(function*(h){Ut("FirestoreClient","Received user=",h.uid),yield l.authCredentialListener(h),l.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ut("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ct.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ot(lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ct.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Th(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function $C(n,e){return zC.apply(this,arguments)}function zC(){return zC=(0,ct.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ut("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ct.Z)(function*(l){r.isEqual(l)||(yield vh(e.localStore,l),r=l)});return function(l){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),zC.apply(this,arguments)}function B_(n,e){return vg.apply(this,arguments)}function vg(){return vg=(0,ct.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield U_(n);Ut("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>DC(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,l)=>DC(e.remoteStore,l)),n.onlineComponents=e}),vg.apply(this,arguments)}function U_(n){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,ct.Z)(function*(n){return n.offlineComponents||(Ut("FirestoreClient","Using default OfflineComponentProvider"),yield $C(n,new UC)),n.offlineComponents}),Eg.apply(this,arguments)}function jf(n){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,ct.Z)(function*(n){return n.onlineComponents||(Ut("FirestoreClient","Using default OnlineComponentProvider"),yield B_(n,new KE)),n.onlineComponents}),ZE.apply(this,arguments)}function GC(n){return U_(n).then(e=>e.persistence)}function YE(n){return U_(n).then(e=>e.localStore)}function WC(n){return jf(n).then(e=>e.remoteStore)}function V_(n){return jf(n).then(e=>e.syncEngine)}function Cd(n){return j_.apply(this,arguments)}function j_(){return j_=(0,ct.Z)(function*(n){const e=yield jf(n),t=e.eventManager;return t.onListen=MC.bind(null,e.syncEngine),t.onUnlisten=jT.bind(null,e.syncEngine),t}),j_.apply(this,arguments)}function YC(n,e,t={}){const r=new Is;return n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return function(s,l,u,h,m){const b=new yg({next:H=>{l.enqueueAndForget(()=>IE(s,N));const ee=H.docs.has(u);!ee&&H.fromCache?m.reject(new Ot(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):ee&&H.fromCache&&h&&"server"===h.source?m.reject(new Ot(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(H)},error:H=>m.reject(H)}),N=new bd(vf(u.path),b,{includeMetadataChanges:!0,Du:!0});return A_(s,N)}(yield Cd(n),n.asyncQueue,e,t,r)})),r.promise}function QE(n,e,t={}){const r=new Is;return n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return function(s,l,u,h,m){const b=new yg({next:H=>{l.enqueueAndForget(()=>IE(s,N)),H.fromCache&&"server"===h.source?m.reject(new Ot(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(H)},error:H=>m.reject(H)}),N=new bd(u,b,{includeMetadataChanges:!0,Du:!0});return A_(s,N)}(yield Cd(n),n.asyncQueue,e,t,r)})),r.promise}const Mh=new Map;function XE(n,e,t){if(!t)throw new Ot(lt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JC(n,e,t,r){if(!0===e&&!0===r)throw new Ot(lt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JT(n){if(!Jt.isDocumentKey(n))throw new Ot(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eS(n){if(Jt.isDocumentKey(n))throw new Ot(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":wn()}function Cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ot(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wg(n);throw new Ot(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Hf(n,e){if(e<=0)throw new Ot(lt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class eD{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ot(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ot(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,JC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eD({}),this._settingsFrozen=!1,e instanceof od?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ot(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(s.options.projectId)}(e))}get app(){if(!this._app)throw new Ot(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ot(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eD(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ZI;switch(t.type){case"gapi":const r=t.client;return qn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new YI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ot(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mh.get(e);t&&(Ut("ComponentProvider","Removing Datastore"),Mh.delete(e),t.terminate())}(this),Promise.resolve()}}class Ci{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ci(this.firestore,e,this._key)}}class Lo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class $c extends Lo{constructor(e,t,r){super(e,t,vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ci(this.firestore,null,new Jt(e))}withConverter(e){return new $c(this.firestore,e,this._path)}}function xh(n,e,...t){if(n=(0,X.m9)(n),XE("collection","path",e),n instanceof Rh){const r=Rr.fromString(e,...t);return eS(r),new $c(n,null,r)}{if(!(n instanceof Ci||n instanceof $c))throw new Ot(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return eS(r),new $c(n.firestore,null,r)}}function $f(n,e,...t){if(n=(0,X.m9)(n),1===arguments.length&&(e=jw.I()),XE("doc","path",e),n instanceof Rh){const r=Rr.fromString(e,...t);return JT(r),new Ci(n,null,new Jt(r))}{if(!(n instanceof Ci||n instanceof $c))throw new Ot(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rr.fromString(e,...t));return JT(r),new Ci(n.firestore,n instanceof $c?n.converter:null,new Jt(r))}}function JE(n,e){return n=(0,X.m9)(n),e=(0,X.m9)(e),(n instanceof Ci||n instanceof $c)&&(e instanceof Ci||e instanceof $c)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function e0(n,e){return n=(0,X.m9)(n),e=(0,X.m9)(e),n instanceof Lo&&e instanceof Lo&&n.firestore===e.firestore&&ah(n._query,e._query)&&n.converter===e.converter}class H_{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new aE(this,"async_queue_retry"),this.Kc=()=>{const t=ug();t&&Ut("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=ug();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=ug();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Is;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,ct.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!yu(t))throw t;Ut("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Ds("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const s=bE.createAndSchedule(this,e,t,r,l=>this.Wc(l));return this.$c.push(s),s}Gc(){this.Bc&&wn()}verifyOperationInProgress(){}zc(){var e=this;return(0,ct.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function bg(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class CM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Is,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vi extends Rh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new H_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||t0(this),this._firestoreClient.terminate()}}function Ms(n){return n._firestoreClient||t0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function t0(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new fM(n._databaseId,l,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var l,h;n._firestoreClient=new YT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nD(n,e,t){const r=new Is;return n.asyncQueue.enqueue((0,ct.Z)(function*(){try{yield $C(n,t),yield B_(n,e),r.resolve()}catch(s){const l=s;if(!("FirebaseError"===(u=l).name?u.code===lt.FAILED_PRECONDITION||u.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var u})).then(()=>r.promise)}function r0(n){if(n._initialized||n._terminated)throw new Ot(lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ot(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gc(Ts.fromBase64String(e))}catch(t){throw new Ot(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gc(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dd{constructor(e){this._methodName=e}}class $_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ot(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ot(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nr(this._lat,e._lat)||nr(this._long,e._long)}}const iD=/^__.*__$/;class sD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Iu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ch(e,this.data,t,this.fieldTransforms)}}class s0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Iu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function o0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wn()}}class z_{constructor(e,t,r,s,l,u){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=s,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new z_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Sg(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(o0(this.Zc)&&iD.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class cS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||dg(e)}aa(e,t,r,s=!1){return new z_({Zc:e,methodName:t,ca:r,path:fs.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function zf(n){const e=n._freezeSettings(),t=dg(n._databaseId);return new cS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Dg(n,e,t,r,s,l={}){const u=n.aa(l.merge||l.mergeFields?2:0,e,t,s);W_("Data must be an object, but it was:",u,r);const h=a0(r,u);let m,b;if(l.merge)m=new Ja(u.fieldMask),b=u.fieldTransforms;else if(l.mergeFields){const N=[];for(const H of l.mergeFields){const ee=K_(e,H,t);if(!u.contains(ee))throw new Ot(lt.INVALID_ARGUMENT,`Field '${ee}' is specified in your field mask but missing from your input data.`);cD(N,ee)||N.push(ee)}m=new Ja(N),b=u.fieldTransforms.filter(H=>m.covers(H.field))}else m=null,b=u.fieldTransforms;return new sD(new Ss(h),m,b)}class G_ extends Dd{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof G_}}function uS(n,e,t){return new z_({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class oD extends Dd{_toFieldTransform(e){return new wf(e.path,new lh)}isEqual(e){return e instanceof oD}}class SM extends Dd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=uS(this,e,!0),r=this.ha.map(l=>Gf(l,t)),s=new Cu(r);return new wf(e.path,s)}isEqual(e){return this===e}}class AM extends Dd{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=uS(this,e,!0),r=this.ha.map(l=>Gf(l,t)),s=new Ef(r);return new wf(e.path,s)}isEqual(e){return this===e}}class MM extends Dd{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new ud(e.wt,cb(e.wt,this.la));return new wf(e.path,t)}isEqual(e){return this===e}}function aD(n,e,t,r){const s=n.aa(1,e,t);W_("Data must be an object, but it was:",s,r);const l=[],u=Ss.empty();vu(r,(m,b)=>{const N=Wf(e,m,t);b=(0,X.m9)(b);const H=s.ia(N);if(b instanceof G_)l.push(N);else{const ee=Gf(b,H);null!=ee&&(l.push(N),u.set(N,ee))}});const h=new Ja(l);return new s0(u,h,s.fieldTransforms)}function lD(n,e,t,r,s,l){const u=n.aa(1,e,t),h=[K_(e,r,t)],m=[s];if(l.length%2!=0)throw new Ot(lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ee=0;ee<l.length;ee+=2)h.push(K_(e,l[ee])),m.push(l[ee+1]);const b=[],N=Ss.empty();for(let ee=h.length-1;ee>=0;--ee)if(!cD(b,h[ee])){const ge=h[ee];let Ie=m[ee];Ie=(0,X.m9)(Ie);const et=u.ia(ge);if(Ie instanceof G_)b.push(ge);else{const _t=Gf(Ie,et);null!=_t&&(b.push(ge),N.set(ge,_t))}}const H=new Ja(b);return new s0(N,H,u.fieldTransforms)}function Ig(n,e,t,r=!1){return Gf(t,n.aa(r?4:3,e))}function Gf(n,e){if(Tg(n=(0,X.m9)(n)))return W_("Unsupported field value:",e,n),a0(n,e);if(n instanceof Dd)return function(t,r){if(!o0(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const s=[];let l=0;for(const u of t){let h=Gf(u,r.ra(l));null==h&&(h={nullValue:"NULL_VALUE"}),s.push(h),l++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,X.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cb(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Mi.fromDate(t);return{timestampValue:jc(r.wt,s)}}if(t instanceof Mi){const s=new Mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jc(r.wt,s)}}if(t instanceof $_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gc)return{bytesValue:fh(r.wt,t._byteString)};if(t instanceof Ci){const s=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(s))throw r.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hd(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${wg(t)}`)}(n,e)}function a0(n,e){const t={};return XI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vu(n,(r,s)=>{const l=Gf(s,e.ea(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function Tg(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mi||n instanceof $_||n instanceof Gc||n instanceof Ci||n instanceof Dd)}function W_(n,e,t){if(!Tg(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wg(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function K_(n,e,t){if((e=(0,X.m9)(e))instanceof zc)return e._internalPath;if("string"==typeof e)return Wf(n,e);throw Sg("Field path arguments must be of type string or ",n,!1,void 0,t)}const RM=new RegExp("[~\\*/\\[\\]]");function Wf(n,e,t){if(e.search(RM)>=0)throw Sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw Sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sg(n,e,t,r,s){const l=r&&!r.isEmpty(),u=void 0!==s;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${s}`),m+=")"),new Ot(lt.INVALID_ARGUMENT,h+n+m)}function cD(n,e){return n.some(t=>t.isEqual(e))}class Kf{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ci(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(q_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xM extends Kf{data(){return super.data()}}function q_(n,e){return"string"==typeof e?Wf(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}class Ph{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xu extends Kf{constructor(e,t,r,s,l,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(q_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Id extends xu{data(e={}){return super.data(e)}}class Td{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ph(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Id(this._firestore,this._userDataWriter,r.key,r,new Ph(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ot(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Id(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ph(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||3!==u.type).map(u=>{const h=new Id(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ph(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==u.type&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),b=l.indexOf(u.doc.key)),{type:PM(u.type),doc:h,oldIndex:m,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wn()}}function dS(n,e){return n instanceof xu&&e instanceof xu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Td&&e instanceof Td&&n._firestore===e._firestore&&e0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ot(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}function Sd(n,...e){for(const t of e)n=t._apply(n);return n}class fS extends Ag{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=zf(e.firestore),r=function(s,l,u,h,m,b,N){let H;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ot(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Z_(N,b);const ge=[];for(const Ie of N)ge.push(fD(h,s,Ie));H={arrayValue:{values:ge}}}else H=fD(h,s,N)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Z_(N,b),H=Ig(u,"where",N,"in"===b||"not-in"===b);const ee=Xs.create(m,b,H);return function(ge,Ie){if(Ie.ht()){const _t=_v(ge);if(null!==_t&&!_t.isEqual(Ie.field))throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_t.toString()}' and '${Ie.field.toString()}'`);const nn=mv(ge);null!==nn&&d0(0,Ie.field,nn)}const et=function(_t,nn){for(const vn of _t.filters)if(nn.indexOf(vn.op)>=0)return vn.op;return null}(ge,function(_t){switch(_t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ie.op));if(null!==et)throw new Ot(lt.INVALID_ARGUMENT,et===Ie.op?`Invalid query. You cannot use more than one '${Ie.op.toString()}' filter.`:`Invalid query. You cannot use '${Ie.op.toString()}' filters with '${et.toString()}' filters.`)}(s,ee),ee}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Lo(e.firestore,e.converter,function(s,l){const u=s.filters.concat([l]);return new bu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),u,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class pS extends Ag{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,s,l){if(null!==r.startAt)throw new Ot(lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ot(lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new cd(s,l);return function(h,m){if(null===mv(h)){const b=_v(h);null!==b&&d0(0,b,m.field)}}(r,u),u}(e._query,this.fa,this.wa);return new Lo(e.firestore,e.converter,function(r,s){const l=r.explicitOrderBy.concat([s]);return new bu(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class l0 extends Ag{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Lo(e.firestore,e.converter,ic(e._query,this.ma,this.ga))}}class dD extends Ag{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=hD(e,this.type,this.ya,this.pa);return new Lo(e.firestore,e.converter,(s=t,new bu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Sa extends Ag{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=hD(e,this.type,this.ya,this.pa);return new Lo(e.firestore,e.converter,(s=t,new bu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function hD(n,e,t,r){if(t[0]=(0,X.m9)(t[0]),t[0]instanceof Kf)return function(s,l,u,h,m){if(!h)throw new Ot(lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const b=[];for(const N of oh(s))if(N.field.isKeyField())b.push(Ta(l,h.key));else{const H=h.data.field(N.field);if(Ww(H))throw new Ot(lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===H){const ee=N.field.canonicalString();throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ee}' (used as the orderBy) does not exist.`)}b.push(H)}return new ld(b,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=zf(n.firestore);return function(l,u,h,m,b,N){const H=l.explicitOrderBy;if(b.length>H.length)throw new Ot(lt.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ee=[];for(let ge=0;ge<b.length;ge++){const Ie=b[ge];if(H[ge].field.isKeyField()){if("string"!=typeof Ie)throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Ie}`);if(!qm(l)&&-1!==Ie.indexOf("/"))throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Ie}' contains a slash.`);const et=l.path.child(Rr.fromString(Ie));if(!Jt.isDocumentKey(et))throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${et}' is not because it contains an odd number of segments.`);const _t=new Jt(et);ee.push(Ta(u,_t))}else{const et=Ig(h,m,Ie);ee.push(et)}}return new ld(ee,N)}(n._query,n.firestore._databaseId,s,e,t,r)}}function fD(n,e,t){if("string"==typeof(t=(0,X.m9)(t))){if(""===t)throw new Ot(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qm(e)&&-1!==t.indexOf("/"))throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rr.fromString(t));if(!Jt.isDocumentKey(r))throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ta(n,new Jt(r))}if(t instanceof Ci)return Ta(n,t._key);throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wg(t)}.`)}function Z_(n,e){if(!Array.isArray(n)||0===n.length)throw new Ot(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ot(lt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function d0(n,e,t){if(!t.isEqual(e))throw new Ot(lt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const pD={maxAttempts:5};class h0{convertValue(e,t="none"){switch(Eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ff(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wn()}}convertObject(e,t){const r={};return vu(e.fields,(s,l)=>{r[s]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new $_(Bi(e.latitude),Bi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vm(e));default:return null}}convertTimestamp(e){const t=sd(e);return new Mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rr.fromString(e);qn(s_(r));const s=new od(r.get(1),r.get(3)),l=new Jt(r.popFirst(5));return s.isEqual(t)||Ds(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Mg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class gD extends h0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,t)}}class mD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zf(e)}set(e,t,r){this._verifyNotCommitted();const s=Pu(e,this._firestore),l=Mg(s.converter,t,r),u=Dg(this._dataReader,"WriteBatch.set",s._key,l,null!==s.converter,r);return this._mutations.push(u.toMutation(s._key,Ui.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const l=Pu(e,this._firestore);let u;return u="string"==typeof(t=(0,X.m9)(t))||t instanceof zc?lD(this._dataReader,"WriteBatch.update",l._key,t,r,s):aD(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pu(e,this._firestore);return this._mutations=this._mutations.concat(new Gp(t._key,Ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ot(lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pu(n,e){if((n=(0,X.m9)(n)).firestore!==e)throw new Ot(lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ou extends h0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,t)}}function vS(n,e,t){n=Cr(n,Ci);const r=Cr(n.firestore,Vi),s=Mg(n.converter,e,t);return Rg(r,[Dg(zf(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Ui.none())])}function yD(n,e,t,...r){n=Cr(n,Ci);const s=Cr(n.firestore,Vi),l=zf(s);let u;return u="string"==typeof(e=(0,X.m9)(e))||e instanceof zc?lD(l,"updateDoc",n._key,e,t,r):aD(l,"updateDoc",n._key,e),Rg(s,[u.toMutation(n._key,Ui.exists(!0))])}function vD(n,...e){var t,r,s;n=(0,X.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||bg(e[u])||(l=e[u],u++);const h={includeMetadataChanges:l.includeMetadataChanges};if(bg(e[u])){const H=e[u];e[u]=null===(t=H.next)||void 0===t?void 0:t.bind(H),e[u+1]=null===(r=H.error)||void 0===r?void 0:r.bind(H),e[u+2]=null===(s=H.complete)||void 0===s?void 0:s.bind(H)}let m,b,N;if(n instanceof Ci)b=Cr(n.firestore,Vi),N=vf(n._key.path),m={next:H=>{e[u]&&e[u](Y_(b,n,H))},error:e[u+1],complete:e[u+2]};else{const H=Cr(n,Lo);b=Cr(H.firestore,Vi),N=H._query;const ee=new Ou(b);m={next:ge=>{e[u]&&e[u](new Td(b,ee,H,ge))},error:e[u+1],complete:e[u+2]},hS(n._query)}return function(H,ee,ge,Ie){const et=new yg(Ie),_t=new bd(ee,et,ge);return H.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return A_(yield Cd(H),_t)})),()=>{et.Tc(),H.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return IE(yield Cd(H),_t)}))}}(Ms(b),N,h,m)}function Rg(n,e){return function(t,r){const s=new Is;return t.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return function HT(n,e,t){return PE.apply(this,arguments)}(yield V_(t),r,s)})),s.promise}(Ms(n),e)}function Y_(n,e,t){const r=t.docs.get(e._key),s=new Ou(n);return new xu(n,s,e._key,r,new Ph(t.hasPendingWrites,t.fromCache),e.converter)}class bS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zf(e)}get(e){const t=Pu(e,this._firestore),r=new gD(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return wn();const l=s[0];if(l.isFoundDocument())return new Kf(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Kf(this._firestore,r,t._key,null,t.converter);throw wn()})}set(e,t,r){const s=Pu(e,this._firestore),l=Mg(s.converter,t,r),u=Dg(this._dataReader,"Transaction.set",s._key,l,null!==s.converter,r);return this._transaction.set(s._key,u),this}update(e,t,r,...s){const l=Pu(e,this._firestore);let u;return u="string"==typeof(t=(0,X.m9)(t))||t instanceof zc?lD(this._dataReader,"Transaction.update",l._key,t,r,s):aD(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Pu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pu(e,this._firestore),r=new Ou(this._firestore);return super.get(e).then(s=>new xu(this._firestore,r,t._key,s._document,new Ph(!1,!1),t.converter))}}function g0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ot("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function m0(){if(typeof Uint8Array>"u")throw new Ot("unimplemented","Uint8Arrays are not available in this environment.")}function _0(){if(!function hM(){return typeof atob<"u"}())throw new Ot("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nh=Jr.SDK_VERSION,(0,Jr._registerComponent)(new hs.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),l=new Vi(s,new lM(t.getProvider("auth-internal")),new uM(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Jr.registerVersion)(er,"3.4.13",n),(0,Jr.registerVersion)(er,"3.4.13","esm2017")}();class Pg{constructor(e){this._delegate=e}static fromBase64String(e){return _0(),new Pg(Gc.fromBase64String(e))}static fromUint8Array(e){return m0(),new Pg(Gc.fromUint8Array(e))}toBase64(){return _0(),this._delegate.toBase64()}toUint8Array(){return m0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function y0(n){return function LM(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class FM{enableIndexedDbPersistence(e,t){return function n0(n,e){r0(n=Cr(n,Vi));const t=Ms(n),r=n._freezeSettings(),s=new KE;return nD(t,s,new _g(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function DM(n){r0(n=Cr(n,Vi));const e=Ms(n),t=n._freezeSettings(),r=new KE;return nD(e,r,new F_(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function IM(n){if(n._initialized&&!n._terminated)throw new Ot(lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Is;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ct.Z)(function*(){try{yield(t=(0,ct.Z)(function*(r){if(!Xa.V())return Promise.resolve();const s=r+"main";yield Xa.delete(s)}),function(r){return t.apply(this,arguments)})(nC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class v0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof od||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tS(n,e,t,r={}){var s;const l=(n=Cr(n,Rh))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&cf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Us.MOCK_USER;else{u=(0,X.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ot(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Us(m)}n._authCredentials=new aM(new Rm(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function sS(n){return function KC(n){return n.asyncQueue.enqueue((0,ct.Z)(function*(){const e=yield GC(n),t=yield WC(n);return e.setNetworkEnabled(!0),function(r){const s=sn(r);return s.lu.delete(0),hg(s)}(t)}))}(Ms(n=Cr(n,Vi)))}(this._delegate)}disableNetwork(){return function oS(n){return function qC(n){return n.asyncQueue.enqueue((0,ct.Z)(function*(){const e=yield GC(n),t=yield WC(n);return e.setNetworkEnabled(!1),(r=(0,ct.Z)(function*(s){const l=sn(s);l.lu.add(0),yield Ch(l),l._u.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ms(n=Cr(n,Vi)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iS(n){return function(e){const t=new Is;return e.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return function PC(n,e){return FE.apply(this,arguments)}(yield V_(e),t)})),t.promise}(Ms(n=Cr(n,Vi)))}(this._delegate)}onSnapshotsInSync(e){return function ED(n,e){return function QT(n,e){const t=new yg(e);return n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return r=yield Cd(n),s=t,sn(r).Tu.add(s),void s.next();var r,s})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return r=yield Cd(n),s=t,void sn(r).Tu.delete(s);var r,s}))}}(Ms(n=Cr(n,Vi)),bg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ot("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oh(this,xh(this._delegate,e))}catch(t){throw Aa(t,"collection()","Firestore.collection()")}}doc(e){try{return new cc(this,$f(this._delegate,e))}catch(t){throw Aa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ia(this,function nS(n,e){if(n=Cr(n,Rh),XE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ot(lt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lo(n,null,(t=e,new bu(Rr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Aa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function wD(n,e,t){n=Cr(n,Vi);const r=Object.assign(Object.assign({},pD),t);return function(s){if(s.maxAttempts<1)throw new Ot(lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function XC(n,e,t){const r=new Is;return n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){const s=yield(l=n,jf(l).then(u=>u.datastore));var l;new HC(n.asyncQueue,s,t,e,r).run()})),r.promise}(Ms(n),s=>e(new bS(n,s)),r)}(this._delegate,t=>e(new ID(this,t)))}batch(){return Ms(this._delegate),new SS(new mD(this._delegate,e=>Rg(this._delegate,e)))}loadBundle(e){return function rD(n,e){const t=Ms(n=Cr(n,Vi)),r=new CM;return function XT(n,e,t,r){const s=function(l,u){let h;return h="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,b){if(m instanceof Uint8Array)return VC(m,b);if(m instanceof ArrayBuffer)return VC(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new jC(m,u);var m}(t,dg(e));n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){!function ZT(n,e,t){const r=sn(n);var s;(s=(0,ct.Z)(function*(l,u,h){try{const m=yield u.getMetadata();if(yield function(ee,ge){const Ie=sn(ee),et=Ki(ge.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",_t=>Ie.Ds.getBundleMetadata(_t,ge.id)).then(_t=>!!_t&&_t.createTime.compareTo(et)>=0)}(l.localStore,m))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(ee=m).totalDocuments,bytesLoaded:ee.totalBytes,totalDocuments:ee.totalDocuments,totalBytes:ee.totalBytes}),Promise.resolve(new Set);h._updateProgress(ME(m));const b=new EM(m,l.localStore,u.wt);let N=yield u.fc();for(;N;){const ee=yield b.Nu(N);ee&&h._updateProgress(ee),N=yield u.fc()}const H=yield b.complete();return yield Ru(l,H.Mu,void 0),yield function(ee,ge){const Ie=sn(ee);return Ie.persistence.runTransaction("Save bundle","readwrite",et=>Ie.Ds.saveBundleMetadata(et,ge))}(l.localStore,m),h._completeWith(H.progress),Promise.resolve(H.Ou)}catch(m){return cf("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var ee}),function(l,u,h){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield V_(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function lS(n,e){return function ra(n,e){return n.asyncQueue.enqueue((0,ct.Z)(function*(){return function(t,r){const s=sn(t);return s.persistence.runTransaction("Get named query","readonly",l=>s.Ds.getNamedQuery(l,r))}(yield YE(n),e)}))}(Ms(n=Cr(n,Vi)),e).then(t=>t?new Lo(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ia(this,t):null)}}class X_ extends h0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pg(new Gc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return cc.forKey(t,this.firestore,null)}}class ID{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new X_(e)}get(e){const t=Lu(e);return this._delegate.get(t).then(r=>new Md(this._firestore,new xu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Lu(e);return r?(g0("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const l=Lu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...s),this}delete(e){const t=Lu(e);return this._delegate.delete(t),this}}class SS{constructor(e){this._delegate=e}set(e,t,r){const s=Lu(e);return r?(g0("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const l=Lu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...s),this}delete(e){const t=Lu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Id(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Og(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let l=s.get(t);return l||(l=new qf(e,new X_(e),t),s.set(t,l)),l}}qf.INSTANCES=new WeakMap;class cc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new X_(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ot("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new cc(t,new Ci(t._delegate,r,new Jt(e)))}static forKey(e,t,r){return new cc(t,new Ci(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Oh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oh(this.firestore,xh(this._delegate,e))}catch(t){throw Aa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,X.m9)(e))instanceof Ci&&JE(this._delegate,e)}set(e,t){t=g0("DocumentReference.set",t);try{return t?vS(this._delegate,e,t):vS(this._delegate,e)}catch(r){throw Aa(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?yD(this._delegate,e):yD(this._delegate,e,t,...r)}catch(s){throw Aa(s,"updateDoc()","DocumentReference.update()")}}delete(){return function ES(n){return Rg(Cr(n.firestore,Vi),[new Gp(n._key,Ui.none())])}(this._delegate)}onSnapshot(...e){const t=AS(e),r=TD(e,s=>new Md(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return vD(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Ad(n){n=Cr(n,Ci);const e=Cr(n.firestore,Vi),t=Ms(e),r=new Ou(e);return function ZC(n,e){const t=new Is;return n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return(r=(0,ct.Z)(function*(s,l,u){try{const h=yield function(m,b){const N=sn(m);return N.persistence.runTransaction("read document","readonly",H=>N.localDocuments.getDocument(H,b))}(s,l);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Ot(lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Th(h,`Failed to get document '${l} from cache`);u.reject(m)}}),function(s,l,u){return r.apply(this,arguments)})(yield YE(n),e,t);var r})),t.promise}(t,n._key).then(s=>new xu(e,r,n._key,s,new Ph(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function _D(n){n=Cr(n,Ci);const e=Cr(n.firestore,Vi);return YC(Ms(e),n._key,{source:"server"}).then(t=>Y_(e,n,t))}(this._delegate):function _S(n){n=Cr(n,Ci);const e=Cr(n.firestore,Vi);return YC(Ms(e),n._key).then(t=>Y_(e,n,t))}(this._delegate),t.then(r=>new Md(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new cc(this.firestore,this._delegate.withConverter(e?qf.getInstance(this.firestore,e):null))}}function Aa(n,e,t){return n.message=n.message.replace(e,t),n}function AS(n){for(const e of n)if("object"==typeof e&&!y0(e))return e;return{}}function TD(n,e){var t,r;let s;return s=y0(n[0])?n[0]:y0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{s.next&&s.next(e(l))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Md{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new cc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dS(this._delegate,e._delegate)}}class Og extends Md{data(e){const t=this._delegate.data(e);return function Vw(n,e){n||wn()}(void 0!==t),t}}class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new X_(e)}where(e,t,r){try{return new ia(this.firestore,Sd(this._delegate,function OM(n,e,t){const r=e,s=q_("where",n);return new fS(s,r,t)}(e,t,r)))}catch(s){throw Aa(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ia(this.firestore,Sd(this._delegate,function uD(n,e="asc"){const t=e,r=q_("orderBy",n);return new pS(r,t)}(e,t)))}catch(r){throw Aa(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ia(this.firestore,Sd(this._delegate,function kM(n){return Hf("limit",n),new l0("limit",n,"F")}(e)))}catch(t){throw Aa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ia(this.firestore,Sd(this._delegate,function lc(n){return Hf("limitToLast",n),new l0("limitToLast",n,"L")}(e)))}catch(t){throw Aa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ia(this.firestore,Sd(this._delegate,function c0(...n){return new dD("startAt",n,!0)}(...e)))}catch(t){throw Aa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ia(this.firestore,Sd(this._delegate,function gS(...n){return new dD("startAfter",n,!1)}(...e)))}catch(t){throw Aa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ia(this.firestore,Sd(this._delegate,function mS(...n){return new Sa("endBefore",n,!1)}(...e)))}catch(t){throw Aa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ia(this.firestore,Sd(this._delegate,function u0(...n){return new Sa("endAt",n,!0)}(...e)))}catch(t){throw Aa(t,"endAt()","Query.endAt()")}}isEqual(e){return e0(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ku(n){n=Cr(n,Lo);const e=Cr(n.firestore,Vi),t=Ms(e),r=new Ou(e);return function QC(n,e){const t=new Is;return n.asyncQueue.enqueueAndForget((0,ct.Z)(function*(){return(r=(0,ct.Z)(function*(s,l,u){try{const h=yield og(s,l,!0),m=new R_(l,h.ji),b=m.Ku(h.documents),N=m.applyChanges(b,!1);u.resolve(N.snapshot)}catch(h){const m=Th(h,`Failed to execute query '${l} against cache`);u.reject(m)}}),function(s,l,u){return r.apply(this,arguments)})(yield YE(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Td(e,r,n,s))}(this._delegate):"server"===e?.source?function yS(n){n=Cr(n,Lo);const e=Cr(n.firestore,Vi),t=Ms(e),r=new Ou(e);return QE(t,n._query,{source:"server"}).then(s=>new Td(e,r,n,s))}(this._delegate):function f0(n){n=Cr(n,Lo);const e=Cr(n.firestore,Vi),t=Ms(e),r=new Ou(e);return hS(n._query),QE(t,n._query).then(s=>new Td(e,r,n,s))}(this._delegate),t.then(r=>new Nu(this.firestore,new Td(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=AS(e),r=TD(e,s=>new Nu(this.firestore,new Td(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return vD(this._delegate,t,r)}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?qf.getInstance(this.firestore,e):null))}}class SD{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Og(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nu{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ia(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Og(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Og(this._firestore,r))})}isEqual(e){return dS(this._delegate,e._delegate)}}class Oh extends ia{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new cc(this.firestore,e):null}doc(e){try{return new cc(this.firestore,void 0===e?$f(this._delegate):$f(this._delegate,e))}catch(t){throw Aa(t,"doc()","CollectionReference.doc()")}}add(e){return function wS(n,e){const t=Cr(n.firestore,Vi),r=$f(n),s=Mg(n.converter,e);return Rg(t,[Dg(zf(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Ui.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new cc(this.firestore,t))}isEqual(e){return JE(this._delegate,e._delegate)}withConverter(e){return new Oh(this.firestore,this._delegate.withConverter(e?qf.getInstance(this.firestore,e):null))}}function Lu(n){return Cr(n,Ci)}class kg{constructor(...e){this._delegate=new zc(...e)}static documentId(){return new kg(fs.keyField().canonicalString())}isEqual(e){return(e=(0,X.m9)(e))instanceof zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class kh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function p0(){return new oD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kh(e)}static delete(){const e=function NM(){return new G_("deleteField")}();return e._methodName="FieldValue.delete",new kh(e)}static arrayUnion(...e){const t=function bD(...n){return new SM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kh(t)}static arrayRemove(...e){const t=function CD(...n){return new AM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kh(t)}static increment(e){const t=function CS(n){return new MM("increment",n)}(e);return t._methodName="FieldValue.increment",new kh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const E0={Firestore:v0,GeoPoint:$_,Timestamp:Mi,Blob:Pg,Transaction:ID,WriteBatch:SS,DocumentReference:cc,DocumentSnapshot:Md,Query:ia,QueryDocumentSnapshot:Og,QuerySnapshot:Nu,CollectionReference:Oh,FieldPath:kg,FieldValue:kh,setLogLevel:function TS(n){!function qI(n){gu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function MS(n,e){return function BM(n,e=lp.z){return new co.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function AD(n,e){return MS(n,e).pipe((0,Ar.U)(t=>({payload:t,type:"query"})))}function Ng(n,e){return AD(n,e).pipe((0,cp.O)(void 0),Hd(),(0,Ar.U)(([t,r])=>{const s=r.payload.docChanges(),l=s.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=s.find(N=>N.doc.ref.isEqual(u.ref)),b=t?.payload.docs.find(N=>N.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),l}))}function MD(n,e,t){return Ng(n,t).pipe((0,uu.R)((r,s)=>function RS(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xS(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return b0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return b0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return b0(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(l=>l.payload),e),[]),(0,$h.x)(),(0,Ar.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function b0(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function C0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function J_(n){(function w0(n,e){n.INTERNAL.registerComponent(new hs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},E0)))})(n,(e,t)=>new v0(e,t,new FM)),n.registerVersion("@firebase/firestore-compat","0.1.22")}($d.Z);class D0{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ng(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ar.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe((0,cp.O)(void 0),Hd(),(0,So.h)(([r,s])=>s.length>0||!r),(0,Ar.U)(([r,s])=>s),or.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,uu.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=C0(e);return MD(this.query,t,this.afs.schedulers.outsideAngular).pipe(or.iC)}valueChanges(e={}){return AD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ar.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),or.iC)}get(e){return(0,Zs.D)(this.query.get(e)).pipe(or.iC)}add(e){return this.ref.add(e)}doc(e){return new I0(this.ref.doc(e),this.afs)}}class I0{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:l}=A0(r,t);return new D0(s,l,this.afs)}snapshotChanges(){return function UM(n,e){return MS(n,e).pipe((0,cp.O)(void 0),Hd(),(0,Ar.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(or.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ar.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zs.D)(this.ref.get(e)).pipe(or.iC)}}class PS{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ng(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ar.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,So.h)(t=>t.length>0),or.iC):Ng(this.query,this.afs.schedulers.outsideAngular).pipe(or.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,uu.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=C0(e);return MD(this.query,t,this.afs.schedulers.outsideAngular).pipe(or.iC)}valueChanges(e={}){return AD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ar.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),or.iC)}get(e){return(0,Zs.D)(this.query.get(e)).pipe(or.iC)}}const RD=new E.OlP("angularfire2.enableFirestorePersistence"),T0=new E.OlP("angularfire2.firestore.persistenceSettings"),S0=new E.OlP("angularfire2.firestore.settings"),VM=new E.OlP("angularfire2.firestore.use-emulator");function A0(n,e=(t=>t)){return{query:e(n),ref:n}}let ey=(()=>{class n{constructor(t,r,s,l,u,h,m,b,N,H,ee,ge,Ie,et,_t,nn,vn){this.schedulers=m;const pn=(0,yi.on)(t,h,r),on=N;H&&Mc(pn,h,ee,Ie,et,_t,ge,nn),[this.firestore,this.persistenceEnabled$]=(0,yi.cc)(`${pn.name}.firestore`,"AngularFirestore",pn.name,()=>{const Zn=h.runOutsideAngular(()=>pn.firestore());if(l&&Zn.settings(l),on&&Zn.useEmulator(...on),s&&!(0,ha.PM)(u)){const Yn=()=>{try{return(0,Zs.D)(Zn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Pr){return typeof console<"u"&&console.warn(Pr),(0,Oi.of)(!1)}};return[Zn,h.runOutsideAngular(Yn)]}return[Zn,(0,Oi.of)(!1)]},[l,on,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=A0(s,r),h=this.schedulers.ngZone.run(()=>l);return new D0(h,u,this)}collectionGroup(t,r){const s=r||(u=>u),l=this.firestore.collectionGroup(t);return new PS(s(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new I0(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(yi.Dh),E.LFG(yi.xv,8),E.LFG(RD,8),E.LFG(S0,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(or.HU),E.LFG(T0,8),E.LFG(VM,8),E.LFG(qa,8),E.LFG(Vd,8),E.LFG(jd,8),E.LFG(Yu,8),E.LFG(Hh,8),E.LFG(Qu,8),E.LFG(Cl,8),E.LFG(si,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OS=(()=>{class n{constructor(){Zu.Z.registerVersion("angularfire",or.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:RD,useValue:!0},{provide:T0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[ey]}),n})();var kS=U(8372);const NS="firebasestorage.googleapis.com",LS="storageBucket";class os extends X.ZR{constructor(e,t){super(xD(e),`Firebase Storage: ${t} (${xD(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,os.prototype)}_codeEquals(e){return xD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function xD(n){return"storage/"+n}function PD(){return new os("unknown","An unknown error occurred, please check the error payload for server response.")}function VS(){return new os("canceled","User canceled the upload/download.")}function i(){return new os("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function c(n){return new os("invalid-argument",n)}function d(){return new os("app-deleted","The Firebase app was deleted.")}function f(n){return new os("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function v(n,e){return new os("invalid-format","String does not match format '"+n+"': "+e)}function S(n){throw new os("internal-error","Internal error: "+n)}class x{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=x.makeFromUrl(e,t)}catch{return new x(e,"")}if(""===r.path)return r;throw function KM(n){return new os("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+s+"(/(.*))?$","i");function b(on){on.path_=decodeURIComponent(on.path)}const H=t.replace(/[.]/g,"\\."),pn=[{regex:h,indices:{bucket:1,path:3},postModify:function l(on){"/"===on.path.charAt(on.path.length-1)&&(on.path_=on.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${H}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===NS?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let on=0;on<pn.length;on++){const Zn=pn[on],Yn=Zn.regex.exec(e);if(Yn){let js=Yn[Zn.indices.path];js||(js=""),r=new x(Yn[Zn.indices.bucket],js),Zn.postModify(r);break}}if(null==r)throw function WM(n){return new os("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class j{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ft(n){return"string"==typeof n||n instanceof String}function tn(n){return yn()&&n instanceof Blob}function yn(){return typeof Blob<"u"}function Pn(n,e,t,r){if(r<e)throw c(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw c(`Invalid value for '${n}'. Expected ${t} or less.`)}function xt(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Sn(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var rr=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(rr||(rr={})),rr))();class Ri{constructor(e,t,r,s,l,u,h,m,b,N,H){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=N,this.connectionFactory_=H,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ee,ge)=>{this.resolve_=ee,this.reject_=ge,this.start_()})}start_(){const t=(r,s)=>{const l=this.resolve_,u=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function Oe(n){return void 0!==n}(m)?l():l(m)}catch(m){u(m)}else if(null!==h){const m=PD();m.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,m):m)}else u(s.canceled?this.appDelete_?d():VS():function GM(){return new os("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Wc(!1,null,!0)):this.backoffId_=function Y(n,e,t){let r=1,s=null,l=null,u=!1,h=0;function m(){return 2===h}let b=!1;function N(..._t){b||(b=!0,e.apply(null,_t))}function H(_t){s=setTimeout(()=>{s=null,n(ge,m())},_t)}function ee(){l&&clearTimeout(l)}function ge(_t,...nn){if(b)return void ee();if(_t)return ee(),void N.call(null,_t,...nn);if(m()||u)return ee(),void N.call(null,_t,...nn);let pn;r<64&&(r*=2),1===h?(h=2,pn=0):pn=1e3*(r+Math.random()),H(pn)}let Ie=!1;function et(_t){Ie||(Ie=!0,ee(),!b&&(null!==s?(_t||(h=2),clearTimeout(s),H(0)):_t||(h=1)))}return H(0),l=setTimeout(()=>{u=!0,et(!0)},t),et}((r,s)=>{if(s)return void r(!1,new Wc(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===rr.NO_ERROR,m=l.getStatus();if(!h||this.isRetryStatusCode_(m)){const N=l.getErrorCode()===rr.ABORT;return void r(!1,new Wc(!1,null,N))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new Wc(b,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ce(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),l=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||l}}class Wc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function N0(...n){const e=function k0(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yn())return new Blob(n);throw new os("unsupported-environment","This browser doesn't seem to support creating Blobs")}const uc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jS{constructor(e,t){this.data=e,this.contentType=t||null}}function HS(n,e){switch(n){case uc.RAW:return new jS(ZM(e));case uc.BASE64:case uc.BASE64URL:return new jS(YM(n,e));case uc.DATA_URL:return new jS(function QP(n){const e=new QM(n);return e.base64?YM(uc.BASE64,e.rest):function YP(n){let e;try{e=decodeURIComponent(n)}catch{throw v(uc.DATA_URL,"Malformed data URL.")}return ZM(e)}(e.rest)}(e),function XP(n){return new QM(n).contentType}(e))}throw PD()}function ZM(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function YM(n,e){switch(n){case uc.BASE64:{const s=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(s||l)throw v(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case uc.BASE64URL:{const s=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(s||l)throw v(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function F0(n){return atob(n)}(e)}catch{throw v(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class QM{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw v(uc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function JP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Rd{constructor(e,t){let r=0,s="";tn(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(tn(this.data_)){const s=function L0(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Rd(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Rd(r,!0)}}static getBlob(...e){if(yn()){const t=e.map(r=>r instanceof Rd?r.data_:r);return new Rd(N0.apply(null,t))}{const t=e.map(u=>Ft(u)?HS(uc.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)s[l++]=u[h]}),new Rd(s,!0)}}uploadData(){return this.data_}}function $S(n){let e;try{e=JSON.parse(n)}catch{return null}return function At(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function XM(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function nO(n,e){return e}class tl{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||nO}}let OD=null;function B0(){if(OD)return OD;const n=[];n.push(new tl("bucket")),n.push(new tl("generation")),n.push(new tl("metageneration")),n.push(new tl("name","fullPath",!0));const t=new tl("name");t.xform=function e(l,u){return function rO(n){return!Ft(n)||n.length<2?n:XM(n)}(u)},n.push(t);const s=new tl("size");return s.xform=function r(l,u){return void 0!==u?Number(u):u},n.push(s),n.push(new tl("timeCreated")),n.push(new tl("updated")),n.push(new tl("md5Hash",null,!0)),n.push(new tl("cacheControl",null,!0)),n.push(new tl("contentDisposition",null,!0)),n.push(new tl("contentEncoding",null,!0)),n.push(new tl("contentLanguage",null,!0)),n.push(new tl("contentType",null,!0)),n.push(new tl("metadata","customMetadata",!0)),OD=n,OD}function JM(n,e,t){const r=$S(e);return null===r?null:function sO(n,e,t){const r={type:"file"},s=t.length;for(let l=0;l<s;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return function iO(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new x(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function zS(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const l=e[s];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const eR="prefixes";class xd{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Pd(n){if(!n)throw PD()}function kD(n,e){return function t(r,s){const l=JM(n,s,e);return Pd(null!==l),l}}function ty(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function US(){return new os("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function $M(){return new os("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function HM(n){return new os("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function zM(n){return new os("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function U0(n){const e=ty(n);return function t(r,s){let l=e(r,s);return 404===r.getStatus()&&(l=function jM(n){return new os("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=s.serverResponse,l}}function nR(n,e,t){const s=xt(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new xd(s,"GET",kD(n,t),u);return h.errorHandler=U0(e),h}function dO(n,e,t,r,s){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),s&&(l.maxResults=s);const h=xt(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,N=new xd(h,"GET",function cO(n,e){return function t(r,s){const l=function lO(n,e,t){const r=$S(t);return null===r?null:function aO(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[eR])for(const s of t[eR]){const l=s.replace(/\/$/,""),u=n._makeStorageReference(new x(e,l));r.prefixes.push(u)}if(t.items)for(const s of t.items){const l=n._makeStorageReference(new x(e,s.name));r.items.push(l)}return r}(n,e,r)}(n,e,s);return Pd(null!==l),l}}(n,e.bucket),b);return N.urlParams=l,N.errorHandler=ty(e),N}function iR(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function gO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ND{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function GS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Pd(!1)}return Pd(!!t&&-1!==(e||["active"]).indexOf(t)),t}const vO={STATE_CHANGED:"state_changed"},nl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WS(n){switch(n){case"running":case"pausing":case"canceling":return nl.RUNNING;case"paused":return nl.PAUSED;case"success":return nl.SUCCESS;case"canceled":return nl.CANCELED;default:return nl.ERROR}}class EO{constructor(e,t,r){if(function Je(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function ny(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class bO extends class wO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw S("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw S("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw S("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw S("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw S("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Fu(){return new bO}class lR{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=B0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,l)=>{this._resolve=s,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function mO(n,e,t,r,s){const l=e.bucketOnlyServerUrl(),u=iR(e,r,s),h={name:u.fullPath},m=xt(l,n.host,n._protocol),N={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},H=zS(u,t),Ie=new xd(m,"POST",function ge(et){let _t;GS(et);try{_t=et.getResponseHeader("X-Goog-Upload-URL")}catch{Pd(!1)}return Pd(Ft(_t)),_t},n.maxUploadRetryTime);return Ie.urlParams=h,Ie.headers=N,Ie.body=H,Ie.errorHandler=ty(e),Ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Fu,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function _O(n,e,t,r){const m=new xd(t,"POST",function l(b){const N=GS(b,["active","final"]);let H=null;try{H=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pd(!1)}H||Pd(!1);const ee=Number(H);return Pd(!isNaN(ee)),new ND(ee,r.size(),"final"===N)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=ty(e),m}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(s,Fu,t,r);this._request=l,l.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ND(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,l)=>{let u;try{u=function yO(n,e,t,r,s,l,u,h){const m=new ND(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function o(){return new os("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=m.total-m.current;let N=b;s>0&&(N=Math.min(N,s));const H=m.current,Ie={"X-Goog-Upload-Command":N===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},et=r.slice(H,H+N);if(null===et)throw i();const pn=new xd(t,"POST",function _t(on,Zn){const Yn=GS(on,["active","final"]),Pr=m.current+N,js=r.size();let hc;return hc="final"===Yn?kD(e,l)(on,Zn):null,new ND(Pr,js,"final"===Yn,hc)},e.maxUploadRetryTime);return pn.headers=Ie,pn.body=et.uploadData(),pn.progressCallback=h||null,pn.errorHandler=ty(n),pn}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Fu,s,l);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=nR(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Fu,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function sR(n,e,t,r,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let pn="";for(let on=0;on<2;on++)pn+=Math.random().toString().slice(2);return pn}();u["Content-Type"]="multipart/related; boundary="+m;const b=iR(e,r,s),N=zS(b,t),ge=Rd.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+N+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===ge)throw i();const Ie={name:b.fullPath},et=xt(l,n.host,n._protocol),nn=n.maxUploadRetryTime,vn=new xd(et,"POST",kD(n,t),nn);return vn.urlParams=Ie,vn.headers=u,vn.body=ge.uploadData(),vn.errorHandler=ty(e),vn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Fu,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=VS(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const l=new EO(t||void 0,r||void 0,s||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WS(this._state)){case nl.SUCCESS:ny(this._resolve.bind(null,this.snapshot))();break;case nl.CANCELED:case nl.ERROR:ny(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WS(this._state)){case nl.RUNNING:case nl.PAUSED:e.next&&ny(e.next.bind(e,this.snapshot))();break;case nl.SUCCESS:e.complete&&ny(e.complete.bind(e))();break;default:e.error&&ny(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Lg{constructor(e,t){this._service=e,this._location=t instanceof x?t:x.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lg(e,t)}get root(){const e=new x(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XM(this._location.path)}get storage(){return this._service}get parent(){const e=function eO(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new x(this._location.bucket,e);return new Lg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw f(e)}}function uR(n,e,t){return KS.apply(this,arguments)}function KS(){return KS=(0,ct.Z)(function*(n,e,t){const s=yield dR(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield uR(n,e,s.nextPageToken))}),KS.apply(this,arguments)}function dR(n,e){null!=e&&"number"==typeof e.maxResults&&Pn("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=dO(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Fu)}function kO(n){n._throwIfRoot("getDownloadURL");const e=function hO(n,e,t){const s=xt(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new xd(s,"GET",function uO(n,e){return function t(r,s){const l=JM(n,s,e);return Pd(null!==l),function oO(n,e,t,r){const s=$S(e);if(null===s||!Ft(s.downloadTokens))return null;const l=s.downloadTokens;if(0===l.length)return null;const u=encodeURIComponent;return l.split(",").map(b=>{const H=n.fullPath;return xt("/b/"+u(n.bucket)+"/o/"+u(H),t,r)+Sn({alt:"media",token:b})})[0]}(l,s,n.host,n._protocol)}}(n,t),u);return h.errorHandler=U0(e),h}(n.storage,n._location,B0());return n.storage.makeRequestWithTokens(e,Fu).then(t=>{if(null===t)throw function a(){return new os("no-download-url","The given file does not have any download URLs.")}();return t})}function hR(n,e){const t=function tO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new x(n._location.bucket,t);return new Lg(n.storage,r)}function fR(n,e){if(n instanceof qS){const t=n;if(null==t._bucket)throw function qM(){return new os("no-default-bucket","No default bucket found. Did you set the '"+LS+"' property when initializing the app?")}();const r=new Lg(t,t._bucket);return null!=e?fR(r,e):r}return void 0!==e?hR(n,e):n}function BO(n,e){if(e&&function LO(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qS)return function FO(n,e){return new Lg(n,e)}(n,e);throw c("To use ref(service, url), the first argument must be a Storage instance.")}return fR(n,e)}function pR(n,e){const t=e?.[LS];return null==t?null:x.makeFromBucketSpec(t,n)}class qS{constructor(e,t,r,s,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=NS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?x.makeFromBucketSpec(s,this._host):pR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?x.makeFromBucketSpec(this._url,e):pR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ct.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ct.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lg(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new j(d());{const l=function O0(n,e,t,r,s,l){const u=Sn(n.urlParams),h=n.url+u,m=Object.assign({},n.headers);return function x0(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function M0(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function R0(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,l),function P0(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new Ri(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ct.Z)(function*(){const[s,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,l).getPromise()})()}}const gR="@firebase/storage";function yR(n,e){return BO(n=(0,X.m9)(n),e)}function ZO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new qS(t,r,s,e,Jr.SDK_VERSION)}!function YO(){(0,Jr._registerComponent)(new hs.wA("storage",ZO,"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(gR,"0.9.9",""),(0,Jr.registerVersion)(gR,"0.9.9","esm2017")}();class LD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class vR{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new LD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new LD(r,this,this._ref))},t)}on(e,t,r,s){let l;return t&&(l="function"==typeof t?u=>t(new LD(u,this,this._ref)):{next:t.next?u=>t.next(new LD(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,s||void 0)}}class ER{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Nh(e,this._service))}get items(){return this._delegate.items.map(e=>new Nh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Nh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function KO(n,e){return hR(n,e)}(this._delegate,e);return new Nh(t,this.storage)}get root(){return new Nh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Nh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new vR(function VO(n,e,t){return function MO(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new lR(n,new Rd(e),t)}(n=(0,X.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=uc.RAW,r){this._throwIfRoot("putString");const s=HS(t,e),l=Object.assign({},r);return null==l.contentType&&null!=s.contentType&&(l.contentType=s.contentType),new vR(new lR(this._delegate,new Rd(s.data,!0),l),this)}listAll(){return function zO(n){return function xO(n){const e={prefixes:[],items:[]};return uR(n,e).then(()=>e)}(n=(0,X.m9)(n))}(this._delegate).then(e=>new ER(e,this.storage))}list(e){return function $O(n,e){return dR(n=(0,X.m9)(n),e)}(this._delegate,e||void 0).then(t=>new ER(t,this.storage))}getMetadata(){return function jO(n){return function PO(n){n._throwIfRoot("getMetadata");const e=nR(n.storage,n._location,B0());return n.storage.makeRequestWithTokens(e,Fu)}(n=(0,X.m9)(n))}(this._delegate)}updateMetadata(e){return function HO(n,e){return function OO(n,e){n._throwIfRoot("updateMetadata");const t=function fO(n,e,t,r){const l=xt(e.fullServerUrl(),n.host,n._protocol),h=zS(t,r),b=n.maxOperationRetryTime,N=new xd(l,"PATCH",kD(n,r),b);return N.headers={"Content-Type":"application/json; charset=utf-8"},N.body=h,N.errorHandler=U0(e),N}(n.storage,n._location,e,B0());return n.storage.makeRequestWithTokens(t,Fu)}(n=(0,X.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function GO(n){return kO(n=(0,X.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function WO(n){return function NO(n){n._throwIfRoot("deleteObject");const e=function pO(n,e){const r=xt(e.fullServerUrl(),n.host,n._protocol),h=new xd(r,"DELETE",function u(m,b){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=U0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fu)}(n=(0,X.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw f(e)}}class wR{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bR(e))throw c("ref() expected a child path but got a URL, use refFromURL instead.");return new Nh(yR(this._delegate,e),this)}refFromURL(e){if(!bR(e))throw c("refFromURL() expected a full URL but got a child path, use ref() instead.");try{x.makeFromUrl(e,this._delegate.host)}catch{throw c("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nh(yR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function qO(n,e,t,r={}){!function UO(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,X.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function bR(n){return/^[A-Za-z]+:\/\//.test(n)}function ek(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new wR(t,r)}function CR(n){const e=function nk(n){return new co.y(e=>{const t=u=>e.next(u);t(n.snapshot);const l=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){l()}}).pipe((0,kS.b)(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ar.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function FD(n){return{getDownloadURL:()=>(0,Oi.of)(void 0).pipe(or.fc,(0,di.w)(()=>n.getDownloadURL()),or.iC),getMetadata:()=>(0,Oi.of)(void 0).pipe(or.fc,(0,di.w)(()=>n.getMetadata()),or.iC),delete:()=>(0,Zs.D)(n.delete()),child:e=>FD(n.child(e)),updateMetadata:e=>(0,Zs.D)(n.updateMetadata(e)),put:(e,t)=>CR(n.put(e,t)),putString:(e,t,r)=>CR(n.putString(e,t,r)),list:e=>(0,Zs.D)(n.list(e)),listAll:()=>(0,Zs.D)(n.listAll())}}!function tk(n){const e={TaskState:nl,TaskEvent:vO,StringFormat:uc,Storage:wR,Reference:Nh};n.INTERNAL.registerComponent(new hs.wA("storage-compat",ek,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}($d.Z);const rk=new E.OlP("angularfire2.storageBucket"),ik=new E.OlP("angularfire2.storage.maxUploadRetryTime"),sk=new E.OlP("angularfire2.storage.maxOperationRetryTime"),ok=new E.OlP("angularfire2.storage.use-emulator");let ak=(()=>{class n{constructor(t,r,s,l,u,h,m,b,N,H){const ee=(0,yi.on)(t,u,r);this.storage=(0,yi.cc)(`${ee.name}.storage.${s}`,"AngularFireStorage",ee.name,()=>{const ge=u.runOutsideAngular(()=>ee.storage(s||void 0)),Ie=N;return Ie&&ge.useEmulator(...Ie),m&&ge.setMaxUploadRetryTime(m),b&&ge.setMaxOperationRetryTime(b),ge},[m,b])}ref(t){return FD(this.storage.ref(t))}refFromURL(t){return FD(this.storage.refFromURL(t))}upload(t,r,s){return FD(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(yi.Dh),E.LFG(yi.xv,8),E.LFG(rk,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(or.HU),E.LFG(ik,8),E.LFG(sk,8),E.LFG(ok,8),E.LFG(si,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({}),n})(),ck=(()=>{class n{constructor(){Zu.Z.registerVersion("angularfire",or.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[ak],imports:[lk]}),n})();var uk=U(3099),dk=U(8421),hk=U(4671),fk=U(5032),pk=U(3269);const DR="@firebase/database";let ZS="";function TR(n){ZS=n}class _k{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,X.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,X.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class yk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,X.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const SR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _k(e)}}catch{}return new yk},Fg=SR("localStorage"),YS=SR("sessionStorage"),ry=new Ni.Yd("@firebase/database"),AR=function(){let n=1;return function(){return n++}}(),MR=function(n){const e=(0,X.dS)(n),t=new X.gQ;t.update(e);const r=t.digest();return X.US.encodeByteArray(r)},V0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=V0.apply(null,r):e+="object"==typeof r?(0,X.Pz)(r):r,e+=" "}return e};let Bg=null,RR=!0;const xR=function(n,e){(0,X.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ry.logLevel=Ni.in.VERBOSE,Bg=ry.log.bind(ry),e&&YS.set("logging_enabled",!0)):"function"==typeof n?Bg=n:(Bg=null,YS.remove("logging_enabled"))},Fo=function(...n){if(!0===RR&&(RR=!1,null===Bg&&!0===YS.get("logging_enabled")&&xR(!0)),Bg){const e=V0.apply(null,n);Bg(e)}},j0=function(n){return function(...e){Fo(n,...e)}},QS=function(...n){const e="FIREBASE INTERNAL ERROR: "+V0(...n);ry.error(e)},Od=function(...n){const e=`FIREBASE FATAL ERROR: ${V0(...n)}`;throw ry.error(e),new Error(e)},Ma=function(...n){const e="FIREBASE WARNING: "+V0(...n);ry.warn(e)},BD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Lh="[MIN_NAME]",kd="[MAX_NAME]",Ug=function(n,e){if(n===e)return 0;if(n===Lh||e===kd)return-1;if(e===Lh||n===kd)return 1;{const t=UD(n),r=UD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},wk=function(n,e){return n===e?0:n<e?-1:1},H0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,X.Pz)(e))},XS=function(n){if("object"!=typeof n||null===n)return(0,X.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,X.Pz)(e[r]),t+=":",t+=XS(n[e[r]]);return t+="}",t},PR=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)r.push(n.substring(s,s+e>t?t:s+e));return r};function Bo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const OR=function(n){(0,X.hu)(!BD(n),"Invalid JSON number");const r=1023;let s,l,u,h,m;0===n?(l=0,u=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(l=0,u=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(s?1:0),b.reverse();const N=b.join("");let H="";for(m=0;m<64;m+=8){let ee=parseInt(N.substr(m,8),2).toString(16);1===ee.length&&(ee="0"+ee),H+=ee}return H.toLowerCase()},Ik=new RegExp("^-?(0*)\\d{1,10}$"),kR=-2147483648,JS=2147483647,UD=function(n){if(Ik.test(n)){const e=Number(n);if(e>=kR&&e<=JS)return e}return null},iy=function(n){try{n()}catch(e){setTimeout(()=>{throw Ma("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},$0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Sk{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ma(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ak{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Fo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ma(e)}}let z0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const UR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HR="websocket",$R="long_polling";class tA{constructor(e,t,r,s,l=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function zR(n,e,t){let r;if((0,X.hu)("string"==typeof e,"typeof type must == string"),(0,X.hu)("object"==typeof t,"typeof params must == object"),e===HR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==$R)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Mk(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return Bo(t,(l,u)=>{s.push(l+"="+u)}),r+s.join("&")}class Rk{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,X.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,X.p$)(this.counters_)}}const nA={},rA={};function iA(n){const e=n.toString();return nA[e]||(nA[e]=new Rk),nA[e]}class Pk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&iy(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Zf{constructor(e,t,r,s,l,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=j0(e),this.stats_=iA(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),zR(t,$R,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Pk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,X.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sA((...l)=>{const[u,h,m,b,N]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&UR.test(location.hostname)&&(r.r="f");const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zf.forceAllow_=!0}static forceDisallow(){Zf.forceDisallow_=!0}static isAvailable(){return!((0,X.Yr)()||!Zf.forceAllow_&&(Zf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,X.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,X.h$)(t),s=PR(r,1840);for(let l=0;l<s.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,X.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,X.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class sA{constructor(e,t,r,s){if(this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=AR(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=sA.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Fo("frame writing exception"),h.stack&&Fo(h.stack),Fo(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+s+"="+u.seg+"&ts"+s+"="+u.ts+"&d"+s+"="+u.d,s++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),r()})}addTag(e,t){(0,X.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||"loaded"===s||"complete"===s)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Fo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let jD=null;typeof MozWebSocket<"u"?jD=MozWebSocket:typeof WebSocket<"u"&&(jD=WebSocket);let sy=(()=>{class n{constructor(t,r,s,l,u,h,m){this.connId=t,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=j0(this.connId),this.stats_=iA(r),this.connURL=n.connectionURL_(r,h,m,l,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,s,l,u){const h={v:"5"};return!(0,X.Yr)()&&typeof location<"u"&&location.hostname&&UR.test(location.hostname)&&(h.r="f"),r&&(h.s=r),s&&(h.ls=s),l&&(h.ac=l),u&&(h.p=u),zR(t,HR,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fg.set("previous_websocket_failure",!0);try{let s;if((0,X.Yr)()){s={headers:{"User-Agent":`Firebase/5/${ZS}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(s.proxy={origin:h})}this.mySock=new jD(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==jD&&!n.forceDisallow_}static previouslyFailed(){return Fg.isInMemoryStorage||!0===Fg.get("previous_websocket_failure")}markConnectionHealthy(){Fg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=(0,X.cI)(r);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const r=(0,X.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=PR(r,16384);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),QR=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Zf,sy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=sy&&sy.isAvailable();let s=r&&!sy.previouslyFailed();if(t.webSocketOnly&&(r||Ma("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[sy];else{const l=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ix{constructor(e,t,r,s,l,u,h,m,b,N){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=N,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=j0("c:"+this.id+":"),this.transportManager_=new QR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=$0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=H0("t",e),r=H0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=H0("t",e),r=H0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=H0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?QS("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QS("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ma("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),$0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sx{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class ox{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,X.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let l=0;l<s.length;l++)if(s[l].callback===t&&(!r||r===s[l].context))return void s.splice(l,1)}validateEventType_(e){(0,X.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class HD extends ox{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,X.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new HD}getInitialEvent(e){return(0,X.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class li{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Qr(){return new li("")}function gr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Yf(n){return n.pieces_.length-n.pieceNum_}function xi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new li(n.pieces_,e)}function aA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function G0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function cx(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new li(e,0)}function as(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof li)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new li(t,0)}function mr(n){return n.pieceNum_>=n.pieces_.length}function rl(n,e){const t=gr(n),r=gr(e);if(null===t)return e;if(t===r)return rl(xi(n),xi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function eN(n,e){const t=G0(n,0),r=G0(e,0);for(let s=0;s<t.length&&s<r.length;s++){const l=Ug(t[s],r[s]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function lA(n,e){if(Yf(n)!==Yf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Kc(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Yf(n)>Yf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class tN{constructor(e,t){this.errorPrefix_=t,this.parts_=G0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,X.ug)(this.parts_[r]);ux(this)}}function ux(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vg(n))}function Vg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class cA extends ox{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new cA}getInitialEvent(e){return(0,X.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const W0=1e3;let zD,jg=(()=>{class n extends sx{constructor(t,r,s,l,u,h,m,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=j0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=W0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&HD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,s){const l=++this.requestNumber_,u={r:l,a:t,b:r};this.log_((0,X.Pz)(u)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(t){this.initConnection_();const r=new X.BH,s={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:s,onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,s,l){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,X.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:t,tag:s};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(t){const r=t.query,s=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const b=m.d,N=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(s)&&this.listens.get(s).get(l))===t&&(this.log_("listen response",m),"ok"!==N&&this.removeListen_(s,l),t.onComplete&&t.onComplete(N,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,X.r3)(t,"w")){const s=(0,X.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ma(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,X.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,X.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(r,s,l=>{const u=l.s,h=l.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,s=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(t,r){const s=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),(0,X.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,t._queryObject,r)}sendUnlisten_(t,r,s,l){this.log_("Unlisten on "+t+" for "+r);const u={p:t};l&&(u.q=s,u.t=l),this.sendRequest("n",u)}onDisconnectPut(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:s})}onDisconnectMerge(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:s})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,s,l){const u={p:r,d:s};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(t,r,s,l){this.putInternal("p",t,r,s,l)}merge(t,r,s,l){this.putInternal("m",t,r,s,l)}putInternal(t,r,s,l,u){this.initConnection_();const h={p:r,d:s};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,s,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,X.Pz)(t));const r=t.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):QS("Unrecognized action received from server: "+(0,X.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=W0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=W0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=W0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ct.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,b=null;const N=function(){b?b.close():(m=!0,l())};t.realtime_={close:N,sendRequest:function(ge){(0,X.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(ge)}};const ee=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ge,Ie]=yield Promise.all([t.authTokenProvider_.getToken(ee),t.appCheckTokenProvider_.getToken(ee)]);m?Fo("getToken() completed but was canceled"):(Fo("getToken() completed. Creating connection."),t.authToken_=ge&&ge.accessToken,t.appCheckToken_=Ie&&Ie.token,b=new ix(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,s,l,et=>{Ma(et+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(ge){t.log_("Failed to get token: "+ge),m||(t.repoInfo_.nodeAdmin&&Ma(ge),N())}}})()}interrupt(t){Fo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Fo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=W0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let s;s=r?r.map(u=>XS(u)).join("$"):"default";const l=this.removeListen_(t,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const s=new li(t).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(r),u.delete(r),0===u.size&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(t,r){Fo("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Fo("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,X.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ZS.replace(/\./g,"-")]=1,(0,X.uI)()?t["framework.cordova"]=1:(0,X.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=HD.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Dr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Dr(e,t)}}class $D{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Dr(Lh,e),s=new Dr(Lh,t);return 0!==this.compare(r,s)}minPost(){return Dr.MIN}}class fx extends $D{static get __EMPTY_NODE(){return zD}static set __EMPTY_NODE(e){zD=e}compare(e,t){return Ug(e.name,t.name)}isDefinedOn(e){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Dr.MIN}maxPost(){return new Dr(kd,zD)}makePost(e,t){return(0,X.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Dr(e,zD)}toString(){return".key"}}const Nd=new fx;class GD{constructor(e,t,r,s,l=null){this.isReverse_=s,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,s&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let dA,Bu=(()=>{class n{constructor(t,r,s,l,u){this.key=t,this.value=r,this.color=s??n.RED,this.left=l??kl.EMPTY_NODE,this.right=u??kl.EMPTY_NODE}copy(t,r,s,l,u){return new n(t??this.key,r??this.value,s??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,s),null):0===u?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return kl.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let s,l;if(s=this,r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===r(t,s.key)){if(s.right.isEmpty())return kl.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class kl{constructor(e,t=kl.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new kl(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Bu.BLACK,null,null))}remove(e){return new kl(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Bu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(s=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new GD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new GD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new GD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new GD(this.root_,null,this.comparator_,!0,e)}}function cN(n,e){return Ug(n.name,e.name)}function uA(n,e){return Ug(n,e)}kl.EMPTY_NODE=new class lN{copy(e,t,r,s,l){return this}insert(e,t,r){return new Bu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const px=function(n){return"number"==typeof n?"number:"+OR(n):"string:"+n},gx=function(n){if(n.isLeafNode()){const e=n.val();(0,X.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,X.r3)(e,".sv"),"Priority must be a string or number.")}else(0,X.hu)(n===dA||n.isEmpty(),"priority of unexpected type.");(0,X.hu)(n===dA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mx,_x,yx,oy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gx(this.priorityNode_)}static set __childrenNodeConstructor(t){mx=t}static get __childrenNodeConstructor(){return mx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return mr(t)?this:".priority"===gr(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const s=gr(t);return null===s?r:r.isEmpty()&&".priority"!==s?this:((0,X.hu)(".priority"!==s||1===Yf(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xi(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+px(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?OR(this.value_):this.value_,this.lazyHash_=MR(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,X.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,s=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(s);return(0,X.hu)(l>=0,"Unknown leaf type: "+r),(0,X.hu)(u>=0,"Unknown leaf type: "+s),l===u?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ji=new class fN extends $D{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),l=r.compareTo(s);return 0===l?Ug(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Dr.MIN}maxPost(){return new Dr(kd,new oy("[PRIORITY-POST]",yx))}makePost(e,t){const r=_x(e);return new Dr(t,new oy("[PRIORITY-POST]",r))}toString(){return".priority"}},pN=Math.log(2);class gN{constructor(e){this.count=parseInt(Math.log(e+1)/pN,10),this.current_=this.count-1;const s=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const WD=function(n,e,t,r){n.sort(e);const s=function(m,b){const N=b-m;let H,ee;if(0===N)return null;if(1===N)return H=n[m],ee=t?t(H):H,new Bu(ee,H.node,Bu.BLACK,null,null);{const ge=parseInt(N/2,10)+m,Ie=s(m,ge),et=s(ge+1,b);return H=n[ge],ee=t?t(H):H,new Bu(ee,H.node,Bu.BLACK,Ie,et)}},h=function(m){let b=null,N=null,H=n.length;const ee=function(Ie,et){const _t=H-Ie,nn=H;H-=Ie;const vn=s(_t+1,nn),pn=n[_t],on=t?t(pn):pn;ge(new Bu(on,pn.node,et,null,vn))},ge=function(Ie){b?(b.left=Ie,b=Ie):(N=Ie,b=Ie)};for(let Ie=0;Ie<m.count;++Ie){const et=m.nextBitIsOne(),_t=Math.pow(2,m.count-(Ie+1));et?ee(_t,Bu.BLACK):(ee(_t,Bu.BLACK),ee(_t,Bu.RED))}return N}(new gN(n.length));return new kl(r||e,h)};let hA;const ay={};class Fh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,X.hu)(ay&&ji,"ChildrenNode.ts has not been loaded"),hA=hA||new Fh({".priority":ay},{".priority":ji}),hA}get(e){const t=(0,X.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof kl?t:null}hasIndex(e){return(0,X.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,X.hu)(e!==Nd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const l=t.getIterator(Dr.Wrap);let h,u=l.getNext();for(;u;)s=s||e.isDefinedOn(u.node),r.push(u),u=l.getNext();h=s?WD(r,e.getCompare()):ay;const m=e.toString(),b=Object.assign({},this.indexSet_);b[m]=e;const N=Object.assign({},this.indexes_);return N[m]=h,new Fh(N,b)}addToIndexes(e,t){const r=(0,X.UI)(this.indexes_,(s,l)=>{const u=(0,X.DV)(this.indexSet_,l);if((0,X.hu)(u,"Missing index implementation for "+l),s===ay){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(Dr.Wrap);let b=m.getNext();for(;b;)b.name!==e.name&&h.push(b),b=m.getNext();return h.push(e),WD(h,u.getCompare())}return ay}{const h=t.get(e.name);let m=s;return h&&(m=m.remove(new Dr(e.name,h))),m.insert(e,e.node)}});return new Fh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,X.UI)(this.indexes_,s=>{if(s===ay)return s;{const l=t.get(e.name);return l?s.remove(new Dr(e.name,l)):s}});return new Fh(r,this.indexSet_)}}let K0,ur=(()=>{class n{constructor(t,r,s){this.children_=t,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&gx(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return K0||(K0=new n(new kl(uA),null,Fh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||K0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?K0:r}}getChild(t){const r=gr(t);return null===r?this:this.getImmediateChild(r).getChild(xi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,X.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const s=new Dr(t,r);let l,u;r.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(s,this.children_));const h=l.isEmpty()?K0:this.priorityNode_;return new n(l,h,u)}}updateChild(t,r){const s=gr(t);if(null===s)return r;{(0,X.hu)(".priority"!==gr(t)||1===Yf(t),".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(xi(t),r);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let s=0,l=0,u=!0;if(this.forEachChild(ji,(h,m)=>{r[h]=m.val(t),s++,u&&n.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):u=!1}),!t&&u&&l<2*s){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+px(this.getPriority().val())+":"),this.forEachChild(ji,(r,s)=>{const l=s.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":MR(t)}return this.lazyHash_}getPredecessorChildName(t,r,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new Dr(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Dr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Dr(r,this.children_.get(r)):null}forEachChild(t,r){const s=this.resolveIndex_(t);return s?s.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Dr.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Dr.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===q0?-1:0}withIndex(t){if(t===Nd||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Nd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const s=this.getIterator(ji),l=r.getIterator(ji);let u=s.getNext(),h=l.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=s.getNext(),h=l.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===Nd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const q0=new class mN extends ur{constructor(){super(new kl(uA),ur.EMPTY_NODE,Fh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ur.EMPTY_NODE}isEmpty(){return!1}};function gs(n,e=null){if(null===n)return ur.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,X.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new oy(n,gs(e));if(n instanceof Array){let t=ur.EMPTY_NODE;return Bo(n,(r,s)=>{if((0,X.r3)(n,r)&&"."!==r.substring(0,1)){const l=gs(s);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(gs(e))}{const t=[];let r=!1;if(Bo(n,(u,h)=>{if("."!==u.substring(0,1)){const m=gs(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Dr(u,m)))}}),0===t.length)return ur.EMPTY_NODE;const l=WD(t,cN,u=>u.name,uA);if(r){const u=WD(t,ji.getCompare());return new ur(l,gs(e),new Fh({".priority":u},{".priority":ji}))}return new ur(l,gs(e),Fh.Default)}}Object.defineProperties(Dr,{MIN:{value:new Dr(Lh,ur.EMPTY_NODE)},MAX:{value:new Dr(kd,q0)}}),fx.__EMPTY_NODE=ur.EMPTY_NODE,oy.__childrenNodeConstructor=ur,function uN(n){dA=n}(q0),function hN(n){yx=n}(q0),function dN(n){_x=n}(gs);class fA extends $D{constructor(e){super(),this.indexPath_=e,(0,X.hu)(!mr(e)&&".priority"!==gr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),l=r.compareTo(s);return 0===l?Ug(e.name,t.name):l}makePost(e,t){const r=gs(e),s=ur.EMPTY_NODE.updateChild(this.indexPath_,r);return new Dr(t,s)}maxPost(){const e=ur.EMPTY_NODE.updateChild(this.indexPath_,q0);return new Dr(kd,e)}toString(){return G0(this.indexPath_,0).join("/")}}const pA=new class yN extends $D{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ug(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Dr.MIN}maxPost(){return Dr.MAX}makePost(e,t){const r=gs(e);return new Dr(t,r)}toString(){return".value"}},ly="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vN=function(){let n=0;const e=[];return function(t){const r=t===n;let s;n=t;const l=new Array(8);for(s=7;s>=0;s--)l[s]=ly.charAt(t%64),t=Math.floor(t/64);(0,X.hu)(0===t,"Cannot push at time == 0");let u=l.join("");if(r){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)u+=ly.charAt(e[s]);return(0,X.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),wx=function(n){if(n===""+JS)return"-";const e=UD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return kd;const l=ly.charAt(ly.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},bx=function(n){if(n===""+kR)return Lh;const e=UD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+JS:(delete t[t.length-1],t.join("")):(t[t.length-1]=ly.charAt(ly.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Cx(n){return{type:"value",snapshotNode:n}}function cy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Z0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Y0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class mA{constructor(e){this.index_=e}updateChild(e,t,r,s,l,u){(0,X.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(s).equals(r.getChild(s))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Z0(t,h)):(0,X.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(cy(t,r)):u.trackChildChange(Y0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ji,(s,l)=>{t.hasChild(s)||r.trackChildChange(Z0(s,l))}),t.isLeafNode()||t.forEachChild(ji,(s,l)=>{if(e.hasChild(s)){const u=e.getImmediateChild(s);u.equals(l)||r.trackChildChange(Y0(s,l,u))}else r.trackChildChange(cy(s,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ur.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Q0{constructor(e){this.indexedFilter_=new mA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Q0.getStartPost_(e),this.endPost_=Q0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,s,l,u){return this.matches(new Dr(t,r))||(r=ur.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,l,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ur.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(ur.EMPTY_NODE);const l=this;return t.forEachChild(ji,(u,h)=>{l.matches(new Dr(u,h))||(s=s.updateImmediateChild(u,ur.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class wN{constructor(e){this.rangedFilter_=new Q0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,s,l,u){return this.rangedFilter_.matches(new Dr(t,r))||(r=ur.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,l,u):this.fullLimitUpdateChild_(e,t,r,l,u)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=ur.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;s=ur.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;s=s.updateImmediateChild(h.name,h.node),u++}}else{let l,u,h,m;if(s=t.withIndex(this.index_),s=s.updatePriority(ur.EMPTY_NODE),this.reverse_){m=s.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const H=this.index_.getCompare();h=(ee,ge)=>H(ge,ee)}else m=s.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let b=0,N=!1;for(;m.hasNext();){const H=m.getNext();!N&&h(l,H)<=0&&(N=!0),N&&b<this.limit_&&h(H,u)<=0?b++:s=s.updateImmediateChild(H.name,ur.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,l){let u;if(this.reverse_){const H=this.index_.getCompare();u=(ee,ge)=>H(ge,ee)}else u=this.index_.getCompare();const h=e;(0,X.hu)(h.numChildren()===this.limit_,"");const m=new Dr(t,r),b=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),N=this.rangedFilter_.matches(m);if(h.hasChild(t)){const H=h.getImmediateChild(t);let ee=s.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=ee&&(ee.name===t||h.hasChild(ee.name));)ee=s.getChildAfterChild(this.index_,ee,this.reverse_);const ge=null==ee?1:u(ee,m);if(N&&!r.isEmpty()&&ge>=0)return l?.trackChildChange(Y0(t,r,H)),h.updateImmediateChild(t,r);{l?.trackChildChange(Z0(t,H));const et=h.updateImmediateChild(t,ur.EMPTY_NODE);return null!=ee&&this.rangedFilter_.matches(ee)?(l?.trackChildChange(cy(ee.name,ee.node)),et.updateImmediateChild(ee.name,ee.node)):et}}return r.isEmpty()?e:N&&u(b,m)>=0?(null!=l&&(l.trackChildChange(Z0(b.name,b.node)),l.trackChildChange(cy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(b.name,ur.EMPTY_NODE)):e}}class KD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ji}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ji}copy(){const e=new KD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _A(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function yA(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function qD(n,e){const t=n.copy();return t.index_=e,t}function Dx(n){const e={};if(n.isDefault())return e;let t;return n.index_===ji?t="$priority":n.index_===pA?t="$value":n.index_===Nd?t="$key":((0,X.hu)(n.index_ instanceof fA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,X.Pz)(t),n.startSet_&&(e.startAt=(0,X.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,X.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,X.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,X.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Ix(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ji&&(e.i=n.index_.toString()),e}class ZD extends sx{constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=j0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,X.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,s){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=ZD.getListenId_(e,r),h={};this.listens_[u]=h;const m=Dx(e._queryParams);this.restRequest_(l+".json",m,(b,N)=>{let H=N;if(404===b&&(H=null,b=null),null===b&&this.onDataUpdate_(l,H,!1,r),(0,X.DV)(this.listens_,u)===h){let ee;ee=b?401===b?"permission_denied":"rest_error:"+b:"ok",s(ee,null)}})}unlisten(e,t){const r=ZD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Dx(e._queryParams),r=e._path.toString(),s=new X.BH;return this.restRequest_(r+".json",t,(l,u)=>{let h=u;404===l&&(h=null,l=null),null===l?(this.onDataUpdate_(r,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,l])=>{s&&s.accessToken&&(t.auth=s.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,X.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,X.cI)(h.responseText)}catch{Ma("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Ma("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class SN{constructor(){this.rootNode_=ur.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function YD(){return{value:null,children:new Map}}function uy(n,e,t){if(mr(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=gr(e);n.children.has(r)||n.children.set(r,YD()),uy(n.children.get(r),e=xi(e),t)}}function vA(n,e){if(mr(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ji,(r,s)=>{uy(n,new li(r),s)}),vA(n,e)}}if(n.children.size>0){const t=gr(e);return e=xi(e),n.children.has(t)&&vA(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function EA(n,e,t){null!==n.value?t(e,n.value):function AN(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,s)=>{EA(s,new li(e.toString()+"/"+r),t)})}class MN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bo(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}class PN{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new MN(e);const r=1e4+2e4*Math.random();$0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Bo(e,(s,l)=>{l>0&&(0,X.r3)(this.statsToReport_,s)&&(t[s]=l,r=!0)}),r&&this.server_.reportStats(t),$0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qc=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qc||(qc={})),qc))();function CA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class QD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=qc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(mr(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new li(e));return new QD(Qr(),t,this.revert)}}return(0,X.hu)(gr(this.path)===e,"operationForChild called for unrelated child."),new QD(xi(this.path),this.affectedTree,this.revert)}}class X0{constructor(e,t){this.source=e,this.path=t,this.type=qc.LISTEN_COMPLETE}operationForChild(e){return mr(this.path)?new X0(this.source,Qr()):new X0(this.source,xi(this.path))}}class Hg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=qc.OVERWRITE}operationForChild(e){return mr(this.path)?new Hg(this.source,Qr(),this.snap.getImmediateChild(e)):new Hg(this.source,xi(this.path),this.snap)}}class dy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=qc.MERGE}operationForChild(e){if(mr(this.path)){const t=this.children.subtree(new li(e));return t.isEmpty()?null:t.value?new Hg(this.source,Qr(),t.value):new dy(this.source,Qr(),t)}return(0,X.hu)(gr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dy(this.source,xi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(mr(e))return this.isFullyInitialized()&&!this.filtered_;const t=gr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ON{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function J0(n,e,t,r,s,l){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function LN(n,e,t){if(null==e.childName||null==t.childName)throw(0,X.g5)("Should only compare child_ events.");const r=new Dr(e.childName,e.snapshotNode),s=new Dr(t.childName,t.snapshotNode);return n.index_.compare(r,s)}(n,h,m)),u.forEach(h=>{const m=function NN(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,l);s.forEach(b=>{b.respondsTo(h.type)&&e.push(b.createEvent(m,n.query_))})})}function XD(n,e){return{eventCache:n,serverCache:e}}function ew(n,e,t,r){return XD(new Qf(e,t,r),n.serverCache)}function Sx(n,e,t,r){return XD(n.eventCache,new Qf(e,t,r))}function JD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function $g(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let DA;class Hi{constructor(e,t=(()=>(DA||(DA=new kl(wk)),DA))()){this.value=e,this.children=t}static fromObject(e){let t=new Hi(null);return Bo(e,(r,s)=>{t=t.set(new li(r),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Qr(),value:this.value};if(mr(e))return null;{const r=gr(e),s=this.children.get(r);if(null!==s){const l=s.findRootMostMatchingPathAndValue(xi(e),t);return null!=l?{path:as(new li(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(mr(e))return this;{const t=gr(e),r=this.children.get(t);return null!==r?r.subtree(xi(e)):new Hi(null)}}set(e,t){if(mr(e))return new Hi(t,this.children);{const r=gr(e),l=(this.children.get(r)||new Hi(null)).set(xi(e),t),u=this.children.insert(r,l);return new Hi(this.value,u)}}remove(e){if(mr(e))return this.children.isEmpty()?new Hi(null):new Hi(null,this.children);{const t=gr(e),r=this.children.get(t);if(r){const s=r.remove(xi(e));let l;return l=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&l.isEmpty()?new Hi(null):new Hi(this.value,l)}return this}}get(e){if(mr(e))return this.value;{const t=gr(e),r=this.children.get(t);return r?r.get(xi(e)):null}}setTree(e,t){if(mr(e))return t;{const r=gr(e),l=(this.children.get(r)||new Hi(null)).setTree(xi(e),t);let u;return u=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Hi(this.value,u)}}fold(e){return this.fold_(Qr(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,l)=>{r[s]=l.fold_(as(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Qr(),t)}findOnPath_(e,t,r){const s=!!this.value&&r(t,this.value);if(s)return s;if(mr(e))return null;{const l=gr(e),u=this.children.get(l);return u?u.findOnPath_(xi(e),as(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qr(),t)}foreachOnPath_(e,t,r){if(mr(e))return this;{this.value&&r(t,this.value);const s=gr(e),l=this.children.get(s);return l?l.foreachOnPath_(xi(e),as(t,s),r):new Hi(null)}}foreach(e){this.foreach_(Qr(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(as(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Uu{constructor(e){this.writeTree_=e}static empty(){return new Uu(new Hi(null))}}function tw(n,e,t){if(mr(e))return new Uu(new Hi(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const s=r.path;let l=r.value;const u=rl(s,e);return l=l.updateChild(u,t),new Uu(n.writeTree_.set(s,l))}{const s=new Hi(t),l=n.writeTree_.setTree(e,s);return new Uu(l)}}}function IA(n,e,t){let r=n;return Bo(t,(s,l)=>{r=tw(r,as(e,s),l)}),r}function Ax(n,e){if(mr(e))return Uu.empty();{const t=n.writeTree_.setTree(e,new Hi(null));return new Uu(t)}}function TA(n,e){return null!=zg(n,e)}function zg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(rl(t.path,e)):null}function Mx(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ji,(r,s)=>{e.push(new Dr(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{null!=s.value&&e.push(new Dr(r,s.value))}),e}function Xf(n,e){if(mr(e))return n;{const t=zg(n,e);return new Uu(null!=t?new Hi(t):n.writeTree_.subtree(e))}}function SA(n){return n.writeTree_.isEmpty()}function hy(n,e){return Rx(Qr(),n.writeTree_,e)}function Rx(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,l)=>{".priority"===s?((0,X.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=Rx(as(n,s),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(as(n,".priority"),r)),t}}function eI(n,e){return Nx(e,n)}function HN(n,e){if(n.snap)return Kc(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Kc(as(n.path,t),e))return!0;return!1}function zN(n){return n.visible}function xx(n,e,t){let r=Uu.empty();for(let s=0;s<n.length;++s){const l=n[s];if(e(l)){const u=l.path;let h;if(l.snap)Kc(t,u)?(h=rl(t,u),r=tw(r,h,l.snap)):Kc(u,t)&&(h=rl(u,t),r=tw(r,Qr(),l.snap.getChild(h)));else{if(!l.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(Kc(t,u))h=rl(t,u),r=IA(r,h,l.children);else if(Kc(u,t))if(h=rl(u,t),mr(h))r=IA(r,Qr(),l.children);else{const m=(0,X.DV)(l.children,gr(h));if(m){const b=m.getChild(xi(h));r=tw(r,Qr(),b)}}}}}return r}function Px(n,e,t,r,s){if(r||s){const l=Xf(n.visibleWrites,e);return!s&&SA(l)?t:s||null!=t||TA(l,Qr())?hy(xx(n.allWrites,function(b){return(b.visible||s)&&(!r||!~r.indexOf(b.writeId))&&(Kc(b.path,e)||Kc(e,b.path))},e),t||ur.EMPTY_NODE):null}{const l=zg(n.visibleWrites,e);if(null!=l)return l;{const u=Xf(n.visibleWrites,e);return SA(u)?t:null!=t||TA(u,Qr())?hy(u,t||ur.EMPTY_NODE):null}}}function tI(n,e,t,r){return Px(n.writeTree,n.treePath,e,t,r)}function AA(n,e){return function GN(n,e,t){let r=ur.EMPTY_NODE;const s=zg(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ji,(l,u)=>{r=r.updateImmediateChild(l,u)}),r;if(t){const l=Xf(n.visibleWrites,e);return t.forEachChild(ji,(u,h)=>{const m=hy(Xf(l,new li(u)),h);r=r.updateImmediateChild(u,m)}),Mx(l).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return Mx(Xf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function Ox(n,e,t,r){return function WN(n,e,t,r,s){(0,X.hu)(r||s,"Either existingEventSnap or existingServerSnap must exist");const l=as(e,t);if(TA(n.visibleWrites,l))return null;{const u=Xf(n.visibleWrites,l);return SA(u)?s.getChild(t):hy(u,s.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nI(n,e){return function qN(n,e){return zg(n.visibleWrites,e)}(n.writeTree,as(n.treePath,e))}function MA(n,e,t){return function KN(n,e,t,r){const s=as(e,t),l=zg(n.visibleWrites,s);return null!=l?l:r.isCompleteForChild(t)?hy(Xf(n.visibleWrites,s),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function kx(n,e){return Nx(as(n.treePath,e),n.writeTree)}function Nx(n,e){return{treePath:n,writeTree:e}}class XN{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,X.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const l=s.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,Y0(r,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,Z0(r,s.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,cy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,X.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(r,Y0(r,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Lx=new class JN{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class RA{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Qf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MA(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$g(this.viewCache_),l=function QN(n,e,t,r,s,l){return function ZN(n,e,t,r,s,l,u){let h;const m=Xf(n.visibleWrites,e),b=zg(m,Qr());if(null!=b)h=b;else{if(null==t)return[];h=hy(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const N=[],H=u.getCompare(),ee=l?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let ge=ee.getNext();for(;ge&&N.length<s;)0!==H(ge,r)&&N.push(ge),ge=ee.getNext();return N}}(n.writeTree,n.treePath,e,t,r,s,l)}(this.writes_,s,t,1,r,e);return 0===l.length?null:l[0]}}function Fx(n,e,t,r,s,l){const u=e.eventCache;if(null!=nI(r,t))return e;{let h,m;if(mr(t))if((0,X.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=$g(e),H=AA(r,b instanceof ur?b:ur.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),H,l)}else{const b=tI(r,$g(e));h=n.filter.updateFullNode(e.eventCache.getNode(),b,l)}else{const b=gr(t);if(".priority"===b){(0,X.hu)(1===Yf(t),"Can't have a priority with additional path components");const N=u.getNode();m=e.serverCache.getNode();const H=Ox(r,t,N,m);h=null!=H?n.filter.updatePriority(N,H):u.getNode()}else{const N=xi(t);let H;if(u.isCompleteForChild(b)){m=e.serverCache.getNode();const ee=Ox(r,t,u.getNode(),m);H=null!=ee?u.getNode().getImmediateChild(b).updateChild(N,ee):u.getNode().getImmediateChild(b)}else H=MA(r,b,e.serverCache);h=null!=H?n.filter.updateChild(u.getNode(),b,H,N,s,l):u.getNode()}}return ew(e,h,u.isFullyInitialized()||mr(t),n.filter.filtersNodes())}}function rI(n,e,t,r,s,l,u,h){const m=e.serverCache;let b;const N=u?n.filter:n.filter.getIndexedFilter();if(mr(t))b=N.updateFullNode(m.getNode(),r,null);else if(N.filtersNodes()&&!m.isFiltered()){const ge=m.getNode().updateChild(t,r);b=N.updateFullNode(m.getNode(),ge,null)}else{const ge=gr(t);if(!m.isCompleteForPath(t)&&Yf(t)>1)return e;const Ie=xi(t),_t=m.getNode().getImmediateChild(ge).updateChild(Ie,r);b=".priority"===ge?N.updatePriority(m.getNode(),_t):N.updateChild(m.getNode(),ge,_t,Ie,Lx,null)}const H=Sx(e,b,m.isFullyInitialized()||mr(t),N.filtersNodes());return Fx(n,H,t,s,new RA(s,H,l),h)}function xA(n,e,t,r,s,l,u){const h=e.eventCache;let m,b;const N=new RA(s,e,l);if(mr(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=ew(e,b,!0,n.filter.filtersNodes());else{const H=gr(t);if(".priority"===H)b=n.filter.updatePriority(e.eventCache.getNode(),r),m=ew(e,b,h.isFullyInitialized(),h.isFiltered());else{const ee=xi(t),ge=h.getNode().getImmediateChild(H);let Ie;if(mr(ee))Ie=r;else{const et=N.getCompleteChild(H);Ie=null!=et?".priority"===aA(ee)&&et.getChild(cx(ee)).isEmpty()?et:et.updateChild(ee,r):ur.EMPTY_NODE}m=ge.equals(Ie)?e:ew(e,n.filter.updateChild(h.getNode(),H,Ie,ee,N,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Bx(n,e){return n.eventCache.isCompleteForChild(e)}function Ux(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function PA(n,e,t,r,s,l,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,m=e;b=mr(t)?r:new Hi(null).setTree(t,r);const N=e.serverCache.getNode();return b.children.inorderTraversal((H,ee)=>{if(N.hasChild(H)){const Ie=Ux(0,e.serverCache.getNode().getImmediateChild(H),ee);m=rI(n,m,new li(H),Ie,s,l,u,h)}}),b.children.inorderTraversal((H,ee)=>{const ge=!e.serverCache.isCompleteForChild(H)&&void 0===ee.value;if(!N.hasChild(H)&&!ge){const et=Ux(0,e.serverCache.getNode().getImmediateChild(H),ee);m=rI(n,m,new li(H),et,s,l,u,h)}}),m}class lL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new mA(r.getIndex()),l=function bN(n){return n.loadsAllData()?new mA(n.getIndex()):n.hasLimit()?new wN(n):new Q0(n)}(r);this.processor_=function eL(n){return{filter:n}}(l);const u=t.serverCache,h=t.eventCache,m=s.updateFullNode(ur.EMPTY_NODE,u.getNode(),null),b=l.updateFullNode(ur.EMPTY_NODE,h.getNode(),null),N=new Qf(m,u.isFullyInitialized(),s.filtersNodes()),H=new Qf(b,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=XD(H,N),this.eventGenerator_=new ON(this.query_)}get query(){return this.query_}}function dL(n,e){const t=$g(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!mr(e)&&!t.getImmediateChild(gr(e)).isEmpty())?t.getChild(e):null}function Vx(n){return 0===n.eventRegistrations_.length}function jx(n,e,t){const r=[];if(t){(0,X.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,s);u&&r.push(u)})}if(e){let s=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(l+1));break}}else s.push(u)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function Hx(n,e,t,r){e.type===qc.MERGE&&null!==e.source.queryId&&((0,X.hu)($g(n.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(JD(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,l=function nL(n,e,t,r,s){const l=new XN;let u,h;if(t.type===qc.OVERWRITE){const b=t;b.source.fromUser?u=xA(n,e,b.path,b.snap,r,s,l):((0,X.hu)(b.source.fromServer,"Unknown source."),h=b.source.tagged||e.serverCache.isFiltered()&&!mr(b.path),u=rI(n,e,b.path,b.snap,r,s,h,l))}else if(t.type===qc.MERGE){const b=t;b.source.fromUser?u=function iL(n,e,t,r,s,l,u){let h=e;return r.foreach((m,b)=>{const N=as(t,m);Bx(e,gr(N))&&(h=xA(n,h,N,b,s,l,u))}),r.foreach((m,b)=>{const N=as(t,m);Bx(e,gr(N))||(h=xA(n,h,N,b,s,l,u))}),h}(n,e,b.path,b.children,r,s,l):((0,X.hu)(b.source.fromServer,"Unknown source."),h=b.source.tagged||e.serverCache.isFiltered(),u=PA(n,e,b.path,b.children,r,s,h,l))}else if(t.type===qc.ACK_USER_WRITE){const b=t;u=b.revert?function aL(n,e,t,r,s,l){let u;if(null!=nI(r,t))return e;{const h=new RA(r,e,s),m=e.eventCache.getNode();let b;if(mr(t)||".priority"===gr(t)){let N;if(e.serverCache.isFullyInitialized())N=tI(r,$g(e));else{const H=e.serverCache.getNode();(0,X.hu)(H instanceof ur,"serverChildren would be complete if leaf node"),N=AA(r,H)}b=n.filter.updateFullNode(m,N,l)}else{const N=gr(t);let H=MA(r,N,e.serverCache);null==H&&e.serverCache.isCompleteForChild(N)&&(H=m.getImmediateChild(N)),b=null!=H?n.filter.updateChild(m,N,H,xi(t),h,l):e.eventCache.getNode().hasChild(N)?n.filter.updateChild(m,N,ur.EMPTY_NODE,xi(t),h,l):m,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=tI(r,$g(e)),u.isLeafNode()&&(b=n.filter.updateFullNode(b,u,l)))}return u=e.serverCache.isFullyInitialized()||null!=nI(r,Qr()),ew(e,b,u,n.filter.filtersNodes())}}(n,e,b.path,r,s,l):function sL(n,e,t,r,s,l,u){if(null!=nI(s,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(mr(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return rI(n,e,t,m.getNode().getChild(t),s,l,h,u);if(mr(t)){let b=new Hi(null);return m.getNode().forEachChild(Nd,(N,H)=>{b=b.set(new li(N),H)}),PA(n,e,t,b,s,l,h,u)}return e}{let b=new Hi(null);return r.foreach((N,H)=>{const ee=as(t,N);m.isCompleteForPath(ee)&&(b=b.set(N,m.getNode().getChild(ee)))}),PA(n,e,t,b,s,l,h,u)}}(n,e,b.path,b.affectedTree,r,s,l)}else{if(t.type!==qc.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+t.type);u=function oL(n,e,t,r,s){const l=e.serverCache;return Fx(n,Sx(e,l.getNode(),l.isFullyInitialized()||mr(t),l.isFiltered()),t,r,Lx,s)}(n,e,t.path,r,l)}const m=l.getChanges();return function rL(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=JD(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(Cx(JD(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,s,e,t,r);return function tL(n,e){(0,X.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,X.hu)(l.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,$x(n,l.changes,l.viewCache.eventCache.getNode(),null)}function $x(n,e,t,r){return function kN(n,e,t,r){const s=[],l=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function EN(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),J0(n,s,"child_removed",e,r,t),J0(n,s,"child_added",e,r,t),J0(n,s,"child_moved",l,r,t),J0(n,s,"child_changed",e,r,t),J0(n,s,"value",e,r,t),s}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let iI,oI;class zx{constructor(){this.views=new Map}}function OA(n,e,t,r){const s=e.source.queryId;if(null!==s){const l=n.views.get(s);return(0,X.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Hx(l,e,t,r)}{let l=[];for(const u of n.views.values())l=l.concat(Hx(u,e,t,r));return l}}function kA(n,e,t,r,s){const u=n.views.get(e._queryIdentifier);if(!u){let h=tI(t,s?r:null),m=!1;h?m=!0:r instanceof ur?(h=AA(t,r),m=!1):(h=ur.EMPTY_NODE,m=!1);const b=XD(new Qf(h,m,!1),new Qf(r,s,!1));return new lL(e,b)}return u}function Gx(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jf(n,e){let t=null;for(const r of n.views.values())t=t||dL(r,e);return t}function Wx(n,e){return e._queryParams.loadsAllData()?sI(n):n.views.get(e._queryIdentifier)}function Kx(n,e){return null!=Wx(n,e)}function ep(n){return null!=sI(n)}function sI(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let wL=1;class qx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Hi(null),this.pendingWriteTree_=function YN(){return{visibleWrites:Uu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function NA(n,e,t,r,s){return function BN(n,e,t,r,s){(0,X.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=tw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,s),s?fy(n,new Hg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function tp(n,e,t=!1){const r=function VN(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function jN(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,X.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,l=!1,u=n.allWrites.length-1;for(;s&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&HN(h,r.path)?s=!1:Kc(r.path,h.path)&&(l=!0)),u--}return!!s&&(l?(function $N(n){n.visibleWrites=xx(n.allWrites,zN,Qr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Ax(n.visibleWrites,r.path):Bo(r.children,m=>{n.visibleWrites=Ax(n.visibleWrites,as(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let l=new Hi(null);return null!=r.snap?l=l.set(Qr(),!0):Bo(r.children,u=>{l=l.set(new li(u),!0)}),fy(n,new QD(r.path,l,t))}return[]}function nw(n,e,t){return fy(n,new Hg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function aI(n,e,t,r){const s=e._path,l=n.syncPointTree_.get(s);let u=[];if(l&&("default"===e._queryIdentifier||Kx(l,e))){const h=function yL(n,e,t,r){const s=e._queryIdentifier,l=[];let u=[];const h=ep(n);if("default"===s)for(const[m,b]of n.views.entries())u=u.concat(jx(b,t,r)),Vx(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||l.push(b.query));else{const m=n.views.get(s);m&&(u=u.concat(jx(m,t,r)),Vx(m)&&(n.views.delete(s),m.query._queryParams.loadsAllData()||l.push(m.query)))}return h&&!ep(n)&&l.push(new(function gL(){return(0,X.hu)(iI,"Reference.ts has not been loaded"),iI}())(e._repo,e._path)),{removed:l,events:u}}(l,e,t,r);(function mL(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const m=h.removed;u=h.events;const b=-1!==m.findIndex(H=>H._queryParams.loadsAllData()),N=n.syncPointTree_.findOnPath(s,(H,ee)=>ep(ee));if(b&&!N){const H=n.syncPointTree_.subtree(s);if(!H.isEmpty()){const ee=function ML(n){return n.fold((e,t,r)=>{if(t&&ep(t))return[sI(t)];{let s=[];return t&&(s=Gx(t)),Bo(r,(l,u)=>{s=s.concat(u)}),s}})}(H);for(let ge=0;ge<ee.length;++ge){const Ie=ee[ge],et=Ie.query,_t=eP(n,Ie);n.listenProvider_.startListening(iw(et),rw(n,et),_t.hashFn,_t.onComplete)}}}!N&&m.length>0&&!r&&(b?n.listenProvider_.stopListening(iw(e),null):m.forEach(H=>{const ee=n.queryToTagMap.get(cI(H));n.listenProvider_.stopListening(iw(H),ee)})),function RL(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=cI(r),l=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(l)}}}(n,m)}return u}function Zx(n,e,t,r){const s=LA(n,r);if(null!=s){const l=FA(s),u=l.path,h=l.queryId,m=rl(u,e);return BA(n,u,new Hg(CA(h),m,t))}return[]}function Yx(n,e){const t=n._path;let r=null,s=!1;e.syncPointTree_.foreachOnPath(t,(b,N)=>{const H=rl(b,t);r=r||Jf(N,H),s=s||ep(N)});let u,l=e.syncPointTree_.get(t);l?(s=s||ep(l),r=r||Jf(l,Qr())):(l=new zx,e.syncPointTree_=e.syncPointTree_.set(t,l)),null!=r?u=!0:(u=!1,r=ur.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((N,H)=>{const ee=Jf(H,Qr());ee&&(r=r.updateImmediateChild(N,ee))}));const h=Kx(l,n);if(!h&&!n._queryParams.loadsAllData()){const b=cI(n);(0,X.hu)(!e.queryToTagMap.has(b),"View does not exist, but we have a tag");const N=function xL(){return wL++}();e.queryToTagMap.set(b,N),e.tagToQueryMap.set(N,b)}return{syncPoint:l,writesCache:eI(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:u,foundAncestorDefaultView:s,viewAlreadyExists:h}}function Qx(n,e,t){const{syncPoint:r,serverCache:s,writesCache:l,serverCacheComplete:u,viewAlreadyExists:h,foundAncestorDefaultView:m}=Yx(e,n);let b=function _L(n,e,t,r,s,l){const u=kA(n,e,r,s,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function hL(n,e){n.eventRegistrations_.push(e)}(u,t),function fL(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ji,(l,u)=>{r.push(cy(l,u))}),t.isFullyInitialized()&&r.push(Cx(t.getNode())),$x(n,r,t.getNode(),e)}(u,t)}(r,e,t,l,s,u);if(!h&&!m){const N=Wx(r,e);b=b.concat(function PL(n,e,t){const r=e._path,s=rw(n,e),l=eP(n,t),u=n.listenProvider_.startListening(iw(e),s,l.hashFn,l.onComplete),h=n.syncPointTree_.subtree(r);if(s)(0,X.hu)(!ep(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((b,N,H)=>{if(!mr(b)&&N&&ep(N))return[sI(N).query];{let ee=[];return N&&(ee=ee.concat(Gx(N).map(ge=>ge.query))),Bo(H,(ge,Ie)=>{ee=ee.concat(Ie)}),ee}});for(let b=0;b<m.length;++b){const N=m[b];n.listenProvider_.stopListening(iw(N),rw(n,N))}}return u}(n,e,N))}return b}function lI(n,e,t){const s=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,h)=>{const b=Jf(h,rl(u,e));if(b)return b});return Px(s,e,l,t,!0)}function fy(n,e){return Xx(e,n.syncPointTree_,null,eI(n.pendingWriteTree_,Qr()))}function Xx(n,e,t,r){if(mr(n.path))return Jx(n,e,t,r);{const s=e.get(Qr());null==t&&null!=s&&(t=Jf(s,Qr()));let l=[];const u=gr(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const b=t?t.getImmediateChild(u):null,N=kx(r,u);l=l.concat(Xx(h,m,b,N))}return s&&(l=l.concat(OA(s,n,r,t))),l}}function Jx(n,e,t,r){const s=e.get(Qr());null==t&&null!=s&&(t=Jf(s,Qr()));let l=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,b=kx(r,u),N=n.operationForChild(u);N&&(l=l.concat(Jx(N,h,m,b)))}),s&&(l=l.concat(OA(s,n,r,t))),l}function eP(n,e){const t=e.query,r=rw(n,t);return{hashFn:()=>(function cL(n){return n.viewCache_.serverCache.getNode()}(e)||ur.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return r?function IL(n,e,t){const r=LA(n,t);if(r){const s=FA(r),l=s.path,u=s.queryId,h=rl(l,e);return BA(n,l,new X0(CA(u),h))}return[]}(n,t._path,r):function DL(n,e){return fy(n,new X0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function Dk(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(s,t);return aI(n,t,null,l)}}}}function rw(n,e){const t=cI(e);return n.queryToTagMap.get(t)}function cI(n){return n._path.toString()+"$"+n._queryIdentifier}function LA(n,e){return n.tagToQueryMap.get(e)}function FA(n){const e=n.indexOf("$");return(0,X.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new li(n.substr(0,e))}}function BA(n,e,t){const r=n.syncPointTree_.get(e);return(0,X.hu)(r,"Missing sync point for query tag that we're tracking"),OA(r,t,eI(n.pendingWriteTree_,e),null)}function iw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function EL(){return(0,X.hu)(oI,"Reference.ts has not been loaded"),oI}())(n._repo,n._path):n}class UA{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new UA(t)}node(){return this.node_}}class VA{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=as(this.path_,e);return new VA(this.syncTree_,t)}node(){return lI(this.syncTree_,this.path_)}}const tP=function(n,e,t){return n&&"object"==typeof n?((0,X.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?kL(n[".sv"],e,t):"object"==typeof n[".sv"]?NL(n[".sv"],e):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},kL=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,X.hu)(!1,"Unexpected server value: "+n)},NL=function(n,e,t){n.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,X.hu)(!1,"Unexpected increment value: "+r);const s=e.node();if((0,X.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const u=s.getValue();return"number"!=typeof u?r:u+r},nP=function(n,e,t,r){return HA(e,new VA(t,n),r)},jA=function(n,e,t){return HA(n,new UA(e),t)};function HA(n,e,t){const r=n.getPriority().val(),s=tP(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,h=tP(u.getValue(),e,t);return h!==u.getValue()||s!==u.getPriority().val()?new oy(h,gs(s)):n}{const u=n;return l=u,s!==u.getPriority().val()&&(l=l.updatePriority(new oy(s))),u.forEachChild(ji,(h,m)=>{const b=HA(m,e.getImmediateChild(h),t);b!==m&&(l=l.updateImmediateChild(h,b))}),l}}class $A{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function uI(n,e){let t=e instanceof li?e:new li(e),r=n,s=gr(t);for(;null!==s;){const l=(0,X.DV)(r.node.children,s)||{children:{},childCount:0};r=new $A(s,r,l),t=xi(t),s=gr(t)}return r}function Gg(n){return n.node.value}function zA(n,e){n.node.value=e,GA(n)}function rP(n){return n.node.childCount>0}function dI(n,e){Bo(n.node.children,(t,r)=>{e(new $A(t,n,r))})}function iP(n,e,t,r){t&&!r&&e(n),dI(n,s=>{iP(s,e,!0,r)}),t&&r&&e(n)}function sw(n){return new li(null===n.parent?n.name:sw(n.parent)+"/"+n.name)}function GA(n){null!==n.parent&&function BL(n,e,t){const r=function LL(n){return void 0===Gg(n)&&!rP(n)}(t),s=(0,X.r3)(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,GA(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,GA(n))}(n.parent,n.name,n)}const UL=/[\[\].#$\/\u0000-\u001F\u007F]/,VL=/[\[\].#$\u0000-\u001F\u007F]/,WA=10485760,hI=function(n){return"string"==typeof n&&0!==n.length&&!UL.test(n)},sP=function(n){return"string"==typeof n&&0!==n.length&&!VL.test(n)},ow=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!BD(n)||n&&"object"==typeof n&&(0,X.r3)(n,".sv")},Ld=function(n,e,t,r){r&&void 0===e||aw((0,X.gK)(n,"value"),e,t)},aw=function(n,e,t){const r=t instanceof li?new tN(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vg(r)+" with contents = "+e.toString());if(BD(e))throw new Error(n+"contains "+e.toString()+" "+Vg(r));if("string"==typeof e&&e.length>WA/3&&(0,X.ug)(e)>WA)throw new Error(n+"contains a string greater than "+WA+" utf8 bytes "+Vg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,l=!1;if(Bo(e,(u,h)=>{if(".value"===u)s=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!hI(u)))throw new Error(n+" contains an invalid key ("+u+") "+Vg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function nN(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,X.ug)(e),ux(n)})(r,u),aw(n,h,r),function rN(n){const e=n.parts_.pop();n.byteLength_-=(0,X.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),s&&l)throw new Error(n+' contains ".value" child '+Vg(r)+" in addition to actual children.")}},oP=function(n,e,t,r){if(r&&void 0===e)return;const s=(0,X.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const l=[];Bo(e,(u,h)=>{const m=new li(u);if(aw(s,h,as(t,m)),".priority"===aA(m)&&!ow(h))throw new Error(s+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=G0(r);for(let u=0;u<l.length;u++)if((".priority"!==l[u]||u!==l.length-1)&&!hI(l[u]))throw new Error(n+"contains an invalid key ("+l[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(eN);let s=null;for(t=0;t<e.length;t++){if(r=e[t],null!==s&&Kc(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,l)},KA=function(n,e,t){if(!t||void 0!==e){if(BD(e))throw new Error((0,X.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ow(e))throw new Error((0,X.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lw=function(n,e,t,r){if(!(r&&void 0===t||hI(t)))throw new Error((0,X.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cw=function(n,e,t,r){if(!(r&&void 0===t||sP(t)))throw new Error((0,X.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Zc=function(n,e){if(".info"===gr(e))throw new Error(n+" failed = Can't modify data under /.info/")},aP=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hI(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sP(n)}(t))throw new Error((0,X.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fI(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],l=s.getPath();null!==t&&!lA(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(s)}t&&n.eventLists_.push(t)}function lP(n,e,t){fI(n,t),cP(n,r=>lA(r,e))}function Yc(n,e,t){fI(n,t),cP(n,r=>Kc(r,e)||Kc(e,r))}function cP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];s&&(e(s.path)?(GL(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function GL(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Bg&&Fo("event: "+t.toString()),iy(r)}}}const uP="repo_interrupt";class KL{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=YD(),this.transactionQueueTree_=new $A,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dP(n){const t=n.infoData_.getNode(new li(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function uw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:dP(n)})}function hP(n,e,t,r,s){n.dataUpdateCount++;const l=new li(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(s)if(r){const m=(0,X.UI)(t,b=>gs(b));u=function SL(n,e,t,r){const s=LA(n,r);if(s){const l=FA(s),u=l.path,h=l.queryId,m=rl(u,e),b=Hi.fromObject(t);return BA(n,u,new dy(CA(h),m,b))}return[]}(n.serverSyncTree_,l,m,s)}else{const m=gs(t);u=Zx(n.serverSyncTree_,l,m,s)}else if(r){const m=(0,X.UI)(t,b=>gs(b));u=function CL(n,e,t){const r=Hi.fromObject(t);return fy(n,new dy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,m)}else{const m=gs(t);u=nw(n.serverSyncTree_,l,m)}let h=l;u.length>0&&(h=py(n,l)),Yc(n.eventQueue_,h,u)}function fP(n,e){qA(n,"connected",e),!1===e&&function XL(n){Wg(n,"onDisconnectEvents");const e=uw(n),t=YD();EA(n.onDisconnect_,Qr(),(s,l)=>{const u=nP(s,l,n.serverSyncTree_,e);uy(t,s,u)});let r=[];EA(t,Qr(),(s,l)=>{r=r.concat(nw(n.serverSyncTree_,s,l));const u=XA(n,s);py(n,u)}),n.onDisconnect_=YD(),Yc(n.eventQueue_,Qr(),r)}(n)}function qA(n,e,t){const r=new li("/.info/"+e),s=gs(t);n.infoData_.updateSnapshot(r,s);const l=nw(n.infoSyncTree_,r,s);Yc(n.eventQueue_,r,l)}function pI(n){return n.nextWriteId_++}function YL(n,e){const t=function AL(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,N)=>{const H=rl(b,t);r=r||Jf(N,H)});let s=n.syncPointTree_.get(t);s?r=r||Jf(s,Qr()):(s=new zx,n.syncPointTree_=n.syncPointTree_.set(t,s));const l=null!=r,u=l?new Qf(r,!0,!1):null;return function uL(n){return JD(n.viewCache_)}(kA(s,e,eI(n.pendingWriteTree_,e._path),l?u.getNode():ur.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const s=gs(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())nw(n.serverSyncTree_,e._path,s);else{const u=function TL(n,e){const{syncPoint:t,serverCache:r,writesCache:s,serverCacheComplete:l}=Yx(e,n),u=kA(t,e,s,r,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),e._queryParams.loadsAllData()?null:rw(n,e)}(n.serverSyncTree_,e);Zx(n.serverSyncTree_,e._path,s,u)}return aI(n.serverSyncTree_,e,null).length>0&&Wg(n,"unexpected cancel events in repoGetValue"),s},r=>(Wg(n,"get for query "+(0,X.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function ZA(n,e,t,r,s){Wg(n,"set",{path:e.toString(),value:t,priority:r});const l=uw(n),u=gs(t,r),h=lI(n.serverSyncTree_,e),m=jA(u,h,l),b=pI(n),N=NA(n.serverSyncTree_,e,m,b,!0);fI(n.eventQueue_,N),n.server_.put(e.toString(),u.val(!0),(ee,ge)=>{const Ie="ok"===ee;Ie||Ma("set at "+e+" failed: "+ee);const et=tp(n.serverSyncTree_,b,!Ie);Yc(n.eventQueue_,e,et),np(0,s,ee,ge)});const H=XA(n,e);py(n,H),Yc(n.eventQueue_,H,[])}function JL(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{"ok"===r&&vA(n.onDisconnect_,e),np(0,t,r,s)})}function pP(n,e,t,r){const s=gs(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,u)=>{"ok"===l&&uy(n.onDisconnect_,e,s),np(0,r,l,u)})}function YA(n,e,t){let r;r=".info"===gr(e._path)?aI(n.infoSyncTree_,e,t):aI(n.serverSyncTree_,e,t),lP(n.eventQueue_,e._path,r)}function gP(n){n.persistentConnection_&&n.persistentConnection_.interrupt(uP)}function Wg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Fo(t,...e)}function np(n,e,t,r){e&&iy(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let l=s;r&&(l+=": "+r);const u=new Error(l);u.code=s,e(u)}})}function QA(n,e,t){return lI(n.serverSyncTree_,e,t)||ur.EMPTY_NODE}function gI(n,e=n.transactionQueueTree_){if(e||mI(n,e),Gg(e)){const t=_P(n,e);(0,X.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function sF(n,e,t){const r=t.map(b=>b.currentWriteId),s=QA(n,e,r);let l=s;const u=s.hash();for(let b=0;b<t.length;b++){const N=t[b];(0,X.hu)(0===N.status,"tryToSendTransactionQueue_: items in queue should all be run."),N.status=1,N.retryCount++;const H=rl(e,N.path);l=l.updateChild(H,N.currentOutputSnapshotRaw)}const h=l.val(!0),m=e;n.server_.put(m.toString(),h,b=>{Wg(n,"transaction put response",{path:m.toString(),status:b});let N=[];if("ok"===b){const H=[];for(let ee=0;ee<t.length;ee++)t[ee].status=2,N=N.concat(tp(n.serverSyncTree_,t[ee].currentWriteId)),t[ee].onComplete&&H.push(()=>t[ee].onComplete(null,!0,t[ee].currentOutputSnapshotResolved)),t[ee].unwatcher();mI(n,uI(n.transactionQueueTree_,e)),gI(n,n.transactionQueueTree_),Yc(n.eventQueue_,e,N);for(let ee=0;ee<H.length;ee++)iy(H[ee])}else{if("datastale"===b)for(let H=0;H<t.length;H++)t[H].status=3===t[H].status?4:0;else{Ma("transaction at "+m.toString()+" failed: "+b);for(let H=0;H<t.length;H++)t[H].status=4,t[H].abortReason=b}py(n,e)}},u)}(n,sw(e),t)}else rP(e)&&dI(e,t=>{gI(n,t)})}function py(n,e){const t=mP(n,e),r=sw(t);return function oF(n,e,t){if(0===e.length)return;const r=[];let s=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],b=rl(t,m.path);let H,N=!1;if((0,X.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)N=!0,H=m.abortReason,s=s.concat(tp(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)N=!0,H="maxretry",s=s.concat(tp(n.serverSyncTree_,m.currentWriteId,!0));else{const ee=QA(n,m.path,u);m.currentInputSnapshot=ee;const ge=e[h].update(ee.val());if(void 0!==ge){aw("transaction failed: Data returned ",ge,m.path);let Ie=gs(ge);"object"==typeof ge&&null!=ge&&(0,X.r3)(ge,".priority")||(Ie=Ie.updatePriority(ee.getPriority()));const _t=m.currentWriteId,nn=uw(n),vn=jA(Ie,ee,nn);m.currentOutputSnapshotRaw=Ie,m.currentOutputSnapshotResolved=vn,m.currentWriteId=pI(n),u.splice(u.indexOf(_t),1),s=s.concat(NA(n.serverSyncTree_,m.path,vn,m.currentWriteId,m.applyLocally)),s=s.concat(tp(n.serverSyncTree_,_t,!0))}else N=!0,H="nodata",s=s.concat(tp(n.serverSyncTree_,m.currentWriteId,!0))}Yc(n.eventQueue_,t,s),s=[],N&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===H?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(H),!1,null)))}mI(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)iy(r[h]);gI(n,n.transactionQueueTree_)}(n,_P(n,t),r),r}function mP(n,e){let t,r=n.transactionQueueTree_;for(t=gr(e);null!==t&&void 0===Gg(r);)r=uI(r,t),t=gr(e=xi(e));return r}function _P(n,e){const t=[];return yP(n,e,t),t.sort((r,s)=>r.order-s.order),t}function yP(n,e,t){const r=Gg(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);dI(e,s=>{yP(n,s,t)})}function mI(n,e){const t=Gg(e);if(t){let r=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[r]=t[s],r++);t.length=r,zA(e,t.length>0?t:void 0)}dI(e,r=>{mI(n,r)})}function XA(n,e){const t=sw(mP(n,e)),r=uI(n.transactionQueueTree_,e);return function FL(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,s=>{JA(n,s)}),JA(n,r),iP(r,s=>{JA(n,s)}),t}function JA(n,e){const t=Gg(e);if(t){const r=[];let s=[],l=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,X.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):((0,X.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),s=s.concat(tp(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?zA(e,void 0):t.length=l+1,Yc(n.eventQueue_,sw(e),s);for(let u=0;u<r.length;u++)iy(r[u])}}const eM=function(n,e){const t=cF(n),r=t.namespace;return"firebase.com"===t.domain&&Od(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Od("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ma("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tA(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new li(t.pathString)}},cF=function(n){let e="",t="",r="",s="",l="",u=!0,h="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(h=n.substring(0,b-1),n=n.substring(b+2));let N=n.indexOf("/");-1===N&&(N=n.length);let H=n.indexOf("?");-1===H&&(H=n.length),e=n.substring(0,Math.min(N,H)),N<H&&(s=function aF(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(N,H)));const ee=function lF(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ma(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,H)));b=e.indexOf(":"),b>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(b+1),10)):b=e.length;const ge=e.slice(0,b);if("localhost"===ge.toLowerCase())t="localhost";else if(ge.split(".").length<=2)t=ge;else{const Ie=e.indexOf(".");r=e.substring(0,Ie).toLowerCase(),t=e.substring(Ie+1),l=r}"ns"in ee&&(l=ee.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:s,namespace:l}};class vP{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,X.Pz)(this.snapshot.exportVal())}}class EP{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,X.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bP{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new X.BH;return JL(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Zc("OnDisconnect.remove",this._path);const e=new X.BH;return pP(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Zc("OnDisconnect.set",this._path),Ld("OnDisconnect.set",e,this._path,!1);const t=new X.BH;return pP(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Zc("OnDisconnect.setWithPriority",this._path),Ld("OnDisconnect.setWithPriority",e,this._path,!1),KA("OnDisconnect.setWithPriority",t,!1);const r=new X.BH;return function eF(n,e,t,r,s){const l=gs(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(u,h)=>{"ok"===u&&uy(n.onDisconnect_,e,l),np(0,s,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Zc("OnDisconnect.update",this._path),oP("OnDisconnect.update",e,this._path,!1);const t=new X.BH;return function tF(n,e,t,r){if((0,X.xb)(t))return Fo("onDisconnect().update() called with empty data.  Don't do anything."),void np(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,l)=>{"ok"===s&&Bo(t,(u,h)=>{const m=gs(h);uy(n.onDisconnect_,as(e,u),m)}),np(0,r,s,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Nl{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return mr(this._path)?null:aA(this._path)}get ref(){return new Qc(this._repo,this._path)}get _queryIdentifier(){const e=Ix(this._queryParams),t=XS(e);return"{}"===t?"default":t}get _queryObject(){return Ix(this._queryParams)}isEqual(e){if(!((e=(0,X.m9)(e))instanceof Nl))return!1;const t=this._repo===e._repo,r=lA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Jk(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function _I(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function rp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Nd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Lh)throw new Error(r);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==kd)throw new Error(r);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===ji){if(null!=e&&!ow(e)||null!=t&&!ow(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,X.hu)(n.getIndex()instanceof fA||n.getIndex()===pA,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yI(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Qc extends Nl{constructor(e,t){super(e,t,new KD,!1)}get parent(){const e=cx(this._path);return null===e?null:new Qc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Kg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new li(e),r=qg(this.ref,e);return new Kg(this._node.getChild(t),r,ji)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,s)=>e(new Kg(s,qg(this.ref,r),ji)))}hasChild(e){const t=new li(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CP(n,e){return(n=(0,X.m9)(n))._checkNotDeleted("ref"),void 0!==e?qg(n._root,e):n._root}function DP(n,e){(n=(0,X.m9)(n))._checkNotDeleted("refFromURL");const t=eM(e,n._repo.repoInfo_.nodeAdmin);aP("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Od("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),CP(n,t.path.toString())}function qg(n,e){return null===gr((n=(0,X.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cw("child","path",t,!1)):cw("child","path",e,!1),new Qc(n._repo,as(n._path,e));var t}function tM(n,e){n=(0,X.m9)(n),Zc("set",n._path),Ld("set",e,n._path,!1);const t=new X.BH;return ZA(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function pF(n,e){oP("update",e,n._path,!1);const t=new X.BH;return function QL(n,e,t,r){Wg(n,"update",{path:e.toString(),value:t});let s=!0;const l=uw(n),u={};if(Bo(t,(h,m)=>{s=!1,u[h]=nP(as(e,h),gs(m),n.serverSyncTree_,l)}),s)Fo("update() called with empty data.  Don't do anything."),np(0,r,"ok",void 0);else{const h=pI(n),m=function bL(n,e,t,r){!function UN(n,e,t,r){(0,X.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=IA(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const s=Hi.fromObject(t);return fy(n,new dy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,u,h);fI(n.eventQueue_,m),n.server_.merge(e.toString(),t,(b,N)=>{const H="ok"===b;H||Ma("update at "+e+" failed: "+b);const ee=tp(n.serverSyncTree_,h,!H),ge=ee.length>0?py(n,e):e;Yc(n.eventQueue_,ge,ee),np(0,r,b,N)}),Bo(t,b=>{const N=XA(n,as(e,b));py(n,N)}),Yc(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class vI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new vP("value",this,new Kg(e.snapshotNode,new Qc(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EP(this,e,t):null}matches(e){return e instanceof vI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class EI{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EP(this,e,t):null}createEvent(e,t){(0,X.hu)(null!=e.childName,"Child events should have a childName.");const r=qg(new Qc(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new vP(e.type,this,new Kg(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof EI&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function dw(n,e,t,r,s){let l;if("object"==typeof r&&(l=void 0,s=r),"function"==typeof r&&(l=r),s&&s.onlyOnce){const m=t,b=(N,H)=>{YA(n._repo,n,h),m(N,H)};b.userCallback=t.userCallback,b.context=t.context,t=b}const u=new wP(t,l||void 0),h="value"===e?new vI(u):new EI(e,u);return function nF(n,e,t){let r;r=".info"===gr(e._path)?Qx(n.infoSyncTree_,e,t):Qx(n.serverSyncTree_,e,t),lP(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>YA(n._repo,n,h)}function nM(n,e,t,r){return dw(n,"value",e,t,r)}function IP(n,e,t,r){return dw(n,"child_added",e,t,r)}function TP(n,e,t,r){return dw(n,"child_changed",e,t,r)}function SP(n,e,t,r){return dw(n,"child_moved",e,t,r)}function AP(n,e,t,r){return dw(n,"child_removed",e,t,r)}function MP(n,e,t){let r=null;const s=t?new wP(t):null;"value"===e?r=new vI(s):e&&(r=new EI(e,s)),YA(n._repo,n,r)}class Vu{}class RP extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("endAt",this._value,e._path,!0);const t=yA(e._queryParams,this._value,this._key);if(yI(t),rp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Nl(e._repo,e._path,t,e._orderByCalled)}}class _F extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("endBefore",this._value,e._path,!1);const t=function TN(n,e,t){let r,s;return n.index_===Nd?("string"==typeof e&&(e=bx(e)),s=yA(n,e,t)):(r=null==t?Lh:bx(t),s=yA(n,e,r)),s.endBeforeSet_=!0,s}(e._queryParams,this._value,this._key);if(yI(t),rp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Nl(e._repo,e._path,t,e._orderByCalled)}}class xP extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("startAt",this._value,e._path,!0);const t=_A(e._queryParams,this._value,this._key);if(yI(t),rp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Nl(e._repo,e._path,t,e._orderByCalled)}}class EF extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("startAfter",this._value,e._path,!1);const t=function IN(n,e,t){let r;if(n.index_===Nd)"string"==typeof e&&(e=wx(e)),r=_A(n,e,t);else{let s;s=null==t?kd:wx(t),r=_A(n,e,s)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(yI(t),rp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Nl(e._repo,e._path,t,e._orderByCalled)}}class bF extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Nl(e._repo,e._path,function CN(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class DF extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Nl(e._repo,e._path,function DN(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class TF extends Vu{constructor(e){super(),this._path=e}_apply(e){_I(e,"orderByChild");const t=new li(this._path);if(mr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new fA(t),s=qD(e._queryParams,r);return rp(s),new Nl(e._repo,e._path,s,!0)}}class AF extends Vu{_apply(e){_I(e,"orderByKey");const t=qD(e._queryParams,Nd);return rp(t),new Nl(e._repo,e._path,t,!0)}}class RF extends Vu{_apply(e){_I(e,"orderByPriority");const t=qD(e._queryParams,ji);return rp(t),new Nl(e._repo,e._path,t,!0)}}class PF extends Vu{_apply(e){_I(e,"orderByValue");const t=qD(e._queryParams,pA);return rp(t),new Nl(e._repo,e._path,t,!0)}}class kF extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ld("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new RP(this._value,this._key)._apply(new xP(this._value,this._key)._apply(e))}}function ju(n,...e){let t=(0,X.m9)(n);for(const r of e)t=r._apply(t);return t}(function pL(n){(0,X.hu)(!iI,"__referenceConstructor has already been defined"),iI=n})(Qc),function vL(n){(0,X.hu)(!oI,"__referenceConstructor has already been defined"),oI=n}(Qc);const rM={};function OP(n,e,t,r,s){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Od("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fo("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,u=eM(l,s),h=u.repoInfo;typeof process<"u"&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,l=`http://${b}?ns=${h.namespace}`,u=eM(l,s),h=u.repoInfo):m=!u.repoInfo.secure;const N=s&&m?new z0(z0.OWNER):new Ak(n.name,n.options,e);aP("Invalid Firebase Database URL",u),mr(u.path)||Od("Database URL must point to the root of a Firebase Database (not including a child path).");const H=function UF(n,e,t,r){let s=rM[e.name];s||(s={},rM[e.name]=s);let l=s[n.toURLString()];return l&&Od("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new KL(n,false,t,r),s[n.toURLString()]=l,l}(h,n,N,new Sk(n.name,t));return new jF(H,n)}class jF{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function qL(n,e,t){if(n.stats_=iA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ZD(n.repoInfo_,(r,s,l,u)=>{hP(n,r,s,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fP(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new jg(n.repoInfo_,e,(r,s,l,u)=>{hP(n,r,s,l,u)},r=>{fP(n,r)},r=>{!function ZL(n,e){Bo(e,(t,r)=>{qA(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function xk(n,e){const t=n.toString();return rA[t]||(rA[t]=e()),rA[t]}(n.repoInfo_,()=>new PN(n.stats_,n.server_)),n.infoData_=new SN,n.infoSyncTree_=new qx({startListening:(r,s,l,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=nw(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),qA(n,"connected",!1),n.serverSyncTree_=new qx({startListening:(r,s,l,u)=>(n.server_.listen(r,l,s,(h,m)=>{const b=u(h,m);Yc(n.eventQueue_,r._path,b)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qc(this._repo,Qr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function BF(n,e){const t=rM[e];(!t||t[n.key]!==n)&&Od(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gP(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Od("Cannot call "+e+" on a deleted database.")}}function kP(){QR.IS_TRANSPORT_INITIALIZED&&Ma("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function HF(){kP(),Zf.forceDisallow()}function $F(){kP(),sy.forceDisallow(),Zf.forceAllow()}function KF(n,e){xR(n,e)}const ZF={".sv":"timestamp"};class XF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},jg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function qF(n){TR(Jr.SDK_VERSION),(0,Jr._registerComponent)(new hs.wA("database",(e,{instanceIdentifier:t})=>OP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(DR,"0.13.3",n),(0,Jr.registerVersion)(DR,"0.13.3","esm2017")}();const n1=new Ni.Yd("@firebase/database-compat"),NP=function(n){n1.warn("FIREBASE WARNING: "+n)};class o1{constructor(e){this._delegate=e}cancel(e){(0,X.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,X.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,X.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,X.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,X.Dv)("OnDisconnect.set",1,2,arguments.length),(0,X.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,X.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,X.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,t);return r&&s.then(()=>r(null),l=>r(l)),s}update(e,t){if((0,X.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let l=0;l<e.length;++l)s[""+l]=e[l];e=s,NP("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,X.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),s=>t(s)),r}}class a1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,X.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ip{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,X.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,X.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,X.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,X.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,X.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),cw("DataSnapshot.child","path",e,!1),new ip(this._database,this._delegate.child(e))}hasChild(e){return(0,X.Dv)("DataSnapshot.hasChild",1,1,arguments.length),cw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,X.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,X.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,X.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ip(this._database,t)))}hasChildren(){return(0,X.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,X.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,X.Dv)("DataSnapshot.ref",0,0,arguments.length),new dc(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class sa{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,s){var l;(0,X.Dv)("Query.on",2,4,arguments.length),(0,X.Wj)("Query.on","callback",t,!1);const u=sa.getCancelAndContextArgs_("Query.on",r,s),h=(b,N)=>{t.call(u.context,new ip(this.database,b),N)};h.userCallback=t,h.context=u.context;const m=null===(l=u.cancel)||void 0===l?void 0:l.bind(u.context);switch(e){case"value":return nM(this._delegate,h,m),t;case"child_added":return IP(this._delegate,h,m),t;case"child_removed":return AP(this._delegate,h,m),t;case"child_changed":return TP(this._delegate,h,m),t;case"child_moved":return SP(this._delegate,h,m),t;default:throw new Error((0,X.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,X.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,X.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,X.Wj)("Query.off","callback",t,!0),(0,X.lb)("Query.off","context",r,!0),t){const s=()=>{};s.userCallback=t,s.context=r,MP(this._delegate,e,s)}else MP(this._delegate,e)}get(){return function gF(n){return YL((n=(0,X.m9)(n))._repo,n).then(e=>new Kg(e,new Qc(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new ip(this.database,e))}once(e,t,r,s){(0,X.Dv)("Query.once",1,4,arguments.length),(0,X.Wj)("Query.once","callback",t,!0);const l=sa.getCancelAndContextArgs_("Query.once",r,s),u=new X.BH,h=(b,N)=>{const H=new ip(this.database,b);t&&t.call(l.context,H,N),u.resolve(H)};h.userCallback=t,h.context=l.context;const m=b=>{l.cancel&&l.cancel.call(l.context,b),u.reject(b)};switch(e){case"value":nM(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":IP(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":AP(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":TP(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":SP(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,X.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,X.Dv)("Query.limitToFirst",1,1,arguments.length),new sa(this.database,ju(this._delegate,function CF(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bF(n)}(e)))}limitToLast(e){return(0,X.Dv)("Query.limitToLast",1,1,arguments.length),new sa(this.database,ju(this._delegate,function IF(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new DF(n)}(e)))}orderByChild(e){return(0,X.Dv)("Query.orderByChild",1,1,arguments.length),new sa(this.database,ju(this._delegate,function SF(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cw("orderByChild","path",n,!1),new TF(n)}(e)))}orderByKey(){return(0,X.Dv)("Query.orderByKey",0,0,arguments.length),new sa(this.database,ju(this._delegate,function MF(){return new AF}()))}orderByPriority(){return(0,X.Dv)("Query.orderByPriority",0,0,arguments.length),new sa(this.database,ju(this._delegate,function xF(){return new RF}()))}orderByValue(){return(0,X.Dv)("Query.orderByValue",0,0,arguments.length),new sa(this.database,ju(this._delegate,function OF(){return new PF}()))}startAt(e=null,t){return(0,X.Dv)("Query.startAt",0,2,arguments.length),new sa(this.database,ju(this._delegate,function vF(n=null,e){return lw("startAt","key",e,!0),new xP(n,e)}(e,t)))}startAfter(e=null,t){return(0,X.Dv)("Query.startAfter",0,2,arguments.length),new sa(this.database,ju(this._delegate,function wF(n,e){return lw("startAfter","key",e,!0),new EF(n,e)}(e,t)))}endAt(e=null,t){return(0,X.Dv)("Query.endAt",0,2,arguments.length),new sa(this.database,ju(this._delegate,function mF(n,e){return lw("endAt","key",e,!0),new RP(n,e)}(e,t)))}endBefore(e=null,t){return(0,X.Dv)("Query.endBefore",0,2,arguments.length),new sa(this.database,ju(this._delegate,function yF(n,e){return lw("endBefore","key",e,!0),new _F(n,e)}(e,t)))}equalTo(e,t){return(0,X.Dv)("Query.equalTo",1,2,arguments.length),new sa(this.database,ju(this._delegate,function NF(n,e){return lw("equalTo","key",e,!0),new kF(n,e)}(e,t)))}toString(){return(0,X.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,X.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,X.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof sa))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const s={cancel:void 0,context:void 0};if(t&&r)s.cancel=t,(0,X.Wj)(e,"cancel",s.cancel,!0),s.context=r,(0,X.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,X.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new dc(this.database,new Qc(this._delegate._repo,this._delegate._path))}}class dc extends sa{constructor(e,t){super(e,new Nl(t._repo,t._path,new KD,!1)),this.database=e,this._delegate=t}getKey(){return(0,X.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,X.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new dc(this.database,qg(this._delegate,e))}getParent(){(0,X.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new dc(this.database,e):null}getRoot(){return(0,X.Dv)("Reference.root",0,0,arguments.length),new dc(this.database,this._delegate.root)}set(e,t){(0,X.Dv)("Reference.set",1,2,arguments.length),(0,X.Wj)("Reference.set","onComplete",t,!0);const r=tM(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,t){if((0,X.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let l=0;l<e.length;++l)s[""+l]=e[l];e=s,NP("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Zc("Reference.update",this._delegate._path),(0,X.Wj)("Reference.update","onComplete",t,!0);const r=pF(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,X.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,X.Wj)("Reference.setWithPriority","onComplete",r,!0);const s=function fF(n,e,t){if(Zc("setWithPriority",n._path),Ld("setWithPriority",e,n._path,!1),KA("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new X.BH;return ZA(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&s.then(()=>r(null),l=>r(l)),s}remove(e){(0,X.Dv)("Reference.remove",0,1,arguments.length),(0,X.Wj)("Reference.remove","onComplete",e,!0);const t=function dF(n){return Zc("remove",n._path),tM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,X.Dv)("Reference.transaction",1,3,arguments.length),(0,X.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,X.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,X.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const s=function JF(n,e,t){var r;if(n=(0,X.m9)(n),Zc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(r=t?.applyLocally)||void 0===r||r,l=new X.BH,h=nM(n,()=>{});return function iF(n,e,t,r,s,l){Wg(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:AR(),applyLocally:l,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=QA(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{aw("transaction failed: Data returned ",m,u.path),u.status=0;const b=uI(n.transactionQueueTree_,e),N=Gg(b)||[];let H;N.push(u),zA(b,N),"object"==typeof m&&null!==m&&(0,X.r3)(m,".priority")?(H=(0,X.DV)(m,".priority"),(0,X.hu)(ow(H),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):H=(lI(n.serverSyncTree_,e)||ur.EMPTY_NODE).getPriority().val();const ee=uw(n),ge=gs(m,H),Ie=jA(ge,h,ee);u.currentOutputSnapshotRaw=ge,u.currentOutputSnapshotResolved=Ie,u.currentWriteId=pI(n);const et=NA(n.serverSyncTree_,e,Ie,u.currentWriteId,u.applyLocally);Yc(n.eventQueue_,e,et),gI(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,b,N)=>{let H=null;m?l.reject(m):(H=new Kg(N,new Qc(n._repo,n._path),ji),l.resolve(new XF(b,H)))},h,s),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new a1(l.committed,new ip(this.database,l.snapshot)));return t&&s.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),s}setPriority(e,t){(0,X.Dv)("Reference.setPriority",1,2,arguments.length),(0,X.Wj)("Reference.setPriority","onComplete",t,!0);const r=function hF(n,e){n=(0,X.m9)(n),Zc("setPriority",n._path),KA("setPriority",e,!1);const t=new X.BH;return ZA(n._repo,as(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}push(e,t){(0,X.Dv)("Reference.push",0,2,arguments.length),(0,X.Wj)("Reference.push","onComplete",t,!0);const r=function uF(n,e){n=(0,X.m9)(n),Zc("push",n._path),Ld("push",e,n._path,!0);const t=dP(n._repo),r=vN(t),s=qg(n,r),l=qg(n,r);let u;return u=null!=e?tM(l,e).then(()=>l):Promise.resolve(l),s.then=u.then.bind(u),s.catch=u.then.bind(u,void 0),s}(this._delegate,e),s=r.then(u=>new dc(this.database,u));t&&s.then(()=>t(null),u=>t(u));const l=new dc(this.database,r);return l.then=s.then.bind(s),l.catch=s.catch.bind(s,void 0),l}onDisconnect(){return Zc("Reference.onDisconnect",this._delegate._path),new o1(new bP(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class hw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:HF,forceLongPolling:$F}}useEmulator(e,t,r={}){!function zF(n,e,t,r={}){(n=(0,X.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Od("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let l;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Od('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new z0(z0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,X.Sg)(r.mockUserToken,n.app.options.projectId);l=new z0(u)}!function FF(n,e,t,r){n.repoInfo_=new tA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(s,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,X.Dv)("database.ref",0,1,arguments.length),e instanceof dc){const t=DP(this._delegate,e.toString());return new dc(this,t)}{const t=CP(this._delegate,e);return new dc(this,t)}}refFromURL(e){(0,X.Dv)("database.refFromURL",1,1,arguments.length);const r=DP(this._delegate,e);return new dc(this,r)}goOffline(){return(0,X.Dv)("database.goOffline",0,0,arguments.length),function GF(n){(n=(0,X.m9)(n))._checkNotDeleted("goOffline"),gP(n._repo)}(this._delegate)}goOnline(){return(0,X.Dv)("database.goOnline",0,0,arguments.length),function WF(n){(n=(0,X.m9)(n))._checkNotDeleted("goOnline"),function rF(n){n.persistentConnection_&&n.persistentConnection_.resume(uP)}(n._repo)}(this._delegate)}}hw.ServerValue={TIMESTAMP:function YF(){return ZF}(),increment:n=>function QF(n){return{".sv":{increment:n}}}(n)};var c1=Object.freeze({__proto__:null,initStandalone:function l1({app:n,url:e,version:t,customAuthImpl:r,namespace:s,nodeAdmin:l=!1}){TR(t);const u=new hs.zt("auth-internal",new hs.H0("database-standalone"));return u.setComponent(new hs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new hw(OP(n,u,void 0,e,l),n),namespace:s}}});const u1=hw.ServerValue;function LP(n){return null==n}function FP(n){return"function"==typeof n.set}function BP(n,e){return FP(e)?e:n.ref(e)}function UP(n,e){if(function h1(n){return"string"==typeof n}(n))return e.stringCase();if(FP(n))return e.firebaseCase();if(function f1(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function fw(n,e,t="on",r=lp.z){return new co.y(s=>{let l=null;return l=n[t](e,(u,h)=>{r.schedule(()=>{s.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>s.complete())},u=>{r.schedule(()=>s.error(u))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,Ar.U)(s=>{const{snapshot:l,prevKey:u}=s;let h=null;return l.exists()&&(h=l.key),{type:e,payload:l,prevKey:u,key:h}}),(0,uk.B)())}function VP(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function m1(n,e){const{payload:t,prevKey:r,key:s}=e,l=VP(n,s),u=function g1(n,e){if(LP(e))return 0;{const t=VP(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const h=n[l-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===s?e:h);case"child_moved":if(l>-1){const h=n.splice(l,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function jP(n){return(LP(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function HP(n,e,t){return function p1(n,e,t){return fw(n,"value","once",t).pipe((0,di.w)(r=>{const s=[(0,Oi.of)(r)];return e.forEach(l=>s.push(fw(n,l,"on",t))),(0,yc.T)(...s).pipe((0,uu.R)(m1,[]))}),(0,$h.x)())}(n,e=jP(e),t)}function $P(n,e,t){const r=(e=jP(e)).map(s=>fw(n,s,"on",t));return(0,yc.T)(...r)}function zP(n,e){return function(r,s){return UP(r,{stringCase:()=>n.child(r)[e](s),firebaseCase:()=>r[e](s),snapshotCase:()=>r.ref[e](s)})}}function E1(n){return function(t){return t?UP(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function GP(n,e){return function(){return fw(n,"value","on",e)}}!function d1(n){n.INTERNAL.registerComponent(new hs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new hw(s,r)},"PUBLIC").setServiceProps({Reference:dc,Query:sa,Database:hw,DataSnapshot:ip,enableLogging:KF,INTERNAL:c1,ServerValue:u1}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}($d.Z);const C1=new E.OlP("angularfire2.realtimeDatabaseURL"),D1=new E.OlP("angularfire2.database.use-emulator");let I1=(()=>{class n{constructor(t,r,s,l,u,h,m,b,N,H,ee,ge,Ie,et,_t){this.schedulers=h;const nn=m,vn=(0,yi.on)(t,u,r);b&&Mc(vn,u,N,ee,ge,Ie,H,et),this.database=(0,yi.cc)(`${vn.name}.database.${s}`,"AngularFireDatabase",vn.name,()=>{const pn=u.runOutsideAngular(()=>vn.database(s||void 0));return nn&&pn.useEmulator(...nn),pn},[nn])}list(t,r){const s=this.schedulers.ngZone.runOutsideAngular(()=>BP(this.database,t));let l=s;return r&&(l=r(s)),function w1(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:zP(r,"update"),set:zP(r,"set"),push:s=>r.push(s),remove:E1(r),snapshotChanges:s=>HP(n,s,t).pipe(or.iC),stateChanges:s=>$P(n,s,t).pipe(or.iC),auditTrail:s=>function _1(n,e,t){return function v1(n,e,t){return function y1(n,e){return fw(n,"value","on",e).pipe((0,Ar.U)(t=>{let r;return t.payload.forEach(s=>(r=s.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function gk(...n){const e=(0,pk.jO)(n);return(0,Rc.e)((t,r)=>{const s=n.length,l=new Array(s);let u=n.map(()=>!1),h=!1;for(let m=0;m<s;m++)(0,dk.Xf)(n[m]).subscribe((0,cu.x)(r,b=>{l[m]=b,!h&&!u[m]&&(u[m]=!0,(h=u.every(hk.y))&&(u=null))},fk.Z));t.subscribe((0,cu.x)(r,m=>{if(h){const b=[m,...l];r.next(e?e(...b):b)}}))})}(e),(0,Ar.U)(([s,l])=>{const u=s.lastKeyToLoad,h=l.map(m=>m.key);return{actions:l,lastKeyToLoad:u,loadedKeys:h}}),function mk(n){return(0,Rc.e)((e,t)=>{let r=!1,s=0;e.subscribe((0,cu.x)(t,l=>(r||(r=!n(l,s++)))&&t.next(l)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Ar.U)(s=>s.actions))}(n,$P(n,e).pipe((0,uu.R)((s,l)=>[...s,l],[])),t)}(n,s,t).pipe(or.iC),valueChanges:(s,l)=>HP(n,s,t).pipe((0,Ar.U)(h=>h.map(m=>l&&l.idField?Object.assign(Object.assign({},m.payload.val()),{[l.idField]:m.key}):m.payload.val())),or.iC)}}(l,this)}object(t){return function b1(n,e){return{query:n,snapshotChanges:()=>GP(n,e.schedulers.outsideAngular)().pipe(or.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>GP(n,e.schedulers.outsideAngular)().pipe(or.iC,(0,Ar.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>BP(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(yi.Dh),E.LFG(yi.xv,8),E.LFG(C1,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(or.HU),E.LFG(D1,8),E.LFG(qa,8),E.LFG(Vd,8),E.LFG(jd,8),E.LFG(Yu,8),E.LFG(Hh,8),E.LFG(Qu,8),E.LFG(Cl,8),E.LFG(si,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),T1=(()=>{class n{constructor(){Zu.Z.registerVersion("angularfire",or.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[I1]}),n})();var S1=U(6457);let A1=(()=>{class n{constructor(t,r,s){this.aft=t,this.auth=r,this.router=s,this.auth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData))):localStorage.setItem("user","null")})}signIn(t,r){return this.auth.signInWithEmailAndPassword(t,r).then(s=>{}).catch(s=>{window.alert(s.message)})}setUserData(t){return this.aft.doc(`user/${t.uid}`).set({uid:t.uid,email:t.email,name:t.name,suurName:t.suurName,age:t.age,imgUrl:t.imgUrl,emailVerified:t.emailVerified},{merge:!0})}signUp(t,r){return this.auth.createUserWithEmailAndPassword(t,r).then(s=>{this.sendVerification(),this.setUserData(s.user)}).catch(s=>{window.alert(s.message)})}sendVerification(){return this.auth.currentUser.then(t=>t?.sendEmailVerification()).then(()=>{this.router.navigate(["verification"])})}forgotPass(t){return this.auth.sendPasswordResetEmail(t).then(()=>{window.alert("Email Was Sent")}).then(r=>{window.alert(r)})}authLogin(t){return this.auth.signInWithPopup(t).then(r=>{this.setUserData(r.user)}).catch(r=>{window.alert(r.message)})}googleAuth(t){return this.authLogin(new S1.Q).then(r=>{r&&this.setUserData(r.user)})}signOut(){return this.auth.signOut().then(()=>{localStorage.removeItem("user")})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(ey),E.LFG(qa),E.LFG(z.F0))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class M1{constructor(e,t="/assets/i18n/",r=".json"){this.http=e,this.prefix=t,this.suffix=r}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}let R1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n,bootstrap:[at]}),n.\u0275inj=E.cJS({providers:[A1],imports:[C.b2,jl,ka.m,$l.MoviesModule,Hl.JF,Te,yi.hO,Qg,OS,ck,T1,Se.aw.forRoot({loader:{provide:Se.Zw,useFactory:x1,deps:[Hl.eN]}})]}),n})();function x1(n){return new M1(n)}(0,E.G48)(),C.q6().bootstrapModule(R1).catch(n=>console.error(n))},5867:(Vt,We,U)=>{U.d(We,{C6:()=>C.getApps,Mq:()=>C.getApp});var C=U(3847);(0,C.registerVersion)("firebase","9.9.1","app")},1039:(Vt,We,U)=>{U.d(We,{Z:()=>Xe});var C=U(2090),E=U(4859),z=U(3847),J=U(1877);class be{constructor(st,yt){this._delegate=st,this.firebase=yt,(0,z._addComponent)(st,new E.wA("app-compat",()=>this,"PUBLIC")),this.container=st.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(st){this._delegate.automaticDataCollectionEnabled=st}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(st=>{this._delegate.checkDestroyed(),st()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(st,yt=z._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Ae=this._delegate.container.getProvider(st);return!Ae.isInitialized()&&"EXPLICIT"===(null===(Ye=Ae.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Ae.initialize(),Ae.getImmediate({identifier:yt})}_removeServiceInstance(st,yt=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(st).clearInstance(yt)}_addComponent(st){(0,z._addComponent)(this._delegate,st)}_addOrOverwriteComponent(st){(0,z._addOrOverwriteComponent)(this._delegate,st)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Pe(){const Ee=function Re(Ee){const st={},yt={__esModule:!0,initializeApp:function He(je,xe={}){const Ne=z.initializeApp(je,xe);if((0,C.r3)(st,Ne.name))return st[Ne.name];const Ue=new Ee(Ne,yt);return st[Ne.name]=Ue,Ue},app:Ae,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function Ve(je){const xe=je.name,Ne=xe.replace("-compat","");if(z._registerComponent(je)&&"PUBLIC"===je.type){const Ue=(ze=Ae())=>{if("function"!=typeof ze[Ne])throw Se.create("invalid-app-argument",{appName:xe});return ze[Ne]()};void 0!==je.serviceProps&&(0,C.ZB)(Ue,je.serviceProps),yt[Ne]=Ue,Ee.prototype[Ne]=function(...ze){return this._getService.bind(this,xe).apply(this,je.multipleInstances?ze:[])}}return"PUBLIC"===je.type?yt[Ne]:null},removeApp:function Ye(je){delete st[je]},useAsService:function Ke(je,xe){return"serverAuth"===xe?null:xe},modularAPIs:z}};function Ae(je){if(!(0,C.r3)(st,je=je||z._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:je});return st[je]}return yt.default=yt,Object.defineProperty(yt,"apps",{get:function Dt(){return Object.keys(st).map(je=>st[je])}}),Ae.App=Ee,yt}(be);return Ee.INTERNAL=Object.assign(Object.assign({},Ee.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function st(yt){(0,C.ZB)(Ee,yt)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Ee}(),re=new J.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ee=self.firebase.SDK_VERSION;Ee&&Ee.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=oe;!function tt(Ee){(0,z.registerVersion)("@firebase/app-compat","0.1.30",Ee)}(),Xe.registerVersion("firebase","9.9.1","app-compat")},5881:(Vt,We,U)=>{U.r(We);var C=U(5861),E=U(3942),z=U(6457),J=U(2090),Se=(U(9681),U(1877),U(4859));function Re(){return window}function re(){return(re=(0,C.Z)(function*(Ge,_e,ve){var ft;const{BuildInfo:Nt}=Re();(0,z.aq)(_e.sessionId,"AuthEvent did not contain a session ID");const un=yield Ee(_e.sessionId),bt={};return(0,z.ar)()?bt.ibi=Nt.packageName:(0,z.as)()?bt.apn=Nt.packageName:(0,z.at)(Ge,"operation-not-supported-in-this-environment"),Nt.displayName&&(bt.appDisplayName=Nt.displayName),bt.sessionId=un,(0,z.au)(Ge,ve,_e.type,void 0,null!==(ft=_e.eventId)&&void 0!==ft?ft:void 0,bt)})).apply(this,arguments)}function nt(){return(nt=(0,C.Z)(function*(Ge){const{BuildInfo:_e}=Re(),ve={};(0,z.ar)()?ve.iosBundleId=_e.packageName:(0,z.as)()?ve.androidPackageName=_e.packageName:(0,z.at)(Ge,"operation-not-supported-in-this-environment"),yield(0,z.av)(Ge,ve)})).apply(this,arguments)}function at(){return(at=(0,C.Z)(function*(Ge,_e,ve){const{cordova:ft}=Re();let Nt=()=>{};try{yield new Promise((un,bt)=>{let Kt=null;function ke(){var Le;un();const wt=null===(Le=ft.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof wt&&wt(),"function"==typeof ve?.close&&ve.close()}function ye(){Kt||(Kt=window.setTimeout(()=>{bt((0,z.aw)(Ge,"redirect-cancelled-by-user"))},2e3))}function he(){"visible"===document?.visibilityState&&ye()}_e.addPassiveListener(ke),document.addEventListener("resume",ye,!1),(0,z.as)()&&document.addEventListener("visibilitychange",he,!1),Nt=()=>{_e.removePassiveListener(ke),document.removeEventListener("resume",ye,!1),document.removeEventListener("visibilitychange",he,!1),Kt&&window.clearTimeout(Kt)}})}finally{Nt()}})).apply(this,arguments)}function Ee(Ge){return st.apply(this,arguments)}function st(){return(st=(0,C.Z)(function*(Ge){const _e=yt(Ge),ve=yield crypto.subtle.digest("SHA-256",_e);return Array.from(new Uint8Array(ve)).map(Nt=>Nt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yt(Ge){if((0,z.aq)(/[0-9a-zA-Z]+/.test(Ge),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Ge);const _e=new ArrayBuffer(Ge.length),ve=new Uint8Array(_e);for(let ft=0;ft<Ge.length;ft++)ve[ft]=Ge.charCodeAt(ft);return ve}class Ae extends z.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(_e=>{this.resolveInialized=_e})}addPassiveListener(_e){this.passiveListeners.add(_e)}removePassiveListener(_e){this.passiveListeners.delete(_e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(_e){return this.resolveInialized(),this.passiveListeners.forEach(ve=>ve(_e)),super.onEvent(_e)}initialized(){var _e=this;return(0,C.Z)(function*(){yield _e.initPromise})()}}function Ve(Ge){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,C.Z)(function*(Ge){const _e=yield Ne()._get(Ue(Ge));return _e&&(yield Ne()._remove(Ue(Ge))),_e})).apply(this,arguments)}function xe(){const Ge=[],_e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ve=0;ve<20;ve++){const ft=Math.floor(Math.random()*_e.length);Ge.push(_e.charAt(ft))}return Ge.join("")}function Ne(){return(0,z.ay)(z.b)}function Ue(Ge){return(0,z.az)("authEvent",Ge.config.apiKey,Ge.name)}function It(Ge){if(!Ge?.includes("?"))return{};const[_e,...ve]=Ge.split("?");return(0,J.zd)(ve.join("?"))}function Pt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,z.aw)("no-auth-event")}}function Lt(){var Ge;return(null===(Ge=self?.location)||void 0===Ge?void 0:Ge.protocol)||null}function gt(Ge=(0,J.z$)()){return!("file:"!==Lt()&&"ionic:"!==Lt()&&"capacitor:"!==Lt()||!Ge.toLowerCase().match(/iphone|ipad|ipod|android/))}function ir(){try{const Ge=self.localStorage,_e=z.aI();if(Ge)return Ge.setItem(_e,"1"),Ge.removeItem(_e),!function Gn(Ge=(0,J.z$)()){return function Gt(){return(0,J.w1)()&&11===document?.documentMode}()||function Qt(Ge=(0,J.z$)()){return/Edge\/\d+/.test(Ge)}(Ge)}()||(0,J.hl)()}catch{return sr()&&(0,J.hl)()}return!1}function sr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $n(){return(function le(){return"http:"===Lt()||"https:"===Lt()}()||(0,J.ru)()||gt())&&!function Bt(){return(0,J.b$)()||(0,J.UG)()}()&&ir()&&!sr()}function Br(){return gt()&&typeof document<"u"}function xn(){return(xn=(0,C.Z)(function*(){return!!Br()&&new Promise(Ge=>{const _e=setTimeout(()=>{Ge(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(_e),Ge(!0)})})})).apply(this,arguments)}const Wn={LOCAL:"local",NONE:"none",SESSION:"session"},Tr=z.ax,fr="persistence";function Kn(Ge){return dt.apply(this,arguments)}function dt(){return(dt=(0,C.Z)(function*(Ge){yield Ge._initializationPromise;const _e=de(),ve=z.az(fr,Ge.config.apiKey,Ge.name);_e&&_e.setItem(ve,Ge._getPersistence())})).apply(this,arguments)}function de(){var Ge;try{return(null===(Ge=function Ir(){return typeof window<"u"?window:null}())||void 0===Ge?void 0:Ge.sessionStorage)||null}catch{return null}}const qe=z.ax;class mt{constructor(){this.browserResolver=z.ay(z.k),this.cordovaResolver=z.ay(class Dn{constructor(){this._redirectPersistence=z.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=z.aB,this._overrideRedirectResult=z.aC}_initialize(_e){var ve=this;return(0,C.Z)(function*(){const ft=_e._key();let Nt=ve.eventManagers.get(ft);return Nt||(Nt=new Ae(_e),ve.eventManagers.set(ft,Nt),ve.attachCallbackListeners(_e,Nt)),Nt})()}_openPopup(_e){(0,z.at)(_e,"operation-not-supported-in-this-environment")}_openRedirect(_e,ve,ft,Nt){var un=this;return(0,C.Z)(function*(){!function Fe(Ge){var _e,ve,ft,Nt,un,bt,Kt,ke,ye,he;const Le=Re();(0,z.ax)("function"==typeof(null===(_e=Le?.universalLinks)||void 0===_e?void 0:_e.subscribe),Ge,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,z.ax)(typeof(null===(ve=Le?.BuildInfo)||void 0===ve?void 0:ve.packageName)<"u",Ge,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,z.ax)("function"==typeof(null===(un=null===(Nt=null===(ft=Le?.cordova)||void 0===ft?void 0:ft.plugins)||void 0===Nt?void 0:Nt.browsertab)||void 0===un?void 0:un.openUrl),Ge,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.ax)("function"==typeof(null===(ke=null===(Kt=null===(bt=Le?.cordova)||void 0===bt?void 0:bt.plugins)||void 0===Kt?void 0:Kt.browsertab)||void 0===ke?void 0:ke.isAvailable),Ge,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,z.ax)("function"==typeof(null===(he=null===(ye=Le?.cordova)||void 0===ye?void 0:ye.InAppBrowser)||void 0===he?void 0:he.open),Ge,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(_e);const bt=yield un._initialize(_e);yield bt.initialized(),bt.resetRedirect(),(0,z.aD)(),yield un._originValidation(_e);const Kt=function He(Ge,_e,ve=null){return{type:_e,eventId:ve,urlResponse:null,sessionId:xe(),postBody:null,tenantId:Ge.tenantId,error:(0,z.aw)(Ge,"no-auth-event")}}(_e,ft,Nt);yield function Dt(Ge,_e){return Ne()._set(Ue(Ge),_e)}(_e,Kt);const ke=yield function oe(Ge,_e,ve){return re.apply(this,arguments)}(_e,Kt,ve),ye=yield function tt(Ge){const{cordova:_e}=Re();return new Promise(ve=>{_e.plugins.browsertab.isAvailable(ft=>{let Nt=null;ft?_e.plugins.browsertab.openUrl(Ge):Nt=_e.InAppBrowser.open(Ge,(0,z.ap)()?"_blank":"_system","location=yes"),ve(Nt)})})}(ke);return function Xe(Ge,_e,ve){return at.apply(this,arguments)}(_e,bt,ye)})()}_isIframeWebStorageSupported(_e,ve){throw new Error("Method not implemented.")}_originValidation(_e){const ve=_e._key();return this.originValidationPromises[ve]||(this.originValidationPromises[ve]=function me(Ge){return nt.apply(this,arguments)}(_e)),this.originValidationPromises[ve]}attachCallbackListeners(_e,ve){const{universalLinks:ft,handleOpenURL:Nt,BuildInfo:un}=Re(),bt=setTimeout((0,C.Z)(function*(){yield Ve(_e),ve.onEvent(Pt())}),500),Kt=function(){var he=(0,C.Z)(function*(Le){clearTimeout(bt);const wt=yield Ve(_e);let qt=null;wt&&Le?.url&&(qt=function je(Ge,_e){var ve,ft;const Nt=function Tt(Ge){const _e=It(Ge),ve=_e.link?decodeURIComponent(_e.link):void 0,ft=It(ve).link,Nt=_e.deep_link_id?decodeURIComponent(_e.deep_link_id):void 0;return It(Nt).link||Nt||ft||ve||Ge}(_e);if(Nt.includes("/__/auth/callback")){const un=It(Nt),bt=un.firebaseError?function ze(Ge){try{return JSON.parse(Ge)}catch{return null}}(decodeURIComponent(un.firebaseError)):null,Kt=null===(ft=null===(ve=bt?.code)||void 0===ve?void 0:ve.split("auth/"))||void 0===ft?void 0:ft[1],ke=Kt?(0,z.aw)(Kt):null;return ke?{type:Ge.type,eventId:Ge.eventId,tenantId:Ge.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:Ge.type,eventId:Ge.eventId,tenantId:Ge.tenantId,sessionId:Ge.sessionId,urlResponse:Nt,postBody:null}}return null}(wt,Le.url)),ve.onEvent(qt||Pt())});return function(wt){return he.apply(this,arguments)}}();typeof ft<"u"&&"function"==typeof ft.subscribe&&ft.subscribe(null,Kt);const ke=Nt,ye=`${un.packageName.toLowerCase()}://`;Re().handleOpenURL=function(){var he=(0,C.Z)(function*(Le){if(Le.toLowerCase().startsWith(ye)&&Kt({url:Le}),"function"==typeof ke)try{ke(Le)}catch(wt){console.error(wt)}});return function(Le){return he.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=z.a,this._completeRedirectFn=z.aB,this._overrideRedirectResult=z.aC}_initialize(_e){var ve=this;return(0,C.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._initialize(_e)})()}_openPopup(_e,ve,ft,Nt){var un=this;return(0,C.Z)(function*(){return yield un.selectUnderlyingResolver(),un.assertedUnderlyingResolver._openPopup(_e,ve,ft,Nt)})()}_openRedirect(_e,ve,ft,Nt){var un=this;return(0,C.Z)(function*(){return yield un.selectUnderlyingResolver(),un.assertedUnderlyingResolver._openRedirect(_e,ve,ft,Nt)})()}_isIframeWebStorageSupported(_e,ve){this.assertedUnderlyingResolver._isIframeWebStorageSupported(_e,ve)}_originValidation(_e){return this.assertedUnderlyingResolver._originValidation(_e)}get _shouldInitProactively(){return Br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var _e=this;return(0,C.Z)(function*(){if(_e.underlyingResolver)return;const ve=yield function jt(){return xn.apply(this,arguments)}();_e.underlyingResolver=ve?_e.cordovaResolver:_e.browserResolver})()}}function Xt(Ge){return Ge.unwrap()}function Wt(Ge){return jn(Ge)}function jn(Ge){const{_tokenResponse:_e}=Ge instanceof J.ZR?Ge.customData:Ge;if(!_e)return null;if(!(Ge instanceof J.ZR)&&"temporaryProof"in _e&&"phoneNumber"in _e)return z.P.credentialFromResult(Ge);const ve=_e.providerId;if(!ve||ve===z.o.PASSWORD)return null;let ft;switch(ve){case z.o.GOOGLE:ft=z.Q;break;case z.o.FACEBOOK:ft=z.N;break;case z.o.GITHUB:ft=z.T;break;case z.o.TWITTER:ft=z.W;break;default:const{oauthIdToken:Nt,oauthAccessToken:un,oauthTokenSecret:bt,pendingToken:Kt,nonce:ke}=_e;return un||bt||Nt||Kt?Kt?ve.startsWith("saml.")?z.aL._create(ve,Kt):z.J._fromParams({providerId:ve,signInMethod:ve,pendingToken:Kt,idToken:Nt,accessToken:un}):new z.U(ve).credential({idToken:Nt,accessToken:un,rawNonce:ke}):null}return Ge instanceof J.ZR?ft.credentialFromError(Ge):ft.credentialFromResult(Ge)}function cn(Ge,_e){return _e.catch(ve=>{throw ve instanceof J.ZR&&function gn(Ge,_e){var ve,ft;const Nt=null===(ve=_e.customData)||void 0===ve?void 0:ve._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ft=_e)||void 0===ft?void 0:ft.code))_e.resolver=new De(Ge,z.an(Ge,_e));else if(Nt){const un=jn(_e),bt=_e;un&&(bt.credential=un,bt.tenantId=Nt.tenantId||void 0,bt.email=Nt.email||void 0,bt.phoneNumber=Nt.phoneNumber||void 0)}}(Ge,ve),ve}).then(ve=>{const Nt=ve.user;return{operationType:ve.operationType,credential:Wt(ve),additionalUserInfo:z.al(ve),user:pe.getOrCreate(Nt)}})}function _r(Ge,_e){return mn.apply(this,arguments)}function mn(){return(mn=(0,C.Z)(function*(Ge,_e){const ve=yield _e;return{verificationId:ve.verificationId,confirm:ft=>cn(Ge,ve.confirm(ft))}})).apply(this,arguments)}class De{constructor(_e,ve){this.resolver=ve,this.auth=function kt(Ge){return Ge.wrapped()}(_e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(_e){return cn(Xt(this.auth),this.resolver.resolveSignIn(_e))}}class pe{constructor(_e){this._delegate=_e,this.multiFactor=z.ao(_e)}static getOrCreate(_e){return pe.USER_MAP.has(_e)||pe.USER_MAP.set(_e,new pe(_e)),pe.USER_MAP.get(_e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(_e){return this._delegate.getIdTokenResult(_e)}getIdToken(_e){return this._delegate.getIdToken(_e)}linkAndRetrieveDataWithCredential(_e){return this.linkWithCredential(_e)}linkWithCredential(_e){var ve=this;return(0,C.Z)(function*(){return cn(ve.auth,z.Z(ve._delegate,_e))})()}linkWithPhoneNumber(_e,ve){var ft=this;return(0,C.Z)(function*(){return _r(ft.auth,z.l(ft._delegate,_e,ve))})()}linkWithPopup(_e){var ve=this;return(0,C.Z)(function*(){return cn(ve.auth,z.d(ve._delegate,_e,mt))})()}linkWithRedirect(_e){var ve=this;return(0,C.Z)(function*(){return yield Kn(z.aE(ve.auth)),z.g(ve._delegate,_e,mt)})()}reauthenticateAndRetrieveDataWithCredential(_e){return this.reauthenticateWithCredential(_e)}reauthenticateWithCredential(_e){var ve=this;return(0,C.Z)(function*(){return cn(ve.auth,z._(ve._delegate,_e))})()}reauthenticateWithPhoneNumber(_e,ve){return _r(this.auth,z.r(this._delegate,_e,ve))}reauthenticateWithPopup(_e){return cn(this.auth,z.e(this._delegate,_e,mt))}reauthenticateWithRedirect(_e){var ve=this;return(0,C.Z)(function*(){return yield Kn(z.aE(ve.auth)),z.h(ve._delegate,_e,mt)})()}sendEmailVerification(_e){return z.ab(this._delegate,_e)}unlink(_e){var ve=this;return(0,C.Z)(function*(){return yield z.ak(ve._delegate,_e),ve})()}updateEmail(_e){return z.ag(this._delegate,_e)}updatePassword(_e){return z.ah(this._delegate,_e)}updatePhoneNumber(_e){return z.u(this._delegate,_e)}updateProfile(_e){return z.af(this._delegate,_e)}verifyBeforeUpdateEmail(_e,ve){return z.ac(this._delegate,_e,ve)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pe.USER_MAP=new WeakMap;const ne=z.ax;let te=(()=>{class Ge{constructor(ve,ft){if(this.app=ve,ft.isInitialized())return this._delegate=ft.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Nt}=ve.options;ne(Nt,"invalid-api-key",{appName:ve.name}),ne(Nt,"invalid-api-key",{appName:ve.name});const un=typeof window<"u"?mt:void 0;this._delegate=ft.initialize({options:{persistence:Qe(Nt,ve.name),popupRedirectResolver:un}}),this._delegate._updateErrorMap(z.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ve){this._delegate.languageCode=ve}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ve){this._delegate.tenantId=ve}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ve,ft){z.G(this._delegate,ve,ft)}applyActionCode(ve){return z.a2(this._delegate,ve)}checkActionCode(ve){return z.a3(this._delegate,ve)}confirmPasswordReset(ve,ft){return z.a1(this._delegate,ve,ft)}createUserWithEmailAndPassword(ve,ft){var Nt=this;return(0,C.Z)(function*(){return cn(Nt._delegate,z.a5(Nt._delegate,ve,ft))})()}fetchProvidersForEmail(ve){return this.fetchSignInMethodsForEmail(ve)}fetchSignInMethodsForEmail(ve){return z.aa(this._delegate,ve)}isSignInWithEmailLink(ve){return z.a8(this._delegate,ve)}getRedirectResult(){var ve=this;return(0,C.Z)(function*(){ne($n(),ve._delegate,"operation-not-supported-in-this-environment");const ft=yield z.j(ve._delegate,mt);return ft?cn(ve._delegate,Promise.resolve(ft)):{credential:null,user:null}})()}addFrameworkForLogging(ve){!function An(Ge,_e){(0,z.aE)(Ge)._logFramework(_e)}(this._delegate,ve)}onAuthStateChanged(ve,ft,Nt){const{next:un,error:bt,complete:Kt}=ae(ve,ft,Nt);return this._delegate.onAuthStateChanged(un,bt,Kt)}onIdTokenChanged(ve,ft,Nt){const{next:un,error:bt,complete:Kt}=ae(ve,ft,Nt);return this._delegate.onIdTokenChanged(un,bt,Kt)}sendSignInLinkToEmail(ve,ft){return z.a7(this._delegate,ve,ft)}sendPasswordResetEmail(ve,ft){return z.a0(this._delegate,ve,ft||void 0)}setPersistence(ve){var ft=this;return(0,C.Z)(function*(){let Nt;switch(function Mr(Ge,_e){Tr(Object.values(Wn).includes(_e),Ge,"invalid-persistence-type"),(0,J.b$)()?Tr(_e!==Wn.SESSION,Ge,"unsupported-persistence-type"):(0,J.UG)()?Tr(_e===Wn.NONE,Ge,"unsupported-persistence-type"):sr()?Tr(_e===Wn.NONE||_e===Wn.LOCAL&&(0,J.hl)(),Ge,"unsupported-persistence-type"):Tr(_e===Wn.NONE||ir(),Ge,"unsupported-persistence-type")}(ft._delegate,ve),ve){case Wn.SESSION:Nt=z.a;break;case Wn.LOCAL:Nt=(yield z.ay(z.i)._isAvailable())?z.i:z.b;break;case Wn.NONE:Nt=z.L;break;default:return z.at("argument-error",{appName:ft._delegate.name})}return ft._delegate.setPersistence(Nt)})()}signInAndRetrieveDataWithCredential(ve){return this.signInWithCredential(ve)}signInAnonymously(){return cn(this._delegate,z.X(this._delegate))}signInWithCredential(ve){return cn(this._delegate,z.Y(this._delegate,ve))}signInWithCustomToken(ve){return cn(this._delegate,z.$(this._delegate,ve))}signInWithEmailAndPassword(ve,ft){return cn(this._delegate,z.a6(this._delegate,ve,ft))}signInWithEmailLink(ve,ft){return cn(this._delegate,z.a9(this._delegate,ve,ft))}signInWithPhoneNumber(ve,ft){return _r(this._delegate,z.s(this._delegate,ve,ft))}signInWithPopup(ve){var ft=this;return(0,C.Z)(function*(){return ne($n(),ft._delegate,"operation-not-supported-in-this-environment"),cn(ft._delegate,z.c(ft._delegate,ve,mt))})()}signInWithRedirect(ve){var ft=this;return(0,C.Z)(function*(){return ne($n(),ft._delegate,"operation-not-supported-in-this-environment"),yield Kn(ft._delegate),z.f(ft._delegate,ve,mt)})()}updateCurrentUser(ve){return this._delegate.updateCurrentUser(ve)}verifyPasswordResetCode(ve){return z.a4(this._delegate,ve)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ge.Persistence=Wn,Ge})();function ae(Ge,_e,ve){let ft=Ge;"function"!=typeof Ge&&({next:ft,error:_e,complete:ve}=Ge);const Nt=ft;return{next:bt=>Nt(bt&&pe.getOrCreate(bt)),error:_e,complete:ve}}function Qe(Ge,_e){const ve=function we(Ge,_e){const ve=de();if(!ve)return[];const ft=z.az(fr,Ge,_e);switch(ve.getItem(ft)){case Wn.NONE:return[z.L];case Wn.LOCAL:return[z.i,z.a];case Wn.SESSION:return[z.a];default:return[]}}(Ge,_e);if(typeof self<"u"&&!ve.includes(z.i)&&ve.push(z.i),typeof window<"u")for(const ft of[z.b,z.a])ve.includes(ft)||ve.push(ft);return ve.includes(z.L)||ve.push(z.L),ve}class Et{constructor(){this.providerId="phone",this._delegate=new z.P(Xt(E.Z.auth()))}static credential(_e,ve){return z.P.credential(_e,ve)}verifyPhoneNumber(_e,ve){return this._delegate.verifyPhoneNumber(_e,ve)}unwrap(){return this._delegate}}Et.PHONE_SIGN_IN_METHOD=z.P.PHONE_SIGN_IN_METHOD,Et.PROVIDER_ID=z.P.PROVIDER_ID;const $t=z.ax;class Mn{constructor(_e,ve,ft=E.Z.app()){var Nt;$t(null===(Nt=ft.options)||void 0===Nt?void 0:Nt.apiKey,"invalid-api-key",{appName:ft.name}),this._delegate=new z.R(_e,ve,ft.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ur(Ge){Ge.INTERNAL.registerComponent(new Se.wA("auth-compat",_e=>{const ve=_e.getProvider("app-compat").getImmediate(),ft=_e.getProvider("auth");return new te(ve,ft)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:z.A.EMAIL_SIGNIN,PASSWORD_RESET:z.A.PASSWORD_RESET,RECOVER_EMAIL:z.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:z.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:z.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:z.A.VERIFY_EMAIL}},EmailAuthProvider:z.M,FacebookAuthProvider:z.N,GithubAuthProvider:z.T,GoogleAuthProvider:z.Q,OAuthProvider:z.U,SAMLAuthProvider:z.V,PhoneAuthProvider:Et,PhoneMultiFactorGenerator:z.m,RecaptchaVerifier:Mn,TwitterAuthProvider:z.W,Auth:te,AuthCredential:z.H,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ge.registerVersion("@firebase/auth-compat","0.2.18")}(E.Z)},1135:(Vt,We,U)=>{U.d(We,{X:()=>E});var C=U(7579);class E extends C.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const be=super._subscribe(J);return!be.closed&&J.next(this._value),be}getValue(){const{hasError:J,thrownError:be,_value:Te}=this;if(J)throw be;return this._throwIfClosed(),Te}next(J){super.next(this._value=J)}}},9751:(Vt,We,U)=>{U.d(We,{y:()=>Re});var C=U(930),E=U(727),z=U(8822),J=U(9635),be=U(2416),Te=U(576),Se=U(2806);let Re=(()=>{class me{constructor(tt){tt&&(this._subscribe=tt)}lift(tt){const Xe=new me;return Xe.source=this,Xe.operator=tt,Xe}subscribe(tt,Xe,at){const Fe=function re(me){return me&&me instanceof C.Lv||function oe(me){return me&&(0,Te.m)(me.next)&&(0,Te.m)(me.error)&&(0,Te.m)(me.complete)}(me)&&(0,E.Nn)(me)}(tt)?tt:new C.Hp(tt,Xe,at);return(0,Se.x)(()=>{const{operator:Ee,source:st}=this;Fe.add(Ee?Ee.call(Fe,st):st?this._subscribe(Fe):this._trySubscribe(Fe))}),Fe}_trySubscribe(tt){try{return this._subscribe(tt)}catch(Xe){tt.error(Xe)}}forEach(tt,Xe){return new(Xe=Pe(Xe))((at,Fe)=>{const Ee=new C.Hp({next:st=>{try{tt(st)}catch(yt){Fe(yt),Ee.unsubscribe()}},error:Fe,complete:at});this.subscribe(Ee)})}_subscribe(tt){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(tt)}[z.L](){return this}pipe(...tt){return(0,J.U)(tt)(this)}toPromise(tt){return new(tt=Pe(tt))((Xe,at)=>{let Fe;this.subscribe(Ee=>Fe=Ee,Ee=>at(Ee),()=>Xe(Fe))})}}return me.create=nt=>new me(nt),me})();function Pe(me){var nt;return null!==(nt=me??be.v.Promise)&&void 0!==nt?nt:Promise}},7579:(Vt,We,U)=>{U.d(We,{x:()=>Se});var C=U(9751),E=U(727);const J=(0,U(3888).d)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var be=U(8737),Te=U(2806);let Se=(()=>{class Pe extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const me=new Re(this,this);return me.operator=re,me}_throwIfClosed(){if(this.closed)throw new J}next(re){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(re)}})}error(re){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:me}=this;for(;me.length;)me.shift().error(re)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:me,isStopped:nt,observers:tt}=this;return me||nt?E.Lc:(this.currentObservers=null,tt.push(re),new E.w0(()=>{this.currentObservers=null,(0,be.P)(tt,re)}))}_checkFinalizedStatuses(re){const{hasError:me,thrownError:nt,isStopped:tt}=this;me?re.error(nt):tt&&re.complete()}asObservable(){const re=new C.y;return re.source=this,re}}return Pe.create=(oe,re)=>new Re(oe,re),Pe})();class Re extends Se{constructor(oe,re){super(),this.destination=oe,this.source=re}next(oe){var re,me;null===(me=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===me||me.call(re,oe)}error(oe){var re,me;null===(me=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===me||me.call(re,oe)}complete(){var oe,re;null===(re=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===re||re.call(oe)}_subscribe(oe){var re,me;return null!==(me=null===(re=this.source)||void 0===re?void 0:re.subscribe(oe))&&void 0!==me?me:E.Lc}}},930:(Vt,We,U)=>{U.d(We,{Hp:()=>at,Lv:()=>me});var C=U(576),E=U(727),z=U(2416),J=U(7849),be=U(5032);const Te=Pe("C",void 0,void 0);function Pe(Ye,Ae,He){return{kind:Ye,value:Ae,error:He}}var oe=U(3410),re=U(2806);class me extends E.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,E.Nn)(Ae)&&Ae.add(this)):this.destination=yt}static create(Ae,He,Dt){return new at(Ae,He,Dt)}next(Ae){this.isStopped?st(function Re(Ye){return Pe("N",Ye,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?st(function Se(Ye){return Pe("E",void 0,Ye)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?st(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function tt(Ye,Ae){return nt.call(Ye,Ae)}class Xe{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:He}=this;if(He.next)try{He.next(Ae)}catch(Dt){Fe(Dt)}}error(Ae){const{partialObserver:He}=this;if(He.error)try{He.error(Ae)}catch(Dt){Fe(Dt)}else Fe(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(He){Fe(He)}}}class at extends me{constructor(Ae,He,Dt){let Ve;if(super(),(0,C.m)(Ae)||!Ae)Ve={next:Ae??void 0,error:He??void 0,complete:Dt??void 0};else{let Ke;this&&z.v.useDeprecatedNextContext?(Ke=Object.create(Ae),Ke.unsubscribe=()=>this.unsubscribe(),Ve={next:Ae.next&&tt(Ae.next,Ke),error:Ae.error&&tt(Ae.error,Ke),complete:Ae.complete&&tt(Ae.complete,Ke)}):Ve=Ae}this.destination=new Xe(Ve)}}function Fe(Ye){z.v.useDeprecatedSynchronousErrorHandling?(0,re.O)(Ye):(0,J.h)(Ye)}function st(Ye,Ae){const{onStoppedNotification:He}=z.v;He&&oe.z.setTimeout(()=>He(Ye,Ae))}const yt={closed:!0,next:be.Z,error:function Ee(Ye){throw Ye},complete:be.Z}},727:(Vt,We,U)=>{U.d(We,{Lc:()=>Te,w0:()=>be,Nn:()=>Se});var C=U(576);const z=(0,U(3888).d)(Pe=>function(re){Pe(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((me,nt)=>`${nt+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var J=U(8737);class be{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const tt of re)tt.remove(this);else re.remove(this);const{initialTeardown:me}=this;if((0,C.m)(me))try{me()}catch(tt){oe=tt instanceof z?tt.errors:[tt]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const tt of nt)try{Re(tt)}catch(Xe){oe=oe??[],Xe instanceof z?oe=[...oe,...Xe.errors]:oe.push(Xe)}}if(oe)throw new z(oe)}}add(oe){var re;if(oe&&oe!==this)if(this.closed)Re(oe);else{if(oe instanceof be){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(oe)}}_hasParent(oe){const{_parentage:re}=this;return re===oe||Array.isArray(re)&&re.includes(oe)}_addParent(oe){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(oe),re):re?[re,oe]:oe}_removeParent(oe){const{_parentage:re}=this;re===oe?this._parentage=null:Array.isArray(re)&&(0,J.P)(re,oe)}remove(oe){const{_finalizers:re}=this;re&&(0,J.P)(re,oe),oe instanceof be&&oe._removeParent(this)}}be.EMPTY=(()=>{const Pe=new be;return Pe.closed=!0,Pe})();const Te=be.EMPTY;function Se(Pe){return Pe instanceof be||Pe&&"closed"in Pe&&(0,C.m)(Pe.remove)&&(0,C.m)(Pe.add)&&(0,C.m)(Pe.unsubscribe)}function Re(Pe){(0,C.m)(Pe)?Pe():Pe.unsubscribe()}},2416:(Vt,We,U)=>{U.d(We,{v:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Vt,We,U)=>{U.d(We,{a:()=>oe});var C=U(9751),E=U(4742),z=U(8996),J=U(4671),be=U(3268),Te=U(3269),Se=U(1810),Re=U(5403),Pe=U(9672);function oe(...nt){const tt=(0,Te.yG)(nt),Xe=(0,Te.jO)(nt),{args:at,keys:Fe}=(0,E.D)(nt);if(0===at.length)return(0,z.D)([],tt);const Ee=new C.y(function re(nt,tt,Xe=J.y){return at=>{me(tt,()=>{const{length:Fe}=nt,Ee=new Array(Fe);let st=Fe,yt=Fe;for(let Ye=0;Ye<Fe;Ye++)me(tt,()=>{const Ae=(0,z.D)(nt[Ye],tt);let He=!1;Ae.subscribe((0,Re.x)(at,Dt=>{Ee[Ye]=Dt,He||(He=!0,yt--),yt||at.next(Xe(Ee.slice()))},()=>{--st||at.complete()}))},at)},at)}}(at,tt,Fe?st=>(0,Se.n)(Fe,st):J.y));return Xe?Ee.pipe((0,be.Z)(Xe)):Ee}function me(nt,tt,Xe){nt?(0,Pe.f)(Xe,nt,tt):tt()}},7272:(Vt,We,U)=>{U.d(We,{z:()=>be});var C=U(8189),z=U(3269),J=U(8996);function be(...Te){return function E(){return(0,C.J)(1)}()((0,J.D)(Te,(0,z.yG)(Te)))}},9770:(Vt,We,U)=>{U.d(We,{P:()=>z});var C=U(9751),E=U(8421);function z(J){return new C.y(be=>{(0,E.Xf)(J()).subscribe(be)})}},515:(Vt,We,U)=>{U.d(We,{E:()=>E});const E=new(U(9751).y)(be=>be.complete())},8996:(Vt,We,U)=>{U.d(We,{D:()=>Ae});var C=U(8421),E=U(5363),z=U(9468),Te=U(9751),Re=U(2202),Pe=U(576),oe=U(9672);function me(He,Dt){if(!He)throw new Error("Iterable cannot be null");return new Te.y(Ve=>{(0,oe.f)(Ve,Dt,()=>{const Ke=He[Symbol.asyncIterator]();(0,oe.f)(Ve,Dt,()=>{Ke.next().then(je=>{je.done?Ve.complete():Ve.next(je.value)})},0,!0)})})}var nt=U(3670),tt=U(8239),Xe=U(1144),at=U(6495),Fe=U(2206),Ee=U(4532),st=U(3260);function Ae(He,Dt){return Dt?function Ye(He,Dt){if(null!=He){if((0,nt.c)(He))return function J(He,Dt){return(0,C.Xf)(He).pipe((0,z.R)(Dt),(0,E.Q)(Dt))}(He,Dt);if((0,Xe.z)(He))return function Se(He,Dt){return new Te.y(Ve=>{let Ke=0;return Dt.schedule(function(){Ke===He.length?Ve.complete():(Ve.next(He[Ke++]),Ve.closed||this.schedule())})})}(He,Dt);if((0,tt.t)(He))return function be(He,Dt){return(0,C.Xf)(He).pipe((0,z.R)(Dt),(0,E.Q)(Dt))}(He,Dt);if((0,Fe.D)(He))return me(He,Dt);if((0,at.T)(He))return function re(He,Dt){return new Te.y(Ve=>{let Ke;return(0,oe.f)(Ve,Dt,()=>{Ke=He[Re.h](),(0,oe.f)(Ve,Dt,()=>{let je,xe;try{({value:je,done:xe}=Ke.next())}catch(Ne){return void Ve.error(Ne)}xe?Ve.complete():Ve.next(je)},0,!0)}),()=>(0,Pe.m)(Ke?.return)&&Ke.return()})}(He,Dt);if((0,st.L)(He))return function yt(He,Dt){return me((0,st.Q)(He),Dt)}(He,Dt)}throw(0,Ee.z)(He)}(He,Dt):(0,C.Xf)(He)}},8421:(Vt,We,U)=>{U.d(We,{Xf:()=>nt});var C=U(655),E=U(1144),z=U(8239),J=U(9751),be=U(3670),Te=U(2206),Se=U(4532),Re=U(6495),Pe=U(3260),oe=U(576),re=U(7849),me=U(8822);function nt(Ye){if(Ye instanceof J.y)return Ye;if(null!=Ye){if((0,be.c)(Ye))return function tt(Ye){return new J.y(Ae=>{const He=Ye[me.L]();if((0,oe.m)(He.subscribe))return He.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ye);if((0,E.z)(Ye))return function Xe(Ye){return new J.y(Ae=>{for(let He=0;He<Ye.length&&!Ae.closed;He++)Ae.next(Ye[He]);Ae.complete()})}(Ye);if((0,z.t)(Ye))return function at(Ye){return new J.y(Ae=>{Ye.then(He=>{Ae.closed||(Ae.next(He),Ae.complete())},He=>Ae.error(He)).then(null,re.h)})}(Ye);if((0,Te.D)(Ye))return Ee(Ye);if((0,Re.T)(Ye))return function Fe(Ye){return new J.y(Ae=>{for(const He of Ye)if(Ae.next(He),Ae.closed)return;Ae.complete()})}(Ye);if((0,Pe.L)(Ye))return function st(Ye){return Ee((0,Pe.Q)(Ye))}(Ye)}throw(0,Se.z)(Ye)}function Ee(Ye){return new J.y(Ae=>{(function yt(Ye,Ae){var He,Dt,Ve,Ke;return(0,C.mG)(this,void 0,void 0,function*(){try{for(He=(0,C.KL)(Ye);!(Dt=yield He.next()).done;)if(Ae.next(Dt.value),Ae.closed)return}catch(je){Ve={error:je}}finally{try{Dt&&!Dt.done&&(Ke=He.return)&&(yield Ke.call(He))}finally{if(Ve)throw Ve.error}}Ae.complete()})})(Ye,Ae).catch(He=>Ae.error(He))})}},6451:(Vt,We,U)=>{U.d(We,{T:()=>Te});var C=U(8189),E=U(8421),z=U(515),J=U(3269),be=U(8996);function Te(...Se){const Re=(0,J.yG)(Se),Pe=(0,J._6)(Se,1/0),oe=Se;return oe.length?1===oe.length?(0,E.Xf)(oe[0]):(0,C.J)(Pe)((0,be.D)(oe,Re)):z.E}},9646:(Vt,We,U)=>{U.d(We,{of:()=>z});var C=U(3269),E=U(8996);function z(...J){const be=(0,C.yG)(J);return(0,E.D)(J,be)}},5403:(Vt,We,U)=>{U.d(We,{x:()=>E});var C=U(930);function E(J,be,Te,Se,Re){return new z(J,be,Te,Se,Re)}class z extends C.Lv{constructor(be,Te,Se,Re,Pe,oe){super(be),this.onFinalize=Pe,this.shouldUnsubscribe=oe,this._next=Te?function(re){try{Te(re)}catch(me){be.error(me)}}:super._next,this._error=Re?function(re){try{Re(re)}catch(me){be.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=Se?function(){try{Se()}catch(re){be.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var be;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(be=this.onFinalize)||void 0===be||be.call(this))}}}},4351:(Vt,We,U)=>{U.d(We,{b:()=>z});var C=U(5577),E=U(576);function z(J,be){return(0,E.m)(be)?(0,C.z)(J,be,1):(0,C.z)(J,1)}},8372:(Vt,We,U)=>{U.d(We,{b:()=>J});var C=U(4986),E=U(4482),z=U(5403);function J(be,Te=C.z){return(0,E.e)((Se,Re)=>{let Pe=null,oe=null,re=null;const me=()=>{if(Pe){Pe.unsubscribe(),Pe=null;const tt=oe;oe=null,Re.next(tt)}};function nt(){const tt=re+be,Xe=Te.now();if(Xe<tt)return Pe=this.schedule(void 0,tt-Xe),void Re.add(Pe);me()}Se.subscribe((0,z.x)(Re,tt=>{oe=tt,re=Te.now(),Pe||(Pe=Te.schedule(nt,be),Re.add(Pe))},()=>{me(),Re.complete()},void 0,()=>{oe=Pe=null}))})}},6590:(Vt,We,U)=>{U.d(We,{d:()=>z});var C=U(4482),E=U(5403);function z(J){return(0,C.e)((be,Te)=>{let Se=!1;be.subscribe((0,E.x)(Te,Re=>{Se=!0,Te.next(Re)},()=>{Se||Te.next(J),Te.complete()}))})}},1884:(Vt,We,U)=>{U.d(We,{x:()=>J});var C=U(4671),E=U(4482),z=U(5403);function J(Te,Se=C.y){return Te=Te??be,(0,E.e)((Re,Pe)=>{let oe,re=!0;Re.subscribe((0,z.x)(Pe,me=>{const nt=Se(me);(re||!Te(oe,nt))&&(re=!1,oe=nt,Pe.next(me))}))})}function be(Te,Se){return Te===Se}},9300:(Vt,We,U)=>{U.d(We,{h:()=>z});var C=U(4482),E=U(5403);function z(J,be){return(0,C.e)((Te,Se)=>{let Re=0;Te.subscribe((0,E.x)(Se,Pe=>J.call(be,Pe,Re++)&&Se.next(Pe)))})}},590:(Vt,We,U)=>{U.d(We,{P:()=>Se});var C=U(6805),E=U(9300),z=U(5698),J=U(6590),be=U(8068),Te=U(4671);function Se(Re,Pe){const oe=arguments.length>=2;return re=>re.pipe(Re?(0,E.h)((me,nt)=>Re(me,nt,re)):Te.y,(0,z.q)(1),oe?(0,J.d)(Pe):(0,be.T)(()=>new C.K))}},4004:(Vt,We,U)=>{U.d(We,{U:()=>z});var C=U(4482),E=U(5403);function z(J,be){return(0,C.e)((Te,Se)=>{let Re=0;Te.subscribe((0,E.x)(Se,Pe=>{Se.next(J.call(be,Pe,Re++))}))})}},8189:(Vt,We,U)=>{U.d(We,{J:()=>z});var C=U(5577),E=U(4671);function z(J=1/0){return(0,C.z)(E.y,J)}},5577:(Vt,We,U)=>{U.d(We,{z:()=>Re});var C=U(4004),E=U(8421),z=U(4482),J=U(9672),be=U(5403),Se=U(576);function Re(Pe,oe,re=1/0){return(0,Se.m)(oe)?Re((me,nt)=>(0,C.U)((tt,Xe)=>oe(me,tt,nt,Xe))((0,E.Xf)(Pe(me,nt))),re):("number"==typeof oe&&(re=oe),(0,z.e)((me,nt)=>function Te(Pe,oe,re,me,nt,tt,Xe,at){const Fe=[];let Ee=0,st=0,yt=!1;const Ye=()=>{yt&&!Fe.length&&!Ee&&oe.complete()},Ae=Dt=>Ee<me?He(Dt):Fe.push(Dt),He=Dt=>{tt&&oe.next(Dt),Ee++;let Ve=!1;(0,E.Xf)(re(Dt,st++)).subscribe((0,be.x)(oe,Ke=>{nt?.(Ke),tt?Ae(Ke):oe.next(Ke)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Ee--;Fe.length&&Ee<me;){const Ke=Fe.shift();Xe?(0,J.f)(oe,Xe,()=>He(Ke)):He(Ke)}Ye()}catch(Ke){oe.error(Ke)}}))};return Pe.subscribe((0,be.x)(oe,Ae,()=>{yt=!0,Ye()})),()=>{at?.()}}(me,nt,Pe,re)))}},5363:(Vt,We,U)=>{U.d(We,{Q:()=>J});var C=U(9672),E=U(4482),z=U(5403);function J(be,Te=0){return(0,E.e)((Se,Re)=>{Se.subscribe((0,z.x)(Re,Pe=>(0,C.f)(Re,be,()=>Re.next(Pe),Te),()=>(0,C.f)(Re,be,()=>Re.complete(),Te),Pe=>(0,C.f)(Re,be,()=>Re.error(Pe),Te)))})}},5026:(Vt,We,U)=>{U.d(We,{R:()=>J});var C=U(4482),E=U(5403);function z(be,Te,Se,Re,Pe){return(oe,re)=>{let me=Se,nt=Te,tt=0;oe.subscribe((0,E.x)(re,Xe=>{const at=tt++;nt=me?be(nt,Xe,at):(me=!0,Xe),Re&&re.next(nt)},Pe&&(()=>{me&&re.next(nt),re.complete()})))}}function J(be,Te){return(0,C.e)(z(be,Te,arguments.length>=2,!0))}},3099:(Vt,We,U)=>{U.d(We,{B:()=>be});var C=U(8421),E=U(7579),z=U(930),J=U(4482);function be(Se={}){const{connector:Re=(()=>new E.x),resetOnError:Pe=!0,resetOnComplete:oe=!0,resetOnRefCountZero:re=!0}=Se;return me=>{let nt,tt,Xe,at=0,Fe=!1,Ee=!1;const st=()=>{tt?.unsubscribe(),tt=void 0},yt=()=>{st(),nt=Xe=void 0,Fe=Ee=!1},Ye=()=>{const Ae=nt;yt(),Ae?.unsubscribe()};return(0,J.e)((Ae,He)=>{at++,!Ee&&!Fe&&st();const Dt=Xe=Xe??Re();He.add(()=>{at--,0===at&&!Ee&&!Fe&&(tt=Te(Ye,re))}),Dt.subscribe(He),!nt&&at>0&&(nt=new z.Hp({next:Ve=>Dt.next(Ve),error:Ve=>{Ee=!0,st(),tt=Te(yt,Pe,Ve),Dt.error(Ve)},complete:()=>{Fe=!0,st(),tt=Te(yt,oe),Dt.complete()}}),(0,C.Xf)(Ae).subscribe(nt))})(me)}}function Te(Se,Re,...Pe){if(!0===Re)return void Se();if(!1===Re)return;const oe=new z.Hp({next:()=>{oe.unsubscribe(),Se()}});return Re(...Pe).subscribe(oe)}},3151:(Vt,We,U)=>{U.d(We,{d:()=>be});var C=U(7579),E=U(6063);class z extends C.x{constructor(Se=1/0,Re=1/0,Pe=E.l){super(),this._bufferSize=Se,this._windowTime=Re,this._timestampProvider=Pe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Re===1/0,this._bufferSize=Math.max(1,Se),this._windowTime=Math.max(1,Re)}next(Se){const{isStopped:Re,_buffer:Pe,_infiniteTimeWindow:oe,_timestampProvider:re,_windowTime:me}=this;Re||(Pe.push(Se),!oe&&Pe.push(re.now()+me)),this._trimBuffer(),super.next(Se)}_subscribe(Se){this._throwIfClosed(),this._trimBuffer();const Re=this._innerSubscribe(Se),{_infiniteTimeWindow:Pe,_buffer:oe}=this,re=oe.slice();for(let me=0;me<re.length&&!Se.closed;me+=Pe?1:2)Se.next(re[me]);return this._checkFinalizedStatuses(Se),Re}_trimBuffer(){const{_bufferSize:Se,_timestampProvider:Re,_buffer:Pe,_infiniteTimeWindow:oe}=this,re=(oe?1:2)*Se;if(Se<1/0&&re<Pe.length&&Pe.splice(0,Pe.length-re),!oe){const me=Re.now();let nt=0;for(let tt=1;tt<Pe.length&&Pe[tt]<=me;tt+=2)nt=tt;nt&&Pe.splice(0,nt+1)}}}var J=U(3099);function be(Te,Se,Re){let Pe,oe=!1;return Te&&"object"==typeof Te?({bufferSize:Pe=1/0,windowTime:Se=1/0,refCount:oe=!1,scheduler:Re}=Te):Pe=Te??1/0,(0,J.B)({connector:()=>new z(Pe,Se,Re),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:oe})}},8675:(Vt,We,U)=>{U.d(We,{O:()=>J});var C=U(7272),E=U(3269),z=U(4482);function J(...be){const Te=(0,E.yG)(be);return(0,z.e)((Se,Re)=>{(Te?(0,C.z)(be,Se,Te):(0,C.z)(be,Se)).subscribe(Re)})}},9468:(Vt,We,U)=>{U.d(We,{R:()=>E});var C=U(4482);function E(z,J=0){return(0,C.e)((be,Te)=>{Te.add(z.schedule(()=>be.subscribe(Te),J))})}},3900:(Vt,We,U)=>{U.d(We,{w:()=>J});var C=U(8421),E=U(4482),z=U(5403);function J(be,Te){return(0,E.e)((Se,Re)=>{let Pe=null,oe=0,re=!1;const me=()=>re&&!Pe&&Re.complete();Se.subscribe((0,z.x)(Re,nt=>{Pe?.unsubscribe();let tt=0;const Xe=oe++;(0,C.Xf)(be(nt,Xe)).subscribe(Pe=(0,z.x)(Re,at=>Re.next(Te?Te(nt,at,Xe,tt++):at),()=>{Pe=null,me()}))},()=>{re=!0,me()}))})}},5698:(Vt,We,U)=>{U.d(We,{q:()=>J});var C=U(515),E=U(4482),z=U(5403);function J(be){return be<=0?()=>C.E:(0,E.e)((Te,Se)=>{let Re=0;Te.subscribe((0,z.x)(Se,Pe=>{++Re<=be&&(Se.next(Pe),be<=Re&&Se.complete())}))})}},8505:(Vt,We,U)=>{U.d(We,{b:()=>be});var C=U(576),E=U(4482),z=U(5403),J=U(4671);function be(Te,Se,Re){const Pe=(0,C.m)(Te)||Se||Re?{next:Te,error:Se,complete:Re}:Te;return Pe?(0,E.e)((oe,re)=>{var me;null===(me=Pe.subscribe)||void 0===me||me.call(Pe);let nt=!0;oe.subscribe((0,z.x)(re,tt=>{var Xe;null===(Xe=Pe.next)||void 0===Xe||Xe.call(Pe,tt),re.next(tt)},()=>{var tt;nt=!1,null===(tt=Pe.complete)||void 0===tt||tt.call(Pe),re.complete()},tt=>{var Xe;nt=!1,null===(Xe=Pe.error)||void 0===Xe||Xe.call(Pe,tt),re.error(tt)},()=>{var tt,Xe;nt&&(null===(tt=Pe.unsubscribe)||void 0===tt||tt.call(Pe)),null===(Xe=Pe.finalize)||void 0===Xe||Xe.call(Pe)}))}):J.y}},8068:(Vt,We,U)=>{U.d(We,{T:()=>J});var C=U(6805),E=U(4482),z=U(5403);function J(Te=be){return(0,E.e)((Se,Re)=>{let Pe=!1;Se.subscribe((0,z.x)(Re,oe=>{Pe=!0,Re.next(oe)},()=>Pe?Re.complete():Re.error(Te())))})}function be(){return new C.K}},4408:(Vt,We,U)=>{U.d(We,{o:()=>be});var C=U(727);class E extends C.w0{constructor(Se,Re){super()}schedule(Se,Re=0){return this}}const z={setInterval(Te,Se,...Re){const{delegate:Pe}=z;return Pe?.setInterval?Pe.setInterval(Te,Se,...Re):setInterval(Te,Se,...Re)},clearInterval(Te){const{delegate:Se}=z;return(Se?.clearInterval||clearInterval)(Te)},delegate:void 0};var J=U(8737);class be extends E{constructor(Se,Re){super(Se,Re),this.scheduler=Se,this.work=Re,this.pending=!1}schedule(Se,Re=0){if(this.closed)return this;this.state=Se;const Pe=this.id,oe=this.scheduler;return null!=Pe&&(this.id=this.recycleAsyncId(oe,Pe,Re)),this.pending=!0,this.delay=Re,this.id=this.id||this.requestAsyncId(oe,this.id,Re),this}requestAsyncId(Se,Re,Pe=0){return z.setInterval(Se.flush.bind(Se,this),Pe)}recycleAsyncId(Se,Re,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return Re;z.clearInterval(Re)}execute(Se,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Se,Re);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Re){let oe,Pe=!1;try{this.work(Se)}catch(re){Pe=!0,oe=re||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Re}=this,{actions:Pe}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(Pe,this),null!=Se&&(this.id=this.recycleAsyncId(Re,Se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Vt,We,U)=>{U.d(We,{v:()=>z});var C=U(6063);class E{constructor(be,Te=E.now){this.schedulerActionCtor=be,this.now=Te}schedule(be,Te=0,Se){return new this.schedulerActionCtor(this,be).schedule(Se,Te)}}E.now=C.l.now;class z extends E{constructor(be,Te=E.now){super(be,Te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(be){const{actions:Te}=this;if(this._active)return void Te.push(be);let Se;this._active=!0;do{if(Se=be.execute(be.state,be.delay))break}while(be=Te.shift());if(this._active=!1,Se){for(;be=Te.shift();)be.unsubscribe();throw Se}}}},4986:(Vt,We,U)=>{U.d(We,{P:()=>J,z:()=>z});var C=U(4408);const z=new(U(7565).v)(C.o),J=z},6063:(Vt,We,U)=>{U.d(We,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},3410:(Vt,We,U)=>{U.d(We,{z:()=>C});const C={setTimeout(E,z,...J){const{delegate:be}=C;return be?.setTimeout?be.setTimeout(E,z,...J):setTimeout(E,z,...J)},clearTimeout(E){const{delegate:z}=C;return(z?.clearTimeout||clearTimeout)(E)},delegate:void 0}},2202:(Vt,We,U)=>{U.d(We,{h:()=>E});const E=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Vt,We,U)=>{U.d(We,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Vt,We,U)=>{U.d(We,{K:()=>E});const E=(0,U(3888).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Vt,We,U)=>{U.d(We,{_6:()=>Te,jO:()=>J,yG:()=>be});var C=U(576),E=U(3532);function z(Se){return Se[Se.length-1]}function J(Se){return(0,C.m)(z(Se))?Se.pop():void 0}function be(Se){return(0,E.K)(z(Se))?Se.pop():void 0}function Te(Se,Re){return"number"==typeof z(Se)?Se.pop():Re}},4742:(Vt,We,U)=>{U.d(We,{D:()=>be});const{isArray:C}=Array,{getPrototypeOf:E,prototype:z,keys:J}=Object;function be(Se){if(1===Se.length){const Re=Se[0];if(C(Re))return{args:Re,keys:null};if(function Te(Se){return Se&&"object"==typeof Se&&E(Se)===z}(Re)){const Pe=J(Re);return{args:Pe.map(oe=>Re[oe]),keys:Pe}}}return{args:Se,keys:null}}},8737:(Vt,We,U)=>{function C(E,z){if(E){const J=E.indexOf(z);0<=J&&E.splice(J,1)}}U.d(We,{P:()=>C})},3888:(Vt,We,U)=>{function C(E){const J=E(be=>{Error.call(be),be.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}U.d(We,{d:()=>C})},1810:(Vt,We,U)=>{function C(E,z){return E.reduce((J,be,Te)=>(J[be]=z[Te],J),{})}U.d(We,{n:()=>C})},2806:(Vt,We,U)=>{U.d(We,{O:()=>J,x:()=>z});var C=U(2416);let E=null;function z(be){if(C.v.useDeprecatedSynchronousErrorHandling){const Te=!E;if(Te&&(E={errorThrown:!1,error:null}),be(),Te){const{errorThrown:Se,error:Re}=E;if(E=null,Se)throw Re}}else be()}function J(be){C.v.useDeprecatedSynchronousErrorHandling&&E&&(E.errorThrown=!0,E.error=be)}},9672:(Vt,We,U)=>{function C(E,z,J,be=0,Te=!1){const Se=z.schedule(function(){J(),Te?E.add(this.schedule(null,be)):this.unsubscribe()},be);if(E.add(Se),!Te)return Se}U.d(We,{f:()=>C})},4671:(Vt,We,U)=>{function C(E){return E}U.d(We,{y:()=>C})},1144:(Vt,We,U)=>{U.d(We,{z:()=>C});const C=E=>E&&"number"==typeof E.length&&"function"!=typeof E},2206:(Vt,We,U)=>{U.d(We,{D:()=>E});var C=U(576);function E(z){return Symbol.asyncIterator&&(0,C.m)(z?.[Symbol.asyncIterator])}},576:(Vt,We,U)=>{function C(E){return"function"==typeof E}U.d(We,{m:()=>C})},3670:(Vt,We,U)=>{U.d(We,{c:()=>z});var C=U(8822),E=U(576);function z(J){return(0,E.m)(J[C.L])}},6495:(Vt,We,U)=>{U.d(We,{T:()=>z});var C=U(2202),E=U(576);function z(J){return(0,E.m)(J?.[C.h])}},8239:(Vt,We,U)=>{U.d(We,{t:()=>E});var C=U(576);function E(z){return(0,C.m)(z?.then)}},3260:(Vt,We,U)=>{U.d(We,{L:()=>J,Q:()=>z});var C=U(655),E=U(576);function z(be){return(0,C.FC)(this,arguments,function*(){const Se=be.getReader();try{for(;;){const{value:Re,done:Pe}=yield(0,C.qq)(Se.read());if(Pe)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(Re)}}finally{Se.releaseLock()}})}function J(be){return(0,E.m)(be?.getReader)}},3532:(Vt,We,U)=>{U.d(We,{K:()=>E});var C=U(576);function E(z){return z&&(0,C.m)(z.schedule)}},4482:(Vt,We,U)=>{U.d(We,{A:()=>E,e:()=>z});var C=U(576);function E(J){return(0,C.m)(J?.lift)}function z(J){return be=>{if(E(be))return be.lift(function(Te){try{return J(Te,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Vt,We,U)=>{U.d(We,{Z:()=>J});var C=U(4004);const{isArray:E}=Array;function J(be){return(0,C.U)(Te=>function z(be,Te){return E(Te)?be(...Te):be(Te)}(be,Te))}},5032:(Vt,We,U)=>{function C(){}U.d(We,{Z:()=>C})},9635:(Vt,We,U)=>{U.d(We,{U:()=>z,z:()=>E});var C=U(4671);function E(...J){return z(J)}function z(J){return 0===J.length?C.y:1===J.length?J[0]:function(Te){return J.reduce((Se,Re)=>Re(Se),Te)}}},7849:(Vt,We,U)=>{U.d(We,{h:()=>z});var C=U(2416),E=U(3410);function z(J){E.z.setTimeout(()=>{const{onUnhandledError:be}=C.v;if(!be)throw J;be(J)})}},4532:(Vt,We,U)=>{function C(E){return new TypeError(`You provided ${null!==E&&"object"==typeof E?"an invalid object":`'${E}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(We,{z:()=>C})},655:(Vt,We,U)=>{function J(xe,Ne){var Ue={};for(var ze in xe)Object.prototype.hasOwnProperty.call(xe,ze)&&Ne.indexOf(ze)<0&&(Ue[ze]=xe[ze]);if(null!=xe&&"function"==typeof Object.getOwnPropertySymbols){var Tt=0;for(ze=Object.getOwnPropertySymbols(xe);Tt<ze.length;Tt++)Ne.indexOf(ze[Tt])<0&&Object.prototype.propertyIsEnumerable.call(xe,ze[Tt])&&(Ue[ze[Tt]]=xe[ze[Tt]])}return Ue}function Re(xe,Ne,Ue,ze){return new(Ue||(Ue=Promise))(function(It,en){function Dn(An){try{Pt(ze.next(An))}catch(In){en(In)}}function ln(An){try{Pt(ze.throw(An))}catch(In){en(In)}}function Pt(An){An.done?It(An.value):function Tt(It){return It instanceof Ue?It:new Ue(function(en){en(It)})}(An.value).then(Dn,ln)}Pt((ze=ze.apply(xe,Ne||[])).next())})}function Fe(xe){return this instanceof Fe?(this.v=xe,this):new Fe(xe)}function Ee(xe,Ne,Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Tt,ze=Ue.apply(xe,Ne||[]),It=[];return Tt={},en("next"),en("throw"),en("return"),Tt[Symbol.asyncIterator]=function(){return this},Tt;function en(Bn){ze[Bn]&&(Tt[Bn]=function(ut){return new Promise(function(Lt,le){It.push([Bn,ut,Lt,le])>1||Dn(Bn,ut)})})}function Dn(Bn,ut){try{!function ln(Bn){Bn.value instanceof Fe?Promise.resolve(Bn.value.v).then(Pt,An):In(It[0][2],Bn)}(ze[Bn](ut))}catch(Lt){In(It[0][3],Lt)}}function Pt(Bn){Dn("next",Bn)}function An(Bn){Dn("throw",Bn)}function In(Bn,ut){Bn(ut),It.shift(),It.length&&Dn(It[0][0],It[0][1])}}function yt(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Ne=xe[Symbol.asyncIterator];return Ne?Ne.call(xe):(xe=function me(xe){var Ne="function"==typeof Symbol&&Symbol.iterator,Ue=Ne&&xe[Ne],ze=0;if(Ue)return Ue.call(xe);if(xe&&"number"==typeof xe.length)return{next:function(){return xe&&ze>=xe.length&&(xe=void 0),{value:xe&&xe[ze++],done:!xe}}};throw new TypeError(Ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(xe),Ue={},ze("next"),ze("throw"),ze("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue);function ze(It){Ue[It]=xe[It]&&function(en){return new Promise(function(Dn,ln){!function Tt(It,en,Dn,ln){Promise.resolve(ln).then(function(Pt){It({value:Pt,done:Dn})},en)}(Dn,ln,(en=xe[It](en)).done,en.value)})}}}U.d(We,{FC:()=>Ee,KL:()=>yt,_T:()=>J,mG:()=>Re,qq:()=>Fe})},7340:(Vt,We,U)=>{U.d(We,{IO:()=>Xe,LC:()=>E,SB:()=>Pe,X$:()=>J,ZE:()=>st,ZN:()=>Ee,_j:()=>C,eR:()=>re,jt:()=>be,k1:()=>yt,l3:()=>z,oB:()=>Re,pV:()=>nt,ru:()=>Te,vP:()=>Se});class C{}class E{}const z="*";function J(Ye,Ae){return{type:7,name:Ye,definitions:Ae,options:{}}}function be(Ye,Ae=null){return{type:4,styles:Ae,timings:Ye}}function Te(Ye,Ae=null){return{type:3,steps:Ye,options:Ae}}function Se(Ye,Ae=null){return{type:2,steps:Ye,options:Ae}}function Re(Ye){return{type:6,styles:Ye,offset:null}}function Pe(Ye,Ae,He){return{type:0,name:Ye,styles:Ae,options:He}}function re(Ye,Ae,He=null){return{type:1,expr:Ye,animation:Ae,options:He}}function nt(Ye=null){return{type:9,options:Ye}}function Xe(Ye,Ae,He=null){return{type:11,selector:Ye,animation:Ae,options:He}}function Fe(Ye){Promise.resolve(null).then(Ye)}class Ee{constructor(Ae=0,He=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ae+He}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}onStart(Ae){this._originalOnStartFns.push(Ae),this._onStartFns.push(Ae)}onDone(Ae){this._originalOnDoneFns.push(Ae),this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Fe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ae){this._position=this.totalTime?Ae*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ae){const He="start"==Ae?this._onStartFns:this._onDoneFns;He.forEach(Dt=>Dt()),He.length=0}}class st{constructor(Ae){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ae;let He=0,Dt=0,Ve=0;const Ke=this.players.length;0==Ke?Fe(()=>this._onFinish()):this.players.forEach(je=>{je.onDone(()=>{++He==Ke&&this._onFinish()}),je.onDestroy(()=>{++Dt==Ke&&this._onDestroy()}),je.onStart(()=>{++Ve==Ke&&this._onStart()})}),this.totalTime=this.players.reduce((je,xe)=>Math.max(je,xe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}init(){this.players.forEach(Ae=>Ae.init())}onStart(Ae){this._onStartFns.push(Ae)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[])}onDone(Ae){this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ae=>Ae.play())}pause(){this.players.forEach(Ae=>Ae.pause())}restart(){this.players.forEach(Ae=>Ae.restart())}finish(){this._onFinish(),this.players.forEach(Ae=>Ae.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ae=>Ae.destroy()),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this.players.forEach(Ae=>Ae.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ae){const He=Ae*this.totalTime;this.players.forEach(Dt=>{const Ve=Dt.totalTime?Math.min(1,He/Dt.totalTime):1;Dt.setPosition(Ve)})}getPosition(){const Ae=this.players.reduce((He,Dt)=>null===He||Dt.totalTime>He.totalTime?Dt:He,null);return null!=Ae?Ae.getPosition():0}beforeDestroy(){this.players.forEach(Ae=>{Ae.beforeDestroy&&Ae.beforeDestroy()})}triggerCallback(Ae){const He="start"==Ae?this._onStartFns:this._onDoneFns;He.forEach(Dt=>Dt()),He.length=0}}const yt="!"},6895:(Vt,We,U)=>{U.d(We,{Do:()=>yt,EM:()=>da,HT:()=>be,JF:()=>Os,K0:()=>Se,Mx:()=>yr,NF:()=>ui,PM:()=>Io,S$:()=>Fe,V_:()=>oe,Ye:()=>Ye,b0:()=>st,bD:()=>us,ez:()=>ul,q:()=>z,sg:()=>to,w_:()=>Te});var C=U(4650);let E=null;function z(){return E}function be(L){E||(E=L)}class Te{}const Se=new C.OlP("DocumentToken");let Re=(()=>{class L{historyGo(B){throw new Error("Not implemented")}}return L.\u0275fac=function(B){return new(B||L)},L.\u0275prov=C.Yz7({token:L,factory:function(){return function Pe(){return(0,C.LFG)(re)}()},providedIn:"platform"}),L})();const oe=new C.OlP("Location Initialized");let re=(()=>{class L extends Re{constructor(B){super(),this._doc=B,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(B){const Q=z().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("popstate",B,!1),()=>Q.removeEventListener("popstate",B)}onHashChange(B){const Q=z().getGlobalEventTarget(this._doc,"window");return Q.addEventListener("hashchange",B,!1),()=>Q.removeEventListener("hashchange",B)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(B){this.location.pathname=B}pushState(B,Q,Me){me()?this._history.pushState(B,Q,Me):this.location.hash=Me}replaceState(B,Q,Me){me()?this._history.replaceState(B,Q,Me):this.location.hash=Me}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return L.\u0275fac=function(B){return new(B||L)(C.LFG(Se))},L.\u0275prov=C.Yz7({token:L,factory:function(){return function nt(){return new re((0,C.LFG)(Se))}()},providedIn:"platform"}),L})();function me(){return!!window.history.pushState}function tt(L,q){if(0==L.length)return q;if(0==q.length)return L;let B=0;return L.endsWith("/")&&B++,q.startsWith("/")&&B++,2==B?L+q.substring(1):1==B?L+q:L+"/"+q}function Xe(L){const q=L.match(/#|\?|$/),B=q&&q.index||L.length;return L.slice(0,B-("/"===L[B-1]?1:0))+L.slice(B)}function at(L){return L&&"?"!==L[0]?"?"+L:L}let Fe=(()=>{class L{historyGo(B){throw new Error("Not implemented")}}return L.\u0275fac=function(B){return new(B||L)},L.\u0275prov=C.Yz7({token:L,factory:function(){return(0,C.f3M)(st)},providedIn:"root"}),L})();const Ee=new C.OlP("appBaseHref");let st=(()=>{class L extends Fe{constructor(B,Q){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=Q??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return tt(this._baseHref,B)}path(B=!1){const Q=this._platformLocation.pathname+at(this._platformLocation.search),Me=this._platformLocation.hash;return Me&&B?`${Q}${Me}`:Q}pushState(B,Q,Me,rt){const Mt=this.prepareExternalUrl(Me+at(rt));this._platformLocation.pushState(B,Q,Mt)}replaceState(B,Q,Me,rt){const Mt=this.prepareExternalUrl(Me+at(rt));this._platformLocation.replaceState(B,Q,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return L.\u0275fac=function(B){return new(B||L)(C.LFG(Re),C.LFG(Ee,8))},L.\u0275prov=C.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),yt=(()=>{class L extends Fe{constructor(B,Q){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=Q&&(this._baseHref=Q)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let Q=this._platformLocation.hash;return null==Q&&(Q="#"),Q.length>0?Q.substring(1):Q}prepareExternalUrl(B){const Q=tt(this._baseHref,B);return Q.length>0?"#"+Q:Q}pushState(B,Q,Me,rt){let Mt=this.prepareExternalUrl(Me+at(rt));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.pushState(B,Q,Mt)}replaceState(B,Q,Me,rt){let Mt=this.prepareExternalUrl(Me+at(rt));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.replaceState(B,Q,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return L.\u0275fac=function(B){return new(B||L)(C.LFG(Re),C.LFG(Ee,8))},L.\u0275prov=C.Yz7({token:L,factory:L.\u0275fac}),L})(),Ye=(()=>{class L{constructor(B){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const Q=this._locationStrategy.getBaseHref();this._baseHref=Xe(Dt(Q)),this._locationStrategy.onPopState(Me=>{this._subject.emit({url:this.path(!0),pop:!0,state:Me.state,type:Me.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,Q=""){return this.path()==this.normalize(B+at(Q))}normalize(B){return L.stripTrailingSlash(function He(L,q){return L&&q.startsWith(L)?q.substring(L.length):q}(this._baseHref,Dt(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,Q="",Me=null){this._locationStrategy.pushState(Me,"",B,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+at(Q)),Me)}replaceState(B,Q="",Me=null){this._locationStrategy.replaceState(Me,"",B,Q),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+at(Q)),Me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Q=>{this._notifyUrlChangeListeners(Q.url,Q.state)})),()=>{const Q=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(Q,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",Q){this._urlChangeListeners.forEach(Me=>Me(B,Q))}subscribe(B,Q,Me){return this._subject.subscribe({next:B,error:Q,complete:Me})}}return L.normalizeQueryParams=at,L.joinWithSlash=tt,L.stripTrailingSlash=Xe,L.\u0275fac=function(B){return new(B||L)(C.LFG(Fe))},L.\u0275prov=C.Yz7({token:L,factory:function(){return function Ae(){return new Ye((0,C.LFG)(Fe))}()},providedIn:"root"}),L})();function Dt(L){return L.replace(/\/index.html$/,"")}function yr(L,q){q=encodeURIComponent(q);for(const B of L.split(";")){const Q=B.indexOf("="),[Me,rt]=-1==Q?[B,""]:[B.slice(0,Q),B.slice(Q+1)];if(Me.trim()===q)return decodeURIComponent(rt)}return null}class ls{constructor(q,B,Q,Me){this.$implicit=q,this.ngForOf=B,this.index=Q,this.count=Me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let to=(()=>{class L{constructor(B,Q,Me){this._viewContainer=B,this._template=Q,this._differs=Me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const Q=this._viewContainer;B.forEachOperation((Me,rt,Mt)=>{if(null==Me.previousIndex)Q.createEmbeddedView(this._template,new ls(Me.item,this._ngForOf,-1,-1),null===Mt?void 0:Mt);else if(null==Mt)Q.remove(null===rt?void 0:rt);else if(null!==rt){const vt=Q.get(rt);Q.move(vt,Mt),ys(vt,Me)}});for(let Me=0,rt=Q.length;Me<rt;Me++){const vt=Q.get(Me).context;vt.index=Me,vt.count=rt,vt.ngForOf=this._ngForOf}B.forEachIdentityChange(Me=>{ys(Q.get(Me.currentIndex),Me)})}static ngTemplateContextGuard(B,Q){return!0}}return L.\u0275fac=function(B){return new(B||L)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},L.\u0275dir=C.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function ys(L,q){L.context.$implicit=q.item}let ul=(()=>{class L{}return L.\u0275fac=function(B){return new(B||L)},L.\u0275mod=C.oAB({type:L}),L.\u0275inj=C.cJS({}),L})();const us="browser";function ui(L){return L===us}function Io(L){return"server"===L}let da=(()=>{class L{}return L.\u0275prov=(0,C.Yz7)({token:L,providedIn:"root",factory:()=>new $o((0,C.LFG)(Se),window)}),L})();class $o{constructor(q,B){this.document=q,this.window=B,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const B=function Ps(L,q){const B=L.getElementById(q)||L.getElementsByName(q)[0];if(B)return B;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const Q=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let Me=Q.currentNode;for(;Me;){const rt=Me.shadowRoot;if(rt){const Mt=rt.getElementById(q)||rt.querySelector(`[name="${q}"]`);if(Mt)return Mt}Me=Q.nextNode()}}return null}(this.document,q);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=q)}}scrollToElement(q){const B=q.getBoundingClientRect(),Q=B.left+this.window.pageXOffset,Me=B.top+this.window.pageYOffset,rt=this.offset();this.window.scrollTo(Q-rt[0],Me-rt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=Wr(this.window.history)||Wr(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Wr(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Os{}},529:(Vt,We,U)=>{U.d(We,{JF:()=>fr,eN:()=>It});var C=U(6895),E=U(4650),z=U(9646),J=U(9751),be=U(4351),Te=U(9300),Se=U(4004);class Re{}class Pe{}class oe{constructor(we){this.normalizedNames=new Map,this.lazyUpdate=null,we?this.lazyInit="string"==typeof we?()=>{this.headers=new Map,we.split("\n").forEach(de=>{const qe=de.indexOf(":");if(qe>0){const mt=de.slice(0,qe),Xt=mt.toLowerCase(),kt=de.slice(qe+1).trim();this.maybeSetNormalizedName(mt,Xt),this.headers.has(Xt)?this.headers.get(Xt).push(kt):this.headers.set(Xt,[kt])}})}:()=>{this.headers=new Map,Object.keys(we).forEach(de=>{let qe=we[de];const mt=de.toLowerCase();"string"==typeof qe&&(qe=[qe]),qe.length>0&&(this.headers.set(mt,qe),this.maybeSetNormalizedName(de,mt))})}:this.headers=new Map}has(we){return this.init(),this.headers.has(we.toLowerCase())}get(we){this.init();const de=this.headers.get(we.toLowerCase());return de&&de.length>0?de[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(we){return this.init(),this.headers.get(we.toLowerCase())||null}append(we,de){return this.clone({name:we,value:de,op:"a"})}set(we,de){return this.clone({name:we,value:de,op:"s"})}delete(we,de){return this.clone({name:we,value:de,op:"d"})}maybeSetNormalizedName(we,de){this.normalizedNames.has(de)||this.normalizedNames.set(de,we)}init(){this.lazyInit&&(this.lazyInit instanceof oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(we=>this.applyUpdate(we)),this.lazyUpdate=null))}copyFrom(we){we.init(),Array.from(we.headers.keys()).forEach(de=>{this.headers.set(de,we.headers.get(de)),this.normalizedNames.set(de,we.normalizedNames.get(de))})}clone(we){const de=new oe;return de.lazyInit=this.lazyInit&&this.lazyInit instanceof oe?this.lazyInit:this,de.lazyUpdate=(this.lazyUpdate||[]).concat([we]),de}applyUpdate(we){const de=we.name.toLowerCase();switch(we.op){case"a":case"s":let qe=we.value;if("string"==typeof qe&&(qe=[qe]),0===qe.length)return;this.maybeSetNormalizedName(we.name,de);const mt=("a"===we.op?this.headers.get(de):void 0)||[];mt.push(...qe),this.headers.set(de,mt);break;case"d":const Xt=we.value;if(Xt){let kt=this.headers.get(de);if(!kt)return;kt=kt.filter(Wt=>-1===Xt.indexOf(Wt)),0===kt.length?(this.headers.delete(de),this.normalizedNames.delete(de)):this.headers.set(de,kt)}else this.headers.delete(de),this.normalizedNames.delete(de)}}forEach(we){this.init(),Array.from(this.normalizedNames.keys()).forEach(de=>we(this.normalizedNames.get(de),this.headers.get(de)))}}class me{encodeKey(we){return at(we)}encodeValue(we){return at(we)}decodeKey(we){return decodeURIComponent(we)}decodeValue(we){return decodeURIComponent(we)}}const tt=/%(\d[a-f0-9])/gi,Xe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function at(dt){return encodeURIComponent(dt).replace(tt,(we,de)=>Xe[de]??we)}function Fe(dt){return`${dt}`}class Ee{constructor(we={}){if(this.updates=null,this.cloneFrom=null,this.encoder=we.encoder||new me,we.fromString){if(we.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nt(dt,we){const de=new Map;return dt.length>0&&dt.replace(/^\?/,"").split("&").forEach(mt=>{const Xt=mt.indexOf("="),[kt,Wt]=-1==Xt?[we.decodeKey(mt),""]:[we.decodeKey(mt.slice(0,Xt)),we.decodeValue(mt.slice(Xt+1))],gn=de.get(kt)||[];gn.push(Wt),de.set(kt,gn)}),de}(we.fromString,this.encoder)}else we.fromObject?(this.map=new Map,Object.keys(we.fromObject).forEach(de=>{const qe=we.fromObject[de],mt=Array.isArray(qe)?qe.map(Fe):[Fe(qe)];this.map.set(de,mt)})):this.map=null}has(we){return this.init(),this.map.has(we)}get(we){this.init();const de=this.map.get(we);return de?de[0]:null}getAll(we){return this.init(),this.map.get(we)||null}keys(){return this.init(),Array.from(this.map.keys())}append(we,de){return this.clone({param:we,value:de,op:"a"})}appendAll(we){const de=[];return Object.keys(we).forEach(qe=>{const mt=we[qe];Array.isArray(mt)?mt.forEach(Xt=>{de.push({param:qe,value:Xt,op:"a"})}):de.push({param:qe,value:mt,op:"a"})}),this.clone(de)}set(we,de){return this.clone({param:we,value:de,op:"s"})}delete(we,de){return this.clone({param:we,value:de,op:"d"})}toString(){return this.init(),this.keys().map(we=>{const de=this.encoder.encodeKey(we);return this.map.get(we).map(qe=>de+"="+this.encoder.encodeValue(qe)).join("&")}).filter(we=>""!==we).join("&")}clone(we){const de=new Ee({encoder:this.encoder});return de.cloneFrom=this.cloneFrom||this,de.updates=(this.updates||[]).concat(we),de}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(we=>this.map.set(we,this.cloneFrom.map.get(we))),this.updates.forEach(we=>{switch(we.op){case"a":case"s":const de=("a"===we.op?this.map.get(we.param):void 0)||[];de.push(Fe(we.value)),this.map.set(we.param,de);break;case"d":if(void 0===we.value){this.map.delete(we.param);break}{let qe=this.map.get(we.param)||[];const mt=qe.indexOf(Fe(we.value));-1!==mt&&qe.splice(mt,1),qe.length>0?this.map.set(we.param,qe):this.map.delete(we.param)}}}),this.cloneFrom=this.updates=null)}}class yt{constructor(){this.map=new Map}set(we,de){return this.map.set(we,de),this}get(we){return this.map.has(we)||this.map.set(we,we.defaultValue()),this.map.get(we)}delete(we){return this.map.delete(we),this}has(we){return this.map.has(we)}keys(){return this.map.keys()}}function Ae(dt){return typeof ArrayBuffer<"u"&&dt instanceof ArrayBuffer}function He(dt){return typeof Blob<"u"&&dt instanceof Blob}function Dt(dt){return typeof FormData<"u"&&dt instanceof FormData}class Ke{constructor(we,de,qe,mt){let Xt;if(this.url=de,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=we.toUpperCase(),function Ye(dt){switch(dt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||mt?(this.body=void 0!==qe?qe:null,Xt=mt):Xt=qe,Xt&&(this.reportProgress=!!Xt.reportProgress,this.withCredentials=!!Xt.withCredentials,Xt.responseType&&(this.responseType=Xt.responseType),Xt.headers&&(this.headers=Xt.headers),Xt.context&&(this.context=Xt.context),Xt.params&&(this.params=Xt.params)),this.headers||(this.headers=new oe),this.context||(this.context=new yt),this.params){const kt=this.params.toString();if(0===kt.length)this.urlWithParams=de;else{const Wt=de.indexOf("?");this.urlWithParams=de+(-1===Wt?"?":Wt<de.length-1?"&":"")+kt}}else this.params=new Ee,this.urlWithParams=de}serializeBody(){return null===this.body?null:Ae(this.body)||He(this.body)||Dt(this.body)||function Ve(dt){return typeof URLSearchParams<"u"&&dt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ee?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dt(this.body)?null:He(this.body)?this.body.type||null:Ae(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ee?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(we={}){const de=we.method||this.method,qe=we.url||this.url,mt=we.responseType||this.responseType,Xt=void 0!==we.body?we.body:this.body,kt=void 0!==we.withCredentials?we.withCredentials:this.withCredentials,Wt=void 0!==we.reportProgress?we.reportProgress:this.reportProgress;let gn=we.headers||this.headers,jn=we.params||this.params;const cn=we.context??this.context;return void 0!==we.setHeaders&&(gn=Object.keys(we.setHeaders).reduce((_r,mn)=>_r.set(mn,we.setHeaders[mn]),gn)),we.setParams&&(jn=Object.keys(we.setParams).reduce((_r,mn)=>_r.set(mn,we.setParams[mn]),jn)),new Ke(de,qe,Xt,{params:jn,headers:gn,context:cn,reportProgress:Wt,responseType:mt,withCredentials:kt})}}var je=(()=>((je=je||{})[je.Sent=0]="Sent",je[je.UploadProgress=1]="UploadProgress",je[je.ResponseHeader=2]="ResponseHeader",je[je.DownloadProgress=3]="DownloadProgress",je[je.Response=4]="Response",je[je.User=5]="User",je))();class xe{constructor(we,de=200,qe="OK"){this.headers=we.headers||new oe,this.status=void 0!==we.status?we.status:de,this.statusText=we.statusText||qe,this.url=we.url||null,this.ok=this.status>=200&&this.status<300}}class Ne extends xe{constructor(we={}){super(we),this.type=je.ResponseHeader}clone(we={}){return new Ne({headers:we.headers||this.headers,status:void 0!==we.status?we.status:this.status,statusText:we.statusText||this.statusText,url:we.url||this.url||void 0})}}class Ue extends xe{constructor(we={}){super(we),this.type=je.Response,this.body=void 0!==we.body?we.body:null}clone(we={}){return new Ue({body:void 0!==we.body?we.body:this.body,headers:we.headers||this.headers,status:void 0!==we.status?we.status:this.status,statusText:we.statusText||this.statusText,url:we.url||this.url||void 0})}}class ze extends xe{constructor(we){super(we,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${we.url||"(unknown url)"}`:`Http failure response for ${we.url||"(unknown url)"}: ${we.status} ${we.statusText}`,this.error=we.error||null}}function Tt(dt,we){return{body:we,headers:dt.headers,context:dt.context,observe:dt.observe,params:dt.params,reportProgress:dt.reportProgress,responseType:dt.responseType,withCredentials:dt.withCredentials}}let It=(()=>{class dt{constructor(de){this.handler=de}request(de,qe,mt={}){let Xt;if(de instanceof Ke)Xt=de;else{let gn,jn;gn=mt.headers instanceof oe?mt.headers:new oe(mt.headers),mt.params&&(jn=mt.params instanceof Ee?mt.params:new Ee({fromObject:mt.params})),Xt=new Ke(de,qe,void 0!==mt.body?mt.body:null,{headers:gn,context:mt.context,params:jn,reportProgress:mt.reportProgress,responseType:mt.responseType||"json",withCredentials:mt.withCredentials})}const kt=(0,z.of)(Xt).pipe((0,be.b)(gn=>this.handler.handle(gn)));if(de instanceof Ke||"events"===mt.observe)return kt;const Wt=kt.pipe((0,Te.h)(gn=>gn instanceof Ue));switch(mt.observe||"body"){case"body":switch(Xt.responseType){case"arraybuffer":return Wt.pipe((0,Se.U)(gn=>{if(null!==gn.body&&!(gn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return gn.body}));case"blob":return Wt.pipe((0,Se.U)(gn=>{if(null!==gn.body&&!(gn.body instanceof Blob))throw new Error("Response is not a Blob.");return gn.body}));case"text":return Wt.pipe((0,Se.U)(gn=>{if(null!==gn.body&&"string"!=typeof gn.body)throw new Error("Response is not a string.");return gn.body}));default:return Wt.pipe((0,Se.U)(gn=>gn.body))}case"response":return Wt;default:throw new Error(`Unreachable: unhandled observe type ${mt.observe}}`)}}delete(de,qe={}){return this.request("DELETE",de,qe)}get(de,qe={}){return this.request("GET",de,qe)}head(de,qe={}){return this.request("HEAD",de,qe)}jsonp(de,qe){return this.request("JSONP",de,{params:(new Ee).append(qe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(de,qe={}){return this.request("OPTIONS",de,qe)}patch(de,qe,mt={}){return this.request("PATCH",de,Tt(mt,qe))}post(de,qe,mt={}){return this.request("POST",de,Tt(mt,qe))}put(de,qe,mt={}){return this.request("PUT",de,Tt(mt,qe))}}return dt.\u0275fac=function(de){return new(de||dt)(E.LFG(Re))},dt.\u0275prov=E.Yz7({token:dt,factory:dt.\u0275fac}),dt})();class en{constructor(we,de){this.next=we,this.interceptor=de}handle(we){return this.interceptor.intercept(we,this.next)}}const Dn=new E.OlP("HTTP_INTERCEPTORS");let ln=(()=>{class dt{intercept(de,qe){return qe.handle(de)}}return dt.\u0275fac=function(de){return new(de||dt)},dt.\u0275prov=E.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Gt=/^\)\]\}',?\n/;let Gn=(()=>{class dt{constructor(de){this.xhrFactory=de}handle(de){if("JSONP"===de.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new J.y(qe=>{const mt=this.xhrFactory.build();if(mt.open(de.method,de.urlWithParams),de.withCredentials&&(mt.withCredentials=!0),de.headers.forEach((De,pe)=>mt.setRequestHeader(De,pe.join(","))),de.headers.has("Accept")||mt.setRequestHeader("Accept","application/json, text/plain, */*"),!de.headers.has("Content-Type")){const De=de.detectContentTypeHeader();null!==De&&mt.setRequestHeader("Content-Type",De)}if(de.responseType){const De=de.responseType.toLowerCase();mt.responseType="json"!==De?De:"text"}const Xt=de.serializeBody();let kt=null;const Wt=()=>{if(null!==kt)return kt;const De=mt.statusText||"OK",pe=new oe(mt.getAllResponseHeaders()),ne=function Qt(dt){return"responseURL"in dt&&dt.responseURL?dt.responseURL:/^X-Request-URL:/m.test(dt.getAllResponseHeaders())?dt.getResponseHeader("X-Request-URL"):null}(mt)||de.url;return kt=new Ne({headers:pe,status:mt.status,statusText:De,url:ne}),kt},gn=()=>{let{headers:De,status:pe,statusText:ne,url:te}=Wt(),ae=null;204!==pe&&(ae=typeof mt.response>"u"?mt.responseText:mt.response),0===pe&&(pe=ae?200:0);let Qe=pe>=200&&pe<300;if("json"===de.responseType&&"string"==typeof ae){const Et=ae;ae=ae.replace(Gt,"");try{ae=""!==ae?JSON.parse(ae):null}catch($t){ae=Et,Qe&&(Qe=!1,ae={error:$t,text:ae})}}Qe?(qe.next(new Ue({body:ae,headers:De,status:pe,statusText:ne,url:te||void 0})),qe.complete()):qe.error(new ze({error:ae,headers:De,status:pe,statusText:ne,url:te||void 0}))},jn=De=>{const{url:pe}=Wt(),ne=new ze({error:De,status:mt.status||0,statusText:mt.statusText||"Unknown Error",url:pe||void 0});qe.error(ne)};let cn=!1;const _r=De=>{cn||(qe.next(Wt()),cn=!0);let pe={type:je.DownloadProgress,loaded:De.loaded};De.lengthComputable&&(pe.total=De.total),"text"===de.responseType&&!!mt.responseText&&(pe.partialText=mt.responseText),qe.next(pe)},mn=De=>{let pe={type:je.UploadProgress,loaded:De.loaded};De.lengthComputable&&(pe.total=De.total),qe.next(pe)};return mt.addEventListener("load",gn),mt.addEventListener("error",jn),mt.addEventListener("timeout",jn),mt.addEventListener("abort",jn),de.reportProgress&&(mt.addEventListener("progress",_r),null!==Xt&&mt.upload&&mt.upload.addEventListener("progress",mn)),mt.send(Xt),qe.next({type:je.Sent}),()=>{mt.removeEventListener("error",jn),mt.removeEventListener("abort",jn),mt.removeEventListener("load",gn),mt.removeEventListener("timeout",jn),de.reportProgress&&(mt.removeEventListener("progress",_r),null!==Xt&&mt.upload&&mt.upload.removeEventListener("progress",mn)),mt.readyState!==mt.DONE&&mt.abort()}})}}return dt.\u0275fac=function(de){return new(de||dt)(E.LFG(C.JF))},dt.\u0275prov=E.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const ir=new E.OlP("XSRF_COOKIE_NAME"),sr=new E.OlP("XSRF_HEADER_NAME");class $n{}let Br=(()=>{class dt{constructor(de,qe,mt){this.doc=de,this.platform=qe,this.cookieName=mt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const de=this.doc.cookie||"";return de!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,C.Mx)(de,this.cookieName),this.lastCookieString=de),this.lastToken}}return dt.\u0275fac=function(de){return new(de||dt)(E.LFG(C.K0),E.LFG(E.Lbi),E.LFG(ir))},dt.\u0275prov=E.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),jt=(()=>{class dt{constructor(de,qe){this.tokenService=de,this.headerName=qe}intercept(de,qe){const mt=de.url.toLowerCase();if("GET"===de.method||"HEAD"===de.method||mt.startsWith("http://")||mt.startsWith("https://"))return qe.handle(de);const Xt=this.tokenService.getToken();return null!==Xt&&!de.headers.has(this.headerName)&&(de=de.clone({headers:de.headers.set(this.headerName,Xt)})),qe.handle(de)}}return dt.\u0275fac=function(de){return new(de||dt)(E.LFG($n),E.LFG(sr))},dt.\u0275prov=E.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),xn=(()=>{class dt{constructor(de,qe){this.backend=de,this.injector=qe,this.chain=null}handle(de){if(null===this.chain){const qe=this.injector.get(Dn,[]);this.chain=qe.reduceRight((mt,Xt)=>new en(mt,Xt),this.backend)}return this.chain.handle(de)}}return dt.\u0275fac=function(de){return new(de||dt)(E.LFG(Pe),E.LFG(E.zs3))},dt.\u0275prov=E.Yz7({token:dt,factory:dt.\u0275fac}),dt})(),Tr=(()=>{class dt{static disable(){return{ngModule:dt,providers:[{provide:jt,useClass:ln}]}}static withOptions(de={}){return{ngModule:dt,providers:[de.cookieName?{provide:ir,useValue:de.cookieName}:[],de.headerName?{provide:sr,useValue:de.headerName}:[]]}}}return dt.\u0275fac=function(de){return new(de||dt)},dt.\u0275mod=E.oAB({type:dt}),dt.\u0275inj=E.cJS({providers:[jt,{provide:Dn,useExisting:jt,multi:!0},{provide:$n,useClass:Br},{provide:ir,useValue:"XSRF-TOKEN"},{provide:sr,useValue:"X-XSRF-TOKEN"}]}),dt})(),fr=(()=>{class dt{}return dt.\u0275fac=function(de){return new(de||dt)},dt.\u0275mod=E.oAB({type:dt}),dt.\u0275inj=E.cJS({providers:[It,{provide:Re,useClass:xn},Gn,{provide:Pe,useExisting:Gn}],imports:[Tr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),dt})()},4650:(Vt,We,U)=>{U.d(We,{$8M:()=>Jo,$Z:()=>ov,AFp:()=>W_,ALo:()=>FC,AaK:()=>Re,AsE:()=>m_,CHM:()=>zi,CRH:()=>ZC,CZH:()=>Tg,CqO:()=>Zp,D6c:()=>os,DdM:()=>PC,EJc:()=>Td,EpF:()=>Ov,F4k:()=>kv,FYo:()=>bp,FiY:()=>Rt,G48:()=>y0,Gf:()=>KC,GfV:()=>vw,Ikx:()=>Jv,JOm:()=>ta,KtG:()=>ds,LFG:()=>wi,LSH:()=>Wd,Lbi:()=>cD,Lck:()=>SC,MMx:()=>R_,NdJ:()=>o_,OlP:()=>Er,Oqu:()=>g_,PXZ:()=>ES,Q6J:()=>Rv,QGY:()=>Rl,QP$:()=>xh,QbO:()=>q_,Qsj:()=>SI,R0b:()=>Sa,RDi:()=>Hh,Rgc:()=>Ah,SBq:()=>Xh,Sil:()=>Sd,Suo:()=>qC,TTD:()=>Ti,TgZ:()=>Su,WFA:()=>Nv,X6Q:()=>Pg,XFs:()=>jt,Xpm:()=>ne,Xts:()=>Oc,Y36:()=>id,YKP:()=>TC,YNc:()=>Mv,Yjl:()=>Ge,Yz7:()=>ut,ZZ4:()=>S0,_UZ:()=>Pv,_Vd:()=>Qh,_c5:()=>FS,_uU:()=>qv,aQg:()=>ey,c2e:()=>Ph,cJS:()=>le,cg1:()=>rg,d8E:()=>eE,dDg:()=>mD,dqk:()=>qe,eFA:()=>Y_,eoX:()=>Pu,f3M:()=>Tc,g9A:()=>Sg,h0i:()=>bd,hGG:()=>BS,hij:()=>Eo,iGM:()=>j_,ifc:()=>de,ip1:()=>a0,kL8:()=>xf,lG2:()=>Ur,lcZ:()=>L_,lqb:()=>wr,lri:()=>Mg,n5z:()=>Ec,oAB:()=>$t,oxw:()=>Pb,q4F:()=>Ew,qLn:()=>Dp,qOj:()=>ko,qZA:()=>i_,rWj:()=>gD,s9C:()=>Lv,sBO:()=>X_,sIi:()=>Tu,s_b:()=>F_,soG:()=>Id,tb:()=>Kf,tp0:()=>bn,uIk:()=>Dv,vHH:()=>Xe,vpe:()=>Ol,wAp:()=>Rn,xp6:()=>Us,z2F:()=>xg,zSh:()=>pt,zs3:()=>lt});var C=U(7579),E=U(727),z=U(9751),J=U(6451),be=U(3099);function Te(i){for(let o in i)if(i[o]===Te)return o;throw Error("Could not find renamed property on target object.")}function Se(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Re(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Re).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const oe=Te({__forward_ref__:Te});function re(i){return i.__forward_ref__=re,i.toString=function(){return Re(this())},i}function me(i){return nt(i)?i():i}function nt(i){return"function"==typeof i&&i.hasOwnProperty(oe)&&i.__forward_ref__===re}class Xe extends Error{constructor(o,a){super(function at(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function Fe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ae(i,o){throw new Xe(-201,!1)}function ln(i,o){null==i&&function Pt(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function le(i){return{providers:i.providers||[],imports:i.imports||[]}}function gt(i){return Bt(i,ir)||Bt(i,$n)}function Bt(i,o){return i.hasOwnProperty(o)?i[o]:null}function Gn(i){return i&&(i.hasOwnProperty(sr)||i.hasOwnProperty(Br))?i[sr]:null}const ir=Te({\u0275prov:Te}),sr=Te({\u0275inj:Te}),$n=Te({ngInjectableDef:Te}),Br=Te({ngInjectorDef:Te});var jt=(()=>((jt=jt||{})[jt.Default=0]="Default",jt[jt.Host=1]="Host",jt[jt.Self=2]="Self",jt[jt.SkipSelf=4]="SkipSelf",jt[jt.Optional=8]="Optional",jt))();let xn;function Wn(i){const o=xn;return xn=i,o}function Tr(i,o,a){const c=gt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&jt.Optional?null:void 0!==o?o:void Ae(Re(i))}function Mr(i){return{toString:i}.toString()}var Kn=(()=>((Kn=Kn||{})[Kn.OnPush=0]="OnPush",Kn[Kn.Default=1]="Default",Kn))(),de=(()=>{return(i=de||(de={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",de;var i})();const qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),kt={},Wt=[],gn=Te({\u0275cmp:Te}),jn=Te({\u0275dir:Te}),cn=Te({\u0275pipe:Te}),_r=Te({\u0275mod:Te}),mn=Te({\u0275fac:Te}),De=Te({__NG_ELEMENT_ID__:Te});let pe=0;function ne(i){return Mr(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Wt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||de.Emulated,id:"c"+pe++,styles:i.styles||Wt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return d.inputs=Nn(i.inputs,c),d.outputs=Nn(i.outputs),v&&v.forEach(S=>S(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(ae).filter(Qe):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(ft).filter(Qe):null,d})}function ae(i){return _e(i)||ve(i)}function Qe(i){return null!==i}const Et={};function $t(i){return Mr(()=>{const o={type:i.type,bootstrap:i.bootstrap||Wt,declarations:i.declarations||Wt,imports:i.imports||Wt,exports:i.exports||Wt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Et[i.id]=i.type),o})}function Nn(i,o){if(null==i)return kt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,o&&(o[d]=f)}return a}const Ur=ne;function Ge(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function _e(i){return i[gn]||null}function ve(i){return i[jn]||null}function ft(i){return i[cn]||null}function Nt(i,o){const a=i[_r]||null;if(!a&&!0===o)throw new Error(`Type ${Re(i)} does not have '\u0275mod' property.`);return a}function ei(i){return Array.isArray(i)&&"object"==typeof i[1]}function Vr(i){return Array.isArray(i)&&!0===i[1]}function aa(i){return 0!=(8&i.flags)}function wo(i){return 2==(2&i.flags)}function il(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function Vo(i){return 0!=(256&i[2])}function ni(i,o){return i.hasOwnProperty(mn)?i[mn]:null}class $i{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ti(){return Ws}function Ws(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ks),Bl}function Bl(){const i=Or(this),o=i?.current;if(o){const a=i.previous;if(a===kt)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Ks(i,o,a,c){const d=Or(i)||function xs(i,o){return i[bo]=o}(i,{previous:kt,current:null}),f=d.current||(d.current={}),v=d.previous,S=this.declaredInputs[a],x=v[S];f[S]=new $i(x&&x.currentValue,o,v===kt),i[c]=o}Ti.ngInherit=!0;const bo="__ngSimpleChanges__";function Or(i){return i[bo]||null}function kr(i){for(;Array.isArray(i);)i=i[0];return i}function Wr(i,o){return kr(o[i.index])}function zo(i,o){return i.data[o]}function L(i,o){const a=o[i];return ei(a)?a:a[0]}function q(i){return 4==(4&i[2])}function B(i){return 64==(64&i[2])}function Me(i,o){return null==o?null:i[o]}function rt(i){i[18]=0}function Mt(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const vt={lFrame:ru(null),bindingsEnabled:!0};function pr(){return vt.bindingsEnabled}function Ct(){return vt.lFrame.lView}function On(){return vt.lFrame.tView}function zi(i){return vt.lFrame.contextLView=i,i[8]}function ds(i){return vt.lFrame.contextLView=null,i}function vr(){let i=Go();for(;null!==i&&64===i.type;)i=i.parent;return i}function Go(){return vt.lFrame.currentTNode}function Gi(i,o){const a=vt.lFrame;a.currentTNode=i,a.isParent=o}function Wo(){return vt.lFrame.isParent}function _i(){const i=vt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function qs(){return vt.lFrame.bindingIndex++}function gc(i,o){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,fl(o)}function fl(i){vt.lFrame.currentDirectiveIndex=i}function To(i){const o=vt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}function Ko(){return vt.lFrame.currentQueryIndex}function ao(i){vt.lFrame.currentQueryIndex=i}function Ul(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function ks(i,o,a){if(a&jt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&jt.Host||(d=Ul(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const c=vt.lFrame=fa();return c.currentTNode=o,c.lView=i,!0}function lo(i){const o=fa(),a=i[1];vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function fa(){const i=vt.lFrame,o=null===i?null:i.child;return null===o?ru(i):o}function ru(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function pa(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const pl=pa;function Vl(){const i=pa();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function $r(){return vt.lFrame.selectedIndex}function Wi(i){vt.lFrame.selectedIndex=i}function Nr(){const i=vt.lFrame;return zo(i.tView,i.selectedIndex)}function Na(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:S,ngAfterViewInit:x,ngAfterViewChecked:j,ngOnDestroy:Y}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),S&&((i.contentHooks||(i.contentHooks=[])).push(a,S),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,S)),x&&(i.viewHooks||(i.viewHooks=[])).push(-a,x),j&&((i.viewHooks||(i.viewHooks=[])).push(a,j),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,j)),null!=Y&&(i.destroyHooks||(i.destroyHooks=[])).push(a,Y)}}function Oi(i,o,a){yc(i,o,3,a)}function co(i,o,a,c){(3&i[2])===a&&yc(i,o,a,c)}function Zs(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function yc(i,o,a,c){const f=c??-1,v=o.length-1;let S=0;for(let x=void 0!==c?65535&i[18]:0;x<v;x++)if("number"==typeof o[x+1]){if(S=o[x],null!=c&&S>=c)break}else o[x]<0&&(i[18]+=65536),(S<f||-1==f)&&(ga(i,a,o,x),i[18]=(4294901760&i[18])+x+2),x++}function ga(i,o,a,c){const d=a[c]<0,f=a[c+1],S=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(S)}finally{}}}else try{f.call(S)}finally{}}class Ar{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Ns(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],v=a[c++],S=a[c++];i.setAttribute(o,v,S,f)}else{const f=d,v=a[++c];Gl(f)?i.setProperty(o,f,v):i.setAttribute(o,f,v),c++}}return c}function La(i){return 3===i||4===i||6===i}function Gl(i){return 64===i.charCodeAt(0)}function ml(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||ma(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function ma(i,o,a,c,d){let f=0,v=i.length;if(-1===o)v=-1;else for(;f<i.length;){const S=i[f++];if("number"==typeof S){if(S===o){v=-1;break}if(S>o){v=f-1;break}}}for(;f<i.length;){const S=i[f];if("number"==typeof S)break;if(S===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==v&&(i.splice(v,0,o),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function _l(i){return-1!==i}function _a(i){return 32767&i}function Fa(i,o){let a=function ki(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let Ba=!0;function Wl(i){const o=Ba;return Ba=i,o}let qr=0;const ho={};function ct(i,o){const a=hs(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,Jr(c.data,i),Jr(o,null),Jr(c.blueprint,null));const d=X(i,o),f=i.injectorIndex;if(_l(d)){const v=_a(d),S=Fa(d,o),x=S[1].data;for(let j=0;j<8;j++)o[f+j]=S[v+j]|x[v+j]}return o[f+8]=d,f}function Jr(i,o){i.push(0,0,0,0,0,0,0,0,o)}function hs(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function X(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Ea(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ni(i,o,a){!function Qo(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(De)&&(c=a[De]),null==c&&(c=a[De]=qr++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Va(i,o,a){if(a&jt.Optional)return i;Ae()}function ja(i,o,a,c){if(a&jt.Optional&&void 0===c&&(c=null),0==(a&(jt.Self|jt.Host))){const d=i[9],f=Wn(void 0);try{return d?d.get(o,c,a&jt.Optional):Tr(o,c,a&jt.Optional)}finally{Wn(f)}}return Va(c,0,a)}function zr(i,o,a,c=jt.Default,d){if(null!==i){if(1024&o[2]){const v=function Ei(i,o,a,c,d){let f=i,v=o;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const S=ii(f,v,a,c|jt.Self,ho);if(S!==ho)return S;let x=f.parent;if(!x){const j=v[21];if(j){const Y=j.get(a,ho,c);if(Y!==ho)return Y}x=Ea(v),v=v[15]}f=x}return d}(i,o,a,c,ho);if(v!==ho)return v}const f=ii(i,o,a,c,ho);if(f!==ho)return f}return ja(o,a,c,d)}function ii(i,o,a,c,d){const f=function Xo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(De)?i[De]:void 0;return"number"==typeof o?o>=0?255&o:vc:o}(a);if("function"==typeof f){if(!ks(o,i,c))return c&jt.Host?Va(d,0,c):ja(o,a,c,d);try{const v=f(c);if(null!=v||c&jt.Optional)return v;Ae()}finally{pl()}}else if("number"==typeof f){let v=null,S=hs(i,o),x=-1,j=c&jt.Host?o[16][6]:null;for((-1===S||c&jt.SkipSelf)&&(x=-1===S?X(i,o):o[S+8],-1!==x&&va(c,!1)?(v=o[1],S=_a(x),o=Fa(x,o)):S=-1);-1!==S;){const Y=o[1];if(ql(f,S,Y.data)){const ce=vi(S,o,a,v,c,j);if(ce!==ho)return ce}x=o[S+8],-1!==x&&va(c,o[1].data[S+8]===j)&&ql(f,S,o)?(v=Y,S=_a(x),o=Fa(x,o)):S=-1}}return d}function vi(i,o,a,c,d,f){const v=o[1],S=v.data[i+8],Y=Xi(S,v,a,null==c?wo(S)&&Ba:c!=v&&0!=(3&S.type),d&jt.Host&&f===S);return null!==Y?ya(o,v,Y,S):ho}function Xi(i,o,a,c,d){const f=i.providerIndexes,v=o.data,S=1048575&f,x=i.directiveStart,Y=f>>20,Oe=d?S+Y:i.directiveEnd;for(let Je=c?S:S+Y;Je<Oe;Je++){const At=v[Je];if(Je<x&&a===At||Je>=x&&At.type===a)return Je}if(d){const Je=v[x];if(Je&&Pi(Je)&&Je.type===a)return x}return null}function ya(i,o,a,c){let d=i[a];const f=o.data;if(function uo(i){return i instanceof Ar}(d)){const v=d;v.resolving&&function st(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Fe(i)}(f[a]));const S=Wl(v.canSeeViewProviders);v.resolving=!0;const x=v.injectImpl?Wn(v.injectImpl):null;ks(i,c,jt.Default);try{d=i[a]=v.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function yi(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const v=Ws(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==x&&Wn(x),Wl(S),v.resolving=!1,pl()}}return d}function ql(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function va(i,o){return!(i&jt.Self||i&jt.Host&&o)}class Ao{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return zr(this._tNode,this._lView,o,c,a)}}function vc(){return new Ao(vr(),Ct())}function Ec(i){return Mr(()=>{const o=i.prototype.constructor,a=o[mn]||su(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[mn]||su(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function su(i){return nt(i)?()=>{const o=su(me(i));return o&&o()}:ni(i)}function Ea(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Jo(i){return function yl(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(La(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(vr(),i)}const Si="__parameters__";function Ca(i,o,a){return Mr(()=>{const c=function ba(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const v=new d(...f);return S.annotation=v,S;function S(x,j,Y){const ce=x.hasOwnProperty(Si)?x[Si]:Object.defineProperty(x,Si,{value:[]})[Si];for(;ce.length<=Y;)ce.push(null);return(ce[Y]=ce[Y]||[]).push(v),x}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Er{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function D(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(o===i&&(o=i.slice(0,a)),D(c,o)):o!==i&&o.push(c)}return o}function I(i,o){i.forEach(a=>Array.isArray(a)?I(a,o):o(a))}function w(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function P(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}const Es={},$a="__NG_DI_FLAG__",Da="ngTempTokenPath",xo=/\n/gm,ns="__source";let Ga;function Wa(i){const o=Ga;return Ga=i,o}function Wu(i,o=jt.Default){if(void 0===Ga)throw new Xe(-203,!1);return null===Ga?Tr(i,void 0,o):Ga.get(i,o&jt.Optional?null:void 0,o)}function wi(i,o=jt.Default){return(function Ir(){return xn}()||Wu)(me(i),o)}function Tc(i,o=jt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),wi(i,o)}function k(i){const o=[];for(let a=0;a<i.length;a++){const c=me(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Xe(900,!1);let d,f=jt.Default;for(let v=0;v<c.length;v++){const S=c[v],x=W(S);"number"==typeof x?-1===x?d=S.token:f|=x:d=S}o.push(wi(d,f))}else o.push(wi(c))}return o}function V(i,o){return i[$a]=o,i.prototype[$a]=o,i}function W(i){return i[$a]}const Rt=V(Ca("Optional"),8),bn=V(Ca("SkipSelf"),4);let Yu;function Hh(i){Yu=i}class zh{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const G=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ze=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function Wd(i){const o=function Kd(){const i=Ct();return i&&i[12]}();return o?o.sanitize(oi.URL,i)||"":function Jl(i,o){const a=function zd(i){return i instanceof zh&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?function Tn(i){return i instanceof zh?i.changingThisBreaksApplicationSecurity:i}(i):function St(i){return(i=String(i)).match(G)||i.match(Ze)?i:"unsafe:"+i}(Fe(i))}const Oc=new Er("ENVIRONMENT_INITIALIZER"),wy=new Er("INJECTOR",-1),by=new Er("INJECTOR_DEF_TYPES");class Yh{get(o,a=Es){if(a===Es){const c=new Error(`NullInjectorError: No provider for ${Re(o)}!`);throw c.name="NullInjectorError",c}return a}}function _p(...i){return{\u0275providers:yp(0,i)}}function yp(i,...o){const a=[],c=new Set;let d;return I(o,f=>{const v=f;qd(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&vp(d,a),a}function vp(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];I(d,f=>{o.push(f)})}}function qd(i,o,a,c){if(!(i=me(i)))return!1;let d=null,f=Gn(i);const v=!f&&_e(i);if(f||v){if(v&&!v.standalone)return!1;d=i}else{const x=i.ngModule;if(f=Gn(x),!f)return!1;d=x}const S=c.has(d);if(v){if(S)return!1;if(c.add(d),v.dependencies){const x="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const j of x)qd(j,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!S){let j;c.add(d);try{I(f.imports,Y=>{qd(Y,o,a,c)&&(j||(j=[]),j.push(Y))})}finally{}void 0!==j&&vp(j,o)}if(!S){const j=ni(d)||(()=>new d);o.push({provide:d,useFactory:j,deps:Wt},{provide:by,useValue:d,multi:!0},{provide:Oc,useValue:()=>wi(d),multi:!0})}const x=f.providers;null==x||S||I(x,Y=>{o.push(Y)})}}return d!==i&&void 0!==i.providers}const y=Te({provide:String,useValue:Te});function g(i){return null!==i&&"object"==typeof i&&y in i}function se(i){return"function"==typeof i}const pt=new Er("Set Injector scope."),Ht={},an={};let fn;function cr(){return void 0===fn&&(fn=new Yh),fn}class wr{}class br extends wr{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Iy(o,v=>this.processProvider(v)),this.records.set(wy,kc(void 0,this)),d.has("environment")&&this.records.set(wr,kc(void 0,this));const f=this.records.get(pt);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(by.multi,Wt,jt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Wa(this),c=Wn(void 0);try{return o()}finally{Wa(a),Wn(c)}}get(o,a=Es,c=jt.Default){this.assertNotDestroyed();const d=Wa(this),f=Wn(void 0);try{if(!(c&jt.SkipSelf)){let S=this.records.get(o);if(void 0===S){const x=function Cy(i){return"function"==typeof i||"object"==typeof i&&i instanceof Er}(o)&&gt(o);S=x&&this.injectableDefInScope(x)?kc(Fi(o),Ht):null,this.records.set(o,S)}if(null!=S)return this.hydrate(o,S)}return(c&jt.Self?cr():this.parent).get(o,a=c&jt.Optional&&a===Es?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Da]=v[Da]||[]).unshift(Re(o)),d)throw v;return function fe(i,o,a,c){const d=i[Da];throw o[ns]&&d.unshift(o[ns]),i.message=function $e(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Re(o);if(Array.isArray(o))d=o.map(Re).join(" -> ");else if("object"==typeof o){let f=[];for(let v in o)if(o.hasOwnProperty(v)){let S=o[v];f.push(v+":"+("string"==typeof S?JSON.stringify(S):Re(S)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(xo,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Da]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Wn(f),Wa(d)}}resolveInjectorInitializers(){const o=Wa(this),a=Wn(void 0);try{const c=this.get(Oc.multi,Wt,jt.Self);for(const d of c)d()}finally{Wa(o),Wn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Re(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processProvider(o){let a=se(o=me(o))?o:me(o&&o.provide);const c=function Zd(i){return g(i)?kc(void 0,i.useValue):kc(function Ep(i,o,a){let c;if(se(i)){const d=me(i);return ni(d)||Fi(d)}if(g(i))c=()=>me(i.useValue);else if(function $(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...k(i.deps||[]));else if(function R(i){return!(!i||!i.useExisting)}(i))c=()=>wi(me(i.useExisting));else{const d=me(i&&(i.useClass||i.provide));if(!function bI(i){return!!i.deps}(i))return ni(d)||Fi(d);c=()=>new d(...k(i.deps))}return c}(i),Ht)}(o);if(se(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=kc(void 0,Ht,!0),d.factory=()=>k(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Ht&&(a.value=an,a.value=a.factory()),"object"==typeof a.value&&a.value&&function CI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=me(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Fi(i){const o=gt(i),a=null!==o?o.factory:ni(i);if(null!==a)return a;if(i instanceof Er)throw new Xe(204,!1);if(i instanceof Function)return function rs(i){const o=i.length;if(o>0)throw function F(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new Xe(204,!1);const a=function Gt(i){const o=i&&(i[ir]||i[$n]);if(o){const a=function Qt(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Xe(204,!1)}function kc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Dy(i){return!!i.\u0275providers}function Iy(i,o){for(const a of i)Array.isArray(a)?Iy(a,o):Dy(a)?Iy(a.\u0275providers,o):o(a)}class Sy{}class Ay{resolveComponentFactory(o){throw function DI(i){const o=Error(`No component factory found for ${Re(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Qh=(()=>{class i{}return i.NULL=new Ay,i})();function II(){return Nc(vr(),Ct())}function Nc(i,o){return new Xh(Wr(i,o))}let Xh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=II,i})();function yw(i){return i instanceof Xh?i.nativeElement:i}class bp{}let SI=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function AI(){const i=Ct(),a=L(vr().index,i);return(ei(a)?a:i)[11]}(),i})(),Jh=(()=>{class i{}return i.\u0275prov=ut({token:i,providedIn:"root",factory:()=>null}),i})();class vw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ew=new vw("14.1.1"),hu={};function um(i){return i.ngOriginalError}class Dp{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&um(o);for(;a&&um(a);)a=um(a);return a||null}}const hm=new Map;let fm=0;const gm="__ngContext__";function Po(i,o){ei(o)?(i[gm]=o[20],function Qd(i){hm.set(i[20],i)}(o)):i[gm]=o}function ec(i){const o=i[gm];return"number"==typeof o?function pm(i){return hm.get(i)||null}(o):o||null}function tc(i){const o=ec(i);return o?ei(o)?o:o.lView:null}const Rp=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(qe))();function fu(i){return i instanceof Function?i():i}var ta=(()=>((ta=ta||{})[ta.Important=1]="Important",ta[ta.DashCase=2]="DashCase",ta))();function Fy(i,o){return undefined(i,o)}function nf(i){const o=i[3];return Vr(o)?o[3]:o}function Em(i){return bm(i[13])}function wm(i){return bm(i[4])}function bm(i){for(;null!==i&&!Vr(i);)i=i[4];return i}function rf(i,o,a,c,d){if(null!=c){let f,v=!1;Vr(c)?f=c:ei(c)&&(v=!0,c=c[0]);const S=kr(c);0===i&&null!==a?null==d?Wy(o,a,S):Lc(o,a,S,d||null,!0):1===i&&null!==a?Lc(o,a,S,d||null,!0):2===i?function Zy(i,o,a){const c=af(i,o);c&&function Nw(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,S,v):3===i&&o.destroyNode(S),null!=f&&function Am(i,o,a,c,d){const f=a[7];f!==kr(a)&&rf(o,i,c,f,d);for(let S=10;S<a.length;S++){const x=a[S];th(x[1],x,i,o,c,f)}}(o,i,f,a,d)}}function sf(i,o,a){return i.createElement(o,a)}function jy(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Mt(d,-1)),a.splice(c,1)}function Hy(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&jy(d,c),o>0&&(i[a-1][4]=c[4]);const f=P(i,10+o);!function Vy(i,o){th(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Ow(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&th(i,o,a,3,null,null),function Np(i){let o=i[13];if(!o)return $y(i[1],i);for(;o;){let a=null;if(ei(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)ei(o)&&$y(o[1],o),o=o[3];null===o&&(o=i),ei(o)&&$y(o[1],o),a=o&&o[4]}o=a}}(o)}}function $y(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function kw(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Ar)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const S=d[f[v]],x=f[v+1];try{x.call(S)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function jI(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],S="function"==typeof v?v(o):kr(o[v]),x=c[d=a[f+2]],j=a[f+3];"boolean"==typeof j?S.removeEventListener(a[f],x,j):j>=0?c[d=j]():c[d=-j].unsubscribe(),f+=2}else{const v=c[d=a[f+1]];a[f].call(v)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Vr(o[3])){a!==o[3]&&jy(a,o);const c=o[19];null!==c&&c.detachView(i)}!function OI(i){hm.delete(i[20])}(o)}}function zy(i,o,a){return function Gy(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===de.None||d===de.Emulated)return null}return Wr(c,a)}(i,o.parent,a)}function Lc(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Wy(i,o,a){i.appendChild(o,a)}function Fc(i,o,a,c,d){null!==c?Lc(i,o,a,c,d):Wy(i,o,a)}function af(i,o){return i.parentNode(o)}let Fp=function Cm(i,o,a){return 40&i.type?Wr(i,a):null};function Jd(i,o,a,c){const d=zy(i,c,o),f=o[11],S=function Ky(i,o,a){return Fp(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let x=0;x<a.length;x++)Fc(f,d,a[x],S,!1);else Fc(f,d,a,S,!1)}function Tm(i,o){if(null!==o){const a=o.type;if(3&a)return Wr(o,i);if(4&a)return eh(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Tm(i,c);{const d=i[o.index];return Vr(d)?eh(-1,d):kr(d)}}if(32&a)return Fy(o,i)()||kr(i[o.index]);{const c=qy(i,o);return null!==c?Array.isArray(c)?c[0]:Tm(nf(i[16]),c):Tm(i,o.next)}}return null}function qy(i,o){return null!==o?i[16][6].projection[o.projection]:null}function eh(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Tm(c,d)}return o[7]}function Sm(i,o,a,c,d,f,v){for(;null!=a;){const S=c[a.index],x=a.type;if(v&&0===o&&(S&&Po(kr(S),c),a.flags|=4),64!=(64&a.flags))if(8&x)Sm(i,o,a.child,c,d,f,!1),rf(o,i,d,S,f);else if(32&x){const j=Fy(a,c);let Y;for(;Y=j();)rf(o,i,d,Y,f);rf(o,i,d,S,f)}else 16&x?Qy(i,o,c,a,d,f):rf(o,i,d,S,f);a=v?a.projectionNext:a.next}}function th(i,o,a,c,d,f){Sm(a,c,i.firstChild,o,d,f,!1)}function Qy(i,o,a,c,d,f){const v=a[16],x=v[6].projection[c.projection];if(Array.isArray(x))for(let j=0;j<x.length;j++)rf(o,i,d,x[j],f);else Sm(i,o,x,v[3],d,f,!0)}function Xy(i,o,a){i.setAttribute(o,"style",a)}function pu(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Jy(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const ev="ng-template";function Fw(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Jy(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Bp(i){return 4===i.type&&i.value!==ev}function Ya(i,o,a){return o===(4!==i.type||a?i.value:ev)}function Bw(i,o,a){let c=4;const d=i.attrs||[],f=function tv(i){for(let o=0;o<i.length;o++)if(La(i[o]))return o;return i.length}(d);let v=!1;for(let S=0;S<o.length;S++){const x=o[S];if("number"!=typeof x){if(!v)if(4&c){if(c=2|1&c,""!==x&&!Ya(i,x,a)||""===x&&1===o.length){if(Il(c))return!1;v=!0}}else{const j=8&c?x:o[++S];if(8&c&&null!==i.attrs){if(!Fw(i.attrs,j,a)){if(Il(c))return!1;v=!0}continue}const ce=lf(8&c?"class":x,d,Bp(i),a);if(-1===ce){if(Il(c))return!1;v=!0;continue}if(""!==j){let Oe;Oe=ce>f?"":d[ce+1].toLowerCase();const Je=8&c?Oe:null;if(Je&&-1!==Jy(Je,j,0)||2&c&&j!==Oe){if(Il(c))return!1;v=!0}}}}else{if(!v&&!Il(c)&&!Il(x))return!1;if(v&&Il(x))continue;v=!1,c=x|1&c}}return Il(c)||v}function Il(i){return 0==(1&i)}function lf(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let f=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)f=!0;else{if(1===v||2===v){let S=o[++d];for(;"string"==typeof S;)S=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=f?1:2}return-1}return function zI(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Uw(i,o,a=!1){for(let c=0;c<o.length;c++)if(Bw(i,o[c],a))return!0;return!1}function nv(i,o){return i?":not("+o.trim()+")":o}function WI(i){let o=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const S=i[++a];d+="["+v+(S.length>0?'="'+S+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Il(v)&&(o+=nv(f,d),d=""),c=v,f=f||!Il(c);a++}return""!==d&&(o+=nv(f,d)),o}const er={};function Us(i){nh(On(),Ct(),$r()+i,!1)}function nh(i,o,a,c){if(!c)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Oi(o,f,a)}else{const f=i.preOrderHooks;null!==f&&co(o,f,0,a)}Wi(a)}function Vw(i,o=null,a=null,c){const d=sn(i,o,a,c);return d.resolveInjectorInitializers(),d}function sn(i,o=null,a=null,c,d=new Set){const f=[a||Wt,_p(i)];return c=c||("object"==typeof i?void 0:Re(i)),new br(f,o||cr(),c||null,d)}let lt=(()=>{class i{static create(a,c){if(Array.isArray(a))return Vw({name:""},c,a,"");{const d=a.name??"";return Vw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Es,i.NULL=new Yh,i.\u0275prov=ut({token:i,providedIn:"any",factory:()=>wi(wy)}),i.__NG_ELEMENT_ID__=-1,i})();function id(i,o=jt.Default){const a=Ct();return null===a?wi(i,o):zr(vr(),a,me(i),o)}function ov(){throw new Error("invalid")}function Hp(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],f=a[c+1];if(-1!==f){const v=i.data[f];ao(d),v.contentQueries(2,o[f],f)}}}function Gm(i,o,a,c,d,f,v,S,x,j,Y){const ce=o.blueprint.slice();return ce[0]=d,ce[2]=76|c,(null!==Y||i&&1024&i[2])&&(ce[2]|=1024),rt(ce),ce[3]=ce[15]=i,ce[8]=a,ce[10]=v||i&&i[10],ce[11]=S||i&&i[11],ce[12]=x||i&&i[12]||null,ce[9]=j||i&&i[9]||null,ce[6]=f,ce[20]=function Tp(){return fm++}(),ce[21]=Y,ce[16]=2==o.type?i[16]:ce,ce}function gf(i,o,a,c,d){let f=i.data[o];if(null===f)f=function Wm(i,o,a,c,d){const f=Go(),v=Wo(),x=i.data[o]=function nT(i,o,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=x),null!==f&&(v?null==f.child&&null!==x.parent&&(f.child=x):null===f.next&&(f.next=x)),x}(i,o,a,c,d),function nu(){return vt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const v=function ri(){const i=vt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return Gi(f,!0),f}function sh(i,o,a,c){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function Ss(i,o,a){lo(o);try{const c=i.viewQuery;null!==c&&ud(1,c,a);const d=i.template;null!==d&&Zw(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Hp(i,o),i.staticViewQueries&&ud(2,i.viewQuery,a);const f=i.components;null!==f&&function qw(i,o){for(let a=0;a<o.length;a++)cb(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,Vl()}}function mf(i,o,a,c){const d=o[2];if(128!=(128&d)){lo(o);try{rt(o),function hl(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Zw(i,o,a,2,c);const v=3==(3&d);if(v){const j=i.preOrderCheckHooks;null!==j&&Oi(o,j,null)}else{const j=i.preOrderHooks;null!==j&&co(o,j,0,null),Zs(o,0)}if(function iT(i){for(let o=Em(i);null!==o;o=wm(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],f=d[3];0==(512&d[2])&&Mt(f,1),d[2]|=512}}}(o),function ab(i){for(let o=Em(i);null!==o;o=wm(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];B(c)&&mf(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&Hp(i,o),v){const j=i.contentCheckHooks;null!==j&&Oi(o,j)}else{const j=i.contentHooks;null!==j&&co(o,j,1),Zs(o,1)}!function Kw(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Wi(~d);else{const f=d,v=a[++c],S=a[++c];gc(v,f),S(2,o[f])}}}finally{Wi(-1)}}(i,o);const S=i.components;null!==S&&function $p(i,o){for(let a=0;a<o.length;a++)lb(i,o[a])}(o,S);const x=i.viewQuery;if(null!==x&&ud(2,x,c),v){const j=i.viewCheckHooks;null!==j&&Oi(o,j)}else{const j=i.viewHooks;null!==j&&co(o,j,2),Zs(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Mt(o[3],-1))}finally{Vl()}}}function bi(i,o,a,c){const d=o[10],v=q(o);try{!v&&d.begin&&d.begin(),v&&Ss(i,o,c),mf(i,o,a,c)}finally{!v&&d.end&&d.end()}}function Zw(i,o,a,c,d){const f=$r(),v=2&c;try{Wi(-1),v&&o.length>22&&nh(i,o,22,!1),a(c,d)}finally{Wi(f)}}function wu(i,o,a){!pr()||(function rb(i,o,a,c){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||ct(a,o),Po(c,o);const v=a.initialInputs;for(let S=d;S<f;S++){const x=i.data[S],j=Pi(x);j&&Sl(o,a,x);const Y=ya(o,i,S,a);Po(Y,o),null!==v&&sb(0,S-d,Y,x,0,v),j&&(L(a.index,o)[8]=Y)}}(i,o,a,Wr(a,o)),128==(128&a.flags)&&function bu(i,o,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,v=function mc(){return vt.lFrame.currentDirectiveIndex}();try{Wi(f);for(let S=c;S<d;S++){const x=i.data[S],j=o[S];fl(S),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&gv(x,j)}}finally{Wi(-1),fl(v)}}(i,o,a))}function pv(i,o,a=Wr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],S=-1===v?a(o,i):i[v];i[d++]=S}}}function _f(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=yf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function yf(i,o,a,c,d,f,v,S,x,j){const Y=22+c,ce=Y+d,Oe=function Km(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:er);return a}(Y,ce),Je="function"==typeof j?j():j;return Oe[1]={type:i,blueprint:Oe,template:a,queries:null,viewQuery:S,declTNode:o,data:Oe.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:x,consts:Je,incompleteFirstPass:!1}}function Xs(i,o,a,c){const d=wf(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&hb(i).push(c,d.length-1))}function Qw(i,o,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function Xw(i,o){const c=o.directiveEnd,d=i.data,f=o.attrs,v=[];let S=null,x=null;for(let j=o.directiveStart;j<c;j++){const Y=d[j],ce=Y.inputs,Oe=null===f||Bp(o)?null:yv(ce,f);v.push(Oe),S=Qw(ce,j,S),x=Qw(Y.outputs,j,x)}null!==S&&(S.hasOwnProperty("class")&&(o.flags|=16),S.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=S,o.outputs=x}function el(i,o,a,c,d,f,v,S){const x=Wr(o,a);let Y,j=o.inputs;!S&&null!=j&&(Y=j[c])?(bf(i,a,Y,c,d),wo(o)&&eb(a,o.index)):3&o.type&&(c=function Jw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,f.setProperty(x,c,d))}function eb(i,o){const a=L(o,i);16&a[2]||(a[2]|=32)}function cd(i,o,a,c){let d=!1;if(pr()){const f=function vf(i,o,a){const c=i.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const v=c[f];Uw(a,v.selectors,!1)&&(d||(d=[]),Ni(ct(a,o),i,v.type),Pi(v)?(ib(i,a),d.unshift(v)):d.push(v))}return d}(i,o,a),v=null===c?null:{"":-1};if(null!==f){d=!0,qm(a,i.data.length,f.length);for(let Y=0;Y<f.length;Y++){const ce=f[Y];ce.providersResolver&&ce.providersResolver(ce)}let S=!1,x=!1,j=sh(i,o,f.length,null);for(let Y=0;Y<f.length;Y++){const ce=f[Y];a.mergedAttrs=ml(a.mergedAttrs,ce.hostAttrs),oh(i,a,o,j,ce),_v(j,ce,v),null!==ce.contentQueries&&(a.flags|=8),(null!==ce.hostBindings||null!==ce.hostAttrs||0!==ce.hostVars)&&(a.flags|=128);const Oe=ce.type.prototype;!S&&(Oe.ngOnChanges||Oe.ngOnInit||Oe.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),S=!0),!x&&(Oe.ngOnChanges||Oe.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),x=!0),j++}Xw(i,a)}v&&function mv(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Xe(-301,!1);c.push(o[d],f)}}}(a,c,v)}return a.mergedAttrs=ml(a.mergedAttrs,a.attrs),d}function tb(i,o,a,c,d,f){const v=f.hostBindings;if(v){let S=i.hostBindingOpCodes;null===S&&(S=i.hostBindingOpCodes=[]);const x=~o.index;(function nb(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(S)!=x&&S.push(x),S.push(c,d,v)}}function gv(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function ib(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function _v(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Pi(o)&&(a[""]=i)}}function qm(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function oh(i,o,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=ni(d.type)),v=new Ar(f,Pi(d),id);i.blueprint[c]=v,a[c]=v,tb(i,o,0,c,sh(i,a,d.hostVars,er),d)}function Sl(i,o,a){const c=Wr(o,i),d=_f(a),f=i[10],v=Qm(i,Gm(i,d,null,a.onPush?32:16,c,o,f,f.createRenderer(c,a),null,null,null));i[o.index]=v}function ic(i,o,a,c,d,f){const v=Wr(i,o);!function ah(i,o,a,c,d,f,v){if(null==f)i.removeAttribute(o,d,a);else{const S=null==v?Fe(f):v(f,c||"",d);i.setAttribute(o,d,S,a)}}(o[11],v,f,i.value,a,c,d)}function sb(i,o,a,c,d,f){const v=f[o];if(null!==v){const S=c.setInput;for(let x=0;x<v.length;){const j=v[x++],Y=v[x++],ce=v[x++];null!==S?c.setInput(a,ce,j,Y):a[Y]=ce}}}function yv(i,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function vv(i,o,a,c){return new Array(i,!0,!1,o,null,0,c,a,null,null)}function lb(i,o){const a=L(o,i);if(B(a)){const c=a[1];48&a[2]?mf(c,a,c.template,a[8]):a[5]>0&&Zm(a)}}function Zm(i){for(let c=Em(i);null!==c;c=wm(c))for(let d=10;d<c.length;d++){const f=c[d];if(512&f[2]){const v=f[1];mf(v,f,v.template,f[8])}else f[5]>0&&Zm(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=L(a[c],i);B(d)&&d[5]>0&&Zm(d)}}function cb(i,o){const a=L(o,i),c=a[1];(function Ym(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),Ss(c,a,a[8])}function Qm(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Ev(i){for(;i;){i[2]|=32;const o=nf(i);if(Vo(i)&&!o)return i;i=o}return null}function wv(i){!function lh(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],c=tc(a);if(null!==c){const d=c[1];bi(d,c,d.template,a)}}}(i[8])}function ud(i,o,a){ao(0),o(i,a)}const db=(()=>Promise.resolve(null))();function wf(i){return i[7]||(i[7]=[])}function hb(i){return i.cleanup||(i.cleanup=[])}function fb(i,o,a){return(null===i||Pi(i))&&(a=function ua(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(a[o.index])),a[11]}function Ui(i,o){const a=i[9],c=a?a.get(Dp,null):null;c&&c.handleError(o)}function bf(i,o,a,c,d){for(let f=0;f<a.length;){const v=a[f++],S=a[f++],x=o[v],j=i.data[v];null!==j.setInput?j.setInput(x,d,c,S):x[S]=d}}function Al(i,o,a){const c=function $o(i,o){return kr(o[i])}(o,i);!function Pp(i,o,a){i.setValue(o,a)}(i[11],c,a)}function zp(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let v=0;v<o.length;v++){const S=o[v];"number"==typeof S?f=S:1==f?d=Pe(d,S):2==f&&(c=Pe(c,S+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Xm(i,o,a,c,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&c.push(kr(f)),Vr(f))for(let S=10;S<f.length;S++){const x=f[S],j=x[1].firstChild;null!==j&&Xm(x[1],x,j,c)}const v=a.type;if(8&v)Xm(i,o,a.child,c);else if(32&v){const S=Fy(a,o);let x;for(;x=S();)c.push(x)}else if(16&v){const S=qy(o,a);if(Array.isArray(S))c.push(...S);else{const x=nf(o[16]);Xm(x[1],x,S,c,!0)}}a=d?a.projectionNext:a.next}return c}class Du{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Xm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Hy(o,c),P(a,c))}this._attachedToViewContainer=!1}Ow(this._lView[1],this._lView)}onDestroy(o){Xs(this._lView[1],this._lView,null,o)}markForCheck(){Ev(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Cu(i,o,a){const c=o[10];c.begin&&c.begin();try{mf(i,o,i.template,a)}catch(d){throw Ui(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kp(i,o){th(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=o}}class aT extends Du{constructor(o){super(o),this._view=o}detectChanges(){wv(this._view)}checkNoChanges(){}get context(){return null}}class Jm extends Qh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=_e(o);return new Cf(a,this.ngModule)}}function ch(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class pb{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,hu,c);return d!==hu||a===hu?d:this.parentInjector.get(o,a,c)}}class Cf extends Sy{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Mm(i){return i.map(WI).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ch(this.componentDef.inputs)}get outputs(){return ch(this.componentDef.outputs)}create(o,a,c,d){let f=(d=d||this.ngModule)instanceof wr?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new pb(o,f):o,S=v.get(bp,null);if(null===S)throw new Xe(407,!1);const x=v.get(Jh,null),j=S.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ce=c?function Yw(i,o,a){return i.selectRootElement(o,a===de.ShadowDom)}(j,c,this.componentDef.encapsulation):sf(S.createRenderer(null,this.componentDef),Y,function Iu(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Y)),Oe=this.componentDef.onPush?288:272,Je=function mb(i,o){return{components:[],scheduler:i||Rp,clean:db,playerHandler:o||null,flags:0}}(),At=yf(0,null,null,1,0,null,null,null,null,null),Ft=Gm(null,At,Je,Oe,null,null,S,j,x,v,null);let tn,yn;lo(Ft);try{const Pn=function As(i,o,a,c,d,f){const v=a[1];a[22]=i;const x=gf(v,22,2,"#host",null),j=x.mergedAttrs=o.hostAttrs;null!==j&&(zp(x,j,!0),null!==i&&(Ns(d,i,j),null!==x.classes&&pu(d,i,x.classes),null!==x.styles&&Xy(d,i,x.styles)));const Y=c.createRenderer(i,o),ce=Gm(a,_f(o),null,o.onPush?32:16,a[22],x,c,Y,f||null,null,null);return v.firstCreatePass&&(Ni(ct(x,a),v,o.type),ib(v,x),qm(x,a.length,1)),Qm(a,ce),a[22]=ce}(ce,this.componentDef,Ft,S,j);if(ce)if(c)Ns(j,ce,["ng-version",Ew.full]);else{const{attrs:xt,classes:Sn}=function KI(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++c]):8===d&&a.push(f);else{if(!Il(d))break;d=f}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);xt&&Ns(j,ce,xt),Sn&&Sn.length>0&&pu(j,ce,Sn.join(" "))}if(yn=zo(At,22),void 0!==a){const xt=yn.projection=[];for(let Sn=0;Sn<this.ngContentSelectors.length;Sn++){const rr=a[Sn];xt.push(null!=rr?Array.from(rr):null)}}tn=function xr(i,o,a,c,d){const f=a[1],v=function ld(i,o,a){const c=vr();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),oh(i,c,o,sh(i,o,1,null),a),Xw(i,c));const d=ya(o,i,c.directiveStart,c);Po(d,o);const f=Wr(c,o);return f&&Po(f,o),d}(f,a,o);if(c.components.push(v),i[8]=v,null!==d)for(const x of d)x(v,o);if(o.contentQueries){const x=vr();o.contentQueries(1,v,x.directiveStart)}const S=vr();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Wi(S.index),tb(a[1],S,0,S.directiveStart,S.directiveEnd,o),gv(o,v)),v}(Pn,this.componentDef,Ft,Je,[_b]),Ss(At,Ft,null)}finally{Vl()}return new bv(this.componentType,tn,Nc(yn,Ft),Ft,yn)}}class bv extends class Ty{}{constructor(o,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new aT(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const f=this._rootLView;bf(f[1],f,d,o,a),eb(f,this._tNode.index)}}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function _b(){const i=vr();Na(Ct()[1],i)}function ko(i){let o=function yb(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Pi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Xe(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=dh(i.inputs),v.declaredInputs=dh(i.declaredInputs),v.outputs=dh(i.outputs);const S=d.hostBindings;S&&wb(i,S);const x=d.viewQuery,j=d.contentQueries;if(x&&Eb(i,x),j&&Vc(i,j),Se(i.inputs,d.inputs),Se(i.declaredInputs,d.declaredInputs),Se(i.outputs,d.outputs),Pi(d)&&d.data.animation){const Y=i.data;Y.animation=(Y.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let v=0;v<f.length;v++){const S=f[v];S&&S.ngInherit&&S(i),S===ko&&(a=!1)}}o=Object.getPrototypeOf(o)}!function vb(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ml(d.hostAttrs,a=ml(a,d.hostAttrs))}}(c)}function dh(i){return i===kt?{}:i===Wt?[]:i}function Eb(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Vc(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{o(c,d,f),a(c,d,f)}:o}function wb(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let tr=null;function hh(){if(!tr){const i=qe.Symbol;if(i&&i.iterator)tr=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(tr=c)}}}return tr}function Tu(i){return!!t_(i)&&(Array.isArray(i)||!(i instanceof Map)&&hh()in i)}function t_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function sc(i,o,a){return i[o]=a}function yo(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Dv(i,o,a,c){const d=Ct();return yo(d,qs(),o)&&(On(),ic(Nr(),d,i,o,a,c)),Dv}function fh(i,o,a,c){return yo(i,qs(),a)?o+Fe(a)+c:er}function Df(i,o,a,c,d,f){const S=function dd(i,o,a,c){const d=yo(i,o,a);return yo(i,o+1,c)||d}(i,function so(){return vt.lFrame.bindingIndex}(),a,d);return function oo(i){const o=vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2),S?o+Fe(a)+c+Fe(d)+f:er}function Mv(i,o,a,c,d,f,v,S){const x=Ct(),j=On(),Y=i+22,ce=j.firstCreatePass?function Tb(i,o,a,c,d,f,v,S,x){const j=o.consts,Y=gf(o,i,4,v||null,Me(j,S));cd(o,a,Y,Me(j,x)),Na(o,Y);const ce=Y.tViews=yf(2,Y,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,j);return null!==o.queries&&(o.queries.template(o,Y),ce.queries=o.queries.embeddedTView(Y)),Y}(Y,j,x,o,a,c,d,f,v):j.data[Y];Gi(ce,!1);const Oe=x[11].createComment("");Jd(j,x,Oe,ce),Po(Oe,x),Qm(x,x[Y]=vv(Oe,x,Oe,ce)),il(ce)&&wu(j,x,ce),null!=v&&pv(x,ce,S)}function Rv(i,o,a){const c=Ct();return yo(c,qs(),o)&&el(On(),Nr(),c,i,o,c[11],a,!1),Rv}function xv(i,o,a,c,d){const v=d?"class":"style";bf(i,a,o.inputs[v],v,c)}function Su(i,o,a,c){const d=Ct(),f=On(),v=22+i,S=d[11],x=d[v]=sf(S,o,function $l(){return vt.lFrame.currentNamespace}()),j=f.firstCreatePass?function Sf(i,o,a,c,d,f,v){const S=o.consts,j=gf(o,i,2,d,Me(S,f));return cd(o,a,j,Me(S,v)),null!==j.attrs&&zp(j,j.attrs,!1),null!==j.mergedAttrs&&zp(j,j.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,j),j}(v,f,d,0,o,a,c):f.data[v];Gi(j,!0);const Y=j.mergedAttrs;null!==Y&&Ns(S,x,Y);const ce=j.classes;null!==ce&&pu(S,x,ce);const Oe=j.styles;return null!==Oe&&Xy(S,x,Oe),64!=(64&j.flags)&&Jd(f,d,x,j),0===function hr(){return vt.lFrame.elementDepthCount}()&&Po(x,d),function Ln(){vt.lFrame.elementDepthCount++}(),il(j)&&(wu(f,d,j),function fv(i,o,a){if(aa(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,j,d)),null!==c&&pv(d,j),Su}function i_(){let i=vr();Wo()?function Pa(){vt.lFrame.isParent=!1}():(i=i.parent,Gi(i,!1));const o=i;!function mi(){vt.lFrame.elementDepthCount--}();const a=On();return a.firstCreatePass&&(Na(a,i),aa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Yo(i){return 0!=(16&i.flags)}(o)&&xv(a,o,Ct(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function So(i){return 0!=(32&i.flags)}(o)&&xv(a,o,Ct(),o.stylesWithoutHost,!1),i_}function Pv(i,o,a,c){return Su(i,o,a,c),i_(),Pv}function Ov(){return Ct()}function Rl(i){return!!i&&"function"==typeof i.then}function kv(i){return!!i&&"function"==typeof i.subscribe}const Zp=kv;function o_(i,o,a,c){const d=Ct(),f=On(),v=vr();return Mb(f,d,d[11],v,i,o,0,c),o_}function Nv(i,o){const a=vr(),c=Ct(),d=On();return Mb(d,c,fb(To(d.data),a,c),a,i,o),Nv}function Mb(i,o,a,c,d,f,v,S){const x=il(c),Y=i.firstCreatePass&&hb(i),ce=o[8],Oe=wf(o);let Je=!0;if(3&c.type||S){const tn=Wr(c,o),yn=S?S(tn):tn,Pn=Oe.length,xt=S?rr=>S(kr(rr[c.index])):c.index;let Sn=null;if(!S&&x&&(Sn=function fT(i,o,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const v=d[f];if(v===a&&d[f+1]===c){const S=o[7],x=d[f+2];return S.length>x?S[x]:null}"string"==typeof v&&(f+=2)}return null}(i,o,d,c.index)),null!==Sn)(Sn.__ngLastListenerFn__||Sn).__ngNextListenerFn__=f,Sn.__ngLastListenerFn__=f,Je=!1;else{f=xb(c,o,ce,f,!1);const rr=a.listen(yn,d,f);Oe.push(f,rr),Y&&Y.push(d,xt,Pn,Pn+1)}}else f=xb(c,o,ce,f,!1);const At=c.outputs;let Ft;if(Je&&null!==At&&(Ft=At[d])){const tn=Ft.length;if(tn)for(let yn=0;yn<tn;yn+=2){const Ri=o[Ft[yn]][Ft[yn+1]].subscribe(f),Wc=Oe.length;Oe.push(f,Ri),Y&&Y.push(d,c.index,Wc,-(Wc+1))}}}function Rb(i,o,a,c){try{return!1!==a(c)}catch(d){return Ui(i,d),!1}}function xb(i,o,a,c,d){return function f(v){if(v===Function)return c;Ev(2&i.flags?L(i.index,o):o);let x=Rb(o,0,c,v),j=f.__ngNextListenerFn__;for(;j;)x=Rb(o,0,j,v)&&x,j=j.__ngNextListenerFn__;return d&&!1===x&&(v.preventDefault(),v.returnValue=!1),x}}function Pb(i=1){return function Oa(i){return(vt.lFrame.contextLView=function qo(i,o){for(;i>0;)o=o[15],i--;return o}(i,vt.lFrame.contextLView))[8]}(i)}function Lv(i,o,a){return Fv(i,"",o,"",a),Lv}function Fv(i,o,a,c,d){const f=Ct(),v=fh(f,o,a,c);return v!==er&&el(On(),Nr(),f,i,v,f[11],d,!1),Fv}function qv(i,o=""){const a=Ct(),c=On(),d=i+22,f=c.firstCreatePass?gf(c,d,1,o,null):c.data[d],v=a[d]=function Uy(i,o){return i.createText(o)}(a[11],o);Jd(c,a,v,f),Gi(f,!1)}function g_(i){return Eo("",i,""),g_}function Eo(i,o,a){const c=Ct(),d=fh(c,i,o,a);return d!==er&&Al(c,$r(),d),Eo}function m_(i,o,a,c,d){const f=Ct(),v=Df(f,i,o,a,c,d);return v!==er&&Al(f,$r(),v),m_}function Jv(i,o,a){const c=Ct();return yo(c,qs(),o)&&el(On(),Nr(),c,i,o,c[11],a,!0),Jv}function eE(i,o,a){const c=Ct();if(yo(c,qs(),o)){const f=On(),v=Nr();el(f,v,c,i,o,fb(To(f.data),v,c),a,!0)}return eE}const vd=void 0;var v_=["en",[["a","p"],["AM","PM"],vd],[["AM","PM"],vd,vd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vd,"{1} 'at' {0}",vd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AT(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Rf={};function rg(i){const o=function rC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ig(o);if(a)return a;const c=o.split("-")[0];if(a=ig(c),a)return a;if("en"===c)return v_;throw new Xe(701,!1)}function xf(i){return rg(i)[Rn.PluralCase]}function ig(i){return i in Rf||(Rf[i]=qe.ng&&qe.ng.common&&qe.ng.common.locales&&qe.ng.common.locales[i]),Rf[i]}var Rn=(()=>((Rn=Rn||{})[Rn.LocaleId=0]="LocaleId",Rn[Rn.DayPeriodsFormat=1]="DayPeriodsFormat",Rn[Rn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rn[Rn.DaysFormat=3]="DaysFormat",Rn[Rn.DaysStandalone=4]="DaysStandalone",Rn[Rn.MonthsFormat=5]="MonthsFormat",Rn[Rn.MonthsStandalone=6]="MonthsStandalone",Rn[Rn.Eras=7]="Eras",Rn[Rn.FirstDayOfWeek=8]="FirstDayOfWeek",Rn[Rn.WeekendRange=9]="WeekendRange",Rn[Rn.DateFormat=10]="DateFormat",Rn[Rn.TimeFormat=11]="TimeFormat",Rn[Rn.DateTimeFormat=12]="DateTimeFormat",Rn[Rn.NumberSymbols=13]="NumberSymbols",Rn[Rn.NumberFormats=14]="NumberFormats",Rn[Rn.CurrencyCode=15]="CurrencyCode",Rn[Rn.CurrencySymbol=16]="CurrencySymbol",Rn[Rn.CurrencyName=17]="CurrencyName",Rn[Rn.Currencies=18]="Currencies",Rn[Rn.Directionality=19]="Directionality",Rn[Rn.PluralCase=20]="PluralCase",Rn[Rn.ExtraData=21]="ExtraData",Rn))();const vh="en-US";let sC=vh;class bd{}class TC{}function SC(i,o){return new ME(i,o??null)}class ME extends bd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jm(this);const c=Nt(o);this._bootstrapComponents=fu(c.bootstrap),this._r3Injector=sn(o,a,[{provide:bd,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],Re(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class M_ extends TC{constructor(o){super(),this.moduleType=o}create(o){return new ME(this.moduleType,o)}}class AC extends bd{constructor(o,a,c){super(),this.componentFactoryResolver=new Jm(this),this.instance=null;const d=new br([...o,{provide:bd,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],a||cr(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function R_(i,o,a=null){return new AC(i,o,a).injector}function PC(i,o,a){const c=_i()+i,d=Ct();return d[c]===er?sc(d,c,a?o.call(a):o()):function qp(i,o){return i[o]}(d,c)}function kC(i,o,a,c,d,f){const v=o+a;return yo(i,v,d)?sc(i,v+1,f?c.call(f,d):c(d)):function Sh(i,o){const a=i[o];return a===er?void 0:a}(i,v+1)}function FC(i,o){const a=On();let c;const d=i+22;a.firstCreatePass?(c=function HE(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const f=c.factory||(c.factory=ni(c.type)),v=Wn(id);try{const S=Wl(!1),x=f();return Wl(S),function dT(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ct(),d,x),x}finally{Wn(v)}}function L_(i,o,a){const c=i+22,d=Ct(),f=function Os(i,o){return i[o]}(d,c);return function Vf(i,o){return i[1].data[o].pure}(d,c)?kC(d,_i(),o,f.transform,a,f):f.transform(a)}function GE(i){return o=>{setTimeout(i,void 0,o)}}const Ol=class KT extends C.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,f=a||(()=>null),v=c;if(o&&"object"==typeof o){const x=o;d=x.next?.bind(x),f=x.error?.bind(x),v=x.complete?.bind(x)}this.__isAsync&&(f=GE(f),d&&(d=GE(d)),v&&(v=GE(v)));const S=super.subscribe({next:d,error:f,complete:v});return o instanceof E.w0&&o.add(S),S}};function qT(){return this._results[hh()]()}class mg{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=hh(),c=mg.prototype;c[a]||(c[a]=qT)}get changes(){return this._changes||(this._changes=new Ol)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=D(o);(this._changesDetected=!function Ql(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=o[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ah=(()=>{class i{}return i.__NG_ELEMENT_ID__=UC,i})();const WE=Ah,ZT=class extends WE{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=Gm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),Ss(c,d,o),new Du(d)}};function UC(){return _g(vr(),Ct())}function _g(i,o){return 4&i.type?new ZT(o,i,Nc(i,o)):null}let F_=(()=>{class i{}return i.__NG_ELEMENT_ID__=KE,i})();function KE(){return HC(vr(),Ct())}const VC=F_,yg=class extends VC{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Nc(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){const o=X(this._hostTNode,this._hostLView);if(_l(o)){const a=Fa(o,this._hostLView),c=_a(o);return new Ao(a[1].data[c+8],a)}return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=jC(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const v=o.createEmbeddedView(a||{},f);return this.insert(v,d),v}createComponent(o,a,c,d,f){const v=o&&!function Ys(i){return"function"==typeof i}(o);let S;if(v)S=a;else{const ce=a||{};S=ce.index,c=ce.injector,d=ce.projectableNodes,f=ce.environmentInjector||ce.ngModuleRef}const x=v?o:new Cf(_e(o)),j=c||this.parentInjector;if(!f&&null==x.ngModule){const Oe=(v?j:this.parentInjector).get(wr,null);Oe&&(f=Oe)}const Y=x.create(j,d,void 0,f);return this.insert(Y.hostView,S),Y}insert(o,a){const c=o._lView,d=c[1];if(function Q(i){return Vr(i[3])}(c)){const Y=this.indexOf(o);if(-1!==Y)this.detach(Y);else{const ce=c[3],Oe=new yg(ce,ce[6],ce[3]);Oe.detach(Oe.indexOf(o))}}const f=this._adjustIndex(a),v=this._lContainer;!function VI(i,o,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=o),c<f-10?(o[4]=a[d],w(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Cs(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const S=o[19];null!==S&&S.insertView(i),o[2]|=64}(d,c,v,f);const S=eh(f,v),x=c[11],j=af(x,v[7]);return null!==j&&function Pw(i,o,a,c,d,f){c[0]=d,c[6]=o,th(i,c,a,1,d,f)}(d,v[6],x,c,j,S),o.attachToViewContainerRef(),w(qE(v),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=jC(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Hy(this._lContainer,a);c&&(P(qE(this._lContainer),a),Ow(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Hy(this._lContainer,a);return c&&null!=P(qE(this._lContainer),a)?new Du(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function jC(i){return i[8]}function qE(i){return i[8]||(i[8]=[])}function HC(i,o){let a;const c=o[i.index];if(Vr(c))a=c;else{let d;if(8&i.type)d=kr(c);else{const f=o[11];d=f.createComment("");const v=Wr(i,o);Lc(f,af(f,v),d,function Lp(i,o){return i.nextSibling(o)}(f,v),!1)}o[i.index]=a=vv(c,o,d,i),Qm(o,a)}return new yg(a,i,o)}class B_{constructor(o){this.queryList=o,this.matches=null}clone(){return new B_(this.queryList)}setDirty(){this.queryList.setDirty()}}class vg{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);d.push(this.queries[v.indexInDeclarationView].clone())}return new vg(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==XC(o,a).matches&&this.queries[a].setDirty()}}class U_{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Eg{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Eg(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class jf{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new jf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,a,ZE(a,f)),this.matchTNodeWithReadOption(o,a,Xi(a,o,f,!1,!1))}else c===Ah?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Xi(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Xh||d===F_||d===Ah&&4&a.type)this.addMatch(a.index,-2);else{const f=Xi(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ZE(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function YE(i,o,a,c){return-1===a?function GC(i,o){return 11&i.type?Nc(i,o):4&i.type?_g(i,o):null}(o,i):-2===a?function WC(i,o,a){return a===Xh?Nc(o,i):a===Ah?_g(o,i):a===F_?HC(o,i):void 0}(i,o,c):ya(i,i[1],a,o)}function V_(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const f=i.data,v=a.matches,S=[];for(let x=0;x<v.length;x+=2){const j=v[x];S.push(j<0?null:YE(o,f[j],v[x+1],a.metadata.read))}d.matches=S}return d.matches}function Cd(i,o,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const v=V_(i,o,d,a);for(let S=0;S<f.length;S+=2){const x=f[S];if(x>0)c.push(v[S/2]);else{const j=f[S+1],Y=o[-x];for(let ce=10;ce<Y.length;ce++){const Oe=Y[ce];Oe[17]===Oe[3]&&Cd(Oe[1],Oe,j,c)}if(null!==Y[9]){const ce=Y[9];for(let Oe=0;Oe<ce.length;Oe++){const Je=ce[Oe];Cd(Je[1],Je,j,c)}}}}}return c}function j_(i){const o=Ct(),a=On(),c=Ko();ao(c+1);const d=XC(a,c);if(i.dirty&&q(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Cd(a,o,c,[]):V_(a,o,d,c);i.reset(f,yw),i.notifyOnChanges()}return!0}return!1}function KC(i,o,a){const c=On();c.firstCreatePass&&(QE(c,new U_(i,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),QC(c,Ct(),o)}function qC(i,o,a,c){const d=On();if(d.firstCreatePass){const f=vr();QE(d,new U_(o,a,c),f.index),function QT(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}QC(d,Ct(),a)}function ZC(){return function YC(i,o){return i[19].queries[o].queryList}(Ct(),Ko())}function QC(i,o,a){const c=new mg(4==(4&a));Xs(i,o,c,c.destroy),null===o[19]&&(o[19]=new vg),o[19].queries.push(new B_(c))}function QE(i,o,a){null===i.queries&&(i.queries=new Eg),i.queries.track(new jf(o,a))}function XC(i,o){return i.queries.getByIndex(o)}function xh(i){const o=_e(i)||ve(i)||ft(i);return null!==o&&o.standalone}function Ig(...i){}const a0=new Er("Application Initializer");let Tg=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ig,this.reject=Ig,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Rl(f))a.push(f);else if(Zp(f)){const v=new Promise((S,x)=>{f.subscribe({complete:S,error:x})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(wi(a0,8))},i.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const W_=new Er("AppId",{providedIn:"root",factory:function K_(){return`${Wf()}${Wf()}${Wf()}`}});function Wf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sg=new Er("Platform Initializer"),cD=new Er("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kf=new Er("appBootstrapListener"),q_=new Er("AnimationModuleType");let Ph=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Id=new Er("LocaleId",{providedIn:"root",factory:()=>Tc(Id,jt.Optional|jt.SkipSelf)||function xu(){return typeof $localize<"u"&&$localize.locale||vh}()}),Td=new Er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ag{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Sd=(()=>{class i{compileModuleSync(a){return new M_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=fu(Nt(a).declarations).reduce((v,S)=>{const x=_e(S);return x&&v.push(new Cf(x)),v},[]);return new Ag(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dD=(()=>Promise.resolve(0))();function c0(i){typeof Zone>"u"?dD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Sa{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ol(!1),this.onMicrotaskEmpty=new Ol(!1),this.onStable=new Ol(!1),this.onError=new Ol(!1),typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function gS(){let i=qe.requestAnimationFrame,o=qe.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function fD(i){const o=()=>{!function hD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(qe,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Z_(i),i.isCheckStableRunning=!0,u0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Z_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,v,S)=>{try{return d0(i),a.invokeTask(d,f,v,S)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),pD(i)}},onInvoke:(a,c,d,f,v,S,x)=>{try{return d0(i),a.invoke(d,f,v,S,x)}finally{i.shouldCoalesceRunChangeDetection&&o(),pD(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Z_(i),u0(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sa.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if(Sa.isInAngularZone())throw new Xe(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+d,o,mS,Ig,Ig);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const mS={};function u0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Z_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function d0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function pD(i){i._nesting--,u0(i)}class h0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ol,this.onMicrotaskEmpty=new Ol,this.onStable=new Ol,this.onError=new Ol}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const Mg=new Er(""),gD=new Er("");let Ou,mD=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ou||(function _S(i){Ou=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sa.assertNotInAngularZone(),c0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())c0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(wi(Sa),wi(Pu),wi(gD))},i.\u0275prov=ut({token:i,factory:i.\u0275fac}),i})(),Pu=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Ou?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ad=null;const _D=new Er("AllowMultipleToken"),f0=new Er("PlatformDestroyListeners");class ES{constructor(o,a){this.name=o,this.token=a}}function Y_(i,o,a=[]){const c=`Platform: ${o}`,d=new Er(c);return(f=[])=>{let v=p0();if(!v||v.injector.get(_D,!1)){const S=[...a,...f,{provide:d,useValue:!0}];i?i(S):function wS(i){if(Ad&&!Ad.get(_D,!1))throw new Xe(400,!1);Ad=i;const o=i.get(bD);(function ED(i){const o=i.get(Sg,null);o&&o.forEach(a=>a())})(i)}(function wD(i=[],o){return lt.create({name:o,providers:[{provide:pt,useValue:"platform"},{provide:f0,useValue:new Set([()=>Ad=null])},...i]})}(S,c))}return function bS(i){const o=p0();if(!o)throw new Xe(401,!1);return o}()}}function p0(){return Ad?.get(bD)??null}let bD=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function CS(i,o){let a;return a="noop"===i?new h0:("zone.js"===i?void 0:i)||new Sa(o),a}(c?.ngZone,function CD(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Sa,useValue:d}];return d.run(()=>{const v=lt.create({providers:f,parent:this.injector,name:a.moduleType.name}),S=a.create(v),x=S.injector.get(Dp,null);if(!x)throw new Xe(402,!1);return d.runOutsideAngular(()=>{const j=d.onError.subscribe({next:Y=>{x.handleError(Y)}});S.onDestroy(()=>{Q_(this._modules,S),j.unsubscribe()})}),function DS(i,o,a){try{const c=a();return Rl(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(x,d,()=>{const j=S.injector.get(Tg);return j.runInitializers(),j.donePromise.then(()=>(function Eh(i){ln(i,"Expected localeId to be defined"),"string"==typeof i&&(sC=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Id,vh)||vh),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,c=[]){const d=IS({},c);return function yS(i,o,a){const c=new M_(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(xg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Xe(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(f0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(wi(lt))},i.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function IS(i,o){return Array.isArray(o)?o.reduce(IS,i):{...i,...o}}let xg=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new z.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),v=new z.y(S=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Sa.assertNotInAngularZone(),c0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const j=this._zone.onUnstable.subscribe(()=>{Sa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{x.unsubscribe(),j.unsubscribe()}});this.isStable=(0,J.T)(f,v.pipe((0,be.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Sy;if(!this._injector.get(Tg).done)throw!d&&xh(a),new Xe(405,false);let v;v=d?a:this._injector.get(Qh).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const S=function yD(i){return i.isBoundToModule}(v)?void 0:this._injector.get(bd),j=v.create(lt.NULL,[],c||v.selector,S),Y=j.location.nativeElement,ce=j.injector.get(Mg,null);return ce?.registerApplication(Y),j.onDestroy(()=>{this.detachView(j.hostView),Q_(this.components,j),ce?.unregisterApplication(Y)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new Xe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Q_(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Kf,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Q_(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Xe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(wi(Sa),wi(wr),wi(Dp))},i.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Q_(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let m0=!0,_0=!1;function Pg(){return _0=!0,m0}function y0(){if(_0)throw new Error("Cannot enable prod mode after platform setup.");m0=!1}let X_=(()=>{class i{}return i.__NG_ELEMENT_ID__=TS,i})();function TS(i){return function ID(i,o,a){if(wo(i)&&!a){const c=L(i.index,o);return new Du(c,c)}return 47&i.type?new Du(o[16],o):null}(vr(),Ct(),16==(16&i))}class Ng{constructor(){}supports(o){return Tu(o)}create(o){return new RS(o)}}const MD=(i,o)=>o;class RS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||MD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<D0(c,d,f)?a:c,S=D0(v,d,f),x=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{f||(f=[]);const j=S-d,Y=x-d;if(j!=Y){for(let Oe=0;Oe<j;Oe++){const Je=Oe<f.length?f[Oe]:f[Oe]=0,At=Je+Oe;Y<=At&&At<j&&(f[Oe]=Je+1)}f[v.previousIndex]=Y-j}}S!==x&&o(v,S,x)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Tu(o))throw new Xe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let S=0;S<this.length;S++)f=o[S],v=this._trackByFn(S,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,S)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,S),c=!0),a=a._next}else d=0,function e_(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[hh()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,S=>{v=this._trackByFn(d,S),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,S,v,d)),Object.is(a.item,S)||this._addIdentityChange(a,S)):(a=this._mismatch(a,S,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new b0(a,c),f,d),o}_verifyReinsertion(o,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new C0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new C0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class b0{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class C0{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new xS,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function D0(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class I0{constructor(){}supports(o){return o instanceof Map||t_(o)}create(){return new PS}}class PS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||t_(o)))throw new Xe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,v=d._next;return f&&(f._next=v),v&&(v._prev=f),d._next=null,d._prev=null,d}const c=new RD(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class RD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function T0(){return new S0([new Ng])}let S0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||T0()),deps:[[i,new bn,new Rt]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Xe(901,!1)}}return i.\u0275prov=ut({token:i,providedIn:"root",factory:T0}),i})();function A0(){return new ey([new I0])}let ey=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||A0()),deps:[[i,new bn,new Rt]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new Xe(901,!1)}}return i.\u0275prov=ut({token:i,providedIn:"root",factory:A0}),i})();const FS=Y_(null,"core",[]);let BS=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(wi(xg))},i.\u0275mod=$t({type:i}),i.\u0275inj=le({}),i})();function os(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},7311:(Vt,We,U)=>{U.d(We,{uw:()=>Oc,Is:()=>qd});var C=U(6895),E=U(4650);let z;try{z=typeof Intl<"u"&&Intl.v8BreakIterator}catch{z=!1}let Pe,nt,at,J=(()=>{class O{constructor(g){this._platformId=g,this.isBrowser=this._platformId?(0,C.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!z)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(E.Lbi))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function re(O){return function oe(){if(null==Pe&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Pe=!0}))}finally{Pe=Pe||!1}return Pe}()?O:!!O.capture}function tt(){if(null==nt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return nt=!1,nt;if("scrollBehavior"in document.documentElement.style)nt=!0;else{const O=Element.prototype.scrollTo;nt=!!O&&!/\{\s*\[native code\]\s*\}/.test(O.toString())}}return nt}function st(){let O=typeof document<"u"&&document?document.activeElement:null;for(;O&&O.shadowRoot;){const y=O.shadowRoot.activeElement;if(y===O)break;O=y}return O}function yt(O){return O.composedPath?O.composedPath()[0]:O.target}function Ye(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Ae=U(1135),He=U(7579),Dt=U(9646);function ll(O,...y){return y.length?y.some(g=>O[g]):O.altKey||O.shiftKey||O.ctrlKey||O.metaKey}var ro=U(5698),ti=U(9300);function Ho(O){return(0,ti.h)((y,g)=>O<=g)}var tu=U(1884),Yi=U(4482),cl=U(5403),ni=U(8421),$i=U(5032);function Ti(O){return(0,Yi.e)((y,g)=>{(0,ni.Xf)(O).subscribe((0,cl.x)(g,()=>g.complete(),$i.Z)),!g.closed&&y.subscribe(g)})}function bo(O){return Array.isArray(O)?O:[O]}function Or(O){return null==O?"":"string"==typeof O?O:`${O}px`}function xs(O){return O instanceof E.SBq?O.nativeElement:O}let us=(()=>{class O{create(g){return typeof MutationObserver>"u"?null:new MutationObserver(g)}}return O.\u0275fac=function(g){return new(g||O)},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Do=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({providers:[us]}),O})();var ui=U(9841),Io=U(7272),ca=U(9751),kr=U(8372),ua=U(4004),da=U(8675);const Wr=new Set;let Ps,zo=(()=>{class O{constructor(g){this._platform=g,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):L}matchMedia(g){return(this._platform.WEBKIT||this._platform.BLINK)&&function Os(O){if(!Wr.has(O))try{Ps||(Ps=document.createElement("style"),Ps.setAttribute("type","text/css"),document.head.appendChild(Ps)),Ps.sheet&&(Ps.sheet.insertRule(`@media ${O} {body{ }}`,0),Wr.add(O))}catch(y){console.error(y)}}(g),this._matchMedia(g)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(J))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function L(O){return{matches:"all"===O||""===O,media:O,addListener:()=>{},removeListener:()=>{}}}let q=(()=>{class O{constructor(g,R){this._mediaMatcher=g,this._zone=R,this._queries=new Map,this._destroySubject=new He.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(g){return B(bo(g)).some($=>this._registerQuery($).mql.matches)}observe(g){const $=B(bo(g)).map(Be=>this._registerQuery(Be).observable);let se=(0,ui.a)($);return se=(0,Io.z)(se.pipe((0,ro.q)(1)),se.pipe(Ho(1),(0,kr.b)(0))),se.pipe((0,ua.U)(Be=>{const pt={matches:!1,breakpoints:{}};return Be.forEach(({matches:Ht,query:an})=>{pt.matches=pt.matches||Ht,pt.breakpoints[an]=Ht}),pt}))}_registerQuery(g){if(this._queries.has(g))return this._queries.get(g);const R=this._mediaMatcher.matchMedia(g),se={observable:new ca.y(Be=>{const pt=Ht=>this._zone.run(()=>Be.next(Ht));return R.addListener(pt),()=>{R.removeListener(pt)}}).pipe((0,da.O)(R),(0,ua.U)(({matches:Be})=>({query:g,matches:Be})),Ti(this._destroySubject)),mql:R};return this._queries.set(g,se),se}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(zo),E.LFG(E.R0b))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function B(O){return O.map(y=>y.split(",")).reduce((y,g)=>y.concat(g)).map(y=>y.trim())}let ds=(()=>{class O{constructor(g){this._platform=g}isDisabled(g){return g.hasAttribute("disabled")}isVisible(g){return function Go(O){return!!(O.offsetWidth||O.offsetHeight||"function"==typeof O.getClientRects&&O.getClientRects().length)}(g)&&"visible"===getComputedStyle(g).visibility}isTabbable(g){if(!this._platform.isBrowser)return!1;const R=function vr(O){try{return O.frameElement}catch{return null}}(function so(O){return O.ownerDocument&&O.ownerDocument.defaultView||window}(g));if(R&&(-1===io(R)||!this.isVisible(R)))return!1;let $=g.nodeName.toLowerCase(),se=io(g);return g.hasAttribute("contenteditable")?-1!==se:!("iframe"===$||"object"===$||this._platform.WEBKIT&&this._platform.IOS&&!function vs(O){let y=O.nodeName.toLowerCase(),g="input"===y&&O.type;return"text"===g||"password"===g||"select"===y||"textarea"===y}(g))&&("audio"===$?!!g.hasAttribute("controls")&&-1!==se:"video"===$?-1!==se&&(null!==se||this._platform.FIREFOX||g.hasAttribute("controls")):g.tabIndex>=0)}isFocusable(g,R){return function _i(O){return!function Gi(O){return function Pa(O){return"input"==O.nodeName.toLowerCase()}(O)&&"hidden"==O.type}(O)&&(function ri(O){let y=O.nodeName.toLowerCase();return"input"===y||"select"===y||"button"===y||"textarea"===y}(O)||function Wo(O){return function dl(O){return"a"==O.nodeName.toLowerCase()}(O)&&O.hasAttribute("href")}(O)||O.hasAttribute("contenteditable")||pc(O))}(g)&&!this.isDisabled(g)&&(R?.ignoreVisibility||this.isVisible(g))}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(J))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function pc(O){if(!O.hasAttribute("tabindex")||void 0===O.tabIndex)return!1;let y=O.getAttribute("tabindex");return!(!y||isNaN(parseInt(y,10)))}function io(O){if(!pc(O))return null;const y=parseInt(O.getAttribute("tabindex")||"",10);return isNaN(y)?-1:y}class hl{constructor(y,g,R,$,se=!1){this._element=y,this._checker=g,this._ngZone=R,this._document=$,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,se||this.attachAnchors()}get enabled(){return this._enabled}set enabled(y){this._enabled=y,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(y,this._startAnchor),this._toggleAnchorTabIndex(y,this._endAnchor))}destroy(){const y=this._startAnchor,g=this._endAnchor;y&&(y.removeEventListener("focus",this.startAnchorListener),y.remove()),g&&(g.removeEventListener("focus",this.endAnchorListener),g.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(y){return new Promise(g=>{this._executeOnStable(()=>g(this.focusInitialElement(y)))})}focusFirstTabbableElementWhenReady(y){return new Promise(g=>{this._executeOnStable(()=>g(this.focusFirstTabbableElement(y)))})}focusLastTabbableElementWhenReady(y){return new Promise(g=>{this._executeOnStable(()=>g(this.focusLastTabbableElement(y)))})}_getRegionBoundary(y){const g=this._element.querySelectorAll(`[cdk-focus-region-${y}], [cdkFocusRegion${y}], [cdk-focus-${y}]`);return"start"==y?g.length?g[0]:this._getFirstTabbableElement(this._element):g.length?g[g.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(y){const g=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(g){if(!this._checker.isFocusable(g)){const R=this._getFirstTabbableElement(g);return R?.focus(y),!!R}return g.focus(y),!0}return this.focusFirstTabbableElement(y)}focusFirstTabbableElement(y){const g=this._getRegionBoundary("start");return g&&g.focus(y),!!g}focusLastTabbableElement(y){const g=this._getRegionBoundary("end");return g&&g.focus(y),!!g}hasAttached(){return this._hasAttached}_getFirstTabbableElement(y){if(this._checker.isFocusable(y)&&this._checker.isTabbable(y))return y;const g=y.children;for(let R=0;R<g.length;R++){const $=g[R].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(g[R]):null;if($)return $}return null}_getLastTabbableElement(y){if(this._checker.isFocusable(y)&&this._checker.isTabbable(y))return y;const g=y.children;for(let R=g.length-1;R>=0;R--){const $=g[R].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(g[R]):null;if($)return $}return null}_createAnchor(){const y=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,y),y.classList.add("cdk-visually-hidden"),y.classList.add("cdk-focus-trap-anchor"),y.setAttribute("aria-hidden","true"),y}_toggleAnchorTabIndex(y,g){y?g.setAttribute("tabindex","0"):g.removeAttribute("tabindex")}toggleAnchors(y){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(y,this._startAnchor),this._toggleAnchorTabIndex(y,this._endAnchor))}_executeOnStable(y){this._ngZone.isStable?y():this._ngZone.onStable.pipe((0,ro.q)(1)).subscribe(y)}}let qs=(()=>{class O{constructor(g,R,$){this._checker=g,this._ngZone=R,this._document=$}create(g,R=!1){return new hl(g,this._checker,this._ngZone,this._document,R)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(ds),E.LFG(E.R0b),E.LFG(C.K0))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const ao=new E.OlP("cdk-input-modality-detector-options"),Ul={ignoreKeys:[18,17,224,91,16]},lo=re({passive:!0,capture:!0});let fa=(()=>{class O{constructor(g,R,$,se){this._platform=g,this._mostRecentTarget=null,this._modality=new Ae.X(null),this._lastTouchMs=0,this._onKeydown=Be=>{this._options?.ignoreKeys?.some(pt=>pt===Be.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=yt(Be))},this._onMousedown=Be=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function To(O){return 0===O.buttons||0===O.offsetX&&0===O.offsetY}(Be)?"keyboard":"mouse"),this._mostRecentTarget=yt(Be))},this._onTouchstart=Be=>{!function Ko(O){const y=O.touches&&O.touches[0]||O.changedTouches&&O.changedTouches[0];return!(!y||-1!==y.identifier||null!=y.radiusX&&1!==y.radiusX||null!=y.radiusY&&1!==y.radiusY)}(Be)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=yt(Be)):this._modality.next("keyboard")},this._options={...Ul,...se},this.modalityDetected=this._modality.pipe(Ho(1)),this.modalityChanged=this.modalityDetected.pipe((0,tu.x)()),g.isBrowser&&R.runOutsideAngular(()=>{$.addEventListener("keydown",this._onKeydown,lo),$.addEventListener("mousedown",this._onMousedown,lo),$.addEventListener("touchstart",this._onTouchstart,lo)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,lo),document.removeEventListener("mousedown",this._onMousedown,lo),document.removeEventListener("touchstart",this._onTouchstart,lo))}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(J),E.LFG(E.R0b),E.LFG(C.K0),E.LFG(ao,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const qo=new E.OlP("cdk-focus-monitor-default-options"),$r=re({passive:!0,capture:!0});let Wi=(()=>{class O{constructor(g,R,$,se,Be){this._ngZone=g,this._platform=R,this._inputModalityDetector=$,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new He.x,this._rootNodeFocusAndBlurListener=pt=>{for(let an=yt(pt);an;an=an.parentElement)"focus"===pt.type?this._onFocus(pt,an):this._onBlur(pt,an)},this._document=se,this._detectionMode=Be?.detectionMode||0}monitor(g,R=!1){const $=xs(g);if(!this._platform.isBrowser||1!==$.nodeType)return(0,Dt.of)(null);const se=function Ee(O){if(function Fe(){if(null==at){const O=typeof document<"u"?document.head:null;at=!(!O||!O.createShadowRoot&&!O.attachShadow)}return at}()){const y=O.getRootNode?O.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&y instanceof ShadowRoot)return y}return null}($)||this._getDocument(),Be=this._elementInfo.get($);if(Be)return R&&(Be.checkChildren=!0),Be.subject;const pt={checkChildren:R,subject:new He.x,rootNode:se};return this._elementInfo.set($,pt),this._registerGlobalListeners(pt),pt.subject}stopMonitoring(g){const R=xs(g),$=this._elementInfo.get(R);$&&($.subject.complete(),this._setClasses(R),this._elementInfo.delete(R),this._removeGlobalListeners($))}focusVia(g,R,$){const se=xs(g);se===this._getDocument().activeElement?this._getClosestElementsInfo(se).forEach(([pt,Ht])=>this._originChanged(pt,R,Ht)):(this._setOrigin(R),"function"==typeof se.focus&&se.focus($))}ngOnDestroy(){this._elementInfo.forEach((g,R)=>this.stopMonitoring(R))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(g){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(g)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:g&&this._isLastInteractionFromInputLabel(g)?"mouse":"program"}_shouldBeAttributedToTouch(g){return 1===this._detectionMode||!!g?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(g,R){g.classList.toggle("cdk-focused",!!R),g.classList.toggle("cdk-touch-focused","touch"===R),g.classList.toggle("cdk-keyboard-focused","keyboard"===R),g.classList.toggle("cdk-mouse-focused","mouse"===R),g.classList.toggle("cdk-program-focused","program"===R)}_setOrigin(g,R=!1){this._ngZone.runOutsideAngular(()=>{this._origin=g,this._originFromTouchInteraction="touch"===g&&R,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(g,R){const $=this._elementInfo.get(R),se=yt(g);!$||!$.checkChildren&&R!==se||this._originChanged(R,this._getFocusOrigin(se),$)}_onBlur(g,R){const $=this._elementInfo.get(R);!$||$.checkChildren&&g.relatedTarget instanceof Node&&R.contains(g.relatedTarget)||(this._setClasses(R),this._emitOrigin($,null))}_emitOrigin(g,R){g.subject.observers.length&&this._ngZone.run(()=>g.subject.next(R))}_registerGlobalListeners(g){if(!this._platform.isBrowser)return;const R=g.rootNode,$=this._rootNodeFocusListenerCount.get(R)||0;$||this._ngZone.runOutsideAngular(()=>{R.addEventListener("focus",this._rootNodeFocusAndBlurListener,$r),R.addEventListener("blur",this._rootNodeFocusAndBlurListener,$r)}),this._rootNodeFocusListenerCount.set(R,$+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ti(this._stopInputModalityDetector)).subscribe(se=>{this._setOrigin(se,!0)}))}_removeGlobalListeners(g){const R=g.rootNode;if(this._rootNodeFocusListenerCount.has(R)){const $=this._rootNodeFocusListenerCount.get(R);$>1?this._rootNodeFocusListenerCount.set(R,$-1):(R.removeEventListener("focus",this._rootNodeFocusAndBlurListener,$r),R.removeEventListener("blur",this._rootNodeFocusAndBlurListener,$r),this._rootNodeFocusListenerCount.delete(R))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(g,R,$){this._setClasses(g,R),this._emitOrigin($,R),this._lastFocusOrigin=R}_getClosestElementsInfo(g){const R=[];return this._elementInfo.forEach(($,se)=>{(se===g||$.checkChildren&&se.contains(g))&&R.push([se,$])}),R}_isLastInteractionFromInputLabel(g){const{_mostRecentTarget:R,mostRecentModality:$}=this._inputModalityDetector;if("mouse"!==$||!R||R===g||"INPUT"!==g.nodeName&&"TEXTAREA"!==g.nodeName||g.disabled)return!1;const se=g.labels;if(se)for(let Be=0;Be<se.length;Be++)if(se[Be].contains(R))return!0;return!1}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(E.R0b),E.LFG(J),E.LFG(fa),E.LFG(C.K0,8),E.LFG(qo,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const jl="cdk-high-contrast-black-on-white",_c="cdk-high-contrast-white-on-black",ka="cdk-high-contrast-active";let Hl=(()=>{class O{constructor(g,R){this._platform=g,this._document=R,this._breakpointSubscription=(0,E.f3M)(q).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const g=this._document.createElement("div");g.style.backgroundColor="rgb(1,2,3)",g.style.position="absolute",this._document.body.appendChild(g);const R=this._document.defaultView||window,$=R&&R.getComputedStyle?R.getComputedStyle(g):null,se=($&&$.backgroundColor||"").replace(/ /g,"");switch(g.remove(),se){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const g=this._document.body.classList;g.remove(ka,jl,_c),this._hasCheckedHighContrastMode=!0;const R=this.getHighContrastMode();1===R?g.add(ka,jl):2===R&&g.add(ka,_c)}}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(J),E.LFG(C.K0))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),$l=(()=>{class O{constructor(g){g._applyBodyHighContrastModeCssClasses()}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(Hl))},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({imports:[Do]}),O})();var yi=U(5577),Na=U(1144),Oi=U(576),co=U(3268);const Zs=["addListener","removeListener"],yc=["addEventListener","removeEventListener"],ga=["on","off"];function di(O,y,g,R){if((0,Oi.m)(g)&&(R=g,g=void 0),R)return di(O,y,g).pipe((0,co.Z)(R));const[$,se]=function Zo(O){return(0,Oi.m)(O.addEventListener)&&(0,Oi.m)(O.removeEventListener)}(O)?yc.map(Be=>pt=>O[Be](y,pt,g)):function uo(O){return(0,Oi.m)(O.addListener)&&(0,Oi.m)(O.removeListener)}(O)?Zs.map(Ar(O,y)):function zl(O){return(0,Oi.m)(O.on)&&(0,Oi.m)(O.off)}(O)?ga.map(Ar(O,y)):[];if(!$&&(0,Na.z)(O))return(0,yi.z)(Be=>di(Be,y,g))((0,ni.Xf)(O));if(!$)throw new TypeError("Invalid event target");return new ca.y(Be=>{const pt=(...Ht)=>Be.next(1<Ht.length?Ht:Ht[0]);return $(pt),()=>se(pt)})}function Ar(O,y){return g=>R=>O[g](y,R)}var Kr=U(4408),Yo=U(727);const So={schedule(O){let y=requestAnimationFrame,g=cancelAnimationFrame;const{delegate:R}=So;R&&(y=R.requestAnimationFrame,g=R.cancelAnimationFrame);const $=y(se=>{g=void 0,O(se)});return new Yo.w0(()=>g?.($))},requestAnimationFrame(...O){const{delegate:y}=So;return(y?.requestAnimationFrame||requestAnimationFrame)(...O)},cancelAnimationFrame(...O){const{delegate:y}=So;return(y?.cancelAnimationFrame||cancelAnimationFrame)(...O)},delegate:void 0};var gl=U(7565);new class Ns extends gl.v{flush(y){this._active=!0;const g=this._scheduled;this._scheduled=void 0;const{actions:R}=this;let $;y=y||R.shift();do{if($=y.execute(y.state,y.delay))break}while((y=R[0])&&y.id===g&&R.shift());if(this._active=!1,$){for(;(y=R[0])&&y.id===g&&R.shift();)y.unsubscribe();throw $}}}(class or extends Kr.o{constructor(y,g){super(y,g),this.scheduler=y,this.work=g}requestAsyncId(y,g,R=0){return null!==R&&R>0?super.requestAsyncId(y,g,R):(y.actions.push(this),y._scheduled||(y._scheduled=So.requestAnimationFrame(()=>y.flush(void 0))))}recycleAsyncId(y,g,R=0){if(null!=R&&R>0||null==R&&this.delay>0)return super.recycleAsyncId(y,g,R);y.actions.some($=>$.id===g)||(So.cancelAnimationFrame(g),y._scheduled=void 0)}});let ma,ml=1;const _l={};function _a(O){return O in _l&&(delete _l[O],!0)}const ki={setImmediate(O){const y=ml++;return _l[y]=!0,ma||(ma=Promise.resolve()),ma.then(()=>_a(y)&&O()),y},clearImmediate(O){_a(O)}},{setImmediate:Ba,clearImmediate:Wl}=ki,Kl={setImmediate(...O){const{delegate:y}=Kl;return(y?.setImmediate||Ba)(...O)},clearImmediate(O){const{delegate:y}=Kl;return(y?.clearImmediate||Wl)(O)},delegate:void 0};new class iu extends gl.v{flush(y){this._active=!0;const g=this._scheduled;this._scheduled=void 0;const{actions:R}=this;let $;y=y||R.shift();do{if($=y.execute(y.state,y.delay))break}while((y=R[0])&&y.id===g&&R.shift());if(this._active=!1,$){for(;(y=R[0])&&y.id===g&&R.shift();)y.unsubscribe();throw $}}}(class Ua extends Kr.o{constructor(y,g){super(y,g),this.scheduler=y,this.work=g}requestAsyncId(y,g,R=0){return null!==R&&R>0?super.requestAsyncId(y,g,R):(y.actions.push(this),y._scheduled||(y._scheduled=Kl.setImmediate(y.flush.bind(y,void 0))))}recycleAsyncId(y,g,R=0){if(null!=R&&R>0||null==R&&this.delay>0)return super.recycleAsyncId(y,g,R);y.actions.some($=>$.id===g)||(Kl.clearImmediate(g),y._scheduled=void 0)}});var Qo=U(4986),Jr=U(3532);function Ni(O,y=Qo.z){return function ct(O){return(0,Yi.e)((y,g)=>{let R=!1,$=null,se=null,Be=!1;const pt=()=>{if(se?.unsubscribe(),se=null,R){R=!1;const an=$;$=null,g.next(an)}Be&&g.complete()},Ht=()=>{se=null,Be&&g.complete()};y.subscribe((0,cl.x)(g,an=>{R=!0,$=an,se||(0,ni.Xf)(O(an)).subscribe(se=(0,cl.x)(g,pt,Ht))},()=>{Be=!0,(!R||!se||se.closed)&&g.complete()}))})}(()=>function X(O=0,y,g=Qo.P){let R=-1;return null!=y&&((0,Jr.K)(y)?g=y:R=y),new ca.y($=>{let se=function hs(O){return O instanceof Date&&!isNaN(O)}(O)?+O-g.now():O;se<0&&(se=0);let Be=0;return g.schedule(function(){$.closed||($.next(Be++),0<=R?this.schedule(void 0,R):$.complete())},se)})}(O,y))}const yl=new E.OlP("cdk-dir-doc",{providedIn:"root",factory:function Va(){return(0,E.f3M)(C.K0)}}),ja=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ii=(()=>{class O{constructor(g){if(this.value="ltr",this.change=new E.vpe,g){const $=g.documentElement?g.documentElement.dir:null;this.value=function zr(O){const y=O?.toLowerCase()||"";return"auto"===y&&typeof navigator<"u"&&navigator?.language?ja.test(navigator.language)?"rtl":"ltr":"rtl"===y?"rtl":"ltr"}((g.body?g.body.dir:null)||$||"ltr")}}ngOnDestroy(){this.change.complete()}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(yl,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Xi=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({}),O})(),su=(()=>{class O{constructor(g,R,$){this._ngZone=g,this._platform=R,this._scrolled=new He.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=$}register(g){this.scrollContainers.has(g)||this.scrollContainers.set(g,g.elementScrolled().subscribe(()=>this._scrolled.next(g)))}deregister(g){const R=this.scrollContainers.get(g);R&&(R.unsubscribe(),this.scrollContainers.delete(g))}scrolled(g=20){return this._platform.isBrowser?new ca.y(R=>{this._globalSubscription||this._addGlobalListener();const $=g>0?this._scrolled.pipe(Ni(g)).subscribe(R):this._scrolled.subscribe(R);return this._scrolledCount++,()=>{$.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Dt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((g,R)=>this.deregister(R)),this._scrolled.complete()}ancestorScrolled(g,R){const $=this.getAncestorScrollContainers(g);return this.scrolled(R).pipe((0,ti.h)(se=>!se||$.indexOf(se)>-1))}getAncestorScrollContainers(g){const R=[];return this.scrollContainers.forEach(($,se)=>{this._scrollableContainsElement(se,g)&&R.push(se)}),R}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(g,R){let $=xs(R),se=g.getElementRef().nativeElement;do{if($==se)return!0}while($=$.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>di(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(E.R0b),E.LFG(J),E.LFG(C.K0,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Jo=(()=>{class O{constructor(g,R,$){this._platform=g,this._change=new He.x,this._changeListener=se=>{this._change.next(se)},this._document=$,R.runOutsideAngular(()=>{if(g.isBrowser){const se=this._getWindow();se.addEventListener("resize",this._changeListener),se.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const g=this._getWindow();g.removeEventListener("resize",this._changeListener),g.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const g={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),g}getViewportRect(){const g=this.getViewportScrollPosition(),{width:R,height:$}=this.getViewportSize();return{top:g.top,left:g.left,bottom:g.top+$,right:g.left+R,height:$,width:R}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const g=this._document,R=this._getWindow(),$=g.documentElement,se=$.getBoundingClientRect();return{top:-se.top||g.body.scrollTop||R.scrollY||$.scrollTop||0,left:-se.left||g.body.scrollLeft||R.scrollX||$.scrollLeft||0}}change(g=20){return g>0?this._change.pipe(Ni(g)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const g=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:g.innerWidth,height:g.innerHeight}:{width:0,height:0}}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(J),E.LFG(E.R0b),E.LFG(C.K0,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),vl=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({}),O})(),wc=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({imports:[Xi,vl,Xi,vl]}),O})();class wl{attach(y){return this._attachedHost=y,y.attach(this)}detach(){let y=this._attachedHost;null!=y&&(this._attachedHost=null,y.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(y){this._attachedHost=y}}class Yl extends wl{constructor(y,g,R,$){super(),this.component=y,this.viewContainerRef=g,this.injector=R,this.componentFactoryResolver=$}}class Zr extends wl{constructor(y,g,R,$){super(),this.templateRef=y,this.viewContainerRef=g,this.context=R,this.injector=$}get origin(){return this.templateRef.elementRef}attach(y,g=this.context){return this.context=g,super.attach(y)}detach(){return this.context=void 0,super.detach()}}class bl extends wl{constructor(y){super(),this.element=y instanceof E.SBq?y.nativeElement:y}}class Ys{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(y){return y instanceof Yl?(this._attachedPortal=y,this.attachComponentPortal(y)):y instanceof Zr?(this._attachedPortal=y,this.attachTemplatePortal(y)):this.attachDomPortal&&y instanceof bl?(this._attachedPortal=y,this.attachDomPortal(y)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(y){this._disposeFn=y}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ql extends Ys{constructor(y,g,R,$,se){super(),this.outletElement=y,this._componentFactoryResolver=g,this._appRef=R,this._defaultInjector=$,this.attachDomPortal=Be=>{const pt=Be.element,Ht=this._document.createComment("dom-portal");pt.parentNode.insertBefore(Ht,pt),this.outletElement.appendChild(pt),this._attachedPortal=Be,super.setDisposeFn(()=>{Ht.parentNode&&Ht.parentNode.replaceChild(pt,Ht)})},this._document=se}attachComponentPortal(y){const R=(y.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(y.component);let $;return y.viewContainerRef?($=y.viewContainerRef.createComponent(R,y.viewContainerRef.length,y.injector||y.viewContainerRef.injector),this.setDisposeFn(()=>$.destroy())):($=R.create(y.injector||this._defaultInjector||E.zs3.NULL),this._appRef.attachView($.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView($.hostView),$.destroy()})),this.outletElement.appendChild(this._getComponentRootNode($)),this._attachedPortal=y,$}attachTemplatePortal(y){let g=y.viewContainerRef,R=g.createEmbeddedView(y.templateRef,y.context,{injector:y.injector});return R.rootNodes.forEach($=>this.outletElement.appendChild($)),R.detectChanges(),this.setDisposeFn(()=>{let $=g.indexOf(R);-1!==$&&g.remove($)}),this._attachedPortal=y,R}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(y){return y.hostView.rootNodes[0]}}let P=(()=>{class O extends Ys{constructor(g,R,$){super(),this._componentFactoryResolver=g,this._viewContainerRef=R,this._isInitialized=!1,this.attached=new E.vpe,this.attachDomPortal=se=>{const Be=se.element,pt=this._document.createComment("dom-portal");se.setAttachedHost(this),Be.parentNode.insertBefore(pt,Be),this._getRootNode().appendChild(Be),this._attachedPortal=se,super.setDisposeFn(()=>{pt.parentNode&&pt.parentNode.replaceChild(Be,pt)})},this._document=$}get portal(){return this._attachedPortal}set portal(g){this.hasAttached()&&!g&&!this._isInitialized||(this.hasAttached()&&super.detach(),g&&super.attach(g),this._attachedPortal=g||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(g){g.setAttachedHost(this);const R=null!=g.viewContainerRef?g.viewContainerRef:this._viewContainerRef,se=(g.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(g.component),Be=R.createComponent(se,R.length,g.injector||R.injector);return R!==this._viewContainerRef&&this._getRootNode().appendChild(Be.hostView.rootNodes[0]),super.setDisposeFn(()=>Be.destroy()),this._attachedPortal=g,this._attachedRef=Be,this.attached.emit(Be),Be}attachTemplatePortal(g){g.setAttachedHost(this);const R=this._viewContainerRef.createEmbeddedView(g.templateRef,g.context,{injector:g.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=g,this._attachedRef=R,this.attached.emit(R),R}_getRootNode(){const g=this._viewContainerRef.element.nativeElement;return g.nodeType===g.ELEMENT_NODE?g:g.parentNode}}return O.\u0275fac=function(g){return new(g||O)(E.Y36(E._Vd),E.Y36(E.s_b),E.Y36(C.K0))},O.\u0275dir=E.lG2({type:O,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[E.qOj]}),O})(),K=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({}),O})();var Ce=U(6451);const ht=tt();class zt{constructor(y,g){this._viewportRuler=y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=g}attach(){}enable(){if(this._canBeEnabled()){const y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=y.style.left||"",this._previousHTMLStyles.top=y.style.top||"",y.style.left=Or(-this._previousScrollPosition.left),y.style.top=Or(-this._previousScrollPosition.top),y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const y=this._document.documentElement,R=y.style,$=this._document.body.style,se=R.scrollBehavior||"",Be=$.scrollBehavior||"";this._isEnabled=!1,R.left=this._previousHTMLStyles.left,R.top=this._previousHTMLStyles.top,y.classList.remove("cdk-global-scrollblock"),ht&&(R.scrollBehavior=$.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ht&&(R.scrollBehavior=se,$.scrollBehavior=Be)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const g=this._document.body,R=this._viewportRuler.getViewportSize();return g.scrollHeight>R.height||g.scrollWidth>R.width}}class Zt{constructor(y,g,R,$){this._scrollDispatcher=y,this._ngZone=g,this._viewportRuler=R,this._config=$,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(y){this._overlayRef=y}enable(){if(this._scrollSubscription)return;const y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=y.subscribe(()=>{const g=this._viewportRuler.getViewportScrollPosition().top;Math.abs(g-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ar{enable(){}disable(){}attach(){}}function Lr(O,y){return y.some(g=>O.bottom<g.top||O.top>g.bottom||O.right<g.left||O.left>g.right)}function es(O,y){return y.some(g=>O.top<g.top||O.bottom>g.bottom||O.left<g.left||O.right>g.right)}class Fs{constructor(y,g,R,$){this._scrollDispatcher=y,this._viewportRuler=g,this._ngZone=R,this._config=$,this._scrollSubscription=null}attach(y){this._overlayRef=y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const g=this._overlayRef.overlayElement.getBoundingClientRect(),{width:R,height:$}=this._viewportRuler.getViewportSize();Lr(g,[{width:R,height:$,bottom:$,right:R,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ts=(()=>{class O{constructor(g,R,$,se){this._scrollDispatcher=g,this._viewportRuler=R,this._ngZone=$,this.noop=()=>new ar,this.close=Be=>new Zt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Be),this.block=()=>new zt(this._viewportRuler,this._document),this.reposition=Be=>new Fs(this._scrollDispatcher,this._viewportRuler,this._ngZone,Be),this._document=se}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(su),E.LFG(Jo),E.LFG(E.R0b),E.LFG(C.K0))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();class Mo{constructor(y){if(this.scrollStrategy=new ar,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,y){const g=Object.keys(y);for(const R of g)void 0!==y[R]&&(this[R]=y[R])}}}class Gu{constructor(y,g){this.connectionPair=y,this.scrollableViewProperties=g}}let Ha=(()=>{class O{constructor(g){this._attachedOverlays=[],this._document=g}ngOnDestroy(){this.detach()}add(g){this.remove(g),this._attachedOverlays.push(g)}remove(g){const R=this._attachedOverlays.indexOf(g);R>-1&&this._attachedOverlays.splice(R,1),0===this._attachedOverlays.length&&this.detach()}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(C.K0))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Uh=(()=>{class O extends Ha{constructor(g,R){super(g),this._ngZone=R,this._keydownListener=$=>{const se=this._attachedOverlays;for(let Be=se.length-1;Be>-1;Be--)if(se[Be]._keydownEvents.observers.length>0){const pt=se[Be]._keydownEvents;this._ngZone?this._ngZone.run(()=>pt.next($)):pt.next($);break}}}add(g){super.add(g),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(C.K0),E.LFG(E.R0b,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),Es=(()=>{class O extends Ha{constructor(g,R,$){super(g),this._platform=R,this._ngZone=$,this._cursorStyleIsSet=!1,this._pointerDownListener=se=>{this._pointerDownEventTarget=yt(se)},this._clickListener=se=>{const Be=yt(se),pt="click"===se.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Be;this._pointerDownEventTarget=null;const Ht=this._attachedOverlays.slice();for(let an=Ht.length-1;an>-1;an--){const fn=Ht[an];if(fn._outsidePointerEvents.observers.length<1||!fn.hasAttached())continue;if(fn.overlayElement.contains(Be)||fn.overlayElement.contains(pt))break;const cr=fn._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>cr.next(se)):cr.next(se)}}}add(g){if(super.add(g),!this._isAttached){const R=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(R)):this._addEventListeners(R),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=R.style.cursor,R.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const g=this._document.body;g.removeEventListener("pointerdown",this._pointerDownListener,!0),g.removeEventListener("click",this._clickListener,!0),g.removeEventListener("auxclick",this._clickListener,!0),g.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(g.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(g){g.addEventListener("pointerdown",this._pointerDownListener,!0),g.addEventListener("click",this._clickListener,!0),g.addEventListener("auxclick",this._clickListener,!0),g.addEventListener("contextmenu",this._clickListener,!0)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(C.K0),E.LFG(J),E.LFG(E.R0b,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),$a=(()=>{class O{constructor(g,R){this._platform=R,this._document=g}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const g="cdk-overlay-container";if(this._platform.isBrowser||Ye()){const $=this._document.querySelectorAll(`.${g}[platform="server"], .${g}[platform="test"]`);for(let se=0;se<$.length;se++)$[se].remove()}const R=this._document.createElement("div");R.classList.add(g),Ye()?R.setAttribute("platform","test"):this._platform.isBrowser||R.setAttribute("platform","server"),this._document.body.appendChild(R),this._containerElement=R}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(C.K0),E.LFG(J))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();class Da{constructor(y,g,R,$,se,Be,pt,Ht,an,fn=!1){this._portalOutlet=y,this._host=g,this._pane=R,this._config=$,this._ngZone=se,this._keyboardDispatcher=Be,this._document=pt,this._location=Ht,this._outsideClickDispatcher=an,this._animationsDisabled=fn,this._backdropElement=null,this._backdropClick=new He.x,this._attachments=new He.x,this._detachments=new He.x,this._locationChanges=Yo.w0.EMPTY,this._backdropClickHandler=cr=>this._backdropClick.next(cr),this._backdropTransitionendHandler=cr=>{this._disposeBackdrop(cr.target)},this._keydownEvents=new He.x,this._outsidePointerEvents=new He.x,$.scrollStrategy&&(this._scrollStrategy=$.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=$.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(y){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const g=this._portalOutlet.attach(y);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ro.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof g?.onDestroy&&g.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),g}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),y}dispose(){const y=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,y&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(y){y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=y,this.hasAttached()&&(y.attach(this),this.updatePosition()))}updateSize(y){this._config={...this._config,...y},this._updateElementSize()}setDirection(y){this._config={...this._config,direction:y},this._updateElementDirection()}addPanelClass(y){this._pane&&this._toggleClasses(this._pane,y,!0)}removePanelClass(y){this._pane&&this._toggleClasses(this._pane,y,!1)}getDirection(){const y=this._config.direction;return y?"string"==typeof y?y:y.value:"ltr"}updateScrollStrategy(y){y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=y,this.hasAttached()&&(y.attach(this),y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const y=this._pane.style;y.width=Or(this._config.width),y.height=Or(this._config.height),y.minWidth=Or(this._config.minWidth),y.minHeight=Or(this._config.minHeight),y.maxWidth=Or(this._config.maxWidth),y.maxHeight=Or(this._config.maxHeight)}_togglePointerEvents(y){this._pane.style.pointerEvents=y?"":"none"}_attachBackdrop(){const y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(y)})}):this._backdropElement.classList.add(y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const y=this._backdropElement;if(y){if(this._animationsDisabled)return void this._disposeBackdrop(y);y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{y.addEventListener("transitionend",this._backdropTransitionendHandler)}),y.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(y)},500))}}_toggleClasses(y,g,R){const $=bo(g||[]).filter(se=>!!se);$.length&&(R?y.classList.add(...$):y.classList.remove(...$))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const y=this._ngZone.onStable.pipe(Ti((0,Ce.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),y.unsubscribe())})})}_disposeScrollStrategy(){const y=this._scrollStrategy;y&&(y.disable(),y.detach&&y.detach())}_disposeBackdrop(y){y&&(y.removeEventListener("click",this._backdropClickHandler),y.removeEventListener("transitionend",this._backdropTransitionendHandler),y.remove(),this._backdropElement===y&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const za="cdk-overlay-connected-position-bounding-box",xo=/([A-Za-z%]+)$/;class Dc{constructor(y,g,R,$,se){this._viewportRuler=g,this._document=R,this._platform=$,this._overlayContainer=se,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new He.x,this._resizeSubscription=Yo.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(y)}get positions(){return this._preferredPositions}attach(y){this._validatePositions(),y.hostElement.classList.add(za),this._overlayRef=y,this._boundingBox=y.hostElement,this._pane=y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const y=this._originRect,g=this._overlayRect,R=this._viewportRect,$=this._containerRect,se=[];let Be;for(let pt of this._preferredPositions){let Ht=this._getOriginPoint(y,$,pt),an=this._getOverlayPoint(Ht,g,pt),fn=this._getOverlayFit(an,g,R,pt);if(fn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(pt,Ht);this._canFitWithFlexibleDimensions(fn,an,R)?se.push({position:pt,origin:Ht,overlayRect:g,boundingBoxRect:this._calculateBoundingBoxRect(Ht,pt)}):(!Be||Be.overlayFit.visibleArea<fn.visibleArea)&&(Be={overlayFit:fn,overlayPoint:an,originPoint:Ht,position:pt,overlayRect:g})}if(se.length){let pt=null,Ht=-1;for(const an of se){const fn=an.boundingBoxRect.width*an.boundingBoxRect.height*(an.position.weight||1);fn>Ht&&(Ht=fn,pt=an)}return this._isPushed=!1,void this._applyPosition(pt.position,pt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Be.position,Be.originPoint);this._applyPosition(Be.position,Be.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ns(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(za),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const y=this._lastPosition;if(y){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const g=this._getOriginPoint(this._originRect,this._containerRect,y);this._applyPosition(y,g)}else this.apply()}withScrollableContainers(y){return this._scrollables=y,this}withPositions(y){return this._preferredPositions=y,-1===y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(y){return this._viewportMargin=y,this}withFlexibleDimensions(y=!0){return this._hasFlexibleDimensions=y,this}withGrowAfterOpen(y=!0){return this._growAfterOpen=y,this}withPush(y=!0){return this._canPush=y,this}withLockedPosition(y=!0){return this._positionLocked=y,this}setOrigin(y){return this._origin=y,this}withDefaultOffsetX(y){return this._offsetX=y,this}withDefaultOffsetY(y){return this._offsetY=y,this}withTransformOriginOn(y){return this._transformOriginSelector=y,this}_getOriginPoint(y,g,R){let $,se;if("center"==R.originX)$=y.left+y.width/2;else{const Be=this._isRtl()?y.right:y.left,pt=this._isRtl()?y.left:y.right;$="start"==R.originX?Be:pt}return g.left<0&&($-=g.left),se="center"==R.originY?y.top+y.height/2:"top"==R.originY?y.top:y.bottom,g.top<0&&(se-=g.top),{x:$,y:se}}_getOverlayPoint(y,g,R){let $,se;return $="center"==R.overlayX?-g.width/2:"start"===R.overlayX?this._isRtl()?-g.width:0:this._isRtl()?0:-g.width,se="center"==R.overlayY?-g.height/2:"top"==R.overlayY?0:-g.height,{x:y.x+$,y:y.y+se}}_getOverlayFit(y,g,R,$){const se=Wa(g);let{x:Be,y:pt}=y,Ht=this._getOffset($,"x"),an=this._getOffset($,"y");Ht&&(Be+=Ht),an&&(pt+=an);let wr=0-pt,br=pt+se.height-R.height,Fi=this._subtractOverflows(se.width,0-Be,Be+se.width-R.width),rs=this._subtractOverflows(se.height,wr,br),Zd=Fi*rs;return{visibleArea:Zd,isCompletelyWithinViewport:se.width*se.height===Zd,fitsInViewportVertically:rs===se.height,fitsInViewportHorizontally:Fi==se.width}}_canFitWithFlexibleDimensions(y,g,R){if(this._hasFlexibleDimensions){const $=R.bottom-g.y,se=R.right-g.x,Be=Ga(this._overlayRef.getConfig().minHeight),pt=Ga(this._overlayRef.getConfig().minWidth),an=y.fitsInViewportHorizontally||null!=pt&&pt<=se;return(y.fitsInViewportVertically||null!=Be&&Be<=$)&&an}return!1}_pushOverlayOnScreen(y,g,R){if(this._previousPushAmount&&this._positionLocked)return{x:y.x+this._previousPushAmount.x,y:y.y+this._previousPushAmount.y};const $=Wa(g),se=this._viewportRect,Be=Math.max(y.x+$.width-se.width,0),pt=Math.max(y.y+$.height-se.height,0),Ht=Math.max(se.top-R.top-y.y,0),an=Math.max(se.left-R.left-y.x,0);let fn=0,cr=0;return fn=$.width<=se.width?an||-Be:y.x<this._viewportMargin?se.left-R.left-y.x:0,cr=$.height<=se.height?Ht||-pt:y.y<this._viewportMargin?se.top-R.top-y.y:0,this._previousPushAmount={x:fn,y:cr},{x:y.x+fn,y:y.y+cr}}_applyPosition(y,g){if(this._setTransformOrigin(y),this._setOverlayElementStyles(g,y),this._setBoundingBoxStyles(g,y),y.panelClass&&this._addPanelClasses(y.panelClass),this._lastPosition=y,this._positionChanges.observers.length){const R=this._getScrollVisibility(),$=new Gu(y,R);this._positionChanges.next($)}this._isInitialRender=!1}_setTransformOrigin(y){if(!this._transformOriginSelector)return;const g=this._boundingBox.querySelectorAll(this._transformOriginSelector);let R,$=y.overlayY;R="center"===y.overlayX?"center":this._isRtl()?"start"===y.overlayX?"right":"left":"start"===y.overlayX?"left":"right";for(let se=0;se<g.length;se++)g[se].style.transformOrigin=`${R} ${$}`}_calculateBoundingBoxRect(y,g){const R=this._viewportRect,$=this._isRtl();let se,Be,pt,fn,cr,wr;if("top"===g.overlayY)Be=y.y,se=R.height-Be+this._viewportMargin;else if("bottom"===g.overlayY)pt=R.height-y.y+2*this._viewportMargin,se=R.height-pt+this._viewportMargin;else{const br=Math.min(R.bottom-y.y+R.top,y.y),Fi=this._lastBoundingBoxSize.height;se=2*br,Be=y.y-br,se>Fi&&!this._isInitialRender&&!this._growAfterOpen&&(Be=y.y-Fi/2)}if("end"===g.overlayX&&!$||"start"===g.overlayX&&$)wr=R.width-y.x+this._viewportMargin,fn=y.x-this._viewportMargin;else if("start"===g.overlayX&&!$||"end"===g.overlayX&&$)cr=y.x,fn=R.right-y.x;else{const br=Math.min(R.right-y.x+R.left,y.x),Fi=this._lastBoundingBoxSize.width;fn=2*br,cr=y.x-br,fn>Fi&&!this._isInitialRender&&!this._growAfterOpen&&(cr=y.x-Fi/2)}return{top:Be,left:cr,bottom:pt,right:wr,width:fn,height:se}}_setBoundingBoxStyles(y,g){const R=this._calculateBoundingBoxRect(y,g);!this._isInitialRender&&!this._growAfterOpen&&(R.height=Math.min(R.height,this._lastBoundingBoxSize.height),R.width=Math.min(R.width,this._lastBoundingBoxSize.width));const $={};if(this._hasExactPosition())$.top=$.left="0",$.bottom=$.right=$.maxHeight=$.maxWidth="",$.width=$.height="100%";else{const se=this._overlayRef.getConfig().maxHeight,Be=this._overlayRef.getConfig().maxWidth;$.height=Or(R.height),$.top=Or(R.top),$.bottom=Or(R.bottom),$.width=Or(R.width),$.left=Or(R.left),$.right=Or(R.right),$.alignItems="center"===g.overlayX?"center":"end"===g.overlayX?"flex-end":"flex-start",$.justifyContent="center"===g.overlayY?"center":"bottom"===g.overlayY?"flex-end":"flex-start",se&&($.maxHeight=Or(se)),Be&&($.maxWidth=Or(Be))}this._lastBoundingBoxSize=R,ns(this._boundingBox.style,$)}_resetBoundingBoxStyles(){ns(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ns(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(y,g){const R={},$=this._hasExactPosition(),se=this._hasFlexibleDimensions,Be=this._overlayRef.getConfig();if($){const fn=this._viewportRuler.getViewportScrollPosition();ns(R,this._getExactOverlayY(g,y,fn)),ns(R,this._getExactOverlayX(g,y,fn))}else R.position="static";let pt="",Ht=this._getOffset(g,"x"),an=this._getOffset(g,"y");Ht&&(pt+=`translateX(${Ht}px) `),an&&(pt+=`translateY(${an}px)`),R.transform=pt.trim(),Be.maxHeight&&($?R.maxHeight=Or(Be.maxHeight):se&&(R.maxHeight="")),Be.maxWidth&&($?R.maxWidth=Or(Be.maxWidth):se&&(R.maxWidth="")),ns(this._pane.style,R)}_getExactOverlayY(y,g,R){let $={top:"",bottom:""},se=this._getOverlayPoint(g,this._overlayRect,y);return this._isPushed&&(se=this._pushOverlayOnScreen(se,this._overlayRect,R)),"bottom"===y.overlayY?$.bottom=this._document.documentElement.clientHeight-(se.y+this._overlayRect.height)+"px":$.top=Or(se.y),$}_getExactOverlayX(y,g,R){let Be,$={left:"",right:""},se=this._getOverlayPoint(g,this._overlayRect,y);return this._isPushed&&(se=this._pushOverlayOnScreen(se,this._overlayRect,R)),Be=this._isRtl()?"end"===y.overlayX?"left":"right":"end"===y.overlayX?"right":"left","right"===Be?$.right=this._document.documentElement.clientWidth-(se.x+this._overlayRect.width)+"px":$.left=Or(se.x),$}_getScrollVisibility(){const y=this._getOriginRect(),g=this._pane.getBoundingClientRect(),R=this._scrollables.map($=>$.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:es(y,R),isOriginOutsideView:Lr(y,R),isOverlayClipped:es(g,R),isOverlayOutsideView:Lr(g,R)}}_subtractOverflows(y,...g){return g.reduce((R,$)=>R-Math.max($,0),y)}_getNarrowedViewportRect(){const y=this._document.documentElement.clientWidth,g=this._document.documentElement.clientHeight,R=this._viewportRuler.getViewportScrollPosition();return{top:R.top+this._viewportMargin,left:R.left+this._viewportMargin,right:R.left+y-this._viewportMargin,bottom:R.top+g-this._viewportMargin,width:y-2*this._viewportMargin,height:g-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(y,g){return"x"===g?y.offsetX??this._offsetX:y.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(y){this._pane&&bo(y).forEach(g=>{""!==g&&-1===this._appliedPanelClasses.indexOf(g)&&(this._appliedPanelClasses.push(g),this._pane.classList.add(g))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(y=>{this._pane.classList.remove(y)}),this._appliedPanelClasses=[])}_getOriginRect(){const y=this._origin;if(y instanceof E.SBq)return y.nativeElement.getBoundingClientRect();if(y instanceof Element)return y.getBoundingClientRect();const g=y.width||0,R=y.height||0;return{top:y.y,bottom:y.y+R,left:y.x,right:y.x+g,height:R,width:g}}}function ns(O,y){for(let g in y)y.hasOwnProperty(g)&&(O[g]=y[g]);return O}function Ga(O){if("number"!=typeof O&&null!=O){const[y,g]=O.split(xo);return g&&"px"!==g?null:parseFloat(y)}return O||null}function Wa(O){return{top:Math.floor(O.top),right:Math.floor(O.right),bottom:Math.floor(O.bottom),left:Math.floor(O.left),width:Math.floor(O.width),height:Math.floor(O.height)}}const Ic="cdk-global-overlay-wrapper";class Tc{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(y){const g=y.getConfig();this._overlayRef=y,this._width&&!g.width&&y.updateSize({width:this._width}),this._height&&!g.height&&y.updateSize({height:this._height}),y.hostElement.classList.add(Ic),this._isDisposed=!1}top(y=""){return this._bottomOffset="",this._topOffset=y,this._alignItems="flex-start",this}left(y=""){return this._xOffset=y,this._xPosition="left",this}bottom(y=""){return this._topOffset="",this._bottomOffset=y,this._alignItems="flex-end",this}right(y=""){return this._xOffset=y,this._xPosition="right",this}start(y=""){return this._xOffset=y,this._xPosition="start",this}end(y=""){return this._xOffset=y,this._xPosition="end",this}width(y=""){return this._overlayRef?this._overlayRef.updateSize({width:y}):this._width=y,this}height(y=""){return this._overlayRef?this._overlayRef.updateSize({height:y}):this._height=y,this}centerHorizontally(y=""){return this.left(y),this._xPosition="center",this}centerVertically(y=""){return this.top(y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const y=this._overlayRef.overlayElement.style,g=this._overlayRef.hostElement.style,R=this._overlayRef.getConfig(),{width:$,height:se,maxWidth:Be,maxHeight:pt}=R,Ht=!("100%"!==$&&"100vw"!==$||Be&&"100%"!==Be&&"100vw"!==Be),an=!("100%"!==se&&"100vh"!==se||pt&&"100%"!==pt&&"100vh"!==pt),fn=this._xPosition,cr=this._xOffset,wr="rtl"===this._overlayRef.getConfig().direction;let br="",Fi="",rs="";Ht?rs="flex-start":"center"===fn?(rs="center",wr?Fi=cr:br=cr):wr?"left"===fn||"end"===fn?(rs="flex-end",br=cr):("right"===fn||"start"===fn)&&(rs="flex-start",Fi=cr):"left"===fn||"start"===fn?(rs="flex-start",br=cr):("right"===fn||"end"===fn)&&(rs="flex-end",Fi=cr),y.position=this._cssPosition,y.marginLeft=Ht?"0":br,y.marginTop=an?"0":this._topOffset,y.marginBottom=this._bottomOffset,y.marginRight=Ht?"0":Fi,g.justifyContent=rs,g.alignItems=an?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const y=this._overlayRef.overlayElement.style,g=this._overlayRef.hostElement,R=g.style;g.classList.remove(Ic),R.justifyContent=R.alignItems=y.marginTop=y.marginBottom=y.marginLeft=y.marginRight=y.position="",this._overlayRef=null,this._isDisposed=!0}}let k=(()=>{class O{constructor(g,R,$,se){this._viewportRuler=g,this._document=R,this._platform=$,this._overlayContainer=se}global(){return new Tc}flexibleConnectedTo(g){return new Dc(g,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(Jo),E.LFG(C.K0),E.LFG(J),E.LFG($a))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),V=0,W=(()=>{class O{constructor(g,R,$,se,Be,pt,Ht,an,fn,cr,wr,br){this.scrollStrategies=g,this._overlayContainer=R,this._componentFactoryResolver=$,this._positionBuilder=se,this._keyboardDispatcher=Be,this._injector=pt,this._ngZone=Ht,this._document=an,this._directionality=fn,this._location=cr,this._outsideClickDispatcher=wr,this._animationsModuleType=br}create(g){const R=this._createHostElement(),$=this._createPaneElement(R),se=this._createPortalOutlet($),Be=new Mo(g);return Be.direction=Be.direction||this._directionality.value,new Da(se,R,$,Be,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(g){const R=this._document.createElement("div");return R.id="cdk-overlay-"+V++,R.classList.add("cdk-overlay-pane"),g.appendChild(R),R}_createHostElement(){const g=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(g),g}_createPortalOutlet(g){return this._appRef||(this._appRef=this._injector.get(E.z2F)),new Ql(g,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(ts),E.LFG($a),E.LFG(E._Vd),E.LFG(k),E.LFG(Uh),E.LFG(E.zs3),E.LFG(E.R0b),E.LFG(C.K0),E.LFG(ii),E.LFG(C.Ye),E.LFG(Es),E.LFG(E.QbO,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac}),O})();const bn={provide:new E.OlP("cdk-connected-overlay-scroll-strategy"),deps:[W],useFactory:function Yt(O){return()=>O.scrollStrategies.reposition()}};let kn=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({providers:[W,bn],imports:[Xi,K,wc,wc]}),O})();var En=U(9770);function hi(O,y){}class si{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let ea=(()=>{class O extends Ys{constructor(g,R,$,se,Be,pt,Ht,an){super(),this._elementRef=g,this._focusTrapFactory=R,this._config=se,this._interactivityChecker=Be,this._ngZone=pt,this._overlayRef=Ht,this._focusMonitor=an,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=fn=>{this._portalOutlet.hasAttached();const cr=this._portalOutlet.attachDomPortal(fn);return this._contentAttached(),cr},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=$}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(g){this._portalOutlet.hasAttached();const R=this._portalOutlet.attachComponentPortal(g);return this._contentAttached(),R}attachTemplatePortal(g){this._portalOutlet.hasAttached();const R=this._portalOutlet.attachTemplatePortal(g);return this._contentAttached(),R}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(g,R){this._interactivityChecker.isFocusable(g)||(g.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const $=()=>{g.removeEventListener("blur",$),g.removeEventListener("mousedown",$),g.removeAttribute("tabindex")};g.addEventListener("blur",$),g.addEventListener("mousedown",$)})),g.focus(R)}_focusByCssSelector(g,R){let $=this._elementRef.nativeElement.querySelector(g);$&&this._forceFocus($,R)}_trapFocus(){const g=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||g.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(R=>{R||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const g=this._config.restoreFocus;let R=null;if("string"==typeof g?R=this._document.querySelector(g):"boolean"==typeof g?R=g?this._elementFocusedBeforeDialogWasOpened:null:g&&(R=g),this._config.restoreFocus&&R&&"function"==typeof R.focus){const $=st(),se=this._elementRef.nativeElement;(!$||$===this._document.body||$===se||se.contains($))&&(this._focusMonitor?(this._focusMonitor.focusVia(R,this._closeInteractionType),this._closeInteractionType=null):R.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const g=this._elementRef.nativeElement,R=st();return g===R||g.contains(R)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=st())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return O.\u0275fac=function(g){return new(g||O)(E.Y36(E.SBq),E.Y36(qs),E.Y36(C.K0,8),E.Y36(si),E.Y36(ds),E.Y36(E.R0b),E.Y36(Da),E.Y36(Wi))},O.\u0275cmp=E.Xpm({type:O,selectors:[["cdk-dialog-container"]],viewQuery:function(g,R){if(1&g&&E.Gf(P,7),2&g){let $;E.iGM($=E.CRH())&&(R._portalOutlet=$.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(g,R){2&g&&E.uIk("id",R._config.id||null)("role",R._config.role)("aria-modal",R._config.ariaModal)("aria-labelledby",R._config.ariaLabel?null:R._ariaLabelledBy)("aria-label",R._config.ariaLabel)("aria-describedby",R._config.ariaDescribedBy||null)},features:[E.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(g,R){1&g&&E.YNc(0,hi,0,0,"ng-template",0)},dependencies:[P],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),O})();class Qs{constructor(y,g){this.overlayRef=y,this.config=g,this.closed=new He.x,this.disableClose=g.disableClose,this.backdropClick=y.backdropClick(),this.keydownEvents=y.keydownEvents(),this.outsidePointerEvents=y.outsidePointerEvents(),this.id=g.id,this.keydownEvents.subscribe(R=>{27===R.keyCode&&!this.disableClose&&!ll(R)&&(R.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(y,g){if(this.containerInstance){const R=this.closed;this.containerInstance._closeInteractionType=g?.focusOrigin||"program",this.overlayRef.dispose(),R.next(y),R.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(y="",g=""){return this.overlayRef.updateSize({width:y,height:g}),this}addPanelClass(y){return this.overlayRef.addPanelClass(y),this}removePanelClass(y){return this.overlayRef.removePanelClass(y),this}}const Ka=new E.OlP("DialogScrollStrategy"),Sc=new E.OlP("DialogData"),Ac=new E.OlP("DefaultDialogConfig"),Xl={provide:Ka,deps:[W],useFactory:function Ia(O){return()=>O.scrollStrategies.block()}};let Ku=0,Vh=(()=>{class O{constructor(g,R,$,se,Be,pt){this._overlay=g,this._injector=R,this._defaultOptions=$,this._parentDialog=se,this._overlayContainer=Be,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new He.x,this._afterOpenedAtThisLevel=new He.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,En.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,da.O)(void 0))),this._scrollStrategy=pt}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(g,R){(R={...this._defaultOptions||new si,...R}).id=R.id||"cdk-dialog-"+Ku++,R.id&&this.getDialogById(R.id);const se=this._getOverlayConfig(R),Be=this._overlay.create(se),pt=new Qs(Be,R),Ht=this._attachContainer(Be,pt,R);return pt.containerInstance=Ht,this._attachDialogContent(g,pt,Ht,R),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(pt),pt.closed.subscribe(()=>this._removeOpenDialog(pt,!0)),this.afterOpened.next(pt),pt}closeAll(){jh(this.openDialogs,g=>g.close())}getDialogById(g){return this.openDialogs.find(R=>R.id===g)}ngOnDestroy(){jh(this._openDialogsAtThisLevel,g=>{!1===g.config.closeOnDestroy&&this._removeOpenDialog(g,!1)}),jh(this._openDialogsAtThisLevel,g=>g.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(g){const R=new Mo({positionStrategy:g.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:g.scrollStrategy||this._scrollStrategy(),panelClass:g.panelClass,hasBackdrop:g.hasBackdrop,direction:g.direction,minWidth:g.minWidth,minHeight:g.minHeight,maxWidth:g.maxWidth,maxHeight:g.maxHeight,width:g.width,height:g.height,disposeOnNavigation:g.closeOnNavigation});return g.backdropClass&&(R.backdropClass=g.backdropClass),R}_attachContainer(g,R,$){const se=$.injector??$.viewContainerRef?.injector,Be=[{provide:si,useValue:$},{provide:Qs,useValue:R},{provide:Da,useValue:g}];let pt;$.container?"function"==typeof $.container?pt=$.container:(pt=$.container.type,Be.push(...$.container.providers($))):pt=ea;const Ht=new Yl(pt,$.viewContainerRef,E.zs3.create({parent:se||this._injector,providers:Be}),$.componentFactoryResolver);return g.attach(Ht).instance}_attachDialogContent(g,R,$,se){const Be=this._createInjector(se,R,$);if(g instanceof E.Rgc){let pt={$implicit:se.data,dialogRef:R};se.templateContext&&(pt={...pt,..."function"==typeof se.templateContext?se.templateContext():se.templateContext}),$.attachTemplatePortal(new Zr(g,null,pt,Be))}else{const pt=$.attachComponentPortal(new Yl(g,se.viewContainerRef,Be,se.componentFactoryResolver));R.componentInstance=pt.instance}}_createInjector(g,R,$){const se=g&&g.viewContainerRef&&g.viewContainerRef.injector,Be=[{provide:Sc,useValue:g.data},{provide:Qs,useValue:R}];return g.providers&&("function"==typeof g.providers?Be.push(...g.providers(R,g,$)):Be.push(...g.providers)),g.direction&&(!se||!se.get(ii,null,E.XFs.Optional))&&Be.push({provide:ii,useValue:{value:g.direction,change:(0,Dt.of)()}}),E.zs3.create({parent:g.injector||se||this._injector,providers:Be})}_removeOpenDialog(g,R){const $=this.openDialogs.indexOf(g);$>-1&&(this.openDialogs.splice($,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((se,Be)=>{se?Be.setAttribute("aria-hidden",se):Be.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),R&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const g=this._overlayContainer.getContainerElement();if(g.parentElement){const R=g.parentElement.children;for(let $=R.length-1;$>-1;$--){const se=R[$];se!==g&&"SCRIPT"!==se.nodeName&&"STYLE"!==se.nodeName&&!se.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(se,se.getAttribute("aria-hidden")),se.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const g=this._parentDialog;return g?g._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(W),E.LFG(E.zs3),E.LFG(Ac,8),E.LFG(O,12),E.LFG($a),E.LFG(Ka))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac}),O})();function jh(O,y){let g=O.length;for(;g--;)y(O[g])}let ap=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({providers:[Vh,Xl],imports:[kn,K,$l,K]}),O})();const Cl=new E.OlP("mat-sanity-checks",{providedIn:"root",factory:function Qu(){return!0}});let Mc=(()=>{class O{constructor(g,R,$){this._sanityChecks=R,this._document=$,this._hasDoneGlobalChecks=!1,g._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(g){return!Ye()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[g])}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(Hl),E.LFG(Cl,8),E.LFG(C.K0))},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({imports:[Xi,Xi]}),O})();var Li=U(7340);function em(O,y){}const Pc={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},tm={dialogContainer:(0,Li.X$)("dialogContainer",[(0,Li.SB)("void, exit",(0,Li.oB)({opacity:0,transform:"scale(0.7)"})),(0,Li.SB)("enter",(0,Li.oB)({transform:"none"})),(0,Li.eR)("* => enter",(0,Li.ru)([(0,Li.jt)("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",(0,Li.oB)({transform:"none",opacity:1})),(0,Li.IO)("@*",(0,Li.pV)(),{optional:!0})]),Pc),(0,Li.eR)("* => void, * => exit",(0,Li.ru)([(0,Li.jt)("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Li.oB)({opacity:0})),(0,Li.IO)("@*",(0,Li.pV)(),{optional:!0})]),Pc)])};class oi{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Pc.params.enterAnimationDuration,this.exitAnimationDuration=Pc.params.exitAnimationDuration}}let fp=(()=>{class O extends ea{constructor(g,R,$,se,Be,pt,Ht,an){super(g,R,$,se,Be,pt,Ht,an),this._animationStateChanged=new E.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(g){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:g})}}return O.\u0275fac=function(g){return new(g||O)(E.Y36(E.SBq),E.Y36(qs),E.Y36(C.K0,8),E.Y36(oi),E.Y36(ds),E.Y36(E.R0b),E.Y36(Da),E.Y36(Wi))},O.\u0275cmp=E.Xpm({type:O,selectors:[["ng-component"]],features:[E.qOj],decls:0,vars:0,template:function(g,R){},encapsulation:2}),O})(),pp=(()=>{class O extends fp{constructor(g,R,$,se,Be,pt,Ht,an,fn){super(g,R,$,se,Be,pt,Ht,fn),this._changeDetectorRef=an,this._state="enter"}_onAnimationDone({toState:g,totalTime:R}){"enter"===g?this._openAnimationDone(R):"exit"===g&&this._animationStateChanged.next({state:"closed",totalTime:R})}_onAnimationStart({toState:g,totalTime:R}){"enter"===g?this._animationStateChanged.next({state:"opening",totalTime:R}):("exit"===g||"void"===g)&&this._animationStateChanged.next({state:"closing",totalTime:R})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Pc.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Pc.params.exitAnimationDuration}}}}return O.\u0275fac=function(g){return new(g||O)(E.Y36(E.SBq),E.Y36(qs),E.Y36(C.K0,8),E.Y36(oi),E.Y36(ds),E.Y36(E.R0b),E.Y36(Da),E.Y36(E.sBO),E.Y36(Wi))},O.\u0275cmp=E.Xpm({type:O,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(g,R){1&g&&E.WFA("@dialogContainer.start",function(se){return R._onAnimationStart(se)})("@dialogContainer.done",function(se){return R._onAnimationDone(se)}),2&g&&(E.Ikx("id",R._config.id),E.uIk("aria-modal",R._config.ariaModal)("role",R._config.role)("aria-labelledby",R._config.ariaLabel?null:R._ariaLabelledBy)("aria-label",R._config.ariaLabel)("aria-describedby",R._config.ariaDescribedBy||null),E.d8E("@dialogContainer",R._getAnimationState()))},features:[E.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(g,R){1&g&&E.YNc(0,em,0,0,"ng-template",0)},dependencies:[P],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[tm.dialogContainer]}}),O})();class Wd{constructor(y,g,R){this._ref=y,this._containerInstance=R,this._afterOpened=new He.x,this._beforeClosed=new He.x,this._state=0,this.disableClose=g.disableClose,this.id=y.id,R._animationStateChanged.pipe((0,ti.h)($=>"opened"===$.state),(0,ro.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),R._animationStateChanged.pipe((0,ti.h)($=>"closed"===$.state),(0,ro.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),y.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Ce.T)(this.backdropClick(),this.keydownEvents().pipe((0,ti.h)($=>27===$.keyCode&&!this.disableClose&&!ll($)))).subscribe($=>{this.disableClose||($.preventDefault(),function nm(O,y,g){O._closeInteractionType=y,O.close(g)}(this,"keydown"===$.type?"keyboard":"mouse"))})}close(y){this._result=y,this._containerInstance._animationStateChanged.pipe((0,ti.h)(g=>"closing"===g.state),(0,ro.q)(1)).subscribe(g=>{this._beforeClosed.next(y),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),g.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(y){let g=this._ref.config.positionStrategy;return y&&(y.left||y.right)?y.left?g.left(y.left):g.right(y.right):g.centerHorizontally(),y&&(y.top||y.bottom)?y.top?g.top(y.top):g.bottom(y.bottom):g.centerVertically(),this._ref.updatePosition(),this}updateSize(y="",g=""){return this._ref.updateSize(y,g),this}addPanelClass(y){return this._ref.addPanelClass(y),this}removePanelClass(y){return this._ref.removePanelClass(y),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const vy=new E.OlP("MatDialogData"),gp=new E.OlP("mat-dialog-default-options"),mp=new E.OlP("mat-dialog-scroll-strategy"),go={provide:mp,deps:[W],useFactory:function Ey(O){return()=>O.scrollStrategies.block()}};let Zh=0,Kd=(()=>{class O{constructor(g,R,$,se,Be,pt,Ht,an,fn,cr){this._overlay=g,this._defaultOptions=$,this._parentDialog=se,this._dialogRefConstructor=Ht,this._dialogContainerType=an,this._dialogDataToken=fn,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new He.x,this._afterOpenedAtThisLevel=new He.x,this._idPrefix="mat-dialog-",this.afterAllClosed=(0,En.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,da.O)(void 0))),this._scrollStrategy=pt,this._dialog=R.get(Vh)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const g=this._parentDialog;return g?g._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(g,R){let $;(R={...this._defaultOptions||new oi,...R}).id=R.id||`${this._idPrefix}${Zh++}`,R.scrollStrategy=R.scrollStrategy||this._scrollStrategy();const se=this._dialog.open(g,{...R,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:oi,useValue:R},{provide:si,useValue:R}]},templateContext:()=>({dialogRef:$}),providers:(Be,pt,Ht)=>($=new this._dialogRefConstructor(Be,R,Ht),$.updatePosition(R?.position),[{provide:this._dialogContainerType,useValue:Ht},{provide:this._dialogDataToken,useValue:pt.data},{provide:this._dialogRefConstructor,useValue:$}])});return $.componentInstance=se.componentInstance,this.openDialogs.push($),this.afterOpened.next($),$.afterClosed().subscribe(()=>{const Be=this.openDialogs.indexOf($);Be>-1&&(this.openDialogs.splice(Be,1),this.openDialogs.length||this._getAfterAllClosed().next())}),$}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(g){return this.openDialogs.find(R=>R.id===g)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(g){let R=g.length;for(;R--;)g[R].close()}}return O.\u0275fac=function(g){E.$Z()},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac}),O})(),Oc=(()=>{class O extends Kd{constructor(g,R,$,se,Be,pt,Ht,an){super(g,R,se,pt,Ht,Be,Wd,pp,vy,an)}}return O.\u0275fac=function(g){return new(g||O)(E.LFG(W),E.LFG(E.zs3),E.LFG(C.Ye,8),E.LFG(gp,8),E.LFG(mp),E.LFG(O,12),E.LFG($a),E.LFG(E.QbO,8))},O.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac}),O})(),qd=(()=>{class O{}return O.\u0275fac=function(g){return new(g||O)},O.\u0275mod=E.oAB({type:O}),O.\u0275inj=E.cJS({providers:[Oc,go],imports:[ap,kn,K,Mc,Mc]}),O})()},1481:(Vt,We,U)=>{U.d(We,{Dx:()=>we,b2:()=>Tr,q6:()=>jt,se:()=>ze});var C=U(6895),E=U(4650);class z extends C.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class J extends z{static makeCurrent(){(0,C.HT)(new J)}onAndCancel(ye,he,Le){return ye.addEventListener(he,Le,!1),()=>{ye.removeEventListener(he,Le,!1)}}dispatchEvent(ye,he){ye.dispatchEvent(he)}remove(ye){ye.parentNode&&ye.parentNode.removeChild(ye)}createElement(ye,he){return(he=he||this.getDefaultDocument()).createElement(ye)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ye){return ye.nodeType===Node.ELEMENT_NODE}isShadowRoot(ye){return ye instanceof DocumentFragment}getGlobalEventTarget(ye,he){return"window"===he?window:"document"===he?ye:"body"===he?ye.body:null}getBaseHref(ye){const he=function Te(){return be=be||document.querySelector("base"),be?be.getAttribute("href"):null}();return null==he?null:function Re(ke){Se=Se||document.createElement("a"),Se.setAttribute("href",ke);const ye=Se.pathname;return"/"===ye.charAt(0)?ye:`/${ye}`}(he)}resetBaseElement(){be=null}getUserAgent(){return window.navigator.userAgent}getCookie(ye){return(0,C.Mx)(document.cookie,ye)}}let Se,be=null;const Pe=new E.OlP("TRANSITION_ID"),re=[{provide:E.ip1,useFactory:function oe(ke,ye,he){return()=>{he.get(E.CZH).donePromise.then(()=>{const Le=(0,C.q)(),wt=ye.querySelectorAll(`style[ng-transition="${ke}"]`);for(let qt=0;qt<wt.length;qt++)Le.remove(wt[qt])})}},deps:[Pe,C.K0,E.zs3],multi:!0}];let nt=(()=>{class ke{build(){return new XMLHttpRequest}}return ke.\u0275fac=function(he){return new(he||ke)},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const tt=new E.OlP("EventManagerPlugins");let Xe=(()=>{class ke{constructor(he,Le){this._zone=Le,this._eventNameToPlugin=new Map,he.forEach(wt=>wt.manager=this),this._plugins=he.slice().reverse()}addEventListener(he,Le,wt){return this._findPluginFor(Le).addEventListener(he,Le,wt)}addGlobalEventListener(he,Le,wt){return this._findPluginFor(Le).addGlobalEventListener(he,Le,wt)}getZone(){return this._zone}_findPluginFor(he){const Le=this._eventNameToPlugin.get(he);if(Le)return Le;const wt=this._plugins;for(let qt=0;qt<wt.length;qt++){const Un=wt[qt];if(Un.supports(he))return this._eventNameToPlugin.set(he,Un),Un}throw new Error(`No event manager plugin found for event ${he}`)}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(tt),E.LFG(E.R0b))},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})();class at{constructor(ye){this._doc=ye}addGlobalEventListener(ye,he,Le){const wt=(0,C.q)().getGlobalEventTarget(this._doc,ye);if(!wt)throw new Error(`Unsupported event target ${wt} for event ${he}`);return this.addEventListener(wt,he,Le)}}let Fe=(()=>{class ke{constructor(){this._stylesSet=new Set}addStyles(he){const Le=new Set;he.forEach(wt=>{this._stylesSet.has(wt)||(this._stylesSet.add(wt),Le.add(wt))}),this.onStylesAdded(Le)}onStylesAdded(he){}getAllStyles(){return Array.from(this._stylesSet)}}return ke.\u0275fac=function(he){return new(he||ke)},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),Ee=(()=>{class ke extends Fe{constructor(he){super(),this._doc=he,this._hostNodes=new Map,this._hostNodes.set(he.head,[])}_addStylesToHost(he,Le,wt){he.forEach(qt=>{const Un=this._doc.createElement("style");Un.textContent=qt,wt.push(Le.appendChild(Un))})}addHost(he){const Le=[];this._addStylesToHost(this._stylesSet,he,Le),this._hostNodes.set(he,Le)}removeHost(he){const Le=this._hostNodes.get(he);Le&&Le.forEach(st),this._hostNodes.delete(he)}onStylesAdded(he){this._hostNodes.forEach((Le,wt)=>{this._addStylesToHost(he,wt,Le)})}ngOnDestroy(){this._hostNodes.forEach(he=>he.forEach(st))}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(C.K0))},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})();function st(ke){(0,C.q)().remove(ke)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ye=/%COMP%/g;function xe(ke,ye,he){for(let Le=0;Le<ye.length;Le++){let wt=ye[Le];Array.isArray(wt)?xe(ke,wt,he):(wt=wt.replace(Ye,ke),he.push(wt))}return he}function Ne(ke){return ye=>{if("__ngUnwrap__"===ye)return ke;!1===ke(ye)&&(ye.preventDefault(),ye.returnValue=!1)}}let ze=(()=>{class ke{constructor(he,Le,wt){this.eventManager=he,this.sharedStylesHost=Le,this.appId=wt,this.rendererByCompId=new Map,this.defaultRenderer=new Tt(he)}createRenderer(he,Le){if(!he||!Le)return this.defaultRenderer;switch(Le.encapsulation){case E.ifc.Emulated:{let wt=this.rendererByCompId.get(Le.id);return wt||(wt=new ln(this.eventManager,this.sharedStylesHost,Le,this.appId),this.rendererByCompId.set(Le.id,wt)),wt.applyToHost(he),wt}case 1:case E.ifc.ShadowDom:return new Pt(this.eventManager,this.sharedStylesHost,he,Le);default:if(!this.rendererByCompId.has(Le.id)){const wt=xe(Le.id,Le.styles,[]);this.sharedStylesHost.addStyles(wt),this.rendererByCompId.set(Le.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(Xe),E.LFG(Ee),E.LFG(E.AFp))},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})();class Tt{constructor(ye){this.eventManager=ye,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ye,he){return he?document.createElementNS(yt[he]||he,ye):document.createElement(ye)}createComment(ye){return document.createComment(ye)}createText(ye){return document.createTextNode(ye)}appendChild(ye,he){(Dn(ye)?ye.content:ye).appendChild(he)}insertBefore(ye,he,Le){ye&&(Dn(ye)?ye.content:ye).insertBefore(he,Le)}removeChild(ye,he){ye&&ye.removeChild(he)}selectRootElement(ye,he){let Le="string"==typeof ye?document.querySelector(ye):ye;if(!Le)throw new Error(`The selector "${ye}" did not match any elements`);return he||(Le.textContent=""),Le}parentNode(ye){return ye.parentNode}nextSibling(ye){return ye.nextSibling}setAttribute(ye,he,Le,wt){if(wt){he=wt+":"+he;const qt=yt[wt];qt?ye.setAttributeNS(qt,he,Le):ye.setAttribute(he,Le)}else ye.setAttribute(he,Le)}removeAttribute(ye,he,Le){if(Le){const wt=yt[Le];wt?ye.removeAttributeNS(wt,he):ye.removeAttribute(`${Le}:${he}`)}else ye.removeAttribute(he)}addClass(ye,he){ye.classList.add(he)}removeClass(ye,he){ye.classList.remove(he)}setStyle(ye,he,Le,wt){wt&(E.JOm.DashCase|E.JOm.Important)?ye.style.setProperty(he,Le,wt&E.JOm.Important?"important":""):ye.style[he]=Le}removeStyle(ye,he,Le){Le&E.JOm.DashCase?ye.style.removeProperty(he):ye.style[he]=""}setProperty(ye,he,Le){ye[he]=Le}setValue(ye,he){ye.nodeValue=he}listen(ye,he,Le){return"string"==typeof ye?this.eventManager.addGlobalEventListener(ye,he,Ne(Le)):this.eventManager.addEventListener(ye,he,Ne(Le))}}function Dn(ke){return"TEMPLATE"===ke.tagName&&void 0!==ke.content}class ln extends Tt{constructor(ye,he,Le,wt){super(ye),this.component=Le;const qt=xe(wt+"-"+Le.id,Le.styles,[]);he.addStyles(qt),this.contentAttr=function Ke(ke){return"_ngcontent-%COMP%".replace(Ye,ke)}(wt+"-"+Le.id),this.hostAttr=function je(ke){return"_nghost-%COMP%".replace(Ye,ke)}(wt+"-"+Le.id)}applyToHost(ye){super.setAttribute(ye,this.hostAttr,"")}createElement(ye,he){const Le=super.createElement(ye,he);return super.setAttribute(Le,this.contentAttr,""),Le}}class Pt extends Tt{constructor(ye,he,Le,wt){super(ye),this.sharedStylesHost=he,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const qt=xe(wt.id,wt.styles,[]);for(let Un=0;Un<qt.length;Un++){const Fr=document.createElement("style");Fr.textContent=qt[Un],this.shadowRoot.appendChild(Fr)}}nodeOrShadowRoot(ye){return ye===this.hostEl?this.shadowRoot:ye}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ye,he){return super.appendChild(this.nodeOrShadowRoot(ye),he)}insertBefore(ye,he,Le){return super.insertBefore(this.nodeOrShadowRoot(ye),he,Le)}removeChild(ye,he){return super.removeChild(this.nodeOrShadowRoot(ye),he)}parentNode(ye){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ye)))}}let An=(()=>{class ke extends at{constructor(he){super(he)}supports(he){return!0}addEventListener(he,Le,wt){return he.addEventListener(Le,wt,!1),()=>this.removeEventListener(he,Le,wt)}removeEventListener(he,Le,wt){return he.removeEventListener(Le,wt)}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(C.K0))},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const In=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},le={alt:ke=>ke.altKey,control:ke=>ke.ctrlKey,meta:ke=>ke.metaKey,shift:ke=>ke.shiftKey};let gt=(()=>{class ke extends at{constructor(he){super(he)}supports(he){return null!=ke.parseEventName(he)}addEventListener(he,Le,wt){const qt=ke.parseEventName(Le),Un=ke.eventCallback(qt.fullKey,wt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,C.q)().onAndCancel(he,qt.domEventName,Un))}static parseEventName(he){const Le=he.toLowerCase().split("."),wt=Le.shift();if(0===Le.length||"keydown"!==wt&&"keyup"!==wt)return null;const qt=ke._normalizeKey(Le.pop());let Un="";if(In.forEach(dn=>{const lr=Le.indexOf(dn);lr>-1&&(Le.splice(lr,1),Un+=dn+".")}),Un+=qt,0!=Le.length||0===qt.length)return null;const Fr={};return Fr.domEventName=wt,Fr.fullKey=Un,Fr}static getEventFullKey(he){let Le="",wt=function Bt(ke){let ye=ke.key;if(null==ye){if(ye=ke.keyIdentifier,null==ye)return"Unidentified";ye.startsWith("U+")&&(ye=String.fromCharCode(parseInt(ye.substring(2),16)),3===ke.location&&Lt.hasOwnProperty(ye)&&(ye=Lt[ye]))}return ut[ye]||ye}(he);return wt=wt.toLowerCase()," "===wt?wt="space":"."===wt&&(wt="dot"),In.forEach(qt=>{qt!=wt&&(0,le[qt])(he)&&(Le+=qt+".")}),Le+=wt,Le}static eventCallback(he,Le,wt){return qt=>{ke.getEventFullKey(qt)===he&&wt.runGuarded(()=>Le(qt))}}static _normalizeKey(he){return"esc"===he?"escape":he}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(C.K0))},ke.\u0275prov=E.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const jt=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:C.bD},{provide:E.g9A,useValue:function ir(){J.makeCurrent()},multi:!0},{provide:C.K0,useFactory:function $n(){return(0,E.RDi)(document),document},deps:[]}]),xn=new E.OlP(""),Ir=[{provide:E.rWj,useClass:class me{addToWindow(ye){E.dqk.getAngularTestability=(Le,wt=!0)=>{const qt=ye.findTestabilityInTree(Le,wt);if(null==qt)throw new Error("Could not find testability for element.");return qt},E.dqk.getAllAngularTestabilities=()=>ye.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>ye.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(Le=>{const wt=E.dqk.getAllAngularTestabilities();let qt=wt.length,Un=!1;const Fr=function(dn){Un=Un||dn,qt--,0==qt&&Le(Un)};wt.forEach(function(dn){dn.whenStable(Fr)})})}findTestabilityInTree(ye,he,Le){return null==he?null:ye.getTestability(he)??(Le?(0,C.q)().isShadowRoot(he)?this.findTestabilityInTree(ye,he.host,!0):this.findTestabilityInTree(ye,he.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],Wn=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function sr(){return new E.qLn},deps:[]},{provide:tt,useClass:An,multi:!0,deps:[C.K0,E.R0b,E.Lbi]},{provide:tt,useClass:gt,multi:!0,deps:[C.K0]},{provide:ze,useClass:ze,deps:[Xe,Ee,E.AFp]},{provide:E.FYo,useExisting:ze},{provide:Fe,useExisting:Ee},{provide:Ee,useClass:Ee,deps:[C.K0]},{provide:Xe,useClass:Xe,deps:[tt,E.R0b]},{provide:C.JF,useClass:nt,deps:[]},[]];let Tr=(()=>{class ke{constructor(he){}static withServerTransition(he){return{ngModule:ke,providers:[{provide:E.AFp,useValue:he.appId},{provide:Pe,useExisting:E.AFp},re]}}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(xn,12))},ke.\u0275mod=E.oAB({type:ke}),ke.\u0275inj=E.cJS({providers:[...Wn,...Ir],imports:[C.ez,E.hGG]}),ke})(),we=(()=>{class ke{constructor(he){this._doc=he}getTitle(){return this._doc.title}setTitle(he){this._doc.title=he||""}}return ke.\u0275fac=function(he){return new(he||ke)(E.LFG(C.K0))},ke.\u0275prov=E.Yz7({token:ke,factory:function(he){let Le=null;return Le=he?new he:function dt(){return new we((0,E.LFG)(C.K0))}(),Le},providedIn:"root"}),ke})();typeof window<"u"&&window},4316:(Vt,We,U)=>{U.d(We,{F0:()=>vi,rH:()=>Xo,Bz:()=>Ls,lC:()=>ca});var C=U(4650),E=U(9751),z=U(576);function J(D,I){const w=(0,z.m)(D)?D:()=>D,P=F=>F.error(w());return new E.y(I?F=>I.schedule(P,0,F):P)}var be=U(727),Te=U(4482),Se=U(5403);function Re(){return(0,Te.e)((D,I)=>{let w=null;D._refCount++;const P=(0,Se.x)(I,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(w=null);const F=D._connection,K=w;w=null,F&&(!K||F===K)&&F.unsubscribe(),I.unsubscribe()});D.subscribe(P),P.closed||(w=D.connect())})}class Pe extends E.y{constructor(I,w){super(),this.source=I,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Te.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,I?.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new be.w0;const w=this.getSubject();I.add(this.source.subscribe((0,Se.x)(w,void 0,()=>{this._teardown(),w.complete()},P=>{this._teardown(),w.error(P)},()=>this._teardown()))),I.closed&&(this._connection=null,I=be.w0.EMPTY)}return I}refCount(){return Re()(this)}}var oe=U(8996),re=U(9646),me=U(1135),nt=U(9841),tt=U(7272),Xe=U(9770),at=U(9635),Fe=U(6805),Ee=U(515),st=U(7579),yt=U(6895),Ye=U(8421);function Ae(D){return(0,Te.e)((I,w)=>{let K,P=null,F=!1;P=I.subscribe((0,Se.x)(w,void 0,void 0,ue=>{K=(0,Ye.Xf)(D(ue,Ae(D)(I))),P?(P.unsubscribe(),P=null,K.subscribe(w)):F=!0})),F&&(P.unsubscribe(),P=null,K.subscribe(w))})}var He=U(9300);function Dt(D){return D<=0?()=>Ee.E:(0,Te.e)((I,w)=>{let P=[];I.subscribe((0,Se.x)(w,F=>{P.push(F),D<P.length&&P.shift()},()=>{for(const F of P)w.next(F);w.complete()},void 0,()=>{P=null}))})}var Ve=U(8068),Ke=U(6590),je=U(4671);function xe(D,I){const w=arguments.length>=2;return P=>P.pipe(D?(0,He.h)((F,K)=>D(F,K,P)):je.y,Dt(1),w?(0,Ke.d)(I):(0,Ve.T)(()=>new Fe.K))}var Ue=U(4004);function Tt(D){return(0,Te.e)((I,w)=>{try{I.subscribe(w)}finally{w.add(D)}})}var It=U(3900),en=U(5698),Dn=U(8675),ln=U(5577),Pt=U(590),An=U(4351),In=U(8505),Bn=U(5026),ut=U(8189),Lt=U(1481);const le="primary";class gt{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const w=this.params[I];return Array.isArray(w)?w[0]:w}return null}getAll(I){if(this.has(I)){const w=this.params[I];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Bt(D){return new gt(D)}function Gt(D,I,w){const P=w.path.split("/");if(P.length>D.length||"full"===w.pathMatch&&(I.hasChildren()||P.length<D.length))return null;const F={};for(let K=0;K<P.length;K++){const ue=P[K],Ce=D[K];if(ue.startsWith(":"))F[ue.substring(1)]=Ce;else if(ue!==Ce.path)return null}return{consumed:D.slice(0,P.length),posParams:F}}function Gn(D,I){const w=D?Object.keys(D):void 0,P=I?Object.keys(I):void 0;if(!w||!P||w.length!=P.length)return!1;let F;for(let K=0;K<w.length;K++)if(F=w[K],!ir(D[F],I[F]))return!1;return!0}function ir(D,I){if(Array.isArray(D)&&Array.isArray(I)){if(D.length!==I.length)return!1;const w=[...D].sort(),P=[...I].sort();return w.every((F,K)=>P[K]===F)}return D===I}function sr(D){return Array.prototype.concat.apply([],D)}function $n(D){return D.length>0?D[D.length-1]:null}function jt(D,I){for(const w in D)D.hasOwnProperty(w)&&I(D[w],w)}function xn(D){return(0,C.CqO)(D)?D:(0,C.QGY)(D)?(0,oe.D)(Promise.resolve(D)):(0,re.of)(D)}const Tr={exact:function dt(D,I,w){if(!jn(D.segments,I.segments)||!mt(D.segments,I.segments,w)||D.numberOfChildren!==I.numberOfChildren)return!1;for(const P in I.children)if(!D.children[P]||!dt(D.children[P],I.children[P],w))return!1;return!0},subset:de},fr={exact:function Kn(D,I){return Gn(D,I)},subset:function we(D,I){return Object.keys(I).length<=Object.keys(D).length&&Object.keys(I).every(w=>ir(D[w],I[w]))},ignored:()=>!0};function Mr(D,I,w){return Tr[w.paths](D.root,I.root,w.matrixParams)&&fr[w.queryParams](D.queryParams,I.queryParams)&&!("exact"===w.fragment&&D.fragment!==I.fragment)}function de(D,I,w){return qe(D,I,I.segments,w)}function qe(D,I,w,P){if(D.segments.length>w.length){const F=D.segments.slice(0,w.length);return!(!jn(F,w)||I.hasChildren()||!mt(F,w,P))}if(D.segments.length===w.length){if(!jn(D.segments,w)||!mt(D.segments,w,P))return!1;for(const F in I.children)if(!D.children[F]||!de(D.children[F],I.children[F],P))return!1;return!0}{const F=w.slice(0,D.segments.length),K=w.slice(D.segments.length);return!!(jn(D.segments,F)&&mt(D.segments,F,P)&&D.children[le])&&qe(D.children[le],I,K,P)}}function mt(D,I,w){return I.every((P,F)=>fr[w](D[F].parameters,P.parameters))}class Xt{constructor(I,w,P){this.root=I,this.queryParams=w,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bt(this.queryParams)),this._queryParamMap}toString(){return De.serialize(this)}}class kt{constructor(I,w){this.segments=I,this.children=w,this.parent=null,jt(w,(P,F)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pe(this)}}class Wt{constructor(I,w){this.path=I,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=Bt(this.parameters)),this._parameterMap}toString(){return Nn(this)}}function jn(D,I){return D.length===I.length&&D.every((w,P)=>w.path===I[P].path)}class _r{}class mn{parse(I){const w=new Kt(I);return new Xt(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(I){const w=`/${ne(I.root,!0)}`,P=function Ge(D){const I=Object.keys(D).map(w=>{const P=D[w];return Array.isArray(P)?P.map(F=>`${ae(w)}=${ae(F)}`).join("&"):`${ae(w)}=${ae(P)}`}).filter(w=>!!w);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${w}${P}${"string"==typeof I.fragment?`#${function Qe(D){return encodeURI(D)}(I.fragment)}`:""}`}}const De=new mn;function pe(D){return D.segments.map(I=>Nn(I)).join("/")}function ne(D,I){if(!D.hasChildren())return pe(D);if(I){const w=D.children[le]?ne(D.children[le],!1):"",P=[];return jt(D.children,(F,K)=>{K!==le&&P.push(`${K}:${ne(F,!1)}`)}),P.length>0?`${w}(${P.join("//")})`:w}{const w=function cn(D,I){let w=[];return jt(D.children,(P,F)=>{F===le&&(w=w.concat(I(P,F)))}),jt(D.children,(P,F)=>{F!==le&&(w=w.concat(I(P,F)))}),w}(D,(P,F)=>F===le?[ne(D.children[le],!1)]:[`${F}:${ne(P,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[le]?`${pe(D)}/${w[0]}`:`${pe(D)}/(${w.join("//")})`}}function te(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ae(D){return te(D).replace(/%3B/gi,";")}function Et(D){return te(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $t(D){return decodeURIComponent(D)}function Mn(D){return $t(D.replace(/\+/g,"%20"))}function Nn(D){return`${Et(D.path)}${function Ur(D){return Object.keys(D).map(I=>`;${Et(I)}=${Et(D[I])}`).join("")}(D.parameters)}`}const _e=/^[^\/()?;=#]+/;function ve(D){const I=D.match(_e);return I?I[0]:""}const ft=/^[^=?&#]+/,un=/^[^&#]+/;class Kt{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(I.length>0||Object.keys(w).length>0)&&(P[le]=new kt(I,w)),P}parseSegment(){const I=ve(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new C.vHH(4009,!1);return this.capture(I),new Wt($t(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const w=ve(this.remaining);if(!w)return;this.capture(w);let P="";if(this.consumeOptional("=")){const F=ve(this.remaining);F&&(P=F,this.capture(P))}I[$t(w)]=$t(P)}parseQueryParam(I){const w=function Nt(D){const I=D.match(ft);return I?I[0]:""}(this.remaining);if(!w)return;this.capture(w);let P="";if(this.consumeOptional("=")){const ue=function bt(D){const I=D.match(un);return I?I[0]:""}(this.remaining);ue&&(P=ue,this.capture(P))}const F=Mn(w),K=Mn(P);if(I.hasOwnProperty(F)){let ue=I[F];Array.isArray(ue)||(ue=[ue],I[F]=ue),ue.push(K)}else I[F]=K}parseParens(I){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=ve(this.remaining),F=this.remaining[P.length];if("/"!==F&&")"!==F&&";"!==F)throw new C.vHH(4010,!1);let K;P.indexOf(":")>-1?(K=P.slice(0,P.indexOf(":")),this.capture(K),this.capture(":")):I&&(K=le);const ue=this.parseChildren();w[K]=1===Object.keys(ue).length?ue[le]:new kt([],ue),this.consumeOptional("//")}return w}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new C.vHH(4011,!1)}}function ke(D){return D.segments.length>0?new kt([],{[le]:D}):D}function ye(D){const I={};for(const P of Object.keys(D.children)){const K=ye(D.children[P]);(K.segments.length>0||K.hasChildren())&&(I[P]=K)}return function he(D){if(1===D.numberOfChildren&&D.children[le]){const I=D.children[le];return new kt(D.segments.concat(I.segments),I.children)}return D}(new kt(D.segments,I))}function Le(D){return D instanceof Xt}function dn(D,I,w,P,F){if(0===w.length)return eo(I.root,I.root,I.root,P,F);const K=function qi(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Xr(!0,0,D);let I=0,w=!1;const P=D.reduce((F,K,ue)=>{if("object"==typeof K&&null!=K){if(K.outlets){const Ce={};return jt(K.outlets,(ht,zt)=>{Ce[zt]="string"==typeof ht?ht.split("/"):ht}),[...F,{outlets:Ce}]}if(K.segmentPath)return[...F,K.segmentPath]}return"string"!=typeof K?[...F,K]:0===ue?(K.split("/").forEach((Ce,ht)=>{0==ht&&"."===Ce||(0==ht&&""===Ce?w=!0:".."===Ce?I++:""!=Ce&&F.push(Ce))}),F):[...F,K]},[]);return new Xr(w,I,P)}(w);return K.toRoot()?eo(I.root,I.root,new kt([],{}),P,F):function ue(ht){const zt=function Hs(D,I,w,P){if(D.isAbsolute)return new Di(I.root,!0,0);if(-1===P)return new Di(w,w===I.root,0);return function pi(D,I,w){let P=D,F=I,K=w;for(;K>F;){if(K-=F,P=P.parent,!P)throw new C.vHH(4005,!1);F=P.segments.length}return new Di(P,!1,F-K)}(w,P+(lr(D.commands[0])?0:1),D.numberOfDoubleDots)}(K,I,D.snapshot?._urlSegment,ht),Vn=zt.processChildren?gi(zt.segmentGroup,zt.index,K.commands):oa(zt.segmentGroup,zt.index,K.commands);return eo(I.root,zt.segmentGroup,Vn,P,F)}(D.snapshot?._lastPathIndex)}function lr(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function fi(D){return"object"==typeof D&&null!=D&&D.outlets}function eo(D,I,w,P,F){let ue,K={};P&&jt(P,(ht,zt)=>{K[zt]=Array.isArray(ht)?ht.map(Vn=>`${Vn}`):`${ht}`}),ue=D===I?w:_s(D,I,w);const Ce=ke(ye(ue));return new Xt(Ce,K,F)}function _s(D,I,w){const P={};return jt(D.children,(F,K)=>{P[K]=F===I?w:_s(F,I,w)}),new kt(D.segments,P)}class Xr{constructor(I,w,P){if(this.isAbsolute=I,this.numberOfDoubleDots=w,this.commands=P,I&&P.length>0&&lr(P[0]))throw new C.vHH(4003,!1);const F=P.find(fi);if(F&&F!==$n(P))throw new C.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Di{constructor(I,w,P){this.segmentGroup=I,this.processChildren=w,this.index=P}}function oa(D,I,w){if(D||(D=new kt([],{})),0===D.segments.length&&D.hasChildren())return gi(D,I,w);const P=function $s(D,I,w){let P=0,F=I;const K={match:!1,pathIndex:0,commandIndex:0};for(;F<D.segments.length;){if(P>=w.length)return K;const ue=D.segments[F],Ce=w[P];if(fi(Ce))break;const ht=`${Ce}`,zt=P<w.length-1?w[P+1]:null;if(F>0&&void 0===ht)break;if(ht&&zt&&"object"==typeof zt&&void 0===zt.outlets){if(!ys(ht,zt,ue))return K;P+=2}else{if(!ys(ht,{},ue))return K;P++}F++}return{match:!0,pathIndex:F,commandIndex:P}}(D,I,w),F=w.slice(P.commandIndex);if(P.match&&P.pathIndex<D.segments.length){const K=new kt(D.segments.slice(0,P.pathIndex),{});return K.children[le]=new kt(D.segments.slice(P.pathIndex),D.children),gi(K,0,F)}return P.match&&0===F.length?new kt(D.segments,{}):P.match&&!D.hasChildren()?zs(D,I,w):P.match?gi(D,0,F):zs(D,I,w)}function gi(D,I,w){if(0===w.length)return new kt(D.segments,{});{const P=function yr(D){return fi(D[0])?D[0].outlets:{[le]:D}}(w),F={};return jt(P,(K,ue)=>{"string"==typeof K&&(K=[K]),null!==K&&(F[ue]=oa(D.children[ue],I,K))}),jt(D.children,(K,ue)=>{void 0===P[ue]&&(F[ue]=K)}),new kt(D.segments,F)}}function zs(D,I,w){const P=D.segments.slice(0,I);let F=0;for(;F<w.length;){const K=w[F];if(fi(K)){const ht=ls(K.outlets);return new kt(P,ht)}if(0===F&&lr(w[0])){P.push(new Wt(D.segments[I].path,to(w[0]))),F++;continue}const ue=fi(K)?K.outlets[le]:`${K}`,Ce=F<w.length-1?w[F+1]:null;ue&&Ce&&lr(Ce)?(P.push(new Wt(ue,to(Ce))),F+=2):(P.push(new Wt(ue,{})),F++)}return new kt(P,{})}function ls(D){const I={};return jt(D,(w,P)=>{"string"==typeof w&&(w=[w]),null!==w&&(I[P]=zs(new kt([],{}),0,w))}),I}function to(D){const I={};return jt(D,(w,P)=>I[P]=`${w}`),I}function ys(D,I,w){return D==w.path&&Gn(I,w.parameters)}class Sr{constructor(I,w){this.id=I,this.url=w}}class xa extends Sr{constructor(I,w,P="imperative",F=null){super(I,w),this.type=0,this.navigationTrigger=P,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ei extends Sr{constructor(I,w,P){super(I,w),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vr extends Sr{constructor(I,w,P,F){super(I,w),this.reason=P,this.code=F,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class aa extends Sr{constructor(I,w,P,F){super(I,w),this.error=P,this.target=F,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wo extends Sr{constructor(I,w,P,F){super(I,w),this.urlAfterRedirects=P,this.state=F,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class il extends Sr{constructor(I,w,P,F){super(I,w),this.urlAfterRedirects=P,this.state=F,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi extends Sr{constructor(I,w,P,F,K){super(I,w),this.urlAfterRedirects=P,this.state=F,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vo extends Sr{constructor(I,w,P,F){super(I,w),this.urlAfterRedirects=P,this.state=F,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sl extends Sr{constructor(I,w,P,F){super(I,w),this.urlAfterRedirects=P,this.state=F,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ll{constructor(I){this.route=I,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ol{constructor(I){this.route=I,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jo{constructor(I){this.snapshot=I,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class no{constructor(I){this.snapshot=I,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cs{constructor(I){this.snapshot=I,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jc{constructor(I){this.snapshot=I,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(I,w,P){this.routerEvent=I,this.position=w,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class al{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const w=this.pathFromRoot(I);return w.length>1?w[w.length-2]:null}children(I){const w=Fl(I,this._root);return w?w.children.map(P=>P.value):[]}firstChild(I){const w=Fl(I,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(I){const w=Zi(I,this._root);return w.length<2?[]:w[w.length-2].children.map(F=>F.value).filter(F=>F!==I)}pathFromRoot(I){return Zi(I,this._root).map(w=>w.value)}}function Fl(D,I){if(D===I.value)return I;for(const w of I.children){const P=Fl(D,w);if(P)return P}return null}function Zi(D,I){if(D===I.value)return[I];for(const w of I.children){const P=Zi(D,w);if(P.length)return P.unshift(I),P}return[]}class Ii{constructor(I,w){this.value=I,this.children=w}toString(){return`TreeNode(${this.value})`}}function Gs(D){const I={};return D&&D.children.forEach(w=>I[w.value.outlet]=w),I}class la extends al{constructor(I,w){super(I),this.snapshot=w,ni(this,I)}toString(){return this.snapshot.toString()}}function ll(D,I){const w=function ro(D,I){const ue=new Yi([],{},{},"",{},le,I,null,D.root,-1,{});return new cl("",new Ii(ue,[]))}(D,I),P=new me.X([new Wt("",{})]),F=new me.X({}),K=new me.X({}),ue=new me.X({}),Ce=new me.X(""),ht=new ti(P,F,ue,Ce,K,le,I,w.root);return ht.snapshot=w.root,new la(new Ii(ht,[]),w)}class ti{constructor(I,w,P,F,K,ue,Ce,ht){this.url=I,this.params=w,this.queryParams=P,this.fragment=F,this.data=K,this.outlet=ue,this.component=Ce,this._futureSnapshot=ht}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ue.U)(I=>Bt(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ue.U)(I=>Bt(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ho(D,I="emptyOnly"){const w=D.pathFromRoot;let P=0;if("always"!==I)for(P=w.length-1;P>=1;){const F=w[P],K=w[P-1];if(F.routeConfig&&""===F.routeConfig.path)P--;else{if(K.component)break;P--}}return function tu(D){return D.reduce((I,w)=>({params:{...I.params,...w.params},data:{...I.data,...w.data},resolve:{...w.data,...I.resolve,...w.routeConfig?.data,...w._resolvedData}}),{params:{},data:{},resolve:{}})}(w.slice(P))}class Yi{constructor(I,w,P,F,K,ue,Ce,ht,zt,Vn,Zt,ar){this.url=I,this.params=w,this.queryParams=P,this.fragment=F,this.data=K,this.outlet=ue,this.component=Ce,this.routeConfig=ht,this._urlSegment=zt,this._lastPathIndex=Vn,this._correctedLastPathIndex=ar??Vn,this._resolve=Zt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cl extends al{constructor(I,w){super(w),this.url=I,ni(this,w)}toString(){return $i(this._root)}}function ni(D,I){I.value._routerState=D,I.children.forEach(w=>ni(D,w))}function $i(D){const I=D.children.length>0?` { ${D.children.map($i).join(", ")} } `:"";return`${D.value}${I}`}function Ti(D){if(D.snapshot){const I=D.snapshot,w=D._futureSnapshot;D.snapshot=w,Gn(I.queryParams,w.queryParams)||D.queryParams.next(w.queryParams),I.fragment!==w.fragment&&D.fragment.next(w.fragment),Gn(I.params,w.params)||D.params.next(w.params),function Qt(D,I){if(D.length!==I.length)return!1;for(let w=0;w<D.length;++w)if(!Gn(D[w],I[w]))return!1;return!0}(I.url,w.url)||D.url.next(w.url),Gn(I.data,w.data)||D.data.next(w.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function Ws(D,I){const w=Gn(D.params,I.params)&&function gn(D,I){return jn(D,I)&&D.every((w,P)=>Gn(w.parameters,I[P].parameters))}(D.url,I.url);return w&&!(!D.parent!=!I.parent)&&(!D.parent||Ws(D.parent,I.parent))}function Ks(D,I,w){if(w&&D.shouldReuseRoute(I.value,w.value.snapshot)){const P=w.value;P._futureSnapshot=I.value;const F=function bo(D,I,w){return I.children.map(P=>{for(const F of w.children)if(D.shouldReuseRoute(P.value,F.value.snapshot))return Ks(D,P,F);return Ks(D,P)})}(D,I,w);return new Ii(P,F)}{if(D.shouldAttach(I.value)){const K=D.retrieve(I.value);if(null!==K){const ue=K.route;return ue.value._futureSnapshot=I.value,ue.children=I.children.map(Ce=>Ks(D,Ce)),ue}}const P=function Or(D){return new ti(new me.X(D.url),new me.X(D.params),new me.X(D.queryParams),new me.X(D.fragment),new me.X(D.data),D.outlet,D.component,D)}(I.value),F=I.children.map(K=>Ks(D,K));return new Ii(P,F)}}const xs="ngNavigationCancelingError";function ul(D,I){const{redirectTo:w,navigationBehaviorOptions:P}=Le(I)?{redirectTo:I,navigationBehaviorOptions:void 0}:I,F=us(!1,0,I);return F.url=w,F.navigationBehaviorOptions=P,F}function us(D,I,w){const P=new Error("NavigationCancelingError: "+(D||""));return P[xs]=!0,P.cancellationCode=I,w&&(P.url=w),P}function jr(D){return Co(D)&&Le(D.url)}function Co(D){return D&&D[xs]}class Do{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ui,this.attachRef=null}}class ui{constructor(){this.contexts=new Map}onChildOutletCreated(I,w){const P=this.getOrCreateContext(I);P.outlet=w,this.contexts.set(I,P)}onChildOutletDestroyed(I){const w=this.getContext(I);w&&(w.outlet=null,w.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let w=this.getContext(I);return w||(w=new Do,this.contexts.set(I,w)),w}getContext(I){return this.contexts.get(I)||null}}const Io=!1;let ca=(()=>{class D{constructor(w,P,F,K,ue){this.parentContexts=w,this.location=P,this.changeDetector=K,this.environmentInjector=ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.name=F||le,w.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const w=this.parentContexts.getContext(this.name);w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,Io);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,Io);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,Io);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,P){this.activated=w,this._activatedRoute=P,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,P){if(this.isActivated)throw new C.vHH(4013,Io);this._activatedRoute=w;const F=this.location,ue=w._futureSnapshot.component,Ce=this.parentContexts.getOrCreateContext(this.name).children,ht=new kr(w,Ce,F.injector);if(P&&function ua(D){return!!D.resolveComponentFactory}(P)){const zt=P.resolveComponentFactory(ue);this.activated=F.createComponent(zt,F.length,ht)}else this.activated=F.createComponent(ue,{index:F.length,injector:ht,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(w){return new(w||D)(C.Y36(ui),C.Y36(C.s_b),C.$8M("name"),C.Y36(C.sBO),C.Y36(C.lqb))},D.\u0275dir=C.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),D})();class kr{constructor(I,w,P){this.route=I,this.childContexts=w,this.parent=P}get(I,w){return I===ti?this.route:I===ui?this.childContexts:this.parent.get(I,w)}}let da=(()=>{class D{}return D.\u0275fac=function(w){return new(w||D)},D.\u0275cmp=C.Xpm({type:D,selectors:[["ng-component"]],decls:1,vars:0,template:function(w,P){1&w&&C._UZ(0,"router-outlet")},dependencies:[ca],encapsulation:2}),D})();function $o(D,I){return D.providers&&!D._injector&&(D._injector=(0,C.MMx)(D.providers,I,`Route: ${D.path}`)),D._injector??I}function Me(D){const I=D.children&&D.children.map(Me),w=I?{...D,children:I}:{...D};return!w.component&&!w.loadComponent&&(I||w.loadChildren)&&w.outlet&&w.outlet!==le&&(w.component=da),w}function rt(D){return D.outlet||le}function Mt(D,I){const w=D.filter(P=>rt(P)===I);return w.push(...D.filter(P=>rt(P)!==I)),w}function vt(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let I=D.parent;I;I=I.parent){const w=I.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class dr{constructor(I,w,P,F){this.routeReuseStrategy=I,this.futureState=w,this.currState=P,this.forwardEvent=F}activate(I){const w=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,P,I),Ti(this.futureState.root),this.activateChildRoutes(w,P,I)}deactivateChildRoutes(I,w,P){const F=Gs(w);I.children.forEach(K=>{const ue=K.value.outlet;this.deactivateRoutes(K,F[ue],P),delete F[ue]}),jt(F,(K,ue)=>{this.deactivateRouteAndItsChildren(K,P)})}deactivateRoutes(I,w,P){const F=I.value,K=w?w.value:null;if(F===K)if(F.component){const ue=P.getContext(F.outlet);ue&&this.deactivateChildRoutes(I,w,ue.children)}else this.deactivateChildRoutes(I,w,P);else K&&this.deactivateRouteAndItsChildren(w,P)}deactivateRouteAndItsChildren(I,w){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,w):this.deactivateRouteAndOutlet(I,w)}detachAndStoreRouteSubtree(I,w){const P=w.getContext(I.value.outlet),F=P&&I.value.component?P.children:w,K=Gs(I);for(const ue of Object.keys(K))this.deactivateRouteAndItsChildren(K[ue],F);if(P&&P.outlet){const ue=P.outlet.detach(),Ce=P.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:ue,route:I,contexts:Ce})}}deactivateRouteAndOutlet(I,w){const P=w.getContext(I.value.outlet),F=P&&I.value.component?P.children:w,K=Gs(I);for(const ue of Object.keys(K))this.deactivateRouteAndItsChildren(K[ue],F);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(I,w,P){const F=Gs(w);I.children.forEach(K=>{this.activateRoutes(K,F[K.value.outlet],P),this.forwardEvent(new Jc(K.value.snapshot))}),I.children.length&&this.forwardEvent(new no(I.value.snapshot))}activateRoutes(I,w,P){const F=I.value,K=w?w.value:null;if(Ti(F),F===K)if(F.component){const ue=P.getOrCreateContext(F.outlet);this.activateChildRoutes(I,w,ue.children)}else this.activateChildRoutes(I,w,P);else if(F.component){const ue=P.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const Ce=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),ue.children.onOutletReAttached(Ce.contexts),ue.attachRef=Ce.componentRef,ue.route=Ce.route.value,ue.outlet&&ue.outlet.attach(Ce.componentRef,Ce.route.value),Ti(Ce.route.value),this.activateChildRoutes(I,null,ue.children)}else{const Ce=vt(F.snapshot),ht=Ce?.get(C._Vd)??null;ue.attachRef=null,ue.route=F,ue.resolver=ht,ue.injector=Ce,ue.outlet&&ue.outlet.activateWith(F,ue.injector),this.activateChildRoutes(I,null,ue.children)}}else this.activateChildRoutes(I,null,P)}}class hr{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class Ln{constructor(I,w){this.component=I,this.route=w}}function mi(D,I,w){const P=D._root;return Qi(P,I?I._root:null,w,[P.value])}function Hr(D,I,w){return(vt(I)??w).get(D)}function Qi(D,I,w,P,F={canDeactivateChecks:[],canActivateChecks:[]}){const K=Gs(I);return D.children.forEach(ue=>{(function Ct(D,I,w,P,F={canDeactivateChecks:[],canActivateChecks:[]}){const K=D.value,ue=I?I.value:null,Ce=w?w.getContext(D.value.outlet):null;if(ue&&K.routeConfig===ue.routeConfig){const ht=function On(D,I,w){if("function"==typeof w)return w(D,I);switch(w){case"pathParamsChange":return!jn(D.url,I.url);case"pathParamsOrQueryParamsChange":return!jn(D.url,I.url)||!Gn(D.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ws(D,I)||!Gn(D.queryParams,I.queryParams);default:return!Ws(D,I)}}(ue,K,K.routeConfig.runGuardsAndResolvers);ht?F.canActivateChecks.push(new hr(P)):(K.data=ue.data,K._resolvedData=ue._resolvedData),Qi(D,I,K.component?Ce?Ce.children:null:w,P,F),ht&&Ce&&Ce.outlet&&Ce.outlet.isActivated&&F.canDeactivateChecks.push(new Ln(Ce.outlet.component,ue))}else ue&&zi(I,Ce,F),F.canActivateChecks.push(new hr(P)),Qi(D,null,K.component?Ce?Ce.children:null:w,P,F)})(ue,K[ue.value.outlet],w,P.concat([ue.value]),F),delete K[ue.value.outlet]}),jt(K,(ue,Ce)=>zi(ue,w.getContext(Ce),F)),F}function zi(D,I,w){const P=Gs(D),F=D.value;jt(P,(K,ue)=>{zi(K,F.component?I?I.children.getContext(ue):null:I,w)}),w.canDeactivateChecks.push(new Ln(F.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,F))}function ds(D){return"function"==typeof D}const io=Symbol("INITIAL_VALUE");function vs(){return(0,It.w)(D=>(0,nt.a)(D.map(I=>I.pipe((0,en.q)(1),(0,Dn.O)(io)))).pipe((0,Ue.U)(I=>{for(const w of I)if(!0!==w){if(w===io)return io;if(!1===w||w instanceof Xt)return w}return!0}),(0,He.h)(I=>I!==io),(0,en.q)(1)))}function fl(D){return(0,at.z)((0,In.b)(I=>{if(Le(I))throw ul(0,I)}),(0,Ue.U)(I=>!0===I))}const Ko={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ao(D,I,w,P,F){const K=Ul(D,I,w);return K.matched?function To(D,I,w,P){const F=I.canMatch;if(!F||0===F.length)return(0,re.of)(!0);const K=F.map(ue=>{const Ce=D.get(ue),ht=function Pa(D){return D&&ds(D.canMatch)}(Ce)?Ce.canMatch(I,w):Ce(I,w);return xn(ht)});return(0,re.of)(K).pipe(vs(),fl())}(P=$o(I,P),I,w).pipe((0,Ue.U)(ue=>!0===ue?K:{...Ko})):(0,re.of)(K)}function Ul(D,I,w){if(""===I.path)return"full"===I.pathMatch&&(D.hasChildren()||w.length>0)?{...Ko}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const F=(I.matcher||Gt)(w,D,I);if(!F)return{...Ko};const K={};jt(F.posParams,(Ce,ht)=>{K[ht]=Ce.path});const ue=F.consumed.length>0?{...K,...F.consumed[F.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:F.consumed,remainingSegments:w.slice(F.consumed.length),parameters:ue,positionalParamSegments:F.posParams??{}}}function ks(D,I,w,P,F="corrected"){if(w.length>0&&function ru(D,I,w){return w.some(P=>pl(D,I,P)&&rt(P)!==le)}(D,w,P)){const ue=new kt(I,function fa(D,I,w,P){const F={};F[le]=P,P._sourceSegment=D,P._segmentIndexShift=I.length;for(const K of w)if(""===K.path&&rt(K)!==le){const ue=new kt([],{});ue._sourceSegment=D,ue._segmentIndexShift=I.length,F[rt(K)]=ue}return F}(D,I,P,new kt(w,D.children)));return ue._sourceSegment=D,ue._segmentIndexShift=I.length,{segmentGroup:ue,slicedSegments:[]}}if(0===w.length&&function pa(D,I,w){return w.some(P=>pl(D,I,P))}(D,w,P)){const ue=new kt(D.segments,function lo(D,I,w,P,F,K){const ue={};for(const Ce of P)if(pl(D,w,Ce)&&!F[rt(Ce)]){const ht=new kt([],{});ht._sourceSegment=D,ht._segmentIndexShift="legacy"===K?D.segments.length:I.length,ue[rt(Ce)]=ht}return{...F,...ue}}(D,I,w,P,D.children,F));return ue._sourceSegment=D,ue._segmentIndexShift=I.length,{segmentGroup:ue,slicedSegments:w}}const K=new kt(D.segments,D.children);return K._sourceSegment=D,K._segmentIndexShift=I.length,{segmentGroup:K,slicedSegments:w}}function pl(D,I,w){return(!(D.hasChildren()||I.length>0)||"full"!==w.pathMatch)&&""===w.path}function Vl(D,I,w,P){return!!(rt(D)===P||P!==le&&pl(I,w,D))&&("**"===D.path||Ul(I,D,w).matched)}function Oa(D,I,w){return 0===I.length&&!D.children[w]}const qo=!1;class $r{constructor(I){this.segmentGroup=I||null}}class Wi{constructor(I){this.urlTree=I}}function Nr(D){return J(new $r(D))}function jl(D){return J(new Wi(D))}class $l{constructor(I,w,P,F,K){this.injector=I,this.configLoader=w,this.urlSerializer=P,this.urlTree=F,this.config=K,this.allowRedirects=!0}apply(){const I=ks(this.urlTree.root,[],[],this.config).segmentGroup,w=new kt(I.segments,I.children);return this.expandSegmentGroup(this.injector,this.config,w,le).pipe((0,Ue.U)(K=>this.createUrlTree(ye(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ae(K=>{if(K instanceof Wi)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof $r?this.noMatchError(K):K}))}match(I){return this.expandSegmentGroup(this.injector,this.config,I.root,le).pipe((0,Ue.U)(F=>this.createUrlTree(ye(F),I.queryParams,I.fragment))).pipe(Ae(F=>{throw F instanceof $r?this.noMatchError(F):F}))}noMatchError(I){return new C.vHH(4002,qo)}createUrlTree(I,w,P){const F=ke(I);return new Xt(F,w,P)}expandSegmentGroup(I,w,P,F){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(I,w,P).pipe((0,Ue.U)(K=>new kt([],K))):this.expandSegment(I,P,w,P.segments,F,!0)}expandChildren(I,w,P){const F=[];for(const K of Object.keys(P.children))"primary"===K?F.unshift(K):F.push(K);return(0,oe.D)(F).pipe((0,An.b)(K=>{const ue=P.children[K],Ce=Mt(w,K);return this.expandSegmentGroup(I,Ce,ue,K).pipe((0,Ue.U)(ht=>({segment:ht,outlet:K})))}),(0,Bn.R)((K,ue)=>(K[ue.outlet]=ue.segment,K),{}),xe())}expandSegment(I,w,P,F,K,ue){return(0,oe.D)(P).pipe((0,An.b)(Ce=>this.expandSegmentAgainstRoute(I,w,P,Ce,F,K,ue).pipe(Ae(zt=>{if(zt instanceof $r)return(0,re.of)(null);throw zt}))),(0,Pt.P)(Ce=>!!Ce),Ae((Ce,ht)=>{if(Ce instanceof Fe.K||"EmptyError"===Ce.name)return Oa(w,F,K)?(0,re.of)(new kt([],{})):Nr(w);throw Ce}))}expandSegmentAgainstRoute(I,w,P,F,K,ue,Ce){return Vl(F,w,K,ue)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(I,w,F,K,ue):Ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,w,P,F,K,ue):Nr(w):Nr(w)}expandSegmentAgainstRouteUsingRedirect(I,w,P,F,K,ue){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,P,F,ue):this.expandRegularSegmentAgainstRouteUsingRedirect(I,w,P,F,K,ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,w,P,F){const K=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?jl(K):this.lineralizeSegments(P,K).pipe((0,ln.z)(ue=>{const Ce=new kt(ue,{});return this.expandSegment(I,Ce,w,ue,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,w,P,F,K,ue){const{matched:Ce,consumedSegments:ht,remainingSegments:zt,positionalParamSegments:Vn}=Ul(w,F,K);if(!Ce)return Nr(w);const Zt=this.applyRedirectCommands(ht,F.redirectTo,Vn);return F.redirectTo.startsWith("/")?jl(Zt):this.lineralizeSegments(F,Zt).pipe((0,ln.z)(ar=>this.expandSegment(I,w,P,ar.concat(zt),ue,!1)))}matchSegmentAgainstRoute(I,w,P,F,K){return"**"===P.path?(I=$o(P,I),P.loadChildren?(P._loadedRoutes?(0,re.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(I,P)).pipe((0,Ue.U)(Ce=>(P._loadedRoutes=Ce.routes,P._loadedInjector=Ce.injector,new kt(F,{})))):(0,re.of)(new kt(F,{}))):ao(w,P,F,I).pipe((0,It.w)(({matched:ue,consumedSegments:Ce,remainingSegments:ht})=>ue?this.getChildConfig(I=P._injector??I,P,F).pipe((0,ln.z)(Vn=>{const Zt=Vn.injector??I,ar=Vn.routes,{segmentGroup:Lr,slicedSegments:es}=ks(w,Ce,ht,ar),Fs=new kt(Lr.segments,Lr.children);if(0===es.length&&Fs.hasChildren())return this.expandChildren(Zt,ar,Fs).pipe((0,Ue.U)(Cc=>new kt(Ce,Cc)));if(0===ar.length&&0===es.length)return(0,re.of)(new kt(Ce,{}));const ts=rt(P)===K;return this.expandSegment(Zt,Fs,ar,es,ts?le:K,!0).pipe((0,Ue.U)(Ro=>new kt(Ce.concat(Ro.segments),Ro.children)))})):Nr(w)))}getChildConfig(I,w,P){return w.children?(0,re.of)({routes:w.children,injector:I}):w.loadChildren?void 0!==w._loadedRoutes?(0,re.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function mc(D,I,w,P){const F=I.canLoad;if(void 0===F||0===F.length)return(0,re.of)(!0);const K=F.map(ue=>{const Ce=D.get(ue),ht=function Go(D){return D&&ds(D.canLoad)}(Ce)?Ce.canLoad(I,w):Ce(I,w);return xn(ht)});return(0,re.of)(K).pipe(vs(),fl())}(I,w,P).pipe((0,ln.z)(F=>F?this.configLoader.loadChildren(I,w).pipe((0,In.b)(K=>{w._loadedRoutes=K.routes,w._loadedInjector=K.injector})):function ka(D){return J(us(qo,3))}())):(0,re.of)({routes:[],injector:I})}lineralizeSegments(I,w){let P=[],F=w.root;for(;;){if(P=P.concat(F.segments),0===F.numberOfChildren)return(0,re.of)(P);if(F.numberOfChildren>1||!F.children[le])return J(new C.vHH(4e3,qo));F=F.children[le]}}applyRedirectCommands(I,w,P){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),I,P)}applyRedirectCreateUrlTree(I,w,P,F){const K=this.createSegmentGroup(I,w.root,P,F);return new Xt(K,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(I,w){const P={};return jt(I,(F,K)=>{if("string"==typeof F&&F.startsWith(":")){const Ce=F.substring(1);P[K]=w[Ce]}else P[K]=F}),P}createSegmentGroup(I,w,P,F){const K=this.createSegments(I,w.segments,P,F);let ue={};return jt(w.children,(Ce,ht)=>{ue[ht]=this.createSegmentGroup(I,Ce,P,F)}),new kt(K,ue)}createSegments(I,w,P,F){return w.map(K=>K.path.startsWith(":")?this.findPosParam(I,K,F):this.findOrReturn(K,P))}findPosParam(I,w,P){const F=P[w.path.substring(1)];if(!F)throw new C.vHH(4001,qo);return F}findOrReturn(I,w){let P=0;for(const F of w){if(F.path===I.path)return w.splice(P),F;P++}return I}}class Oi{}class yc{constructor(I,w,P,F,K,ue,Ce,ht){this.injector=I,this.rootComponentType=w,this.config=P,this.urlTree=F,this.url=K,this.paramsInheritanceStrategy=ue,this.relativeLinkResolution=Ce,this.urlSerializer=ht}recognize(){const I=ks(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,I,le).pipe((0,Ue.U)(w=>{if(null===w)return null;const P=new Yi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},le,this.rootComponentType,null,this.urlTree.root,-1,{}),F=new Ii(P,w),K=new cl(this.url,F);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(I){const w=I.value,P=Ho(w,this.paramsInheritanceStrategy);w.params=Object.freeze(P.params),w.data=Object.freeze(P.data),I.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(I,w,P,F){return 0===P.segments.length&&P.hasChildren()?this.processChildren(I,w,P):this.processSegment(I,w,P,P.segments,F)}processChildren(I,w,P){return(0,oe.D)(Object.keys(P.children)).pipe((0,An.b)(F=>{const K=P.children[F],ue=Mt(w,F);return this.processSegmentGroup(I,ue,K,F)}),(0,Bn.R)((F,K)=>F&&K?(F.push(...K),F):null),function Ne(D,I=!1){return(0,Te.e)((w,P)=>{let F=0;w.subscribe((0,Se.x)(P,K=>{const ue=D(K,F++);(ue||I)&&P.next(K),!ue&&P.complete()}))})}(F=>null!==F),(0,Ke.d)(null),xe(),(0,Ue.U)(F=>{if(null===F)return null;const K=uo(F);return function ga(D){D.sort((I,w)=>I.value.outlet===le?-1:w.value.outlet===le?1:I.value.outlet.localeCompare(w.value.outlet))}(K),K}))}processSegment(I,w,P,F,K){return(0,oe.D)(w).pipe((0,An.b)(ue=>this.processSegmentAgainstRoute(ue._injector??I,ue,P,F,K)),(0,Pt.P)(ue=>!!ue),Ae(ue=>{if(ue instanceof Fe.K)return Oa(P,F,K)?(0,re.of)([]):(0,re.of)(null);throw ue}))}processSegmentAgainstRoute(I,w,P,F,K){if(w.redirectTo||!Vl(w,P,F,K))return(0,re.of)(null);let ue;if("**"===w.path){const Ce=F.length>0?$n(F).parameters:{},ht=Kr(P)+F.length,zt=new Yi(F,Ce,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,So(w),rt(w),w.component??w._loadedComponent??null,w,Zo(P),ht,or(w),ht);ue=(0,re.of)({snapshot:zt,consumedSegments:[],remainingSegments:[]})}else ue=ao(P,w,F,I).pipe((0,Ue.U)(({matched:Ce,consumedSegments:ht,remainingSegments:zt,parameters:Vn})=>{if(!Ce)return null;const Zt=Kr(P)+ht.length;return{snapshot:new Yi(ht,Vn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,So(w),rt(w),w.component??w._loadedComponent??null,w,Zo(P),Zt,or(w),Zt),consumedSegments:ht,remainingSegments:zt}}));return ue.pipe((0,It.w)(Ce=>{if(null===Ce)return(0,re.of)(null);const{snapshot:ht,consumedSegments:zt,remainingSegments:Vn}=Ce;I=w._injector??I;const Zt=w._loadedInjector??I,ar=function di(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(w),{segmentGroup:Lr,slicedSegments:es}=ks(P,zt,Vn,ar.filter(ts=>void 0===ts.redirectTo),this.relativeLinkResolution);if(0===es.length&&Lr.hasChildren())return this.processChildren(Zt,ar,Lr).pipe((0,Ue.U)(ts=>null===ts?null:[new Ii(ht,ts)]));if(0===ar.length&&0===es.length)return(0,re.of)([new Ii(ht,[])]);const Fs=rt(w)===K;return this.processSegment(Zt,ar,Lr,es,Fs?le:K).pipe((0,Ue.U)(ts=>null===ts?null:[new Ii(ht,ts)]))}))}}function Ar(D){const I=D.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function uo(D){const I=[],w=new Set;for(const P of D){if(!Ar(P)){I.push(P);continue}const F=I.find(K=>P.value.routeConfig===K.value.routeConfig);void 0!==F?(F.children.push(...P.children),w.add(F)):I.push(P)}for(const P of w){const F=uo(P.children);I.push(new Ii(P.value,F))}return I.filter(P=>!w.has(P))}function Zo(D){let I=D;for(;I._sourceSegment;)I=I._sourceSegment;return I}function Kr(D){let I=D,w=I._segmentIndexShift??0;for(;I._sourceSegment;)I=I._sourceSegment,w+=I._segmentIndexShift??0;return w-1}function So(D){return D.data||{}}function or(D){return D.resolve||{}}const Ns=Symbol("RouteTitle");function _a(D){return"string"==typeof D.title||null===D.title}function ki(D){return(0,It.w)(I=>{const w=D(I);return w?(0,oe.D)(w).pipe((0,Ue.U)(()=>I)):(0,re.of)(I)})}let Fa=(()=>{class D{buildTitle(w){let P,F=w.root;for(;void 0!==F;)P=this.getResolvedTitleForRoute(F)??P,F=F.children.find(K=>K.outlet===le);return P}getResolvedTitleForRoute(w){return w.data[Ns]}}return D.\u0275fac=function(w){return new(w||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return(0,C.f3M)(Ba)},providedIn:"root"}),D})(),Ba=(()=>{class D extends Fa{constructor(w){super(),this.title=w}updateTitle(w){const P=this.buildTitle(w);void 0!==P&&this.title.setTitle(P)}}return D.\u0275fac=function(w){return new(w||D)(C.LFG(Lt.Dx))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class Wl{}class Ua extends class Kl{shouldDetach(I){return!1}store(I,w){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,w){return I.routeConfig===w.routeConfig}}{}const qr=new C.OlP("",{providedIn:"root",factory:()=>({})}),Qo=new C.OlP("ROUTES");let ct=(()=>{class D{constructor(w,P){this.injector=w,this.compiler=P,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,re.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const P=xn(w.loadComponent()).pipe((0,In.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=K}),Tt(()=>{this.componentLoaders.delete(w)})),F=new Pe(P,()=>new st.x).pipe(Re());return this.componentLoaders.set(w,F),F}loadChildren(w,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,re.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const K=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Ue.U)(Ce=>{this.onLoadEndListener&&this.onLoadEndListener(P);let ht,zt,Vn=!1;Array.isArray(Ce)?zt=Ce:(ht=Ce.create(w).injector,zt=sr(ht.get(Qo,[],C.XFs.Self|C.XFs.Optional)));return{routes:zt.map(Me),injector:ht}}),Tt(()=>{this.childrenLoaders.delete(P)})),ue=new Pe(K,()=>new st.x).pipe(Re());return this.childrenLoaders.set(P,ue),ue}loadModuleFactoryOrRoutes(w){return xn(w()).pipe((0,ln.z)(P=>P instanceof C.YKP||Array.isArray(P)?(0,re.of)(P):(0,oe.D)(this.compiler.compileModuleAsync(P))))}}return D.\u0275fac=function(w){return new(w||D)(C.LFG(C.zs3),C.LFG(C.Sil))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})();class Jr{}class hs{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,w){return I}}function Ni(D){throw D}function yl(D,I,w){return I.parse("/")}const Va={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ja={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ii(){const D=(0,C.f3M)(_r),I=(0,C.f3M)(ui),w=(0,C.f3M)(yt.Ye),P=(0,C.f3M)(C.zs3),F=(0,C.f3M)(C.Sil),K=(0,C.f3M)(Qo,{optional:!0})??[],ue=(0,C.f3M)(qr,{optional:!0})??{},Ce=(0,C.f3M)(Ba),ht=(0,C.f3M)(Fa,{optional:!0}),zt=(0,C.f3M)(Jr,{optional:!0}),Vn=(0,C.f3M)(Wl,{optional:!0}),Zt=new vi(null,D,I,w,P,F,sr(K));return zt&&(Zt.urlHandlingStrategy=zt),Vn&&(Zt.routeReuseStrategy=Vn),Zt.titleStrategy=ht??Ce,function zr(D,I){D.errorHandler&&(I.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(I.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(I.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(I.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(I.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(I.canceledNavigationResolution=D.canceledNavigationResolution)}(ue,Zt),Zt}let vi=(()=>{class D{constructor(w,P,F,K,ue,Ce,ht){this.rootComponentType=w,this.urlSerializer=P,this.rootContexts=F,this.location=K,this.config=ht,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new st.x,this.errorHandler=Ni,this.malformedUriErrorHandler=yl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,re.of)(void 0),this.urlHandlingStrategy=new hs,this.routeReuseStrategy=new Ua,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ue.get(ct),this.configLoader.onLoadEndListener=ar=>this.triggerEvent(new ol(ar)),this.configLoader.onLoadStartListener=ar=>this.triggerEvent(new Ll(ar)),this.ngModule=ue.get(C.h0i),this.console=ue.get(C.c2e);const Zt=ue.get(C.R0b);this.isNgZoneEnabled=Zt instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(ht),this.currentUrlTree=function Wn(){return new Xt(new kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ll(this.currentUrlTree,this.rootComponentType),this.transitions=new me.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(w){const P=this.events;return w.pipe((0,He.h)(F=>0!==F.id),(0,Ue.U)(F=>({...F,extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,It.w)(F=>{let K=!1,ue=!1;return(0,re.of)(F).pipe((0,In.b)(Ce=>{this.currentNavigation={id:Ce.id,initialUrl:Ce.rawUrl,extractedUrl:Ce.extractedUrl,trigger:Ce.source,extras:Ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,It.w)(Ce=>{const ht=this.browserUrlTree.toString(),zt=!this.navigated||Ce.extractedUrl.toString()!==ht||ht!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||zt)&&this.urlHandlingStrategy.shouldProcessUrl(Ce.rawUrl))return ya(Ce.source)&&(this.browserUrlTree=Ce.extractedUrl),(0,re.of)(Ce).pipe((0,It.w)(Zt=>{const ar=this.transitions.getValue();return P.next(new xa(Zt.id,this.serializeUrl(Zt.extractedUrl),Zt.source,Zt.restoredState)),ar!==this.transitions.getValue()?Ee.E:Promise.resolve(Zt)}),function yi(D,I,w,P){return(0,It.w)(F=>function Hl(D,I,w,P,F){return new $l(D,I,w,P,F).apply()}(D,I,w,F.extractedUrl,P).pipe((0,Ue.U)(K=>({...F,urlAfterRedirects:K}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,In.b)(Zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Zt.urlAfterRedirects},F.urlAfterRedirects=Zt.urlAfterRedirects}),function gl(D,I,w,P,F,K){return(0,ln.z)(ue=>function Zs(D,I,w,P,F,K,ue="emptyOnly",Ce="legacy"){return new yc(D,I,w,P,F,ue,Ce,K).recognize().pipe((0,It.w)(ht=>null===ht?function co(D){return new E.y(I=>I.error(D))}(new Oi):(0,re.of)(ht)))}(D,I,w,ue.urlAfterRedirects,P.serialize(ue.urlAfterRedirects),P,F,K).pipe((0,Ue.U)(Ce=>({...ue,targetSnapshot:Ce}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,In.b)(Zt=>{if(F.targetSnapshot=Zt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Zt.extras.skipLocationChange){const Lr=this.urlHandlingStrategy.merge(Zt.urlAfterRedirects,Zt.rawUrl);this.setBrowserUrl(Lr,Zt)}this.browserUrlTree=Zt.urlAfterRedirects}const ar=new wo(Zt.id,this.serializeUrl(Zt.extractedUrl),this.serializeUrl(Zt.urlAfterRedirects),Zt.targetSnapshot);P.next(ar)}));if(zt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ar,extractedUrl:Lr,source:es,restoredState:Fs,extras:ts}=Ce,Mo=new xa(ar,this.serializeUrl(Lr),es,Fs);P.next(Mo);const Ro=ll(Lr,this.rootComponentType).snapshot;return F={...Ce,targetSnapshot:Ro,urlAfterRedirects:Lr,extras:{...ts,skipLocationChange:!1,replaceUrl:!1}},(0,re.of)(F)}return this.rawUrlTree=Ce.rawUrl,Ce.resolve(null),Ee.E}),(0,In.b)(Ce=>{const ht=new il(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot);this.triggerEvent(ht)}),(0,Ue.U)(Ce=>F={...Ce,guards:mi(Ce.targetSnapshot,Ce.currentSnapshot,this.rootContexts)}),function _i(D,I){return(0,ln.z)(w=>{const{targetSnapshot:P,currentSnapshot:F,guards:{canActivateChecks:K,canDeactivateChecks:ue}}=w;return 0===ue.length&&0===K.length?(0,re.of)({...w,guardsResult:!0}):function so(D,I,w,P){return(0,oe.D)(D).pipe((0,ln.z)(F=>function gc(D,I,w,P,F){const K=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,re.of)(!0);const ue=K.map(Ce=>{const ht=Hr(Ce,I,F);return xn(function Wo(D){return D&&ds(D.canDeactivate)}(ht)?ht.canDeactivate(D,I,w,P):ht(D,I,w,P)).pipe((0,Pt.P)())});return(0,re.of)(ue).pipe(vs())}(F.component,F.route,w,I,P)),(0,Pt.P)(F=>!0!==F,!0))}(ue,P,F,D).pipe((0,ln.z)(Ce=>Ce&&function vr(D){return"boolean"==typeof D}(Ce)?function hl(D,I,w,P){return(0,oe.D)(I).pipe((0,An.b)(F=>(0,tt.z)(function oo(D,I){return null!==D&&I&&I(new jo(D)),(0,re.of)(!0)}(F.route.parent,P),function qs(D,I){return null!==D&&I&&I(new cs(D)),(0,re.of)(!0)}(F.route,P),function ha(D,I,w){const P=I[I.length-1],K=I.slice(0,I.length-1).reverse().map(ue=>function pr(D){const I=D.routeConfig?D.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:D,guards:I}:null}(ue)).filter(ue=>null!==ue).map(ue=>(0,Xe.P)(()=>{const Ce=ue.guards.map(ht=>{const zt=Hr(ht,ue.node,w);return xn(function Gi(D){return D&&ds(D.canActivateChild)}(zt)?zt.canActivateChild(P,D):zt(P,D)).pipe((0,Pt.P)())});return(0,re.of)(Ce).pipe(vs())}));return(0,re.of)(K).pipe(vs())}(D,F.path,w),function nu(D,I,w){const P=I.routeConfig?I.routeConfig.canActivate:null;if(!P||0===P.length)return(0,re.of)(!0);const F=P.map(K=>(0,Xe.P)(()=>{const ue=Hr(K,I,w);return xn(function ri(D){return D&&ds(D.canActivate)}(ue)?ue.canActivate(I,D):ue(I,D)).pipe((0,Pt.P)())}));return(0,re.of)(F).pipe(vs())}(D,F.route,w))),(0,Pt.P)(F=>!0!==F,!0))}(P,K,D,I):(0,re.of)(Ce)),(0,Ue.U)(Ce=>({...w,guardsResult:Ce})))})}(this.ngModule.injector,Ce=>this.triggerEvent(Ce)),(0,In.b)(Ce=>{if(F.guardsResult=Ce.guardsResult,Le(Ce.guardsResult))throw ul(0,Ce.guardsResult);const ht=new Pi(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot,!!Ce.guardsResult);this.triggerEvent(ht)}),(0,He.h)(Ce=>!!Ce.guardsResult||(this.restoreHistory(Ce),this.cancelNavigationTransition(Ce,"",3),!1)),ki(Ce=>{if(Ce.guards.canActivateChecks.length)return(0,re.of)(Ce).pipe((0,In.b)(ht=>{const zt=new Vo(ht.id,this.serializeUrl(ht.extractedUrl),this.serializeUrl(ht.urlAfterRedirects),ht.targetSnapshot);this.triggerEvent(zt)}),(0,It.w)(ht=>{let zt=!1;return(0,re.of)(ht).pipe(function La(D,I){return(0,ln.z)(w=>{const{targetSnapshot:P,guards:{canActivateChecks:F}}=w;if(!F.length)return(0,re.of)(w);let K=0;return(0,oe.D)(F).pipe((0,An.b)(ue=>function Gl(D,I,w,P){const F=D.routeConfig,K=D._resolve;return void 0!==F?.title&&!_a(F)&&(K[Ns]=F.title),function ml(D,I,w,P){const F=function ma(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===F.length)return(0,re.of)({});const K={};return(0,oe.D)(F).pipe((0,ln.z)(ue=>function _l(D,I,w,P){const F=Hr(D,I,P);return xn(F.resolve?F.resolve(I,w):F(I,w))}(D[ue],I,w,P).pipe((0,Pt.P)(),(0,In.b)(Ce=>{K[ue]=Ce}))),Dt(1),function ze(D){return(0,Ue.U)(()=>D)}(K),Ae(ue=>ue instanceof Fe.K?Ee.E:J(ue)))}(K,D,I,P).pipe((0,Ue.U)(ue=>(D._resolvedData=ue,D.data=Ho(D,w).resolve,F&&_a(F)&&(D.data[Ns]=F.title),null)))}(ue.route,P,D,I)),(0,In.b)(()=>K++),Dt(1),(0,ln.z)(ue=>K===F.length?(0,re.of)(w):Ee.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,In.b)({next:()=>zt=!0,complete:()=>{zt||(this.restoreHistory(ht),this.cancelNavigationTransition(ht,"",2))}}))}),(0,In.b)(ht=>{const zt=new sl(ht.id,this.serializeUrl(ht.extractedUrl),this.serializeUrl(ht.urlAfterRedirects),ht.targetSnapshot);this.triggerEvent(zt)}))}),ki(Ce=>{const ht=zt=>{const Vn=[];zt.routeConfig?.loadComponent&&!zt.routeConfig._loadedComponent&&Vn.push(this.configLoader.loadComponent(zt.routeConfig).pipe((0,In.b)(Zt=>{zt.component=Zt}),(0,Ue.U)(()=>{})));for(const Zt of zt.children)Vn.push(...ht(Zt));return Vn};return(0,nt.a)(ht(Ce.targetSnapshot.root)).pipe((0,Ke.d)(),(0,en.q)(1))}),ki(()=>this.afterPreactivation()),(0,Ue.U)(Ce=>{const ht=function Bl(D,I,w){const P=Ks(D,I._root,w?w._root:void 0);return new la(P,I)}(this.routeReuseStrategy,Ce.targetSnapshot,Ce.currentRouterState);return F={...Ce,targetRouterState:ht}}),(0,In.b)(Ce=>{this.currentUrlTree=Ce.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ce.urlAfterRedirects,Ce.rawUrl),this.routerState=Ce.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ce.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ce),this.browserUrlTree=Ce.urlAfterRedirects)}),((D,I,w)=>(0,Ue.U)(P=>(new dr(I,P.targetRouterState,P.currentRouterState,w).activate(D),P)))(this.rootContexts,this.routeReuseStrategy,Ce=>this.triggerEvent(Ce)),(0,In.b)({next(){K=!0},complete(){K=!0}}),Tt(()=>{K||ue||this.cancelNavigationTransition(F,"",1),this.currentNavigation?.id===F.id&&(this.currentNavigation=null)}),Ae(Ce=>{if(ue=!0,Co(Ce)){jr(Ce)||(this.navigated=!0,this.restoreHistory(F,!0));const ht=new Vr(F.id,this.serializeUrl(F.extractedUrl),Ce.message,Ce.cancellationCode);if(P.next(ht),jr(Ce)){const zt=this.urlHandlingStrategy.merge(Ce.url,this.rawUrlTree),Vn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ya(F.source)};this.scheduleNavigation(zt,"imperative",null,Vn,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{this.restoreHistory(F,!0);const ht=new aa(F.id,this.serializeUrl(F.extractedUrl),Ce,F.targetSnapshot??void 0);P.next(ht);try{F.resolve(this.errorHandler(Ce))}catch(zt){F.reject(zt)}}return Ee.E}))}))}resetRootComponentType(w){this.rootComponentType=w,this.routerState.root.component=this.rootComponentType}setTransition(w){this.transitions.next({...this.transitions.value,...w})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const P="popstate"===w.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{const F={replaceUrl:!0},K=w.state?.navigationId?w.state:null;if(K){const Ce={...K};delete Ce.navigationId,delete Ce.\u0275routerPageId,0!==Object.keys(Ce).length&&(F.state=Ce)}const ue=this.parseUrl(w.url);this.scheduleNavigation(ue,P,K,F)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(w){this.events.next(w)}resetConfig(w){this.config=w.map(Me),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,P={}){const{relativeTo:F,queryParams:K,fragment:ue,queryParamsHandling:Ce,preserveFragment:ht}=P,zt=F||this.routerState.root,Vn=ht?this.currentUrlTree.fragment:ue;let Zt=null;switch(Ce){case"merge":Zt={...this.currentUrlTree.queryParams,...K};break;case"preserve":Zt=this.currentUrlTree.queryParams;break;default:Zt=K||null}return null!==Zt&&(Zt=this.removeEmptyProps(Zt)),dn(zt,this.currentUrlTree,w,Zt,Vn??null)}navigateByUrl(w,P={skipLocationChange:!1}){const F=Le(w)?w:this.parseUrl(w),K=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(K,"imperative",null,P)}navigate(w,P={skipLocationChange:!1}){return function Xi(D){for(let I=0;I<D.length;I++){if(null==D[I])throw new C.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,P),P)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let P;try{P=this.urlSerializer.parse(w)}catch(F){P=this.malformedUriErrorHandler(F,this.urlSerializer,w)}return P}isActive(w,P){let F;if(F=!0===P?{...Va}:!1===P?{...ja}:P,Le(w))return Mr(this.currentUrlTree,w,F);const K=this.parseUrl(w);return Mr(this.currentUrlTree,K,F)}removeEmptyProps(w){return Object.keys(w).reduce((P,F)=>{const K=w[F];return null!=K&&(P[F]=K),P},{})}processNavigations(){this.navigations.subscribe(w=>{this.navigated=!0,this.lastSuccessfulId=w.id,this.currentPageId=w.targetPageId,this.events.next(new ei(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),w.resolve(!0)},w=>{this.console.warn(`Unhandled Navigation Error: ${w}`)})}scheduleNavigation(w,P,F,K,ue){if(this.disposed)return Promise.resolve(!1);let Ce,ht,zt;ue?(Ce=ue.resolve,ht=ue.reject,zt=ue.promise):zt=new Promise((ar,Lr)=>{Ce=ar,ht=Lr});const Vn=++this.navigationId;let Zt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(F=this.location.getState()),Zt=F&&F.\u0275routerPageId?F.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Zt=0,this.setTransition({id:Vn,targetPageId:Zt,source:P,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:w,extras:K,resolve:Ce,reject:ht,promise:zt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),zt.catch(ar=>Promise.reject(ar))}setBrowserUrl(w,P){const F=this.urlSerializer.serialize(w),K={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(F)||P.extras.replaceUrl?this.location.replaceState(F,"",K):this.location.go(F,"",K)}restoreHistory(w,P=!1){if("computed"===this.canceledNavigationResolution){const F=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===F?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===F&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(F)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(w,P,F){const K=new Vr(w.id,this.serializeUrl(w.extractedUrl),P,F);this.triggerEvent(K),w.resolve(!1)}generateNgRouterState(w,P){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:P}:{navigationId:w}}}return D.\u0275fac=function(w){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:function(){return ii()},providedIn:"root"}),D})();function ya(D){return"imperative"!==D}let Xo=(()=>{class D{constructor(w,P,F,K,ue){this.router=w,this.route=P,this.tabIndexAttribute=F,this.renderer=K,this.el=ue,this.commands=null,this.onChanges=new st.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){if(null!=this.tabIndexAttribute)return;const P=this.renderer,F=this.el.nativeElement;null!==w?P.setAttribute(F,"tabindex",w):P.removeAttribute(F,"tabindex")}ngOnChanges(w){this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const w={skipLocationChange:(0,C.D6c)(this.skipLocationChange),replaceUrl:(0,C.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,w),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,C.D6c)(this.preserveFragment)})}}return D.\u0275fac=function(w){return new(w||D)(C.Y36(vi),C.Y36(ti),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq))},D.\u0275dir=C.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(w,P){1&w&&C.NdJ("click",function(){return P.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[C.TTD]}),D})();class vc{}let Ei=(()=>{class D{constructor(w,P,F,K,ue){this.router=w,this.injector=F,this.preloadingStrategy=K,this.loader=ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,He.h)(w=>w instanceof ei),(0,An.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,P){const F=[];for(const K of P){K.providers&&!K._injector&&(K._injector=(0,C.MMx)(K.providers,w,`Route: ${K.path}`));const ue=K._injector??w,Ce=K._loadedInjector??ue;K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent?F.push(this.preloadConfig(ue,K)):(K.children||K._loadedRoutes)&&F.push(this.processRoutes(Ce,K.children??K._loadedRoutes))}return(0,oe.D)(F).pipe((0,ut.J)())}preloadConfig(w,P){return this.preloadingStrategy.preload(P,()=>{let F;F=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(w,P):(0,re.of)(null);const K=F.pipe((0,ln.z)(ue=>null===ue?(0,re.of)(void 0):(P._loadedRoutes=ue.routes,P._loadedInjector=ue.injector,this.processRoutes(ue.injector??w,ue.routes))));if(P.loadComponent&&!P._loadedComponent){const ue=this.loader.loadComponent(P);return(0,oe.D)([K,ue]).pipe((0,ut.J)())}return K})}}return D.\u0275fac=function(w){return new(w||D)(C.LFG(vi),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(vc),C.LFG(ct))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})();const Ea=new C.OlP("");let Jo=(()=>{class D{constructor(w,P,F={}){this.router=w,this.viewportScroller=P,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(w=>{w instanceof xa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof ei&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.router.parseUrl(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(w=>{w instanceof Rs&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,P){this.router.triggerEvent(new Rs(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(w){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})();const fo=new C.OlP("ROUTER_FORROOT_GUARD"),wa=new C.OlP(""),ba=[yt.Ye,{provide:_r,useClass:mn},{provide:vi,useFactory:ii},ui,{provide:ti,useFactory:function Ca(D){return D.routerState.root},deps:[vi]},ct];function Hu(){return new C.PXZ("Router",vi)}let Ls=(()=>{class D{constructor(w){}static forRoot(w,P){return{ngModule:D,providers:[ba,[],$u(w),{provide:fo,useFactory:El,deps:[[vi,new C.FiY,new C.tp0]]},{provide:qr,useValue:P||{}},P?.useHash?{provide:yt.S$,useClass:yt.Do}:{provide:yt.S$,useClass:yt.b0},{provide:Ea,useFactory:()=>{const D=(0,C.f3M)(vi),I=(0,C.f3M)(yt.EM),w=(0,C.f3M)(qr);return w.scrollOffset&&I.setOffset(w.scrollOffset),new Jo(D,I,w)}},P?.preloadingStrategy?bc(P.preloadingStrategy):[],{provide:C.PXZ,multi:!0,useFactory:Hu},P?.initialNavigation?ou(P):[],[{provide:zu,useFactory:Bd},{provide:C.tb,multi:!0,useExisting:zu}]]}}static forChild(w){return{ngModule:D,providers:[$u(w)]}}}return D.\u0275fac=function(w){return new(w||D)(C.LFG(fo,8))},D.\u0275mod=C.oAB({type:D}),D.\u0275inj=C.cJS({}),D})();function El(D){return"guarded"}function $u(D){return[{provide:Qo,multi:!0,useValue:D}]}function Bd(){const D=(0,C.f3M)(C.zs3);return I=>{const w=D.get(C.z2F);if(I!==w.components[0])return;const P=D.get(vi),F=D.get(wl);1===D.get(Zr)&&P.initialNavigation(),D.get(wa,null,C.XFs.Optional)?.setUpPreloading(),D.get(Ea,null,C.XFs.Optional)?.init(),P.resetRootComponentType(w.componentTypes[0]),F.next(),F.complete()}}const zu=new C.OlP("");function ou(D){return["disabled"===D.initialNavigation?[{provide:C.ip1,multi:!0,useFactory:()=>{const D=(0,C.f3M)(vi);return()=>{D.setUpLocationChangeListener()}}},{provide:Zr,useValue:2}]:[],"enabledBlocking"===D.initialNavigation?[{provide:Zr,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:D=>{const I=D.get(yt.V_,Promise.resolve(null));let w=!1;return()=>I.then(()=>new Promise(F=>{const K=D.get(vi),ue=D.get(wl);(function P(F){D.get(vi).events.pipe((0,He.h)(ue=>ue instanceof ei||ue instanceof Vr||ue instanceof aa),(0,Ue.U)(ue=>ue instanceof ei||ue instanceof Vr&&(0===ue.code||1===ue.code)&&null),(0,He.h)(ue=>null!==ue),(0,en.q)(1)).subscribe(()=>{F()})})(()=>{F(!0),w=!0}),K.afterPreactivation=()=>(F(!0),w||ue.closed?(0,re.of)(void 0):ue),K.initialNavigation()}))}}]:[]]}const wl=new C.OlP("",{factory:()=>new st.x}),Zr=new C.OlP("",{providedIn:"root",factory:()=>1});function bc(D){return[Ei,{provide:wa,useExisting:Ei},{provide:vc,useExisting:D}]}},3942:(Vt,We,U)=>{U.d(We,{Z:()=>Xe});var C=U(2090),E=U(4859),z=U(9681),J=U(1877);class be{constructor(Fe,Ee){this._delegate=Fe,this.firebase=Ee,(0,z._addComponent)(Fe,new E.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Fe,Ee=z._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(Fe);return!yt.isInitialized()&&"EXPLICIT"===(null===(st=yt.getComponent())||void 0===st?void 0:st.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:Ee})}_removeServiceInstance(Fe,Ee=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(Ee)}_addComponent(Fe){(0,z._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,z._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Pe(){const at=function Re(at){const Fe={},Ee={__esModule:!0,initializeApp:function Ye(Ve,Ke={}){const je=z.initializeApp(Ve,Ke);if((0,C.r3)(Fe,je.name))return Fe[je.name];const xe=new at(je,Ee);return Fe[je.name]=xe,xe},app:yt,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function He(Ve){const Ke=Ve.name,je=Ke.replace("-compat","");if(z._registerComponent(Ve)&&"PUBLIC"===Ve.type){const xe=(Ne=yt())=>{if("function"!=typeof Ne[je])throw Se.create("invalid-app-argument",{appName:Ke});return Ne[je]()};void 0!==Ve.serviceProps&&(0,C.ZB)(xe,Ve.serviceProps),Ee[je]=xe,at.prototype[je]=function(...Ne){return this._getService.bind(this,Ke).apply(this,Ve.multipleInstances?Ne:[])}}return"PUBLIC"===Ve.type?Ee[je]:null},removeApp:function st(Ve){delete Fe[Ve]},useAsService:function Dt(Ve,Ke){return"serverAuth"===Ke?null:Ke},modularAPIs:z}};function yt(Ve){if(!(0,C.r3)(Fe,Ve=Ve||z._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:Ve});return Fe[Ve]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function Ae(){return Object.keys(Fe).map(Ve=>Fe[Ve])}}),yt.App=at,Ee}(be);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Fe(Ee){(0,C.ZB)(at,Ee)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),at}(),re=new J.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=oe;!function tt(at){(0,z.registerVersion)("@firebase/app-compat","0.1.31",at)}()},9681:(Vt,We,U)=>{U.r(We),U.d(We,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>ir,_DEFAULT_ENTRY_NAME:()=>ln,_addComponent:()=>Bn,_addOrOverwriteComponent:()=>ut,_apps:()=>An,_clearComponents:()=>Bt,_components:()=>In,_getProvider:()=>le,_registerComponent:()=>Lt,_removeServiceInstance:()=>gt,deleteApp:()=>jt,getApp:()=>$n,getApps:()=>Br,initializeApp:()=>sr,onLog:()=>Wn,registerVersion:()=>Ir,setLogLevel:()=>Tr});var C=U(5861),E=U(4859),z=U(1877),J=U(2090),be=U(8766);class Te{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(ae=>{if(function Se(ne){return"VERSION"===ne.getComponent()?.type}(ae)){const Qe=ae.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(ae=>ae).join(" ")}}const Re="@firebase/app",oe=new z.Yd("@firebase/app"),ln="[DEFAULT]",Pt={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,In=new Map;function Bn(ne,te){try{ne.container.addComponent(te)}catch(ae){oe.debug(`Component ${te.name} failed to register with FirebaseApp ${ne.name}`,ae)}}function ut(ne,te){ne.container.addOrOverwriteComponent(te)}function Lt(ne){const te=ne.name;if(In.has(te))return oe.debug(`There were multiple attempts to register component ${te}.`),!1;In.set(te,ne);for(const ae of An.values())Bn(ae,ne);return!0}function le(ne,te){const ae=ne.container.getProvider("heartbeat").getImmediate({optional:!0});return ae&&ae.triggerHeartbeat(),ne.container.getProvider(te)}function gt(ne,te,ae=ln){le(ne,te).clearInstance(ae)}function Bt(){In.clear()}const Qt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gn{constructor(te,ae,Qe){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},ae),this._name=ae.name,this._automaticDataCollectionEnabled=ae.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new E.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const ir="9.9.2";function sr(ne,te={}){"object"!=typeof te&&(te={name:te});const ae=Object.assign({name:ln,automaticDataCollectionEnabled:!1},te),Qe=ae.name;if("string"!=typeof Qe||!Qe)throw Qt.create("bad-app-name",{appName:String(Qe)});const Et=An.get(Qe);if(Et){if((0,J.vZ)(ne,Et.options)&&(0,J.vZ)(ae,Et.config))return Et;throw Qt.create("duplicate-app",{appName:Qe})}const $t=new E.H0(Qe);for(const Nn of In.values())$t.addComponent(Nn);const Mn=new Gn(ne,ae,$t);return An.set(Qe,Mn),Mn}function $n(ne=ln){const te=An.get(ne);if(!te)throw Qt.create("no-app",{appName:ne});return te}function Br(){return Array.from(An.values())}function jt(ne){return xn.apply(this,arguments)}function xn(){return(xn=(0,C.Z)(function*(ne){const te=ne.name;An.has(te)&&(An.delete(te),yield Promise.all(ne.container.getProviders().map(ae=>ae.delete())),ne.isDeleted=!0)})).apply(this,arguments)}function Ir(ne,te,ae){var Qe;let Et=null!==(Qe=Pt[ne])&&void 0!==Qe?Qe:ne;ae&&(Et+=`-${ae}`);const $t=Et.match(/\s|\//),Mn=te.match(/\s|\//);if($t||Mn){const Nn=[`Unable to register library "${Et}" with version "${te}":`];return $t&&Nn.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),$t&&Mn&&Nn.push("and"),Mn&&Nn.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void oe.warn(Nn.join(" "))}Lt(new E.wA(`${Et}-version`,()=>({library:Et,version:te}),"VERSION"))}function Wn(ne,te){if(null!==ne&&"function"!=typeof ne)throw Qt.create("invalid-log-argument");(0,z.Am)(ne,te)}function Tr(ne){(0,z.Ub)(ne)}const Kn="firebase-heartbeat-store";let dt=null;function we(){return dt||(dt=(0,be.X3)("firebase-heartbeat-database",1,{upgrade:(ne,te)=>{0===te&&ne.createObjectStore(Kn)}}).catch(ne=>{throw Qt.create("idb-open",{originalErrorMessage:ne.message})})),dt}function qe(){return(qe=(0,C.Z)(function*(ne){var te;try{return(yield we()).transaction(Kn).objectStore(Kn).get(kt(ne))}catch(ae){if(ae instanceof J.ZR)oe.warn(ae.message);else{const Qe=Qt.create("idb-get",{originalErrorMessage:null===(te=ae)||void 0===te?void 0:te.message});oe.warn(Qe.message)}}})).apply(this,arguments)}function mt(ne,te){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(ne,te){var ae;try{const Et=(yield we()).transaction(Kn,"readwrite");return yield Et.objectStore(Kn).put(te,kt(ne)),Et.done}catch(Qe){if(Qe instanceof J.ZR)oe.warn(Qe.message);else{const Et=Qt.create("idb-set",{originalErrorMessage:null===(ae=Qe)||void 0===ae?void 0:ae.message});oe.warn(Et.message)}}})).apply(this,arguments)}function kt(ne){return`${ne.name}!${ne.options.appId}`}class jn{constructor(te){this.container=te,this._heartbeatsCache=null;const ae=this.container.getProvider("app").getImmediate();this._storage=new mn(ae),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var te=this;return(0,C.Z)(function*(){const Qe=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=cn();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Et&&!te._heartbeatsCache.heartbeats.some($t=>$t.date===Et))return te._heartbeatsCache.heartbeats.push({date:Et,agent:Qe}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter($t=>{const Mn=new Date($t.date).valueOf();return Date.now()-Mn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,C.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const ae=cn(),{heartbeatsToSend:Qe,unsentEntries:Et}=function _r(ne,te=1024){const ae=[];let Qe=ne.slice();for(const Et of ne){const $t=ae.find(Mn=>Mn.agent===Et.agent);if($t){if($t.dates.push(Et.date),De(ae)>te){$t.dates.pop();break}}else if(ae.push({agent:Et.agent,dates:[Et.date]}),De(ae)>te){ae.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:ae,unsentEntries:Qe}}(te._heartbeatsCache.heartbeats),$t=(0,J.L)(JSON.stringify({version:2,heartbeats:Qe}));return te._heartbeatsCache.lastSentHeartbeatDate=ae,Et.length>0?(te._heartbeatsCache.heartbeats=Et,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),$t})()}}function cn(){return(new Date).toISOString().substring(0,10)}class mn{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,C.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function de(ne){return qe.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var ae=this;return(0,C.Z)(function*(){var Qe;if(yield ae._canUseIndexedDBPromise){const $t=yield ae.read();return mt(ae.app,{lastSentHeartbeatDate:null!==(Qe=te.lastSentHeartbeatDate)&&void 0!==Qe?Qe:$t.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var ae=this;return(0,C.Z)(function*(){var Qe;if(yield ae._canUseIndexedDBPromise){const $t=yield ae.read();return mt(ae.app,{lastSentHeartbeatDate:null!==(Qe=te.lastSentHeartbeatDate)&&void 0!==Qe?Qe:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...te.heartbeats]})}})()}}function De(ne){return(0,J.L)(JSON.stringify({version:2,heartbeats:ne})).length}!function pe(ne){Lt(new E.wA("platform-logger",te=>new Te(te),"PRIVATE")),Lt(new E.wA("heartbeat",te=>new jn(te),"PRIVATE")),Ir(Re,"0.7.30",ne),Ir(Re,"0.7.30","esm2017"),Ir("fire-js","")}("")},4859:(Vt,We,U)=>{U.d(We,{H0:()=>Re,wA:()=>z,zt:()=>be});var C=U(5861),E=U(2090);class z{constructor(oe,re,me){this.name=oe,this.instanceFactory=re,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const J="[DEFAULT]";class be{constructor(oe,re){this.name=oe,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const re=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(re)){const me=new E.BH;if(this.instancesDeferred.set(re,me),this.isInitialized(re)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:re});nt&&me.resolve(nt)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(oe){var re;const me=this.normalizeInstanceIdentifier(oe?.identifier),nt=null!==(re=oe?.optional)&&void 0!==re&&re;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(tt){if(nt)return null;throw tt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function Se(Pe){return"EAGER"===Pe.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[re,me]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(re);try{const tt=this.getOrInitializeService({instanceIdentifier:nt});me.resolve(tt)}catch{}}}}clearInstance(oe=J){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.Z)(function*(){const re=Array.from(oe.instances.values());yield Promise.all([...re.filter(me=>"INTERNAL"in me).map(me=>me.INTERNAL.delete()),...re.filter(me=>"_delete"in me).map(me=>me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=J){return this.instances.has(oe)}getOptions(oe=J){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:re={}}=oe,me=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(me))throw Error(`${this.name}(${me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:me,options:re});for(const[tt,Xe]of this.instancesDeferred.entries())me===this.normalizeInstanceIdentifier(tt)&&Xe.resolve(nt);return nt}onInit(oe,re){var me;const nt=this.normalizeInstanceIdentifier(re),tt=null!==(me=this.onInitCallbacks.get(nt))&&void 0!==me?me:new Set;tt.add(oe),this.onInitCallbacks.set(nt,tt);const Xe=this.instances.get(nt);return Xe&&oe(Xe,nt),()=>{tt.delete(oe)}}invokeOnInitCallbacks(oe,re){const me=this.onInitCallbacks.get(re);if(me)for(const nt of me)try{nt(oe,re)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:re={}}){let me=this.instances.get(oe);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=oe,Pe===J?void 0:Pe),options:re}),this.instances.set(oe,me),this.instancesOptions.set(oe,re),this.invokeOnInitCallbacks(me,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,me)}catch{}var Pe;return me||null}normalizeInstanceIdentifier(oe=J){return this.component?this.component.multipleInstances?oe:J:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const re=this.getProvider(oe.name);if(re.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);re.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const re=new be(oe,this);return this.providers.set(oe,re),re}getProviders(){return Array.from(this.providers.values())}}},1877:(Vt,We,U)=>{U.d(We,{Am:()=>Pe,Ub:()=>Re,Yd:()=>Se,in:()=>E});const C=[];var E=(()=>{return(oe=E||(E={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",E;var oe})();const z={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},J=E.INFO,be={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},Te=(oe,re,...me)=>{if(re<oe.logLevel)return;const nt=(new Date).toISOString(),tt=be[re];if(!tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[tt](`[${nt}]  ${oe.name}:`,...me)};class Se{constructor(re){this.name=re,this._logLevel=J,this._logHandler=Te,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in E))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?z[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...re),this._logHandler(this,E.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...re),this._logHandler(this,E.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,E.INFO,...re),this._logHandler(this,E.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,E.WARN,...re),this._logHandler(this,E.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...re),this._logHandler(this,E.ERROR,...re)}}function Re(oe){C.forEach(re=>{re.setLogLevel(oe)})}function Pe(oe,re){for(const me of C){let nt=null;re&&re.level&&(nt=z[re.level]),me.userLogHandler=null===oe?null:(tt,Xe,...at)=>{const Fe=at.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch{return null}}).filter(Ee=>Ee).join(" ");Xe>=(nt??tt.logLevel)&&oe({level:E[Xe].toLowerCase(),message:Fe,args:at,type:tt.name})}}}},7126:(Vt,We,U)=>{U.d(We,{Zw:()=>yt,aw:()=>Bn,X$:()=>In,sK:()=>Pt});var C=U(4650),E=U(9751),z=U(576);function J(ut){return!!ut&&(ut instanceof E.y||(0,z.m)(ut.lift)&&(0,z.m)(ut.subscribe))}var be=U(4742),Te=U(8421),Se=U(3269),Re=U(5403),Pe=U(3268),oe=U(1810),me=U(9646),nt=U(7272),tt=U(9770),Xe=U(5698),at=U(3151),Fe=U(4004),Ee=U(4351),st=U(3900);class yt{}let Ye=(()=>{class ut extends yt{getTranslation(le){return(0,me.of)({})}}return ut.\u0275fac=function(){let Lt;return function(gt){return(Lt||(Lt=C.n5z(ut)))(gt||ut)}}(),ut.\u0275prov=C.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class Ae{}let He=(()=>{class ut{handle(le){return le.key}}return ut.\u0275fac=function(le){return new(le||ut)},ut.\u0275prov=C.Yz7({token:ut,factory:ut.\u0275fac}),ut})();function Dt(ut,Lt){if(ut===Lt)return!0;if(null===ut||null===Lt)return!1;if(ut!=ut&&Lt!=Lt)return!0;let Bt,Gt,Qt,le=typeof ut;if(le==typeof Lt&&"object"==le){if(!Array.isArray(ut)){if(Array.isArray(Lt))return!1;for(Gt in Qt=Object.create(null),ut){if(!Dt(ut[Gt],Lt[Gt]))return!1;Qt[Gt]=!0}for(Gt in Lt)if(!(Gt in Qt)&&typeof Lt[Gt]<"u")return!1;return!0}if(!Array.isArray(Lt))return!1;if((Bt=ut.length)==Lt.length){for(Gt=0;Gt<Bt;Gt++)if(!Dt(ut[Gt],Lt[Gt]))return!1;return!0}}return!1}function Ve(ut){return typeof ut<"u"&&null!==ut}function Ke(ut){return ut&&"object"==typeof ut&&!Array.isArray(ut)}function je(ut,Lt){let le=Object.assign({},ut);return Ke(ut)&&Ke(Lt)&&Object.keys(Lt).forEach(gt=>{Ke(Lt[gt])?gt in ut?le[gt]=je(ut[gt],Lt[gt]):Object.assign(le,{[gt]:Lt[gt]}):Object.assign(le,{[gt]:Lt[gt]})}),le}class xe{}let Ne=(()=>{class ut extends xe{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(le,gt){let Bt;return Bt="string"==typeof le?this.interpolateString(le,gt):"function"==typeof le?this.interpolateFunction(le,gt):le,Bt}getValue(le,gt){let Bt="string"==typeof gt?gt.split("."):[gt];gt="";do{gt+=Bt.shift(),!Ve(le)||!Ve(le[gt])||"object"!=typeof le[gt]&&Bt.length?Bt.length?gt+=".":le=void 0:(le=le[gt],gt="")}while(Bt.length);return le}interpolateFunction(le,gt){return le(gt)}interpolateString(le,gt){return gt?le.replace(this.templateMatcher,(Bt,Gt)=>{let Qt=this.getValue(gt,Gt);return Ve(Qt)?Qt:Bt}):le}}return ut.\u0275fac=function(){let Lt;return function(gt){return(Lt||(Lt=C.n5z(ut)))(gt||ut)}}(),ut.\u0275prov=C.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class Ue{}let ze=(()=>{class ut extends Ue{compile(le,gt){return le}compileTranslations(le,gt){return le}}return ut.\u0275fac=function(){let Lt;return function(gt){return(Lt||(Lt=C.n5z(ut)))(gt||ut)}}(),ut.\u0275prov=C.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class Tt{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new C.vpe,this.onLangChange=new C.vpe,this.onDefaultLangChange=new C.vpe}}const It=new C.OlP("USE_STORE"),en=new C.OlP("USE_DEFAULT_LANG"),Dn=new C.OlP("DEFAULT_LANGUAGE"),ln=new C.OlP("USE_EXTEND");let Pt=(()=>{class ut{constructor(le,gt,Bt,Gt,Qt,Gn=!0,ir=!1,sr=!1,$n){this.store=le,this.currentLoader=gt,this.compiler=Bt,this.parser=Gt,this.missingTranslationHandler=Qt,this.useDefaultLang=Gn,this.isolate=ir,this.extend=sr,this.pending=!1,this._onTranslationChange=new C.vpe,this._onLangChange=new C.vpe,this._onDefaultLangChange=new C.vpe,this._langs=[],this._translations={},this._translationRequests={},$n&&this.setDefaultLang($n)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(le){this.isolate?this._defaultLang=le:this.store.defaultLang=le}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(le){this.isolate?this._currentLang=le:this.store.currentLang=le}get langs(){return this.isolate?this._langs:this.store.langs}set langs(le){this.isolate?this._langs=le:this.store.langs=le}get translations(){return this.isolate?this._translations:this.store.translations}set translations(le){this.isolate?this._translations=le:this.store.translations=le}setDefaultLang(le){if(le===this.defaultLang)return;let gt=this.retrieveTranslations(le);typeof gt<"u"?(null==this.defaultLang&&(this.defaultLang=le),gt.pipe((0,Xe.q)(1)).subscribe(Bt=>{this.changeDefaultLang(le)})):this.changeDefaultLang(le)}getDefaultLang(){return this.defaultLang}use(le){if(le===this.currentLang)return(0,me.of)(this.translations[le]);let gt=this.retrieveTranslations(le);return typeof gt<"u"?(this.currentLang||(this.currentLang=le),gt.pipe((0,Xe.q)(1)).subscribe(Bt=>{this.changeLang(le)}),gt):(this.changeLang(le),(0,me.of)(this.translations[le]))}retrieveTranslations(le){let gt;return(typeof this.translations[le]>"u"||this.extend)&&(this._translationRequests[le]=this._translationRequests[le]||this.getTranslation(le),gt=this._translationRequests[le]),gt}getTranslation(le){this.pending=!0;const gt=this.currentLoader.getTranslation(le).pipe((0,at.d)(1),(0,Xe.q)(1));return this.loadingTranslations=gt.pipe((0,Fe.U)(Bt=>this.compiler.compileTranslations(Bt,le)),(0,at.d)(1),(0,Xe.q)(1)),this.loadingTranslations.subscribe({next:Bt=>{this.translations[le]=this.extend&&this.translations[le]?{...Bt,...this.translations[le]}:Bt,this.updateLangs(),this.pending=!1},error:Bt=>{this.pending=!1}}),gt}setTranslation(le,gt,Bt=!1){gt=this.compiler.compileTranslations(gt,le),this.translations[le]=(Bt||this.extend)&&this.translations[le]?je(this.translations[le],gt):gt,this.updateLangs(),this.onTranslationChange.emit({lang:le,translations:this.translations[le]})}getLangs(){return this.langs}addLangs(le){le.forEach(gt=>{-1===this.langs.indexOf(gt)&&this.langs.push(gt)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(le,gt,Bt){let Gt;if(gt instanceof Array){let Qt={},Gn=!1;for(let ir of gt)Qt[ir]=this.getParsedResult(le,ir,Bt),J(Qt[ir])&&(Gn=!0);return Gn?function re(...ut){const Lt=(0,Se.jO)(ut),{args:le,keys:gt}=(0,be.D)(ut),Bt=new E.y(Gt=>{const{length:Qt}=le;if(!Qt)return void Gt.complete();const Gn=new Array(Qt);let ir=Qt,sr=Qt;for(let $n=0;$n<Qt;$n++){let Br=!1;(0,Te.Xf)(le[$n]).subscribe((0,Re.x)(Gt,jt=>{Br||(Br=!0,sr--),Gn[$n]=jt},()=>ir--,void 0,()=>{(!ir||!Br)&&(sr||Gt.next(gt?(0,oe.n)(gt,Gn):Gn),Gt.complete())}))}});return Lt?Bt.pipe((0,Pe.Z)(Lt)):Bt}(gt.map(sr=>J(Qt[sr])?Qt[sr]:(0,me.of)(Qt[sr]))).pipe((0,Fe.U)(sr=>{let $n={};return sr.forEach((Br,jt)=>{$n[gt[jt]]=Br}),$n})):Qt}if(le&&(Gt=this.parser.interpolate(this.parser.getValue(le,gt),Bt)),typeof Gt>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(Gt=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],gt),Bt)),typeof Gt>"u"){let Qt={key:gt,translateService:this};typeof Bt<"u"&&(Qt.interpolateParams=Bt),Gt=this.missingTranslationHandler.handle(Qt)}return typeof Gt<"u"?Gt:gt}get(le,gt){if(!Ve(le)||!le.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,Ee.b)(Bt=>J(Bt=this.getParsedResult(Bt,le,gt))?Bt:(0,me.of)(Bt)));{let Bt=this.getParsedResult(this.translations[this.currentLang],le,gt);return J(Bt)?Bt:(0,me.of)(Bt)}}getStreamOnTranslationChange(le,gt){if(!Ve(le)||!le.length)throw new Error('Parameter "key" required');return(0,nt.z)((0,tt.P)(()=>this.get(le,gt)),this.onTranslationChange.pipe((0,st.w)(Bt=>{const Gt=this.getParsedResult(Bt.translations,le,gt);return"function"==typeof Gt.subscribe?Gt:(0,me.of)(Gt)})))}stream(le,gt){if(!Ve(le)||!le.length)throw new Error('Parameter "key" required');return(0,nt.z)((0,tt.P)(()=>this.get(le,gt)),this.onLangChange.pipe((0,st.w)(Bt=>{const Gt=this.getParsedResult(Bt.translations,le,gt);return J(Gt)?Gt:(0,me.of)(Gt)})))}instant(le,gt){if(!Ve(le)||!le.length)throw new Error('Parameter "key" required');let Bt=this.getParsedResult(this.translations[this.currentLang],le,gt);if(J(Bt)){if(le instanceof Array){let Gt={};return le.forEach((Qt,Gn)=>{Gt[le[Gn]]=le[Gn]}),Gt}return le}return Bt}set(le,gt,Bt=this.currentLang){this.translations[Bt][le]=this.compiler.compile(gt,Bt),this.updateLangs(),this.onTranslationChange.emit({lang:Bt,translations:this.translations[Bt]})}changeLang(le){this.currentLang=le,this.onLangChange.emit({lang:le,translations:this.translations[le]}),null==this.defaultLang&&this.changeDefaultLang(le)}changeDefaultLang(le){this.defaultLang=le,this.onDefaultLangChange.emit({lang:le,translations:this.translations[le]})}reloadLang(le){return this.resetLang(le),this.getTranslation(le)}resetLang(le){this._translationRequests[le]=void 0,this.translations[le]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let le=window.navigator.languages?window.navigator.languages[0]:null;return le=le||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof le>"u"?void 0:(-1!==le.indexOf("-")&&(le=le.split("-")[0]),-1!==le.indexOf("_")&&(le=le.split("_")[0]),le)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let le=window.navigator.languages?window.navigator.languages[0]:null;return le=le||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,le}}return ut.\u0275fac=function(le){return new(le||ut)(C.LFG(Tt),C.LFG(yt),C.LFG(Ue),C.LFG(xe),C.LFG(Ae),C.LFG(en),C.LFG(It),C.LFG(ln),C.LFG(Dn))},ut.\u0275prov=C.Yz7({token:ut,factory:ut.\u0275fac}),ut})(),In=(()=>{class ut{constructor(le,gt){this.translate=le,this._ref=gt,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(le,gt,Bt){let Gt=Qt=>{this.value=void 0!==Qt?Qt:le,this.lastKey=le,this._ref.markForCheck()};if(Bt){let Qt=this.translate.getParsedResult(Bt,le,gt);J(Qt.subscribe)?Qt.subscribe(Gt):Gt(Qt)}this.translate.get(le,gt).subscribe(Gt)}transform(le,...gt){if(!le||!le.length)return le;if(Dt(le,this.lastKey)&&Dt(gt,this.lastParams))return this.value;let Bt;if(Ve(gt[0])&&gt.length)if("string"==typeof gt[0]&&gt[0].length){let Gt=gt[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Bt=JSON.parse(Gt)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${gt[0]}`)}}else"object"==typeof gt[0]&&!Array.isArray(gt[0])&&(Bt=gt[0]);return this.lastKey=le,this.lastParams=gt,this.updateValue(le,Bt),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(Gt=>{this.lastKey&&Gt.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(le,Bt,Gt.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(Gt=>{this.lastKey&&(this.lastKey=null,this.updateValue(le,Bt,Gt.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(le,Bt))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return ut.\u0275fac=function(le){return new(le||ut)(C.Y36(Pt,16),C.Y36(C.sBO,16))},ut.\u0275pipe=C.Yjl({name:"translate",type:ut,pure:!1}),ut.\u0275prov=C.Yz7({token:ut,factory:ut.\u0275fac}),ut})(),Bn=(()=>{class ut{static forRoot(le={}){return{ngModule:ut,providers:[le.loader||{provide:yt,useClass:Ye},le.compiler||{provide:Ue,useClass:ze},le.parser||{provide:xe,useClass:Ne},le.missingTranslationHandler||{provide:Ae,useClass:He},Tt,{provide:It,useValue:le.isolate},{provide:en,useValue:le.useDefaultLang},{provide:ln,useValue:le.extend},{provide:Dn,useValue:le.defaultLanguage},Pt]}}static forChild(le={}){return{ngModule:ut,providers:[le.loader||{provide:yt,useClass:Ye},le.compiler||{provide:Ue,useClass:ze},le.parser||{provide:xe,useClass:Ne},le.missingTranslationHandler||{provide:Ae,useClass:He},{provide:It,useValue:le.isolate},{provide:en,useValue:le.useDefaultLang},{provide:ln,useValue:le.extend},{provide:Dn,useValue:le.defaultLanguage},Pt]}}}return ut.\u0275fac=function(le){return new(le||ut)},ut.\u0275mod=C.oAB({type:ut}),ut.\u0275inj=C.cJS({}),ut})()},3847:(Vt,We,U)=>{U.r(We),U.d(We,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>ir,_DEFAULT_ENTRY_NAME:()=>ln,_addComponent:()=>Bn,_addOrOverwriteComponent:()=>ut,_apps:()=>An,_clearComponents:()=>Bt,_components:()=>In,_getProvider:()=>le,_registerComponent:()=>Lt,_removeServiceInstance:()=>gt,deleteApp:()=>jt,getApp:()=>$n,getApps:()=>Br,initializeApp:()=>sr,onLog:()=>Wn,registerVersion:()=>Ir,setLogLevel:()=>Tr});var C=U(5861),E=U(4859),z=U(1877),J=U(2090),be=U(8766);class Te{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(ae=>{if(function Se(ne){return"VERSION"===ne.getComponent()?.type}(ae)){const Qe=ae.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(ae=>ae).join(" ")}}const Re="@firebase/app",oe=new z.Yd("@firebase/app"),ln="[DEFAULT]",Pt={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,In=new Map;function Bn(ne,te){try{ne.container.addComponent(te)}catch(ae){oe.debug(`Component ${te.name} failed to register with FirebaseApp ${ne.name}`,ae)}}function ut(ne,te){ne.container.addOrOverwriteComponent(te)}function Lt(ne){const te=ne.name;if(In.has(te))return oe.debug(`There were multiple attempts to register component ${te}.`),!1;In.set(te,ne);for(const ae of An.values())Bn(ae,ne);return!0}function le(ne,te){const ae=ne.container.getProvider("heartbeat").getImmediate({optional:!0});return ae&&ae.triggerHeartbeat(),ne.container.getProvider(te)}function gt(ne,te,ae=ln){le(ne,te).clearInstance(ae)}function Bt(){In.clear()}const Qt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Gn{constructor(te,ae,Qe){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},ae),this._name=ae.name,this._automaticDataCollectionEnabled=ae.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new E.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const ir="9.9.1";function sr(ne,te={}){"object"!=typeof te&&(te={name:te});const ae=Object.assign({name:ln,automaticDataCollectionEnabled:!1},te),Qe=ae.name;if("string"!=typeof Qe||!Qe)throw Qt.create("bad-app-name",{appName:String(Qe)});const Et=An.get(Qe);if(Et){if((0,J.vZ)(ne,Et.options)&&(0,J.vZ)(ae,Et.config))return Et;throw Qt.create("duplicate-app",{appName:Qe})}const $t=new E.H0(Qe);for(const Nn of In.values())$t.addComponent(Nn);const Mn=new Gn(ne,ae,$t);return An.set(Qe,Mn),Mn}function $n(ne=ln){const te=An.get(ne);if(!te)throw Qt.create("no-app",{appName:ne});return te}function Br(){return Array.from(An.values())}function jt(ne){return xn.apply(this,arguments)}function xn(){return(xn=(0,C.Z)(function*(ne){const te=ne.name;An.has(te)&&(An.delete(te),yield Promise.all(ne.container.getProviders().map(ae=>ae.delete())),ne.isDeleted=!0)})).apply(this,arguments)}function Ir(ne,te,ae){var Qe;let Et=null!==(Qe=Pt[ne])&&void 0!==Qe?Qe:ne;ae&&(Et+=`-${ae}`);const $t=Et.match(/\s|\//),Mn=te.match(/\s|\//);if($t||Mn){const Nn=[`Unable to register library "${Et}" with version "${te}":`];return $t&&Nn.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),$t&&Mn&&Nn.push("and"),Mn&&Nn.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void oe.warn(Nn.join(" "))}Lt(new E.wA(`${Et}-version`,()=>({library:Et,version:te}),"VERSION"))}function Wn(ne,te){if(null!==ne&&"function"!=typeof ne)throw Qt.create("invalid-log-argument");(0,z.Am)(ne,te)}function Tr(ne){(0,z.Ub)(ne)}const Kn="firebase-heartbeat-store";let dt=null;function we(){return dt||(dt=(0,be.X3)("firebase-heartbeat-database",1,{upgrade:(ne,te)=>{0===te&&ne.createObjectStore(Kn)}}).catch(ne=>{throw Qt.create("storage-open",{originalErrorMessage:ne.message})})),dt}function qe(){return(qe=(0,C.Z)(function*(ne){var te;try{return(yield we()).transaction(Kn).objectStore(Kn).get(kt(ne))}catch(ae){throw Qt.create("storage-get",{originalErrorMessage:null===(te=ae)||void 0===te?void 0:te.message})}})).apply(this,arguments)}function mt(ne,te){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(ne,te){var ae;try{const Et=(yield we()).transaction(Kn,"readwrite");return yield Et.objectStore(Kn).put(te,kt(ne)),Et.done}catch(Qe){throw Qt.create("storage-set",{originalErrorMessage:null===(ae=Qe)||void 0===ae?void 0:ae.message})}})).apply(this,arguments)}function kt(ne){return`${ne.name}!${ne.options.appId}`}class jn{constructor(te){this.container=te,this._heartbeatsCache=null;const ae=this.container.getProvider("app").getImmediate();this._storage=new mn(ae),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var te=this;return(0,C.Z)(function*(){const Qe=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=cn();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Et&&!te._heartbeatsCache.heartbeats.some($t=>$t.date===Et))return te._heartbeatsCache.heartbeats.push({date:Et,agent:Qe}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter($t=>{const Mn=new Date($t.date).valueOf();return Date.now()-Mn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,C.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const ae=cn(),{heartbeatsToSend:Qe,unsentEntries:Et}=function _r(ne,te=1024){const ae=[];let Qe=ne.slice();for(const Et of ne){const $t=ae.find(Mn=>Mn.agent===Et.agent);if($t){if($t.dates.push(Et.date),De(ae)>te){$t.dates.pop();break}}else if(ae.push({agent:Et.agent,dates:[Et.date]}),De(ae)>te){ae.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:ae,unsentEntries:Qe}}(te._heartbeatsCache.heartbeats),$t=(0,J.L)(JSON.stringify({version:2,heartbeats:Qe}));return te._heartbeatsCache.lastSentHeartbeatDate=ae,Et.length>0?(te._heartbeatsCache.heartbeats=Et,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),$t})()}}function cn(){return(new Date).toISOString().substring(0,10)}class mn{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,C.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function de(ne){return qe.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var ae=this;return(0,C.Z)(function*(){var Qe;if(yield ae._canUseIndexedDBPromise){const $t=yield ae.read();return mt(ae.app,{lastSentHeartbeatDate:null!==(Qe=te.lastSentHeartbeatDate)&&void 0!==Qe?Qe:$t.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var ae=this;return(0,C.Z)(function*(){var Qe;if(yield ae._canUseIndexedDBPromise){const $t=yield ae.read();return mt(ae.app,{lastSentHeartbeatDate:null!==(Qe=te.lastSentHeartbeatDate)&&void 0!==Qe?Qe:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...te.heartbeats]})}})()}}function De(ne){return(0,J.L)(JSON.stringify({version:2,heartbeats:ne})).length}!function pe(ne){Lt(new E.wA("platform-logger",te=>new Te(te),"PRIVATE")),Lt(new E.wA("heartbeat",te=>new jn(te),"PRIVATE")),Ir(Re,"0.7.29",ne),Ir(Re,"0.7.29","esm2017"),Ir("fire-js","")}("")},8766:(Vt,We,U)=>{U.d(We,{Lj:()=>Ye,X3:()=>yt});var C=U(5861);let z,J;const Se=new WeakMap,Re=new WeakMap,Pe=new WeakMap,oe=new WeakMap,re=new WeakMap;let tt={get(Ke,je,xe){if(Ke instanceof IDBTransaction){if("done"===je)return Re.get(Ke);if("objectStoreNames"===je)return Ke.objectStoreNames||Pe.get(Ke);if("store"===je)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return Ee(Ke[je])},set:(Ke,je,xe)=>(Ke[je]=xe,!0),has:(Ke,je)=>Ke instanceof IDBTransaction&&("done"===je||"store"===je)||je in Ke};function Fe(Ke){return"function"==typeof Ke?function at(Ke){return Ke!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ke)?function(...je){return Ke.apply(st(this),je),Ee(Se.get(this))}:function(...je){return Ee(Ke.apply(st(this),je))}:function(je,...xe){const Ne=Ke.call(st(this),je,...xe);return Pe.set(Ne,je.sort?je.sort():[je]),Ee(Ne)}}(Ke):(Ke instanceof IDBTransaction&&function nt(Ke){if(Re.has(Ke))return;const je=new Promise((xe,Ne)=>{const Ue=()=>{Ke.removeEventListener("complete",ze),Ke.removeEventListener("error",Tt),Ke.removeEventListener("abort",Tt)},ze=()=>{xe(),Ue()},Tt=()=>{Ne(Ke.error||new DOMException("AbortError","AbortError")),Ue()};Ke.addEventListener("complete",ze),Ke.addEventListener("error",Tt),Ke.addEventListener("abort",Tt)});Re.set(Ke,je)}(Ke),((Ke,je)=>je.some(xe=>Ke instanceof xe))(Ke,function be(){return z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ke,tt):Ke)}function Ee(Ke){if(Ke instanceof IDBRequest)return function me(Ke){const je=new Promise((xe,Ne)=>{const Ue=()=>{Ke.removeEventListener("success",ze),Ke.removeEventListener("error",Tt)},ze=()=>{xe(Ee(Ke.result)),Ue()},Tt=()=>{Ne(Ke.error),Ue()};Ke.addEventListener("success",ze),Ke.addEventListener("error",Tt)});return je.then(xe=>{xe instanceof IDBCursor&&Se.set(xe,Ke)}).catch(()=>{}),re.set(je,Ke),je}(Ke);if(oe.has(Ke))return oe.get(Ke);const je=Fe(Ke);return je!==Ke&&(oe.set(Ke,je),re.set(je,Ke)),je}const st=Ke=>re.get(Ke);function yt(Ke,je,{blocked:xe,upgrade:Ne,blocking:Ue,terminated:ze}={}){const Tt=indexedDB.open(Ke,je),It=Ee(Tt);return Ne&&Tt.addEventListener("upgradeneeded",en=>{Ne(Ee(Tt.result),en.oldVersion,en.newVersion,Ee(Tt.transaction))}),xe&&Tt.addEventListener("blocked",()=>xe()),It.then(en=>{ze&&en.addEventListener("close",()=>ze()),Ue&&en.addEventListener("versionchange",()=>Ue())}).catch(()=>{}),It}function Ye(Ke,{blocked:je}={}){const xe=indexedDB.deleteDatabase(Ke);return je&&xe.addEventListener("blocked",()=>je()),Ee(xe).then(()=>{})}const Ae=["get","getKey","getAll","getAllKeys","count"],He=["put","add","delete","clear"],Dt=new Map;function Ve(Ke,je){if(!(Ke instanceof IDBDatabase)||je in Ke||"string"!=typeof je)return;if(Dt.get(je))return Dt.get(je);const xe=je.replace(/FromIndex$/,""),Ne=je!==xe,Ue=He.includes(xe);if(!(xe in(Ne?IDBIndex:IDBObjectStore).prototype)||!Ue&&!Ae.includes(xe))return;const ze=function(){var Tt=(0,C.Z)(function*(It,...en){const Dn=this.transaction(It,Ue?"readwrite":"readonly");let ln=Dn.store;return Ne&&(ln=ln.index(en.shift())),(yield Promise.all([ln[xe](...en),Ue&&Dn.done]))[0]});return function(en){return Tt.apply(this,arguments)}}();return Dt.set(je,ze),ze}!function Xe(Ke){tt=Ke(tt)}(Ke=>({...Ke,get:(je,xe,Ne)=>Ve(je,xe)||Ke.get(je,xe,Ne),has:(je,xe)=>!!Ve(je,xe)||Ke.has(je,xe)}))},5861:(Vt,We,U)=>{function C(z,J,be,Te,Se,Re,Pe){try{var oe=z[Re](Pe),re=oe.value}catch(me){return void be(me)}oe.done?J(re):Promise.resolve(re).then(Te,Se)}function E(z){return function(){var J=this,be=arguments;return new Promise(function(Te,Se){var Re=z.apply(J,be);function Pe(re){C(Re,Te,Se,Pe,oe,"next",re)}function oe(re){C(Re,Te,Se,Pe,oe,"throw",re)}Pe(void 0)})}}U.d(We,{Z:()=>E})}},Vt=>{Vt(Vt.s=2287)}]);